const a0_0x9bcd52=a0_0xc43f;(function(_0x2d28b5,_0x54cb8b){const _0x2266ca=a0_0xc43f,_0x322f59=_0x2d28b5();while(!![]){try{const _0x56d5cf=parseInt(_0x2266ca(0x20d))/0x1*(-parseInt(_0x2266ca(0x204))/0x2)+parseInt(_0x2266ca(0x22f))/0x3*(parseInt(_0x2266ca(0x194))/0x4)+-parseInt(_0x2266ca(0x225))/0x5+parseInt(_0x2266ca(0x1c7))/0x6*(parseInt(_0x2266ca(0x200))/0x7)+-parseInt(_0x2266ca(0x190))/0x8+-parseInt(_0x2266ca(0x1c9))/0x9+parseInt(_0x2266ca(0x215))/0xa*(parseInt(_0x2266ca(0x197))/0xb);if(_0x56d5cf===_0x54cb8b)break;else _0x322f59['push'](_0x322f59['shift']());}catch(_0x3bbcfe){_0x322f59['push'](_0x322f59['shift']());}}}(a0_0x54cc,0xe98de));import'dotenv/config';import a0_0x551414 from'os';import a0_0x59c63f from'fs';import a0_0x2d03c8 from'path';import{fileURLToPath}from'url';import a0_0x4e42f3 from'./modules/Genlogin.js';import a0_0x599d3e from'./modules/http.js';function a0_0x54cc(){const _0x3a3f69=['package.json','[processTasks]:\x20FirstRun','entries','[eTimeout]main:\x20turn\x20on\x20timeout\x20flag','split','nextrunstamp','Lỗi:\x20','[createWorkerPromise]:\x20Worker\x20không\x20hợp\x20lệ\x20hoặc\x20đã\x20bị\x20giải\x20phóng:','taskMode','TA\x20ĐI\x20ĐÂY','race','độ\x20phân\x20giải\x20màn\x20hình\x20vật\x20lý\x20Width\x20x\x20Height\x20','genProfiles','getTeleId','\x20with\x20data:\x20','[processTask]:\x20DONE\x20TASK\x20','readFile','chưa\x20có\x20task\x20mới','số\x20màn\x20hình:\x20','\x20treo\x20đang\x20chạy\x20từ\x20','tele','terminate','compareExchange','chờ\x2030\x20giây\x20rồi\x20thử\x20lại','nextRun','catch','BYE\x20BYE','[handleWorkerMessage]:\x20Đã\x20xử\x20lý\x20task\x20','[processTasks]:\x20task.status:\x20','Số\x20trình\x20duyệt\x20trên\x20mỗi\x20hàng:\x20','20718IZWBnR','api','5834151exMYcB','[createWorkerPromise]:\x20Timeout\x20khi\x20xử\x20lý\x20task\x20','parse','[updateTask]:\x20Lỗi\x20cập\x20nhật\x20task','nowTime','OK\x20rồi\x20man.\x20tắt\x20genlogin\x20đi\x20bro','Bộ\x20nhớ\x20vượt\x20quá\x20Heap\x20Used:\x20','Không\x20có\x20task\x20hoặc\x20chưa\x20tới\x20thời\x20gian\x20chạy','length','toFixed','.genlogin','Task\x20phải\x20là\x20một\x20đối\x20tượng','[processTasks]:\x20task.nextrunstamp:\x20','Users','message','getAllProfiles.value\x20OK','[createWorkerPromise]:\x20main\x20kết\x20thúc\x20worker','Tổng\x20độ\x20phân\x20giải\x20màn\x20hình:\x20','Lỗi\x20App\x20genlogin\x20nhé\x20bro!','0x0','pending','[checkUpdate]\x20Lỗi\x20parse\x20JSON:\x20','Lỗi\x20chung:\x20','[processTask]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20task:\x20','[createWorkerPromise]:\x20','[processTasks]:\x20screens:','[createWorkerPromise]:\x20main\x20','[processTasks]:\x20Phát\x20Hiện\x20','now','[processTasks]:\x20Chưa\x20có\x20task\x20mới\x20nào\x20để\x20xử\x20lý','value','main','log','add','timeout','worker1','tele_id','size','[handleWorkerMessage]0:\x20Lỗi\x20xử\x20lý\x20task\x20','map','kích\x20thước\x20trinhd\x20duyệt\x20Width\x20x\x20Height\x20','\x20Timeout\x20ID:\x20','input','round','Memory','[eTimeout]main:\x20reset\x20timeout','[createWorkerPromise]:\x20Lỗi\x20không\x20xác\x20định:\x20','checkbox','status','promises','SERVER_HOST','[checkUpdate]Lỗi\x20khi\x20đọc\x20file\x20package.json:\x20','[updateTask]:\x20update\x20task\x20','height','Tỷ\x20lệ\x20thu\x20nhỏ:\x20','1631eeWtPr','[processTasks]:','reduce','Stderr:\x20','2GaMKGn','browserWidthHeight','object','Số\x20lượng\x20task\x20chạy\x20song\x20song','username','has','error','[checkUpdate]Bạn\x20đang\x20chạy\x20phiên\x20bản\x20mới\x20nhất','scale','1174769VCSGZV','taskIndex','[handleWorkerMessage]1:Lỗi\x20xử\x20lý\x20task\x20','function','version','Tự\x20động\x20tắt\x20genlogin','Thêm\x20APIKEY\x20vào\x20file\x20.env\x20nhen\x20Bro','[processTasks]:\x20currentTime.timestamp:\x20','929710qNdeCL','\x20set\x20timeout:\x20','\x20MB','substring','./workerBrowser.js','\x20MB,\x20RSS:\x20','\x20task\x20trong\x20hàng\x20đợi','[processTasks]:\x20Đã\x20xóa\x20trạng\x20thái\x20đang\x20chạy\x20task\x20','name','store','cwd','screens','join','genDataProfiles','ceil','Chờ\x2060\x20giây','5389290bLrwXC','APIKEY\x20not\x20found!','screenWidthHeight','success','Không\x20thể\x20tạo\x20worker','rss','heapUsed','400x900','set','Start\x20App:\x20','3WWppZB','closeGenlogin:\x20','userInfo','tự\x20động\x20sắp\x20xếp\x20vị\x20trí\x20hiển\x20thị\x20trình\x20duyệt\x20','Số\x20lượng\x20màn\x20hình\x20vật\x20lý\x20để\x20hiển\x20thị','profileThreads','taskkill\x20/IM\x20genLogin.exe\x20/F','APIKEY','screenData','completed','tọa\x20độ\x20hiển\x20thị\x20trình\x20duyệt\x20','Đã\x20có\x20phiên\x20bản\x20mới:\x20','Thời\x20gian\x20timeout\x20không\x20hợp\x20lệ','getListProfiles','tắt\x20genlogin\x20ok','string','[createWorkerPromise]:\x20createWorkerPromise\x20task:\x20','updateTask','5242080enePEV','Processing\x20profile:\x20','running','env','4791992dXZTEE','maxTime','Heap\x20Used:\x20','297hmsKWF','Lỗi\x20while:\x20','rows','Running\x20Task:','getAllProfiles','./worker-api1.js','width','Kiểm\x20tra\x20task\x20sau\x2060\x20giây','Hoặc\x20Đăng\x20nhập\x20lại\x20App\x20genlogin\x20nhé\x20bro','floor','timestamp','No\x20task\x20found','games','push','Lỗi\x20không\x20xác\x20định','[processTask]:\x20Xử\x20lý\x20task:\x20','nextrun','[checkUpdate]Version:\x20'];a0_0x54cc=function(){return _0x3a3f69;};return a0_0x54cc();}import{log,json}from'./modules/logger.js';import a0_0x31cffb from'node-machine-id';import{spawn,Thread,Worker}from'threads';import{exec}from'child_process';import a0_0x400b28 from'p-queue';let tasksDataBuffer,tasksData,screenData,screenDataBuffer;const __filename=fileURLToPath(import.meta['url']),__dirname=a0_0x2d03c8['dirname'](__filename),{machine_id,machineIdSync}=a0_0x31cffb,machineId=machineIdSync()[a0_0x9bcd52(0x218)](0x0,0x8),appName='LongCAutoAirdrop'+'-'+machineId,nameFile=a0_0x9bcd52(0x1b5)+'-'+machineId,genDataFile=a0_0x9bcd52(0x222)+'-'+machineId,appSetings={'maxTaskThreads':{'type':a0_0x9bcd52(0x1f3),'value':0x3,'note':a0_0x9bcd52(0x207)},'screens':{'type':a0_0x9bcd52(0x1f3),'value':0x1,'note':a0_0x9bcd52(0x233)},'screenWidthHeight':{'type':a0_0x9bcd52(0x1f3),'value':'1920x1080','note':a0_0x9bcd52(0x1b4)},'browserWidthHeight':{'type':a0_0x9bcd52(0x1f3),'value':a0_0x9bcd52(0x22c),'note':a0_0x9bcd52(0x1f1)},'autoSetBrowserPosition':{'type':a0_0x9bcd52(0x1f8),'value':'y','note':a0_0x9bcd52(0x232)},'customBrowserPosition':{'type':'input','value':a0_0x9bcd52(0x1dc),'note':a0_0x9bcd52(0x239)},'genDataFolder':{'type':a0_0x9bcd52(0x1f3),'value':a0_0x2d03c8[a0_0x9bcd52(0x221)]('C:',a0_0x9bcd52(0x1d6),a0_0x551414[a0_0x9bcd52(0x231)]()[a0_0x9bcd52(0x208)],a0_0x9bcd52(0x1d3)),'note':'thư\x20mục\x20chứa\x20data\x20genlogin'}};let genlogin,http,profileNameId,profileId,browser,getAllProfiles,GenDataProfile,screenArrWorker,timgame=!![],taskQueue,maxTask=0x1,taskStatus,firstRun=!![],appStatus=0x0,tele_id,version,prevTime;async function main(){const _0x20f928=a0_0x9bcd52;try{log(_0x20f928(0x1e8),'Start\x20App:\x20'+appName,null,'w','='),await delay(0x3e8);if(!process[_0x20f928(0x193)]['APIKEY']){log(_0x20f928(0x1e8),_0x20f928(0x226),null,![]),log(_0x20f928(0x1e8),'Lên\x20Web\x20lấy\x20APIKEY\x20nhen\x20Bro',null,'w'),log(_0x20f928(0x1e8),_0x20f928(0x213),null,'w'),log(_0x20f928(0x1e8),_0x20f928(0x1c3),null,'w'),log(_0x20f928(0x1e8),_0x20f928(0x1b2),null,'w','=');return;}genlogin=new a0_0x4e42f3('',!![]),http=new a0_0x599d3e(process[_0x20f928(0x193)][_0x20f928(0x1fb)],process[_0x20f928(0x193)][_0x20f928(0x236)],!![]),tele_id=await http[_0x20f928(0x1b6)](_0x20f928(0x1e8)),version=await checkUpdate(),prevTime=Date['now']();tele_id['tele_id']&&await http['tele'](_0x20f928(0x1e8),tele_id[_0x20f928(0x1ed)],_0x20f928(0x22e)+appName+'\x20nè\x20bro!');let _0x58ada6,_0x5461cd=0x1,_0x2e0ade=0x1,_0x5905d8=0x0,_0x4106ad;while(!![]){try{appStatus=0x1;if(_0x5461cd){if(!_0x5905d8){_0x2e0ade&&(_0x4106ad=await genlogin[_0x20f928(0x18b)](_0x20f928(0x1e8)));if(!_0x4106ad||!_0x2e0ade){const _0x48a856=await http[_0x20f928(0x222)](_0x20f928(0x1e8),genDataFile);!_0x48a856[_0x20f928(0x1e7)]?(log('main','Mở\x20App\x20genlogin\x20trước\x20nhé\x20bro,kiểm\x20tra\x20coi\x20mở\x20chưa\x20bro',null,'w'),log(_0x20f928(0x1e8),_0x20f928(0x19f),null,'w'),log('main',''+_0x48a856[_0x20f928(0x20a)],null,![]),log(_0x20f928(0x1e8),_0x20f928(0x1c0),null,'i'),tele_id&&tele_id[_0x20f928(0x1ed)]&&await http['tele']('main',tele_id['tele_id'],_0x20f928(0x1db))):GenDataProfile=_0x48a856['value'];}else{GenDataProfile=await _0x4106ad['profiles'],await http[_0x20f928(0x222)](_0x20f928(0x1e8),genDataFile,GenDataProfile),_0x2e0ade=0x0;continue;}}if(await genlogin[_0x20f928(0x18b)](_0x20f928(0x1e8))){log('main',_0x20f928(0x1ce),null,'w'),_0x5905d8=0x1,await closeGenlogin(),await delay(0xbb8);continue;}_0x5461cd=0x0;}await delay(0x3e8),getAllProfiles=await http[_0x20f928(0x19b)](_0x20f928(0x1e8),appName,nameFile,GenDataProfile,appSetings);if(!getAllProfiles[_0x20f928(0x1e7)]||!getAllProfiles||getAllProfiles[_0x20f928(0x1e7)][_0x20f928(0x1d1)]<=0x0){log('main',_0x20f928(0x1d0),null,![]),log('main',_0x20f928(0x1c0),null,'i');throw new Error(_0x20f928(0x1a2));}log(_0x20f928(0x1e8),_0x20f928(0x1d8));const _0x1aa882=Object['entries'](getAllProfiles[_0x20f928(0x1e7)]);maxTask=parseInt(getAllProfiles['maxTask']);const _0x2b8eed=await processTasks(_0x1aa882);if(taskQueue[_0x20f928(0x1dd)]>0x0){const _0x505edf=await getRunningTasks(taskStatus,_0x20f928(0x192));log(_0x20f928(0x1e8),taskQueue[_0x20f928(0x1ee)]+_0x20f928(0x21b),null,'w'),log(_0x20f928(0x1e8),taskQueue[_0x20f928(0x1dd)]+'\x20task\x20đang\x20chạy',null,'w'),log(_0x20f928(0x1e8),_0x20f928(0x19a)+_0x505edf,null,'w');}else!_0x2b8eed&&log(_0x20f928(0x1e8),_0x20f928(0x1ba),null,'w');log(_0x20f928(0x1e8),'[main]\x20Task\x20Status:\x20'+Array['from'](taskStatus['entries']()),null,'c'),log(_0x20f928(0x1e8),_0x20f928(0x19e),null,'i'),Date[_0x20f928(0x1e5)]()-prevTime>=0x5265c00&&(prevTime=Date[_0x20f928(0x1e5)](),checkUpdate()),logMemoryUsage(),await delay(0x7530);}catch(_0x55677d){log(_0x20f928(0x1e8),_0x20f928(0x198)+_0x55677d,null,![]),log(_0x20f928(0x1e8),_0x20f928(0x224),null,'i'),tele_id&&tele_id[_0x20f928(0x1ed)]&&await http[_0x20f928(0x1bd)](_0x20f928(0x1e8),tele_id[_0x20f928(0x1ed)],appName+'\x20Lỗi\x20'+_0x55677d+'\x20rồi\x20bro!'),await delay(0x7530);}}}catch(_0x59ea46){log(_0x20f928(0x1e8),_0x20f928(0x1df)+_0x59ea46,null,![]),appStatus=0x0;}}main()[a0_0x9bcd52(0x1c2)](console['error']);function a0_0xc43f(_0xbad09d,_0x31da86){const _0x54ccd6=a0_0x54cc();return a0_0xc43f=function(_0xc43f81,_0x4c57eb){_0xc43f81=_0xc43f81-0x18a;let _0x3a9e40=_0x54ccd6[_0xc43f81];return _0x3a9e40;},a0_0xc43f(_0xbad09d,_0x31da86);}async function processTasks(_0x2ef35d){const _0x55b21e=a0_0x9bcd52;try{if(firstRun){log(_0x55b21e(0x1e8),_0x55b21e(0x1aa),null,'c','*'),taskQueue=new a0_0x400b28({'concurrency':maxTask}),tasksDataBuffer=new SharedArrayBuffer(_0x2ef35d['length']*0x4),tasksData=new Int32Array(tasksDataBuffer);for(var _0x45b002=0x0;_0x45b002<tasksData['length'];_0x45b002++){Atomics[_0x55b21e(0x21e)](tasksData,_0x45b002,0x2);}firstRun=![],taskStatus=new Map();let _0x352ebc=0x0;for(const [_0x9990fb,_0x5d0c8d]of _0x2ef35d){_0x9990fb<parseInt(getAllProfiles['maxTask'])&&(_0x352ebc+=parseInt(_0x5d0c8d[_0x55b21e(0x234)]));}screenDataBuffer=new SharedArrayBuffer((parseInt(_0x352ebc)*0x3+0xd)*0x4),screenData=new Int32Array(screenDataBuffer);let _0x180f56=[];for(let _0x1695f0=0x0;_0x1695f0<parseInt(getAllProfiles['screens']);_0x1695f0++){const _0x39e229=getAllProfiles[_0x55b21e(0x227)][_0x55b21e(0x1ad)]('x');_0x180f56[_0x55b21e(0x1a4)]({'width':parseInt(_0x39e229[0x0]),'height':parseInt(_0x39e229[0x1])});}const _0x26b1a2=getAllProfiles[_0x55b21e(0x205)][_0x55b21e(0x1ad)]('x'),_0x95e74c=parseInt(_0x26b1a2[0x0]),_0x1385aa=parseInt(_0x26b1a2[0x1]),_0x21a308=_0x352ebc,_0x4486b9=_0x180f56[_0x55b21e(0x202)]((_0x4944d7,_0x787956)=>_0x4944d7+_0x787956[_0x55b21e(0x19d)],0x0),_0x147393=Math['max'](..._0x180f56[_0x55b21e(0x1f0)](_0x39e4d4=>_0x39e4d4[_0x55b21e(0x1fe)])),_0x1a1c3e=await calScreenArr(_0x95e74c,_0x1385aa,_0x4486b9,_0x147393,_0x352ebc);screenData=_0x1a1c3e[_0x55b21e(0x237)],log(_0x55b21e(0x1e8),_0x55b21e(0x1bb)+getAllProfiles['screens'],null,'w'),log(_0x55b21e(0x1e8),_0x55b21e(0x1da)+_0x4486b9+'x'+_0x147393,null,'w'),log(_0x55b21e(0x1e8),_0x55b21e(0x1c6)+_0x1a1c3e[_0x55b21e(0x199)]+',\x20mỗi\x20cột:\x20'+_0x1a1c3e['cols'],null,'w'),log(_0x55b21e(0x1e8),_0x55b21e(0x1ff)+_0x1a1c3e[_0x55b21e(0x20c)],null,'w'),log(_0x55b21e(0x1e8),_0x55b21e(0x1e2)+getAllProfiles[_0x55b21e(0x220)]+'|screenWidthHeight:'+getAllProfiles[_0x55b21e(0x227)],null,'w'),await delay(0x3e8);}const _0x4c0bab=[];for(const [_0x442960,_0x3a76ae]of _0x2ef35d){_0x3a76ae[_0x55b21e(0x20e)]=_0x442960;const _0x2c1de4=await genlogin[_0x55b21e(0x1cd)](_0x55b21e(0x1e8));log(_0x55b21e(0x1e8),_0x55b21e(0x214)+_0x2c1de4[_0x55b21e(0x1a1)],null,'i'),log('main',_0x55b21e(0x1d5)+_0x3a76ae[_0x55b21e(0x1ae)],null,'i'),log(_0x55b21e(0x1e8),_0x55b21e(0x1c5)+_0x3a76ae[_0x55b21e(0x1f9)],null,'i'),log(_0x55b21e(0x1e8),_0x55b21e(0x201)+_0x2c1de4[_0x55b21e(0x1a1)]+'|'+(parseInt(_0x3a76ae['nextrunstamp'])+parseInt(_0x3a76ae['maxTime']))+'|'+parseInt(_0x3a76ae[_0x55b21e(0x1f9)]),null,'w');if(_0x2c1de4[_0x55b21e(0x1a1)]>=_0x3a76ae[_0x55b21e(0x1ae)]&&parseInt(_0x3a76ae['status'])===0x0){log(_0x55b21e(0x1e8),'[processTasks]:\x20Thêm\x20task\x20'+_0x3a76ae[_0x55b21e(0x21d)]+'\x20vào\x20hàng\x20đợi',null,'i'),taskStatus[_0x55b21e(0x22d)](_0x3a76ae[_0x55b21e(0x21d)],_0x55b21e(0x1dd));const _0x15eb9e=await updateTask(_0x3a76ae[_0x55b21e(0x21d)],{'status':0x1,'nextRun':0x1});_0x4c0bab['push'](taskQueue[_0x55b21e(0x1ea)](()=>processTask(_0x3a76ae))),taskStatus[_0x55b21e(0x22d)](_0x3a76ae['name'],_0x55b21e(0x192)),await delay(0x7d0);}else{if(_0x2c1de4['timestamp']>parseInt(_0x3a76ae[_0x55b21e(0x1ae)])+parseInt(_0x3a76ae[_0x55b21e(0x195)])&&parseInt(_0x3a76ae[_0x55b21e(0x1f9)])===0x1&&(taskStatus['get'](_0x3a76ae['name'])===_0x55b21e(0x238)||!taskStatus[_0x55b21e(0x209)](_0x3a76ae[_0x55b21e(0x21d)]))){log(_0x55b21e(0x1e8),_0x55b21e(0x1e4)+_0x3a76ae[_0x55b21e(0x21d)]+_0x55b21e(0x1bc)+_0x3a76ae[_0x55b21e(0x1a7)],null,'w','*');const _0x779825=await updateTask(_0x3a76ae[_0x55b21e(0x21d)],{'status':0x0,'nextRun':0x1});log(_0x55b21e(0x1e8),_0x55b21e(0x21c)+_0x3a76ae['name'],null,'i','*');}}}return _0x4c0bab[_0x55b21e(0x1d1)]>0x0?!![]:(log(_0x55b21e(0x1e8),_0x55b21e(0x1e6),null,'w'),null);}catch(_0x37bb23){return log(_0x55b21e(0x1e8),'[processTasks]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20task:\x20'+_0x37bb23,null,![]),null;}}async function processTask(_0x429535){const _0x5e2a88=a0_0x9bcd52;try{log('main',_0x5e2a88(0x1a6)+_0x429535[_0x5e2a88(0x21d)],null,'i','=');if(!_0x429535||typeof _0x429535!==_0x5e2a88(0x206))throw new Error(_0x5e2a88(0x1d4));const _0x29b78b=createWorkerPromise(_0x429535),_0x5a3ef0=await _0x29b78b;log(_0x5e2a88(0x1e8),_0x5e2a88(0x1b8)+_0x429535[_0x5e2a88(0x21d)],null,'w','DT');const _0x17ccb3=await updateTask(_0x429535[_0x5e2a88(0x21d)],{'status':0x0,'nextRun':0x1});return taskStatus[_0x5e2a88(0x22d)](_0x429535[_0x5e2a88(0x21d)],'completed'),await delay(0x1388),_0x5a3ef0;}catch(_0x58bd12){return log(_0x5e2a88(0x1e8),_0x5e2a88(0x1e0)+_0x58bd12,null,![]),await updateTask(_0x429535[_0x5e2a88(0x21d)],{'status':0x0,'nextRun':0x1}),null;}}async function createWorkerPromise(_0x213f72){const _0x3b8e42=a0_0x9bcd52;return log('main',_0x3b8e42(0x18e)+_0x213f72[_0x3b8e42(0x21d)],null,'i','-'),new Promise(async(_0x1c7c77,_0x542fd6)=>{const _0x5597f4=_0x3b8e42;let _0x5cba93;try{if(!_0x213f72||typeof _0x213f72!==_0x5597f4(0x206))return _0x542fd6(new Error(_0x5597f4(0x1d4)));const _0x2fb450=_0x213f72[_0x5597f4(0x1b1)]===_0x5597f4(0x1c8)?_0x5597f4(0x19c):_0x5597f4(0x219);_0x5cba93=await spawn(new Worker(_0x2fb450)),log(_0x5597f4(0x1e8),'[createWorkerPromise]:\x20'+_0x2fb450,null,'i');if(!_0x5cba93)return _0x542fd6(new Error(_0x5597f4(0x229)));const _0x47c933=parseInt(_0x213f72[_0x5597f4(0x195)])*0x3e8;if(isNaN(_0x47c933))return _0x542fd6(new Error(_0x5597f4(0x18a)));const _0xeb4148=setTimeout(async()=>{const _0x5c773d=_0x5597f4;log(_0x5c773d(0x1e8),_0x5c773d(0x1ca)+_0x213f72[_0x5c773d(0x21d)],null,'w',_0x5c773d(0x1eb)),await eTimeout(_0x213f72[_0x5c773d(0x20e)]),xoaTimeout(_0xeb4148),await _0x5cba93[_0x5c773d(0x1ec)]({'timeout':!![],'task':_0x213f72,'tasksDataBuffer':tasksDataBuffer,'screenDataBuffer':screenDataBuffer,'tele_id':tele_id});},_0x47c933);log('main',_0x5597f4(0x1e1)+_0x213f72[_0x5597f4(0x21d)]+_0x5597f4(0x216)+_0x47c933+_0x5597f4(0x1f2)+_0xeb4148,null,'w');const _0x2b65d1=async _0x44ed5b=>{const _0x3574d3=_0x5597f4;try{if(_0x44ed5b[_0x3574d3(0x228)]){log(_0x3574d3(0x1e8),_0x3574d3(0x1c4)+_0x213f72[_0x3574d3(0x21d)],null,'i'),xoaTimeout(_0xeb4148),_0x1c7c77(!![]);return;}else{if(!_0x44ed5b[_0x3574d3(0x228)]){log(_0x3574d3(0x1e8),_0x3574d3(0x1ef)+_0x213f72[_0x3574d3(0x21d)]+':\x20'+_0x44ed5b[_0x3574d3(0x20a)],null,![]),_0x542fd6(new Error(_0x44ed5b['error']||_0x3574d3(0x1a5)));return;}else{log(_0x3574d3(0x1e8),_0x3574d3(0x20f)+_0x213f72[_0x3574d3(0x21d)]+':\x20'+json(_0x44ed5b),null,'c','x'),log(_0x3574d3(0x1e8),'[handleWorkerMessage]2:\x20Lỗi\x20xử\x20lý\x20task\x20'+_0x213f72[_0x3574d3(0x21d)]+':\x20'+_0x44ed5b['error'],null,![]),_0x542fd6(new Error(_0x44ed5b[_0x3574d3(0x20a)]||_0x3574d3(0x1a5)));return;}}}catch(_0xf9d0b6){log(_0x3574d3(0x1e8),'[handleWorkerMessage]:\x20Lỗi\x20nội\x20bộ\x20khi\x20xử\x20lý\x20task\x20'+_0x213f72[_0x3574d3(0x21d)]+':\x20'+_0xf9d0b6[_0x3574d3(0x1d7)],null,![]),xoaTimeout(_0xeb4148),_0x542fd6(_0xf9d0b6);return;}},_0x12ac9a=new Promise(async(_0x5a036b,_0x33d46a)=>{const _0x79f49c=_0x5597f4;try{const _0x16dd6b=await _0x5cba93[_0x79f49c(0x1ec)]({'version0':version,'tasksDataBuffer':tasksDataBuffer,'screenDataBuffer':screenDataBuffer,'task':_0x213f72,'dataBrw':getAllProfiles,'GenDataProfile0':GenDataProfile,'timgame0':timgame,'tele_id':tele_id}),_0x357fa3=await _0x2b65d1(_0x16dd6b);_0x5a036b(_0x357fa3);}catch(_0x4f5e09){_0x33d46a(_0x4f5e09);}}),_0x4b12ad=await Promise[_0x5597f4(0x1b3)]([_0x12ac9a]);log('main',_0x5597f4(0x1e3)+json(_0x4b12ad),null,'w','@'),log(_0x5597f4(0x1e8),_0x5597f4(0x1d9),null,'w','-');_0x5cba93&&Thread[_0x5597f4(0x1be)]in _0x5cba93?await Thread[_0x5597f4(0x1be)](_0x5cba93):log(_0x5597f4(0x1e8),_0x5597f4(0x1b0),null,![],'x');_0x1c7c77(_0x4b12ad);return;}catch(_0x5d8d28){log(_0x5597f4(0x1e8),_0x5597f4(0x1f7)+_0x5d8d28['message'],null,![]),_0x5cba93&&Thread[_0x5597f4(0x1be)]in _0x5cba93?await Thread[_0x5597f4(0x1be)](_0x5cba93):log(_0x5597f4(0x1e8),'[createWorkerPromise]:\x20Worker\x20không\x20hợp\x20lệ\x20hoặc\x20đã\x20bị\x20giải\x20phóng:',null,![],'x'),_0x542fd6(_0x5d8d28);}});}async function updateTask(_0x3d9477,_0x41129d){const _0x44caa0=a0_0x9bcd52;if(!http||typeof http[_0x44caa0(0x18f)]!==_0x44caa0(0x210)){log('main',_0x44caa0(0x1cc),null,![]);return;}return log('main',_0x44caa0(0x1fd)+_0x3d9477+_0x44caa0(0x1b7)+_0x41129d[_0x44caa0(0x1f9)]+'|'+_0x41129d[_0x44caa0(0x1c1)],null,'i'),await http[_0x44caa0(0x18f)](_0x44caa0(0x1e8),_0x3d9477,_0x41129d);}async function processProfile(_0x195b3a){const _0x4a8b34=a0_0x9bcd52;console[_0x4a8b34(0x1e9)](_0x4a8b34(0x1e8),_0x4a8b34(0x191)+_0x195b3a['name']);const _0x234b71=_0x195b3a[_0x4a8b34(0x1a3)];for(const _0x4be701 of _0x234b71){await gameQueue[_0x4a8b34(0x1ea)](()=>processGame(_0x4be701));}}async function getRunningTasks(_0x55dadd,_0x4eb912){const _0x48ef57=a0_0x9bcd52,_0x5f2a5e=[];for(const [_0x4e4d73,_0x7e5bd1]of _0x55dadd[_0x48ef57(0x1ab)]()){_0x7e5bd1===_0x7e5bd1&&_0x5f2a5e['push'](_0x4e4d73);}return _0x5f2a5e;}async function calScreenArr(_0x346fd5,_0x49446a,_0x2d793c,_0x2cddf6,_0x1b1402,_0x49aa1d=0x1){const _0x410115=a0_0x9bcd52,_0x3f6fd2=0x0;let _0x4211d5=_0x346fd5,_0x3040b4=_0x49446a,_0x1c3af2,_0x18e643,_0x4eb276=0x1;while(!![]){_0x18e643=Math[_0x410115(0x1a0)](_0x2d793c/_0x4211d5),_0x1c3af2=Math[_0x410115(0x223)](_0x1b1402/_0x18e643);if(_0x1c3af2*_0x3040b4<=_0x2cddf6)break;_0x4eb276*=0.95,_0x4211d5=Math[_0x410115(0x1a0)](_0x346fd5*_0x4eb276),_0x3040b4=Math[_0x410115(0x1a0)](_0x49446a*_0x4eb276);}_0x4211d5=Math['floor'](_0x4211d5*1.26);const _0x520efd=[];let _0x70004=0x0;for(let _0x159cff=0x0;_0x159cff<_0x49aa1d;_0x159cff++){const _0x3ca346=Math[_0x410115(0x1f4)](_0x4eb276*0xf4240);Atomics[_0x410115(0x21e)](screenData,0x0,_0x159cff),Atomics['store'](screenData,0x1,_0x3ca346),Atomics['store'](screenData,0x2,_0x346fd5),Atomics[_0x410115(0x21e)](screenData,0x3,_0x49446a),Atomics['store'](screenData,0x4,_0x4211d5),Atomics[_0x410115(0x21e)](screenData,0x5,_0x3040b4);let _0x3e4a6f=0xa;for(let _0x1c1f31=0x0;_0x1c1f31<_0x1c3af2;_0x1c1f31++){const _0x16f93e=[];for(let _0x97a9a9=0x0;_0x97a9a9<_0x18e643;_0x97a9a9++){if(_0x70004>=_0x1b1402)break;const _0x6041ad=Math[_0x410115(0x1a0)](_0x97a9a9*_0x4211d5),_0x50b832=Math[_0x410115(0x1a0)](_0x1c1f31*_0x3040b4);if(_0x6041ad>_0x2d793c||_0x50b832>_0x2cddf6)continue;Atomics[_0x410115(0x21e)](screenData,_0x3e4a6f++,0x2),Atomics['store'](screenData,_0x3e4a6f++,_0x6041ad),Atomics['store'](screenData,_0x3e4a6f++,_0x50b832),_0x70004++;}if(_0x70004>=_0x1b1402)break;}break;}return{'screenData':screenData,'scale':_0x4eb276,'rows':_0x1c3af2,'cols':_0x18e643,'total':_0x70004,'positions':_0x520efd};}async function xoaTimeout(_0x1a197f){try{clearTimeout(_0x1a197f),log('main','[xoaTimeout]main:\x20Xóa\x20timeout:'+_0x1a197f,null,'w','clrTimeout');}catch(_0x28a9bc){log('main','[xoaTimeout]main:\x20'+_0x28a9bc,null,![]);}}async function delay(_0x549338){return new Promise(_0x57c492=>{setTimeout(_0x57c492,_0x549338);});}async function eTimeout(_0x19148b){const _0x79a244=a0_0x9bcd52;return log('main',_0x79a244(0x1ac),null,'w'),Atomics[_0x79a244(0x21e)](tasksData,_0x19148b,0x1),!![];}async function rstTimeout(_0x584eec){const _0x33a0de=a0_0x9bcd52;return log(_0x33a0de(0x1e8),_0x33a0de(0x1f6),null,'w'),Atomics[_0x33a0de(0x1bf)](tasksData,_0x584eec,0x1,0x2),!![];}async function closeGenlogin(){const _0x35fd23=a0_0x9bcd52;try{log(_0x35fd23(0x1e8),_0x35fd23(0x212),null,'w','-'),exec(_0x35fd23(0x235),(_0x5d813b,_0x3ec40c,_0x821c56)=>{const _0x567418=_0x35fd23;if(_0x5d813b){log(_0x567418(0x1e8),_0x567418(0x1af)+_0x5d813b[_0x567418(0x1d7)],null,![]);return;}if(_0x821c56){log(_0x567418(0x1e8),_0x567418(0x203)+_0x821c56,null,![]);return;}log(_0x567418(0x1e8),_0x567418(0x18c));});}catch(_0x3e0b0b){log('main',_0x35fd23(0x230)+_0x3e0b0b,null,![]);}}async function checkUpdate(){const _0x82e54d=a0_0x9bcd52;try{const _0x4b1c6d='https://raw.githubusercontent.com/resistor3300/longCTools/refs/heads/main/package.json',_0x212fa6=a0_0x2d03c8[_0x82e54d(0x221)](process[_0x82e54d(0x21f)](),_0x82e54d(0x1a9)),_0x500b83=await a0_0x59c63f[_0x82e54d(0x1fa)][_0x82e54d(0x1b9)](_0x212fa6,'utf-8'),_0x18a96c=JSON[_0x82e54d(0x1cb)](_0x500b83),_0x133a95=_0x18a96c[_0x82e54d(0x211)];log(_0x82e54d(0x1e8),_0x82e54d(0x1a8)+_0x133a95,null,'w','-');const _0x3a31a8=await http['httpGet']('main',_0x4b1c6d);await delay(0x3e8);if(_0x3a31a8)try{const _0x1cda90=typeof _0x3a31a8===_0x82e54d(0x18d)?JSON[_0x82e54d(0x1cb)](_0x3a31a8):_0x3a31a8,_0x11ad0d=_0x1cda90[_0x82e54d(0x211)];await delay(0x3e8),_0x11ad0d!=_0x133a95?(log(_0x82e54d(0x1e8),'[checkUpdate]Có\x20phiên\x20bản\x20mới:\x20'+_0x11ad0d,null,'w'),tele_id&&tele_id['tele_id']&&await http[_0x82e54d(0x1bd)]('main',tele_id['tele_id'],_0x82e54d(0x23a)+_0x11ad0d)):log('main',_0x82e54d(0x20b),null,'w');}catch(_0xd0b5aa){log(_0x82e54d(0x1e8),_0x82e54d(0x1de)+_0xd0b5aa[_0x82e54d(0x1d7)],null,![]);}return _0x133a95;}catch(_0x307730){return log(_0x82e54d(0x1e8),_0x82e54d(0x1fc)+_0x307730,null,![]),null;}}async function logMemoryUsage(){const _0x48e33b=a0_0x9bcd52,_0x199880=process['memoryUsage']();log('Memory',_0x48e33b(0x196)+(_0x199880[_0x48e33b(0x22b)]/0x400/0x400)[_0x48e33b(0x1d2)](0x2)+_0x48e33b(0x21a)+(_0x199880[_0x48e33b(0x22a)]/0x400/0x400)[_0x48e33b(0x1d2)](0x2)+_0x48e33b(0x217),null,'w','+'),_0x199880[_0x48e33b(0x22b)]>0x400*0x400*0x400&&(tele_id[_0x48e33b(0x1ed)]&&await http[_0x48e33b(0x1bd)](_0x48e33b(0x1f5),tele_id['tele_id'],_0x48e33b(0x1cf)+(_0x199880[_0x48e33b(0x22b)]/0x400/0x400)[_0x48e33b(0x1d2)](0x2)+'\x20MB,/1GB!:\x20Thu\x20hồi\x20nhanh\x20còn\x20kịp'),log(_0x48e33b(0x1f5),'Bộ\x20nhớ\x20vượt\x20quá\x201GB!\x20Thu\x20hồi...',null,'w','+'),global['gc']?(global['gc'](),log(_0x48e33b(0x1f5),'Garbage\x20Collector\x20đã\x20chạy!',null,'i','+')):log(_0x48e33b(0x1f5),'GC\x20không\x20khả\x20dụng!\x20Chạy\x20với\x20--expose-gc\x20để\x20sử\x20dụng\x20GC\x20thủ\x20công.',null,'w','+'));}
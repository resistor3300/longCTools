const a0_0x29d859=a0_0x454b;(function(_0x2e1c34,_0x220328){const _0x18ca8a=a0_0x454b,_0x18aa74=_0x2e1c34();while(!![]){try{const _0xd4e534=-parseInt(_0x18ca8a(0xbb))/0x1+parseInt(_0x18ca8a(0x12d))/0x2+parseInt(_0x18ca8a(0x11e))/0x3+-parseInt(_0x18ca8a(0x11f))/0x4+-parseInt(_0x18ca8a(0x125))/0x5*(-parseInt(_0x18ca8a(0x12f))/0x6)+-parseInt(_0x18ca8a(0xb4))/0x7*(parseInt(_0x18ca8a(0xdf))/0x8)+parseInt(_0x18ca8a(0x89))/0x9*(-parseInt(_0x18ca8a(0xae))/0xa);if(_0xd4e534===_0x220328)break;else _0x18aa74['push'](_0x18aa74['shift']());}catch(_0x4f8377){_0x18aa74['push'](_0x18aa74['shift']());}}}(a0_0x4f15,0xbb3df));import'dotenv/config';import a0_0x35ed1b from'os';import a0_0xdcd6ee from'fs';import a0_0x1b68b0 from'path';import{fileURLToPath}from'url';import a0_0x18a19d from'./modules/Genlogin.js';import a0_0x7ea62e from'./modules/http.js';import{log,json}from'./modules/logger.js';import a0_0x3433d9 from'node-machine-id';import{spawn,Thread,Worker}from'threads';import{exec}from'child_process';import a0_0x5a90d2 from'p-queue';const MIN_FREE_SPACE_MB=0x384;function a0_0x454b(_0x139fa9,_0x565f68){const _0x4f159d=a0_0x4f15();return a0_0x454b=function(_0x454b88,_0x21c9be){_0x454b88=_0x454b88-0x86;let _0x24bad8=_0x4f159d[_0x454b88];return _0x24bad8;},a0_0x454b(_0x139fa9,_0x565f68);}function a0_0x4f15(){const _0x559204=['screenWidthHeight','Drive\x20not\x20found','[checkUpdate]Có\x20phiên\x20bản\x20mới:\x20','taskIndex','main','47620SUYvwI','[createWorkerPromise]:\x20Worker\x20không\x20hợp\x20lệ\x20hoặc\x20đã\x20bị\x20giải\x20phóng:','[processTask]:\x20Xử\x20lý\x20task:\x20','[checkUpdate]Version:\x20','getTeleId','profileThreads','message','TA\x20ĐI\x20ĐÂY','scale','substring','Tự\x20động\x20tắt\x20genlogin','Thời\x20gian\x20timeout\x20không\x20hợp\x20lệ','\x20MB,\x20Ta\x20OUT\x20đây!','./workerBrowser.js','[processTasks]:\x20task.nextrunstamp:\x20','Không\x20có\x20task\x20hoặc\x20chưa\x20tới\x20thời\x20gian\x20chạy','name','genDataProfiles','[xoaTimeout]main:\x20','toFixed','[processTasks]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20task:\x20','[checkUpdate]\x20Lỗi\x20parse\x20JSON:\x20','function','map','running','\x20vào\x20hàng\x20đợi','\x20nè\x20bro!','\x20Timeout\x20ID:\x20','[processTasks]:\x20Thêm\x20task\x20','timestamp','maxTime','\x20rồi\x20bro!','tele','parse','Lỗi\x20chung:\x20','Memory','56fJuvKj','số\x20màn\x20hình:\x20','catch','APIKEY\x20not\x20found!','Heap\x20Used:\x20','split','push','thư\x20mục\x20chứa\x20data\x20genlogin','tele_id','1920x1080','checkDisk','chưa\x20có\x20task\x20mới','getAllProfiles.value\x20OK','trim','❌\x20Dung\x20lượng\x20trống\x20không\x20đủ!','now','exit','package.json','Running\x20Task:','[processTasks]:\x20currentTime.timestamp:\x20','cwd','set','updateTask','version','join','[handleWorkerMessage]1:Lỗi\x20xử\x20lý\x20task\x20','Hoặc\x20Đăng\x20nhập\x20lại\x20App\x20genlogin\x20nhé\x20bro','[processTask]:\x20DONE\x20TASK\x20','Users','[checkUpdate]Lỗi\x20khi\x20đọc\x20file\x20package.json:\x20','\x20treo\x20đang\x20chạy\x20từ\x20','error','terminate','height','\x20MB','browserWidthHeight','add','Garbage\x20Collector\x20đã\x20chạy!','\x20MB,\x20RSS:\x20','memoryUsage','getAllProfiles:\x20','[updateTask]:\x20Lỗi\x20cập\x20nhật\x20task','timeout',',\x20mỗi\x20cột:\x20','completed','❌\x20Lỗi\x20kiểm\x20tra\x20ổ\x20đĩa:\x20','length','Thêm\x20APIKEY\x20vào\x20file\x20.env\x20nhen\x20Bro','[main]\x20Task\x20Status:\x20','ceil','400x900','heapUsed','has','[createWorkerPromise]:\x20','nextrun','rows','screens','[processTasks]:\x20task.status:\x20','store','nextrunstamp','độ\x20phân\x20giải\x20màn\x20hình\x20vật\x20lý\x20Width\x20x\x20Height\x20','username','pending','977613WvTOuN','1293484OIuaEC','taskkill\x20/IM\x20genLogin.exe\x20/F','cols','[createWorkerPromise]:\x20Timeout\x20khi\x20xử\x20lý\x20task\x20','[createWorkerPromise]:\x20createWorkerPromise\x20task:\x20','[eTimeout]main:\x20turn\x20on\x20timeout\x20flag','19205dXjmrD','./worker-api1.js','Lỗi\x20while:\x20','getListProfiles','dirname','rss','readFile','userInfo','2150032jhPqyI','get','2346YifNSR','object','games','[eTimeout]main:\x20reset\x20timeout','Dung\x20lượng\x20trống\x20ổ\x20C:\x20không\x20đủ!\x20','OK\x20rồi\x20man.\x20tắt\x20genlogin\x20đi\x20bro','\x20Lỗi\x20','url','0x0','round','APIKEY','tự\x20động\x20sắp\x20xếp\x20vị\x20trí\x20hiển\x20thị\x20trình\x20duyệt\x20','1703961uWZfIr','\x20with\x20data:\x20','Tổng\x20độ\x20phân\x20giải\x20màn\x20hình:\x20','from','[processTasks]:\x20Đã\x20xóa\x20trạng\x20thái\x20đang\x20chạy\x20task\x20','utf-8','entries','Lên\x20Web\x20lấy\x20APIKEY\x20nhen\x20Bro','promises','[createWorkerPromise]:\x20Lỗi\x20không\x20xác\x20định:\x20','[handleWorkerMessage]:\x20Lỗi\x20nội\x20bộ\x20khi\x20xử\x20lý\x20task\x20','taskMode','[xoaTimeout]main:\x20Xóa\x20timeout:','Số\x20lượng\x20task\x20chạy\x20song\x20song','[processTasks]:\x20Phát\x20Hiện\x20','[createWorkerPromise]:\x20main\x20kết\x20thúc\x20worker','[processTasks]:\x20FirstRun','success','reduce','string','Kiểm\x20tra\x20task\x20sau\x2060\x20giây','log','\x20task\x20đang\x20chạy','env','Mở\x20App\x20genlogin\x20trước\x20nhé\x20bro,kiểm\x20tra\x20coi\x20mở\x20chưa\x20bro','input','wmic\x20logicaldisk\x20get\x20caption,freespace','value','checkbox','Lỗi\x20App\x20genlogin\x20nhé\x20bro!','Chờ\x2060\x20giây','screenData','Đã\x20có\x20phiên\x20bản\x20mới:\x20','Số\x20lượng\x20màn\x20hình\x20vật\x20lý\x20để\x20hiển\x20thị','[checkUpdate]Bạn\x20đang\x20chạy\x20phiên\x20bản\x20mới\x20nhất','[processTasks]:','Start\x20App:\x20','90lGVMAk','status','BYE\x20BYE','api','floor','.genlogin','60823HpCnSf','profiles'];a0_0x4f15=function(){return _0x559204;};return a0_0x4f15();}let tasksDataBuffer,tasksData,screenData,screenDataBuffer;const __filename=fileURLToPath(import.meta[a0_0x29d859(0x136)]),__dirname=a0_0x1b68b0[a0_0x29d859(0x129)](__filename),{machine_id,machineIdSync}=a0_0x3433d9,machineId=machineIdSync()[a0_0x29d859(0xc4)](0x0,0x8),appName='LongCAutoAirdrop'+'-'+machineId,nameFile='genProfiles'+'-'+machineId,genDataFile=a0_0x29d859(0xcc)+'-'+machineId,appSetings={'maxTaskThreads':{'type':a0_0x29d859(0xa2),'value':0x3,'note':a0_0x29d859(0x96)},'screens':{'type':a0_0x29d859(0xa2),'value':0x1,'note':a0_0x29d859(0xaa)},'screenWidthHeight':{'type':a0_0x29d859(0xa2),'value':a0_0x29d859(0xe8),'note':a0_0x29d859(0x11b)},'browserWidthHeight':{'type':a0_0x29d859(0xa2),'value':a0_0x29d859(0x111),'note':'kích\x20thước\x20trinhd\x20duyệt\x20Width\x20x\x20Height\x20'},'autoSetBrowserPosition':{'type':a0_0x29d859(0xa5),'value':'y','note':a0_0x29d859(0x88)},'customBrowserPosition':{'type':'input','value':a0_0x29d859(0x137),'note':'tọa\x20độ\x20hiển\x20thị\x20trình\x20duyệt\x20'},'genDataFolder':{'type':a0_0x29d859(0xa2),'value':a0_0x1b68b0[a0_0x29d859(0xf7)]('C:',a0_0x29d859(0xfb),a0_0x35ed1b[a0_0x29d859(0x12c)]()[a0_0x29d859(0x11c)],a0_0x29d859(0xb3)),'note':a0_0x29d859(0xe6)}};let genlogin,http,profileNameId,profileId,browser,getAllProfiles,GenDataProfile,screenArrWorker,timgame=!![],taskQueue,maxTask=0x1,taskStatus,firstRun=!![],appStatus=0x0,tele_id,version,prevTime,prevTimeCkDisk;async function main(){const _0x590e5d=a0_0x29d859;try{log(_0x590e5d(0xba),'Start\x20App:\x20'+appName,null,'w','='),await delay(0x3e8);if(!process['env'][_0x590e5d(0x87)]){log(_0x590e5d(0xba),_0x590e5d(0xe2),null,![]),log('main',_0x590e5d(0x90),null,'w'),log('main',_0x590e5d(0x10e),null,'w'),log(_0x590e5d(0xba),_0x590e5d(0xb0),null,'w'),log('main',_0x590e5d(0xc2),null,'w','=');return;}genlogin=new a0_0x18a19d('',!![]),http=new a0_0x7ea62e(process[_0x590e5d(0xa0)]['SERVER_HOST'],process['env']['APIKEY'],!![]),tele_id=await http[_0x590e5d(0xbf)]('main'),version=await checkUpdate(),prevTime=Date['now'](),prevTimeCkDisk=Date[_0x590e5d(0xee)]();tele_id[_0x590e5d(0xe7)]&&await http['tele']('main',tele_id[_0x590e5d(0xe7)],_0x590e5d(0xad)+appName+_0x590e5d(0xd5));let _0x16a5b3,_0x53bf03=0x1,_0x5cdec8=0x1,_0x505b1c=0x0,_0x58993f;while(!![]){try{appStatus=0x1;if(_0x53bf03){if(!_0x505b1c){GenDataProfile=null;_0x5cdec8&&(_0x58993f=null,_0x58993f=await genlogin['getListProfiles']('main'));if(!_0x58993f||!_0x5cdec8){const _0x591254=await http[_0x590e5d(0xcc)](_0x590e5d(0xba),genDataFile);!_0x591254[_0x590e5d(0xa4)]?(log(_0x590e5d(0xba),_0x590e5d(0xa1),null,'w'),log('main',_0x590e5d(0xf9),null,'w'),log(_0x590e5d(0xba),''+_0x591254[_0x590e5d(0xfe)],null,![]),log(_0x590e5d(0xba),'chờ\x2030\x20giây\x20rồi\x20thử\x20lại',null,'i'),tele_id&&tele_id[_0x590e5d(0xe7)]&&await http[_0x590e5d(0xdb)]('main',tele_id['tele_id'],_0x590e5d(0xa6))):GenDataProfile=_0x591254[_0x590e5d(0xa4)];}else{GenDataProfile=await _0x58993f[_0x590e5d(0xb5)],await http[_0x590e5d(0xcc)](_0x590e5d(0xba),genDataFile,GenDataProfile),_0x5cdec8=0x0;continue;}}if(await genlogin[_0x590e5d(0x128)](_0x590e5d(0xba))){log(_0x590e5d(0xba),_0x590e5d(0x134),null,'w'),_0x505b1c=0x1,await closeGenlogin(),await delay(0xbb8);continue;}_0x53bf03=0x0;}await delay(0x3e8),getAllProfiles=await http['getAllProfiles'](_0x590e5d(0xba),appName,nameFile,GenDataProfile,appSetings),log(_0x590e5d(0xba),_0x590e5d(0x107)+json(getAllProfiles)),delay(0x186a0);if(!getAllProfiles[_0x590e5d(0xa4)]||!getAllProfiles||getAllProfiles[_0x590e5d(0xa4)]['length']<=0x0){log(_0x590e5d(0xba),_0x590e5d(0xca),null,![]),log('main','chờ\x2030\x20giây\x20rồi\x20thử\x20lại',null,'i');throw new Error('No\x20task\x20found');}log(_0x590e5d(0xba),_0x590e5d(0xeb));const _0xe0f0ff=Object[_0x590e5d(0x8f)](getAllProfiles['value']);maxTask=parseInt(getAllProfiles['maxTask']);const _0xf6f2ea=await processTasks(_0xe0f0ff);if(taskQueue['pending']>0x0){const _0x4f7922=await getRunningTasks(taskStatus,'running');log(_0x590e5d(0xba),taskQueue['size']+'\x20task\x20trong\x20hàng\x20đợi',null,'w'),log(_0x590e5d(0xba),taskQueue[_0x590e5d(0x11d)]+_0x590e5d(0x9f),null,'w'),log('main',_0x590e5d(0xf1)+_0x4f7922,null,'w');}else!_0xf6f2ea&&log('main',_0x590e5d(0xea),null,'w');log(_0x590e5d(0xba),_0x590e5d(0x10f)+Array[_0x590e5d(0x8c)](taskStatus[_0x590e5d(0x8f)]()),null,'c'),log(_0x590e5d(0xba),_0x590e5d(0x9d),null,'i'),Date[_0x590e5d(0xee)]()-prevTime>=0x5265c00&&(prevTime=Date[_0x590e5d(0xee)](),checkUpdate()),Date[_0x590e5d(0xee)]()-prevTimeCkDisk>=0x493e0&&(prevTimeCkDisk=Date[_0x590e5d(0xee)](),checkDisk()),logMemoryUsage(),getAllProfiles=null,await delay(0x7530);}catch(_0x598600){log(_0x590e5d(0xba),_0x590e5d(0x127)+_0x598600,null,![]),log(_0x590e5d(0xba),_0x590e5d(0xa7),null,'i'),tele_id&&tele_id[_0x590e5d(0xe7)]&&await http['tele'](_0x590e5d(0xba),tele_id[_0x590e5d(0xe7)],appName+_0x590e5d(0x135)+_0x598600+_0x590e5d(0xda)),await delay(0x7530);}}}catch(_0x105089){log(_0x590e5d(0xba),_0x590e5d(0xdd)+_0x105089,null,![]),appStatus=0x0;}}main()[a0_0x29d859(0xe1)](console[a0_0x29d859(0xfe)]);async function processTasks(_0x5b9c1e){const _0x304f0f=a0_0x29d859;try{if(firstRun){log(_0x304f0f(0xba),_0x304f0f(0x99),null,'c','*'),taskQueue=new a0_0x5a90d2({'concurrency':maxTask}),tasksDataBuffer=new SharedArrayBuffer(_0x5b9c1e[_0x304f0f(0x10d)]*0x4),tasksData=new Int32Array(tasksDataBuffer);for(var _0x1ea66b=0x0;_0x1ea66b<tasksData[_0x304f0f(0x10d)];_0x1ea66b++){Atomics[_0x304f0f(0x119)](tasksData,_0x1ea66b,0x2);}firstRun=![],taskStatus=new Map();let _0x86b7c5=0x0;for(const [_0x3639f6,_0x217317]of _0x5b9c1e){_0x3639f6<parseInt(getAllProfiles['maxTask'])&&(_0x86b7c5+=parseInt(_0x217317[_0x304f0f(0xc0)]));}screenDataBuffer=new SharedArrayBuffer((parseInt(_0x86b7c5)*0x3+0xd)*0x4),screenData=new Int32Array(screenDataBuffer);let _0x5d8c4f=[];for(let _0x4764ff=0x0;_0x4764ff<parseInt(getAllProfiles['screens']);_0x4764ff++){const _0xc2fae4=getAllProfiles[_0x304f0f(0xb6)][_0x304f0f(0xe4)]('x');_0x5d8c4f['push']({'width':parseInt(_0xc2fae4[0x0]),'height':parseInt(_0xc2fae4[0x1])});}const _0x5403ec=getAllProfiles[_0x304f0f(0x102)][_0x304f0f(0xe4)]('x'),_0x102052=parseInt(_0x5403ec[0x0]),_0x5b13ea=parseInt(_0x5403ec[0x1]),_0x9387e5=_0x86b7c5,_0x46f9a3=_0x5d8c4f[_0x304f0f(0x9b)]((_0x57ab1a,_0x1b4155)=>_0x57ab1a+_0x1b4155['width'],0x0),_0x4beb8a=Math['max'](..._0x5d8c4f[_0x304f0f(0xd2)](_0x4846fd=>_0x4846fd[_0x304f0f(0x100)])),_0x3def36=await calScreenArr(_0x102052,_0x5b13ea,_0x46f9a3,_0x4beb8a,_0x86b7c5);screenData=_0x3def36[_0x304f0f(0xa8)],log(_0x304f0f(0xba),_0x304f0f(0xe0)+getAllProfiles[_0x304f0f(0x117)],null,'w'),log(_0x304f0f(0xba),_0x304f0f(0x8b)+_0x46f9a3+'x'+_0x4beb8a,null,'w'),log(_0x304f0f(0xba),'Số\x20trình\x20duyệt\x20trên\x20mỗi\x20hàng:\x20'+_0x3def36[_0x304f0f(0x116)]+_0x304f0f(0x10a)+_0x3def36[_0x304f0f(0x121)],null,'w'),log(_0x304f0f(0xba),'Tỷ\x20lệ\x20thu\x20nhỏ:\x20'+_0x3def36[_0x304f0f(0xc3)],null,'w'),log(_0x304f0f(0xba),'[processTasks]:\x20screens:'+getAllProfiles[_0x304f0f(0x117)]+'|screenWidthHeight:'+getAllProfiles[_0x304f0f(0xb6)],null,'w'),await delay(0x3e8);}const _0x36a532=[];for(const [_0x33ca9f,_0x10989e]of _0x5b9c1e){_0x10989e['taskIndex']=_0x33ca9f;const _0x397cf9=await genlogin['nowTime'](_0x304f0f(0xba));log(_0x304f0f(0xba),_0x304f0f(0xf2)+_0x397cf9['timestamp'],null,'i'),log(_0x304f0f(0xba),_0x304f0f(0xc9)+_0x10989e[_0x304f0f(0x11a)],null,'i'),log(_0x304f0f(0xba),_0x304f0f(0x118)+_0x10989e[_0x304f0f(0xaf)],null,'i'),log(_0x304f0f(0xba),_0x304f0f(0xac)+_0x397cf9[_0x304f0f(0xd8)]+'|'+(parseInt(_0x10989e[_0x304f0f(0x11a)])+parseInt(_0x10989e[_0x304f0f(0xd9)]))+'|'+parseInt(_0x10989e[_0x304f0f(0xaf)]),null,'w');if(_0x397cf9[_0x304f0f(0xd8)]>=_0x10989e[_0x304f0f(0x11a)]&&parseInt(_0x10989e[_0x304f0f(0xaf)])===0x0){log('main',_0x304f0f(0xd7)+_0x10989e[_0x304f0f(0xcb)]+_0x304f0f(0xd4),null,'i'),taskStatus[_0x304f0f(0xf4)](_0x10989e['name'],_0x304f0f(0x11d));const _0xb6523e=await updateTask(_0x10989e[_0x304f0f(0xcb)],{'status':0x1,'nextRun':0x1});_0x36a532[_0x304f0f(0xe5)](taskQueue[_0x304f0f(0x103)](()=>processTask(_0x10989e))),taskStatus[_0x304f0f(0xf4)](_0x10989e[_0x304f0f(0xcb)],_0x304f0f(0xd3)),await delay(0x7d0);}else{if(_0x397cf9[_0x304f0f(0xd8)]>parseInt(_0x10989e['nextrunstamp'])+parseInt(_0x10989e[_0x304f0f(0xd9)])&&parseInt(_0x10989e['status'])===0x1&&(taskStatus[_0x304f0f(0x12e)](_0x10989e[_0x304f0f(0xcb)])===_0x304f0f(0x10b)||!taskStatus[_0x304f0f(0x113)](_0x10989e[_0x304f0f(0xcb)]))){log(_0x304f0f(0xba),_0x304f0f(0x97)+_0x10989e[_0x304f0f(0xcb)]+_0x304f0f(0xfd)+_0x10989e[_0x304f0f(0x115)],null,'w','*');const _0x372267=await updateTask(_0x10989e[_0x304f0f(0xcb)],{'status':0x0,'nextRun':0x1});log(_0x304f0f(0xba),_0x304f0f(0x8d)+_0x10989e[_0x304f0f(0xcb)],null,'i','*');}}}return _0x36a532[_0x304f0f(0x10d)]>0x0?!![]:(log(_0x304f0f(0xba),'[processTasks]:\x20Chưa\x20có\x20task\x20mới\x20nào\x20để\x20xử\x20lý',null,'w'),null);}catch(_0x3cd82d){return log(_0x304f0f(0xba),_0x304f0f(0xcf)+_0x3cd82d,null,![]),null;}}async function processTask(_0x5c7b5f){const _0x39f833=a0_0x29d859;try{log(_0x39f833(0xba),_0x39f833(0xbd)+_0x5c7b5f[_0x39f833(0xcb)],null,'i','=');if(!_0x5c7b5f||typeof _0x5c7b5f!==_0x39f833(0x130))throw new Error('Task\x20phải\x20là\x20một\x20đối\x20tượng');const _0xebbd8f=createWorkerPromise(_0x5c7b5f),_0x52c04f=await _0xebbd8f;log(_0x39f833(0xba),_0x39f833(0xfa)+_0x5c7b5f[_0x39f833(0xcb)],null,'w','DT');const _0x1733d6=await updateTask(_0x5c7b5f[_0x39f833(0xcb)],{'status':0x0,'nextRun':0x1});return taskStatus['set'](_0x5c7b5f[_0x39f833(0xcb)],_0x39f833(0x10b)),await delay(0x1388),_0x52c04f;}catch(_0x3c34da){return log('main','[processTask]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20task:\x20'+_0x3c34da,null,![]),await updateTask(_0x5c7b5f[_0x39f833(0xcb)],{'status':0x0,'nextRun':0x1}),null;}}async function createWorkerPromise(_0x290753){const _0x506ee5=a0_0x29d859;return log(_0x506ee5(0xba),_0x506ee5(0x123)+_0x290753['name'],null,'i','-'),new Promise(async(_0x31c152,_0x31fa61)=>{const _0x2d2f40=_0x506ee5;let _0x5650d5;try{if(!_0x290753||typeof _0x290753!==_0x2d2f40(0x130))return _0x31fa61(new Error('Task\x20phải\x20là\x20một\x20đối\x20tượng'));const _0x5564f4=_0x290753[_0x2d2f40(0x94)]===_0x2d2f40(0xb1)?_0x2d2f40(0x126):_0x2d2f40(0xc8);_0x5650d5=await spawn(new Worker(_0x5564f4)),log('main','[createWorkerPromise]:\x20'+_0x5564f4,null,'i');if(!_0x5650d5)return _0x31fa61(new Error('Không\x20thể\x20tạo\x20worker'));const _0x54ed00=parseInt(_0x290753[_0x2d2f40(0xd9)])*0x3e8;if(isNaN(_0x54ed00))return _0x31fa61(new Error(_0x2d2f40(0xc6)));const _0x4a233b=setTimeout(async()=>{const _0x4ec2ad=_0x2d2f40;log('main',_0x4ec2ad(0x122)+_0x290753[_0x4ec2ad(0xcb)],null,'w',_0x4ec2ad(0x109)),await eTimeout(_0x290753[_0x4ec2ad(0xb9)]),xoaTimeout(_0x4a233b),await _0x5650d5['worker1']({'timeout':!![],'task':_0x290753,'tasksDataBuffer':tasksDataBuffer,'screenDataBuffer':screenDataBuffer,'tele_id':tele_id});},_0x54ed00);log('main',_0x2d2f40(0x114)+_0x290753[_0x2d2f40(0xcb)]+'\x20set\x20timeout:\x20'+_0x54ed00+_0x2d2f40(0xd6)+_0x4a233b,null,'w');const _0x158753=async _0x44aea7=>{const _0x432b36=_0x2d2f40;try{if(_0x44aea7[_0x432b36(0x9a)]){log(_0x432b36(0xba),'[handleWorkerMessage]:\x20Đã\x20xử\x20lý\x20task\x20'+_0x290753[_0x432b36(0xcb)],null,'i'),xoaTimeout(_0x4a233b),_0x31c152(!![]);return;}else{if(!_0x44aea7[_0x432b36(0x9a)]){log('main','[handleWorkerMessage]0:\x20Lỗi\x20xử\x20lý\x20task\x20'+_0x290753[_0x432b36(0xcb)]+':\x20'+_0x44aea7[_0x432b36(0xfe)],null,![]),_0x31fa61(new Error(_0x44aea7['error']||'Lỗi\x20không\x20xác\x20định'));return;}else{log(_0x432b36(0xba),_0x432b36(0xf8)+_0x290753[_0x432b36(0xcb)]+':\x20'+json(_0x44aea7),null,'c','x'),log(_0x432b36(0xba),'[handleWorkerMessage]2:\x20Lỗi\x20xử\x20lý\x20task\x20'+_0x290753['name']+':\x20'+_0x44aea7['error'],null,![]),_0x31fa61(new Error(_0x44aea7['error']||'Lỗi\x20không\x20xác\x20định'));return;}}}catch(_0x19b138){log(_0x432b36(0xba),_0x432b36(0x93)+_0x290753[_0x432b36(0xcb)]+':\x20'+_0x19b138[_0x432b36(0xc1)],null,![]),xoaTimeout(_0x4a233b),_0x31fa61(_0x19b138);return;}},_0xf23a75=new Promise(async(_0x50724d,_0xfb3449)=>{try{const _0x369738=await _0x5650d5['worker1']({'version0':version,'tasksDataBuffer':tasksDataBuffer,'screenDataBuffer':screenDataBuffer,'task':_0x290753,'dataBrw':getAllProfiles,'GenDataProfile0':GenDataProfile,'timgame0':timgame,'tele_id':tele_id}),_0x53ffe9=await _0x158753(_0x369738);_0x50724d(_0x53ffe9);}catch(_0x2ed024){_0xfb3449(_0x2ed024);}}),_0x47607c=await Promise['race']([_0xf23a75]);log('main','[createWorkerPromise]:\x20main\x20'+json(_0x47607c),null,'w','@'),log(_0x2d2f40(0xba),_0x2d2f40(0x98),null,'w','-');_0x5650d5&&Thread[_0x2d2f40(0xff)]in _0x5650d5?await Thread[_0x2d2f40(0xff)](_0x5650d5):log(_0x2d2f40(0xba),_0x2d2f40(0xbc),null,![],'x');_0x31c152(_0x47607c);return;}catch(_0x167bbd){log(_0x2d2f40(0xba),_0x2d2f40(0x92)+_0x167bbd[_0x2d2f40(0xc1)],null,![]),_0x5650d5&&Thread[_0x2d2f40(0xff)]in _0x5650d5?await Thread['terminate'](_0x5650d5):log(_0x2d2f40(0xba),_0x2d2f40(0xbc),null,![],'x'),_0x31fa61(_0x167bbd);}});}async function updateTask(_0x36f221,_0x3511a0){const _0x17ac28=a0_0x29d859;if(!http||typeof http[_0x17ac28(0xf5)]!==_0x17ac28(0xd1)){log('main',_0x17ac28(0x108),null,![]);return;}return log(_0x17ac28(0xba),'[updateTask]:\x20update\x20task\x20'+_0x36f221+_0x17ac28(0x8a)+_0x3511a0['status']+'|'+_0x3511a0['nextRun'],null,'i'),await http[_0x17ac28(0xf5)](_0x17ac28(0xba),_0x36f221,_0x3511a0);}async function processProfile(_0x4115de){const _0x389b29=a0_0x29d859;console[_0x389b29(0x9e)](_0x389b29(0xba),'Processing\x20profile:\x20'+_0x4115de[_0x389b29(0xcb)]);const _0x571cce=_0x4115de[_0x389b29(0x131)];for(const _0x267305 of _0x571cce){await gameQueue[_0x389b29(0x103)](()=>processGame(_0x267305));}}async function getRunningTasks(_0x4765d7,_0x1e3df0){const _0x540da8=a0_0x29d859,_0x284237=[];for(const [_0x2f6c37,_0x275ab9]of _0x4765d7[_0x540da8(0x8f)]()){_0x275ab9===_0x275ab9&&_0x284237[_0x540da8(0xe5)](_0x2f6c37);}return _0x284237;}async function calScreenArr(_0x2968dc,_0x55e838,_0x23c364,_0x4910ad,_0x447e63,_0x690090=0x1){const _0x1f8436=a0_0x29d859,_0x51cd5d=0x0;let _0x1aaec2=_0x2968dc,_0x177843=_0x55e838,_0xdc9ff9,_0x5404e0,_0xdca42a=0x1;while(!![]){_0x5404e0=Math['floor'](_0x23c364/_0x1aaec2),_0xdc9ff9=Math[_0x1f8436(0x110)](_0x447e63/_0x5404e0);if(_0xdc9ff9*_0x177843<=_0x4910ad)break;_0xdca42a*=0.95,_0x1aaec2=Math[_0x1f8436(0xb2)](_0x2968dc*_0xdca42a),_0x177843=Math[_0x1f8436(0xb2)](_0x55e838*_0xdca42a);}_0x1aaec2=Math[_0x1f8436(0xb2)](_0x1aaec2*1.26);const _0x177394=[];let _0x3312a4=0x0;for(let _0x3adc16=0x0;_0x3adc16<_0x690090;_0x3adc16++){const _0x3e189c=Math[_0x1f8436(0x86)](_0xdca42a*0xf4240);Atomics['store'](screenData,0x0,_0x3adc16),Atomics[_0x1f8436(0x119)](screenData,0x1,_0x3e189c),Atomics[_0x1f8436(0x119)](screenData,0x2,_0x2968dc),Atomics['store'](screenData,0x3,_0x55e838),Atomics[_0x1f8436(0x119)](screenData,0x4,_0x1aaec2),Atomics['store'](screenData,0x5,_0x177843);let _0x56a58c=0xa;for(let _0x2b721a=0x0;_0x2b721a<_0xdc9ff9;_0x2b721a++){const _0x650773=[];for(let _0x3d9c06=0x0;_0x3d9c06<_0x5404e0;_0x3d9c06++){if(_0x3312a4>=_0x447e63)break;const _0x1f985a=Math[_0x1f8436(0xb2)](_0x3d9c06*_0x1aaec2),_0x9e84f5=Math[_0x1f8436(0xb2)](_0x2b721a*_0x177843);if(_0x1f985a>_0x23c364||_0x9e84f5>_0x4910ad)continue;Atomics['store'](screenData,_0x56a58c++,0x2),Atomics['store'](screenData,_0x56a58c++,_0x1f985a),Atomics[_0x1f8436(0x119)](screenData,_0x56a58c++,_0x9e84f5),_0x3312a4++;}if(_0x3312a4>=_0x447e63)break;}break;}return{'screenData':screenData,'scale':_0xdca42a,'rows':_0xdc9ff9,'cols':_0x5404e0,'total':_0x3312a4,'positions':_0x177394};}async function xoaTimeout(_0x51aae1){const _0x1aa413=a0_0x29d859;try{clearTimeout(_0x51aae1),log(_0x1aa413(0xba),_0x1aa413(0x95)+_0x51aae1,null,'w','clrTimeout');}catch(_0x1f5651){log(_0x1aa413(0xba),_0x1aa413(0xcd)+_0x1f5651,null,![]);}}async function delay(_0x47e9bf){return new Promise(_0x178d2e=>{setTimeout(_0x178d2e,_0x47e9bf);});}async function eTimeout(_0x1ef040){const _0x5a79c2=a0_0x29d859;return log(_0x5a79c2(0xba),_0x5a79c2(0x124),null,'w'),Atomics['store'](tasksData,_0x1ef040,0x1),!![];}async function rstTimeout(_0x53b048){const _0x3c6d4f=a0_0x29d859;return log(_0x3c6d4f(0xba),_0x3c6d4f(0x132),null,'w'),Atomics['compareExchange'](tasksData,_0x53b048,0x1,0x2),!![];}async function closeGenlogin(){const _0x76871e=a0_0x29d859;try{log(_0x76871e(0xba),_0x76871e(0xc5),null,'w','-'),exec(_0x76871e(0x120),(_0x22648c,_0x4a28d3,_0x261462)=>{const _0x5c6356=_0x76871e;if(_0x22648c){log(_0x5c6356(0xba),'Lỗi:\x20'+_0x22648c[_0x5c6356(0xc1)],null,![]);return;}if(_0x261462){log(_0x5c6356(0xba),'Stderr:\x20'+_0x261462,null,![]);return;}log(_0x5c6356(0xba),'tắt\x20genlogin\x20ok');});}catch(_0x2a3c36){log(_0x76871e(0xba),'closeGenlogin:\x20'+_0x2a3c36,null,![]);}}async function checkUpdate(){const _0x46970c=a0_0x29d859;try{const _0x245832='https://raw.githubusercontent.com/resistor3300/longCTools/refs/heads/main/package.json',_0x2c4782=a0_0x1b68b0[_0x46970c(0xf7)](process[_0x46970c(0xf3)](),_0x46970c(0xf0)),_0x3ea1a5=await a0_0xdcd6ee[_0x46970c(0x91)][_0x46970c(0x12b)](_0x2c4782,_0x46970c(0x8e)),_0x2bf270=JSON[_0x46970c(0xdc)](_0x3ea1a5),_0x4a458d=_0x2bf270['version'];log(_0x46970c(0xba),_0x46970c(0xbe)+_0x4a458d,null,'w','-');const _0x2845ee=await http['httpGet'](_0x46970c(0xba),_0x245832);await delay(0x3e8);if(_0x2845ee)try{const _0x459561=typeof _0x2845ee===_0x46970c(0x9c)?JSON[_0x46970c(0xdc)](_0x2845ee):_0x2845ee,_0x50fd95=_0x459561[_0x46970c(0xf6)];await delay(0x3e8),_0x50fd95!=_0x4a458d?(log(_0x46970c(0xba),_0x46970c(0xb8)+_0x50fd95,null,'w'),tele_id&&tele_id['tele_id']&&await http[_0x46970c(0xdb)]('main',tele_id[_0x46970c(0xe7)],_0x46970c(0xa9)+_0x50fd95)):log(_0x46970c(0xba),_0x46970c(0xab),null,'w');}catch(_0x1a396d){log(_0x46970c(0xba),_0x46970c(0xd0)+_0x1a396d[_0x46970c(0xc1)],null,![]);}return _0x4a458d;}catch(_0x5e9827){return log(_0x46970c(0xba),_0x46970c(0xfc)+_0x5e9827,null,![]),null;}}async function checkDisk(){const _0x1e794f=a0_0x29d859;try{const _0x5a3d01=await checkDiskSpace('C:');log(_0x1e794f(0xe9),'🟢\x20Dung\x20lượng\x20trống:\x20'+_0x5a3d01['toFixed'](0x2)+'\x20MB',null,'w','+'),_0x5a3d01<=MIN_FREE_SPACE_MB&&(log(_0x1e794f(0xe9),_0x1e794f(0xed),null,'w','+'),tele_id['tele_id']&&await http['tele'](_0x1e794f(0xe9),tele_id['tele_id'],_0x1e794f(0x133)+_0x5a3d01[_0x1e794f(0xce)](0x2)+_0x1e794f(0xc7)),process[_0x1e794f(0xef)]());}catch(_0x4a0db9){log(_0x1e794f(0xe9),_0x1e794f(0x10c)+_0x4a0db9[_0x1e794f(0xc1)],null,'w','+');}}function checkDiskSpace(_0x2b344b='C:'){return new Promise((_0x505298,_0x181c0e)=>{const _0xc2af5b=a0_0x454b;exec(_0xc2af5b(0xa3),(_0x1a5ec6,_0x54b679)=>{const _0xd43f1b=_0xc2af5b;if(_0x1a5ec6){_0x181c0e(_0x1a5ec6);return;}const _0x554ee8=_0x54b679[_0xd43f1b(0xec)]()[_0xd43f1b(0xe4)]('\x0a');for(const _0x1c6a9e of _0x554ee8){const _0x4895b0=_0x1c6a9e['trim']()['split'](/\s+/);if(_0x4895b0[0x0]===_0x2b344b){const _0x4cf110=Math[_0xd43f1b(0x86)](parseInt(_0x4895b0[0x1],0xa)/0x400/0x400);_0x505298(_0x4cf110);return;}}_0x181c0e(new Error(_0xd43f1b(0xb7)));});});}async function logMemoryUsage(){const _0x52fe7e=a0_0x29d859,_0x38e96c=process[_0x52fe7e(0x106)]();log(_0x52fe7e(0xde),_0x52fe7e(0xe3)+(_0x38e96c[_0x52fe7e(0x112)]/0x400/0x400)['toFixed'](0x2)+_0x52fe7e(0x105)+(_0x38e96c[_0x52fe7e(0x12a)]/0x400/0x400)[_0x52fe7e(0xce)](0x2)+_0x52fe7e(0x101),null,'w','+'),_0x38e96c[_0x52fe7e(0x12a)]>0x400*0x400*0x400*0x5&&(log('Memory','Bộ\x20nhớ\x20vượt\x20quá\x201GB!\x20Thu\x20hồi...',null,'w','+'),global['gc']&&(global['gc'](),log(_0x52fe7e(0xde),_0x52fe7e(0x104),null,'i','+')));}
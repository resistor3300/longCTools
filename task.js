const a0_0x3652f3=a0_0x10b1;(function(_0x533508,_0x4a0c09){const _0x39756e=a0_0x10b1,_0x176990=_0x533508();while(!![]){try{const _0x2a528d=parseInt(_0x39756e(0x1c9))/0x1+-parseInt(_0x39756e(0x19a))/0x2+-parseInt(_0x39756e(0x180))/0x3+-parseInt(_0x39756e(0x207))/0x4*(-parseInt(_0x39756e(0x1c3))/0x5)+parseInt(_0x39756e(0x187))/0x6+parseInt(_0x39756e(0x1ee))/0x7+parseInt(_0x39756e(0x218))/0x8;if(_0x2a528d===_0x4a0c09)break;else _0x176990['push'](_0x176990['shift']());}catch(_0x11fc0b){_0x176990['push'](_0x176990['shift']());}}}(a0_0x1e9b,0xca2cf));import'dotenv/config';import a0_0x183691 from'os';import a0_0x581fa8 from'fs';function a0_0x1e9b(){const _0x7dcd9d=['[handleWorkerMessage]1:Lỗi\x20xử\x20lý\x20task\x20','[createWorkerPromise]:\x20main\x20','[handleWorkerMessage]:\x20Lỗi\x20nội\x20bộ\x20khi\x20xử\x20lý\x20task\x20','maxTime','taskIndex','./workerBrowser.js','pending','catch','race','message','Không\x20thể\x20tạo\x20worker','name','length','rows','substring','[checkUpdate]Lỗi\x20khi\x20đọc\x20file\x20package.json:\x20','Mở\x20App\x20genlogin\x20trước\x20nhé\x20bro,kiểm\x20tra\x20coi\x20mở\x20chưa\x20bro','Processing\x20profile:\x20','taskkill\x20/IM\x20genLogin.exe\x20/F','400x900','games','[processTask]:\x20Xử\x20lý\x20task:\x20','\x20treo\x20đang\x20chạy\x20từ\x20','\x20Timeout\x20ID:\x20','username',',\x20mỗi\x20cột:\x20','Heap\x20Used:\x20','APIKEY','completed','LongCAutoAirdrop','readFile','[checkUpdate]Bạn\x20đang\x20chạy\x20phiên\x20bản\x20mới\x20nhất','Tỷ\x20lệ\x20thu\x20nhỏ:\x20','Lên\x20Web\x20lấy\x20APIKEY\x20nhen\x20Bro','[xoaTimeout]main:\x20','tự\x20động\x20sắp\x20xếp\x20vị\x20trí\x20hiển\x20thị\x20trình\x20duyệt\x20','9293543ICbCIG','[processTasks]:\x20Đã\x20xóa\x20trạng\x20thái\x20đang\x20chạy\x20task\x20','độ\x20phân\x20giải\x20màn\x20hình\x20vật\x20lý\x20Width\x20x\x20Height\x20','https://raw.githubusercontent.com/resistor3300/longCTools/refs/heads/main/package.json','store','entries','Task\x20phải\x20là\x20một\x20đối\x20tượng','[main]\x20Task\x20Status:\x20','[processTasks]:\x20task.status:\x20','getTeleId','worker1','timestamp','\x20vào\x20hàng\x20đợi','[checkUpdate]Có\x20phiên\x20bản\x20mới:\x20','function','Memory','httpGet','round','dirname','1920x1080','updateTask','[eTimeout]main:\x20reset\x20timeout','log','parse','terminate','57084dlSohA','OK\x20rồi\x20man.\x20tắt\x20genlogin\x20đi\x20bro','now','utf-8','heapUsed','nowTime','[createWorkerPromise]:\x20createWorkerPromise\x20task:\x20','[processTasks]:\x20screens:','Stderr:\x20','No\x20task\x20found','\x20task\x20trong\x20hàng\x20đợi','Thời\x20gian\x20timeout\x20không\x20hợp\x20lệ','object','cols','[updateTask]:\x20update\x20task\x20','[processTasks]:\x20task.nextrunstamp:\x20','string','11953352tTIPWH','error','add','status','[processTasks]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20task:\x20','value','chưa\x20có\x20task\x20mới','[createWorkerPromise]:\x20Lỗi\x20không\x20xác\x20định:\x20','Số\x20trình\x20duyệt\x20trên\x20mỗi\x20hàng:\x20','main','userInfo','[processTasks]:\x20currentTime.timestamp:\x20','Lỗi\x20while:\x20','tắt\x20genlogin\x20ok','\x20MB,\x20RSS:\x20','[createWorkerPromise]:\x20Worker\x20không\x20hợp\x20lệ\x20hoặc\x20đã\x20bị\x20giải\x20phóng:','nextrun','TA\x20ĐI\x20ĐÂY','4447245BBOLZu','Lỗi\x20App\x20genlogin\x20nhé\x20bro!','Bộ\x20nhớ\x20vượt\x20quá\x201GB!\x20Thu\x20hồi...','Bộ\x20nhớ\x20vượt\x20quá\x20Heap\x20Used:\x20','tọa\x20độ\x20hiển\x20thị\x20trình\x20duyệt\x20','Lỗi\x20không\x20xác\x20định','cwd','1087302UQyqky','map','tele','url','getListProfiles','set','[processTasks]:\x20Chưa\x20có\x20task\x20mới\x20nào\x20để\x20xử\x20lý','Đã\x20có\x20phiên\x20bản\x20mới:\x20','genDataProfiles','get','height','taskMode','input','Start\x20App:\x20','clrTimeout','scale','[xoaTimeout]main:\x20Xóa\x20timeout:','env','chờ\x2030\x20giây\x20rồi\x20thử\x20lại','3255162jBRuxu','Garbage\x20Collector\x20đã\x20chạy!','success','0x0','join','kích\x20thước\x20trinhd\x20duyệt\x20Width\x20x\x20Height\x20','Users','[processTask]:\x20DONE\x20TASK\x20','running','[createWorkerPromise]:\x20','api','profileThreads','profiles','push','./worker-api1.js','floor','\x20Lỗi\x20','tele_id','version','[checkUpdate]\x20Lỗi\x20parse\x20JSON:\x20','Tổng\x20độ\x20phân\x20giải\x20màn\x20hình:\x20','rss','timeout','nextrunstamp','from','screenWidthHeight','[processTasks]:\x20Thêm\x20task\x20','toFixed','\x20with\x20data:\x20','\x20task\x20đang\x20chạy','split','Số\x20lượng\x20task\x20chạy\x20song\x20song','[processTasks]:\x20FirstRun','Kiểm\x20tra\x20task\x20sau\x2060\x20giây','[createWorkerPromise]:\x20Timeout\x20khi\x20xử\x20lý\x20task\x20','[updateTask]:\x20Lỗi\x20cập\x20nhật\x20task','số\x20màn\x20hình:\x20','has','closeGenlogin:\x20','Không\x20có\x20task\x20hoặc\x20chưa\x20tới\x20thời\x20gian\x20chạy','[processTasks]:','255synokH','getAllProfiles.value\x20OK','screens','SERVER_HOST','getAllProfiles','[eTimeout]main:\x20turn\x20on\x20timeout\x20flag','207251ECJBQQ'];a0_0x1e9b=function(){return _0x7dcd9d;};return a0_0x1e9b();}import a0_0x3e360b from'path';import{fileURLToPath}from'url';import a0_0x42cf19 from'./modules/Genlogin.js';import a0_0x80b431 from'./modules/http.js';import{log,json}from'./modules/logger.js';import a0_0x253fcb from'node-machine-id';import{spawn,Thread,Worker}from'threads';import{exec}from'child_process';import a0_0x591cf0 from'p-queue';function a0_0x10b1(_0x2c76da,_0x566c39){const _0x1e9bd6=a0_0x1e9b();return a0_0x10b1=function(_0x10b1ab,_0x2ccaa3){_0x10b1ab=_0x10b1ab-0x17c;let _0x51ce76=_0x1e9bd6[_0x10b1ab];return _0x51ce76;},a0_0x10b1(_0x2c76da,_0x566c39);}let tasksDataBuffer,tasksData,screenData,screenDataBuffer;const __filename=fileURLToPath(import.meta[a0_0x3652f3(0x18a)]),__dirname=a0_0x3e360b[a0_0x3652f3(0x200)](__filename),{machine_id,machineIdSync}=a0_0x253fcb,machineId=machineIdSync()[a0_0x3652f3(0x1d8)](0x0,0x8),appName=a0_0x3652f3(0x1e7)+'-'+machineId,nameFile='genProfiles'+'-'+machineId,genDataFile=a0_0x3652f3(0x18f)+'-'+machineId,appSetings={'maxTaskThreads':{'type':a0_0x3652f3(0x193),'value':0x3,'note':a0_0x3652f3(0x1b9)},'screens':{'type':a0_0x3652f3(0x193),'value':0x1,'note':'Số\x20lượng\x20màn\x20hình\x20vật\x20lý\x20để\x20hiển\x20thị'},'screenWidthHeight':{'type':a0_0x3652f3(0x193),'value':a0_0x3652f3(0x201),'note':a0_0x3652f3(0x1f0)},'browserWidthHeight':{'type':a0_0x3652f3(0x193),'value':a0_0x3652f3(0x1dd),'note':a0_0x3652f3(0x19f)},'autoSetBrowserPosition':{'type':'checkbox','value':'y','note':a0_0x3652f3(0x1ed)},'customBrowserPosition':{'type':a0_0x3652f3(0x193),'value':a0_0x3652f3(0x19d),'note':a0_0x3652f3(0x184)},'genDataFolder':{'type':a0_0x3652f3(0x193),'value':a0_0x3e360b[a0_0x3652f3(0x19e)]('C:',a0_0x3652f3(0x1a0),a0_0x183691[a0_0x3652f3(0x222)]()[a0_0x3652f3(0x1e2)],'.genlogin'),'note':'thư\x20mục\x20chứa\x20data\x20genlogin'}};let genlogin,http,profileNameId,profileId,browser,getAllProfiles,GenDataProfile,screenArrWorker,timgame=!![],taskQueue,maxTask=0x1,taskStatus,firstRun=!![],appStatus=0x0,tele_id,version,prevTime;async function main(){const _0x13cc0d=a0_0x3652f3;try{log(_0x13cc0d(0x221),_0x13cc0d(0x194)+appName,null,'w','='),await delay(0x3e8);if(!process[_0x13cc0d(0x198)][_0x13cc0d(0x1e5)]){log(_0x13cc0d(0x221),'APIKEY\x20not\x20found!',null,![]),log(_0x13cc0d(0x221),_0x13cc0d(0x1eb),null,'w'),log(_0x13cc0d(0x221),'Thêm\x20APIKEY\x20vào\x20file\x20.env\x20nhen\x20Bro',null,'w'),log(_0x13cc0d(0x221),'BYE\x20BYE',null,'w'),log(_0x13cc0d(0x221),_0x13cc0d(0x17f),null,'w','=');return;}genlogin=new a0_0x42cf19('',!![]),http=new a0_0x80b431(process[_0x13cc0d(0x198)][_0x13cc0d(0x1c6)],process[_0x13cc0d(0x198)][_0x13cc0d(0x1e5)],!![]),tele_id=await http[_0x13cc0d(0x1f7)](_0x13cc0d(0x221)),version=await checkUpdate(),prevTime=Date[_0x13cc0d(0x209)]();tele_id['tele_id']&&await http[_0x13cc0d(0x189)](_0x13cc0d(0x221),tele_id['tele_id'],_0x13cc0d(0x194)+appName+'\x20nè\x20bro!');let _0x348a60,_0x515f05=0x1,_0xa6af07=0x1,_0x5a58b2=0x0,_0xecf6cb;while(!![]){try{appStatus=0x1;if(_0x515f05){if(!_0x5a58b2){GenDataProfile=null;_0xa6af07&&(_0xecf6cb=null,_0xecf6cb=await genlogin[_0x13cc0d(0x18b)](_0x13cc0d(0x221)));if(!_0xecf6cb||!_0xa6af07){const _0x181519=await http[_0x13cc0d(0x18f)](_0x13cc0d(0x221),genDataFile);!_0x181519[_0x13cc0d(0x21d)]?(log(_0x13cc0d(0x221),_0x13cc0d(0x1da),null,'w'),log('main','Hoặc\x20Đăng\x20nhập\x20lại\x20App\x20genlogin\x20nhé\x20bro',null,'w'),log(_0x13cc0d(0x221),''+_0x181519[_0x13cc0d(0x219)],null,![]),log(_0x13cc0d(0x221),_0x13cc0d(0x199),null,'i'),tele_id&&tele_id['tele_id']&&await http['tele'](_0x13cc0d(0x221),tele_id[_0x13cc0d(0x1ab)],_0x13cc0d(0x181))):GenDataProfile=_0x181519['value'];}else{GenDataProfile=await _0xecf6cb[_0x13cc0d(0x1a6)],await http[_0x13cc0d(0x18f)]('main',genDataFile,GenDataProfile),_0xa6af07=0x0;continue;}}if(await genlogin[_0x13cc0d(0x18b)]('main')){log('main',_0x13cc0d(0x208),null,'w'),_0x5a58b2=0x1,await closeGenlogin(),await delay(0xbb8);continue;}_0x515f05=0x0;}await delay(0x3e8),getAllProfiles=await http[_0x13cc0d(0x1c7)]('main',appName,nameFile,GenDataProfile,appSetings);if(!getAllProfiles[_0x13cc0d(0x21d)]||!getAllProfiles||getAllProfiles[_0x13cc0d(0x21d)][_0x13cc0d(0x1d6)]<=0x0){log(_0x13cc0d(0x221),_0x13cc0d(0x1c1),null,![]),log('main',_0x13cc0d(0x199),null,'i');throw new Error(_0x13cc0d(0x210));}log(_0x13cc0d(0x221),_0x13cc0d(0x1c4));const _0x15b870=Object[_0x13cc0d(0x1f3)](getAllProfiles[_0x13cc0d(0x21d)]);maxTask=parseInt(getAllProfiles['maxTask']);const _0xa8a2db=await processTasks(_0x15b870);if(taskQueue[_0x13cc0d(0x1d0)]>0x0){const _0x2d72ca=await getRunningTasks(taskStatus,_0x13cc0d(0x1a2));log(_0x13cc0d(0x221),taskQueue['size']+_0x13cc0d(0x211),null,'w'),log(_0x13cc0d(0x221),taskQueue[_0x13cc0d(0x1d0)]+_0x13cc0d(0x1b7),null,'w'),log(_0x13cc0d(0x221),'Running\x20Task:'+_0x2d72ca,null,'w');}else!_0xa8a2db&&log(_0x13cc0d(0x221),_0x13cc0d(0x21e),null,'w');log(_0x13cc0d(0x221),_0x13cc0d(0x1f5)+Array[_0x13cc0d(0x1b2)](taskStatus[_0x13cc0d(0x1f3)]()),null,'c'),log(_0x13cc0d(0x221),_0x13cc0d(0x1bb),null,'i'),Date['now']()-prevTime>=0x5265c00&&(prevTime=Date['now'](),checkUpdate()),logMemoryUsage(),getAllProfiles=null,await delay(0x7530);}catch(_0x36961d){log(_0x13cc0d(0x221),_0x13cc0d(0x224)+_0x36961d,null,![]),log('main','Chờ\x2060\x20giây',null,'i'),tele_id&&tele_id[_0x13cc0d(0x1ab)]&&await http['tele'](_0x13cc0d(0x221),tele_id['tele_id'],appName+_0x13cc0d(0x1aa)+_0x36961d+'\x20rồi\x20bro!'),await delay(0x7530);}}}catch(_0x2805d5){log('main','Lỗi\x20chung:\x20'+_0x2805d5,null,![]),appStatus=0x0;}}main()[a0_0x3652f3(0x1d1)](console[a0_0x3652f3(0x219)]);async function processTasks(_0x1aa83a){const _0x2bfda4=a0_0x3652f3;try{if(firstRun){log(_0x2bfda4(0x221),_0x2bfda4(0x1ba),null,'c','*'),taskQueue=new a0_0x591cf0({'concurrency':maxTask}),tasksDataBuffer=new SharedArrayBuffer(_0x1aa83a['length']*0x4),tasksData=new Int32Array(tasksDataBuffer);for(var _0x25ed6e=0x0;_0x25ed6e<tasksData[_0x2bfda4(0x1d6)];_0x25ed6e++){Atomics[_0x2bfda4(0x1f2)](tasksData,_0x25ed6e,0x2);}firstRun=![],taskStatus=new Map();let _0x230a45=0x0;for(const [_0x5c9ca2,_0x5e290d]of _0x1aa83a){_0x5c9ca2<parseInt(getAllProfiles['maxTask'])&&(_0x230a45+=parseInt(_0x5e290d[_0x2bfda4(0x1a5)]));}screenDataBuffer=new SharedArrayBuffer((parseInt(_0x230a45)*0x3+0xd)*0x4),screenData=new Int32Array(screenDataBuffer);let _0x156111=[];for(let _0x1034d8=0x0;_0x1034d8<parseInt(getAllProfiles[_0x2bfda4(0x1c5)]);_0x1034d8++){const _0x1348ed=getAllProfiles[_0x2bfda4(0x1b3)][_0x2bfda4(0x1b8)]('x');_0x156111['push']({'width':parseInt(_0x1348ed[0x0]),'height':parseInt(_0x1348ed[0x1])});}const _0xf5a19c=getAllProfiles['browserWidthHeight']['split']('x'),_0x5c0fee=parseInt(_0xf5a19c[0x0]),_0x7bac8e=parseInt(_0xf5a19c[0x1]),_0x4152af=_0x230a45,_0x280f91=_0x156111['reduce']((_0x10c77b,_0xc99942)=>_0x10c77b+_0xc99942['width'],0x0),_0x16de32=Math['max'](..._0x156111[_0x2bfda4(0x188)](_0x458147=>_0x458147[_0x2bfda4(0x191)])),_0x3a046e=await calScreenArr(_0x5c0fee,_0x7bac8e,_0x280f91,_0x16de32,_0x230a45);screenData=_0x3a046e['screenData'],log(_0x2bfda4(0x221),_0x2bfda4(0x1be)+getAllProfiles[_0x2bfda4(0x1c5)],null,'w'),log(_0x2bfda4(0x221),_0x2bfda4(0x1ae)+_0x280f91+'x'+_0x16de32,null,'w'),log(_0x2bfda4(0x221),_0x2bfda4(0x220)+_0x3a046e[_0x2bfda4(0x1d7)]+_0x2bfda4(0x1e3)+_0x3a046e[_0x2bfda4(0x214)],null,'w'),log(_0x2bfda4(0x221),_0x2bfda4(0x1ea)+_0x3a046e[_0x2bfda4(0x196)],null,'w'),log(_0x2bfda4(0x221),_0x2bfda4(0x20e)+getAllProfiles[_0x2bfda4(0x1c5)]+'|screenWidthHeight:'+getAllProfiles[_0x2bfda4(0x1b3)],null,'w'),await delay(0x3e8);}const _0x1a05e5=[];for(const [_0x45cfd2,_0x28bb68]of _0x1aa83a){_0x28bb68[_0x2bfda4(0x1ce)]=_0x45cfd2;const _0x104e90=await genlogin[_0x2bfda4(0x20c)](_0x2bfda4(0x221));log(_0x2bfda4(0x221),_0x2bfda4(0x223)+_0x104e90[_0x2bfda4(0x1f9)],null,'i'),log(_0x2bfda4(0x221),_0x2bfda4(0x216)+_0x28bb68[_0x2bfda4(0x1b1)],null,'i'),log(_0x2bfda4(0x221),_0x2bfda4(0x1f6)+_0x28bb68['status'],null,'i'),log('main',_0x2bfda4(0x1c2)+_0x104e90[_0x2bfda4(0x1f9)]+'|'+(parseInt(_0x28bb68[_0x2bfda4(0x1b1)])+parseInt(_0x28bb68[_0x2bfda4(0x1cd)]))+'|'+parseInt(_0x28bb68[_0x2bfda4(0x21b)]),null,'w');if(_0x104e90['timestamp']>=_0x28bb68[_0x2bfda4(0x1b1)]&&parseInt(_0x28bb68[_0x2bfda4(0x21b)])===0x0){log(_0x2bfda4(0x221),_0x2bfda4(0x1b4)+_0x28bb68[_0x2bfda4(0x1d5)]+_0x2bfda4(0x1fa),null,'i'),taskStatus[_0x2bfda4(0x18c)](_0x28bb68[_0x2bfda4(0x1d5)],_0x2bfda4(0x1d0));const _0x520811=await updateTask(_0x28bb68[_0x2bfda4(0x1d5)],{'status':0x1,'nextRun':0x1});_0x1a05e5['push'](taskQueue[_0x2bfda4(0x21a)](()=>processTask(_0x28bb68))),taskStatus[_0x2bfda4(0x18c)](_0x28bb68['name'],_0x2bfda4(0x1a2)),await delay(0x7d0);}else{if(_0x104e90[_0x2bfda4(0x1f9)]>parseInt(_0x28bb68['nextrunstamp'])+parseInt(_0x28bb68[_0x2bfda4(0x1cd)])&&parseInt(_0x28bb68[_0x2bfda4(0x21b)])===0x1&&(taskStatus[_0x2bfda4(0x190)](_0x28bb68[_0x2bfda4(0x1d5)])===_0x2bfda4(0x1e6)||!taskStatus[_0x2bfda4(0x1bf)](_0x28bb68['name']))){log(_0x2bfda4(0x221),'[processTasks]:\x20Phát\x20Hiện\x20'+_0x28bb68[_0x2bfda4(0x1d5)]+_0x2bfda4(0x1e0)+_0x28bb68[_0x2bfda4(0x17e)],null,'w','*');const _0x1aac31=await updateTask(_0x28bb68[_0x2bfda4(0x1d5)],{'status':0x0,'nextRun':0x1});log('main',_0x2bfda4(0x1ef)+_0x28bb68['name'],null,'i','*');}}}return _0x1a05e5[_0x2bfda4(0x1d6)]>0x0?!![]:(log(_0x2bfda4(0x221),_0x2bfda4(0x18d),null,'w'),null);}catch(_0x24ac10){return log(_0x2bfda4(0x221),_0x2bfda4(0x21c)+_0x24ac10,null,![]),null;}}async function processTask(_0x2b5856){const _0x2356c3=a0_0x3652f3;try{log('main',_0x2356c3(0x1df)+_0x2b5856['name'],null,'i','=');if(!_0x2b5856||typeof _0x2b5856!=='object')throw new Error(_0x2356c3(0x1f4));const _0x40a312=createWorkerPromise(_0x2b5856),_0x34a8f1=await _0x40a312;log(_0x2356c3(0x221),_0x2356c3(0x1a1)+_0x2b5856[_0x2356c3(0x1d5)],null,'w','DT');const _0xa6eb70=await updateTask(_0x2b5856[_0x2356c3(0x1d5)],{'status':0x0,'nextRun':0x1});return taskStatus[_0x2356c3(0x18c)](_0x2b5856['name'],_0x2356c3(0x1e6)),await delay(0x1388),_0x34a8f1;}catch(_0x5817d1){return log(_0x2356c3(0x221),'[processTask]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20task:\x20'+_0x5817d1,null,![]),await updateTask(_0x2b5856[_0x2356c3(0x1d5)],{'status':0x0,'nextRun':0x1}),null;}}async function createWorkerPromise(_0x1f6929){const _0x47240e=a0_0x3652f3;return log(_0x47240e(0x221),_0x47240e(0x20d)+_0x1f6929[_0x47240e(0x1d5)],null,'i','-'),new Promise(async(_0xf57134,_0x114b44)=>{const _0x9b7709=_0x47240e;let _0x2b89f4;try{if(!_0x1f6929||typeof _0x1f6929!==_0x9b7709(0x213))return _0x114b44(new Error('Task\x20phải\x20là\x20một\x20đối\x20tượng'));const _0x2709da=_0x1f6929[_0x9b7709(0x192)]===_0x9b7709(0x1a4)?_0x9b7709(0x1a8):_0x9b7709(0x1cf);_0x2b89f4=await spawn(new Worker(_0x2709da)),log('main',_0x9b7709(0x1a3)+_0x2709da,null,'i');if(!_0x2b89f4)return _0x114b44(new Error(_0x9b7709(0x1d4)));const _0x4c8e92=parseInt(_0x1f6929[_0x9b7709(0x1cd)])*0x3e8;if(isNaN(_0x4c8e92))return _0x114b44(new Error(_0x9b7709(0x212)));const _0x38158a=setTimeout(async()=>{const _0x23da94=_0x9b7709;log(_0x23da94(0x221),_0x23da94(0x1bc)+_0x1f6929[_0x23da94(0x1d5)],null,'w',_0x23da94(0x1b0)),await eTimeout(_0x1f6929['taskIndex']),xoaTimeout(_0x38158a),await _0x2b89f4['worker1']({'timeout':!![],'task':_0x1f6929,'tasksDataBuffer':tasksDataBuffer,'screenDataBuffer':screenDataBuffer,'tele_id':tele_id});},_0x4c8e92);log('main',_0x9b7709(0x1a3)+_0x1f6929[_0x9b7709(0x1d5)]+'\x20set\x20timeout:\x20'+_0x4c8e92+_0x9b7709(0x1e1)+_0x38158a,null,'w');const _0x587dbb=async _0x357f59=>{const _0x5326a5=_0x9b7709;try{if(_0x357f59['success']){log(_0x5326a5(0x221),'[handleWorkerMessage]:\x20Đã\x20xử\x20lý\x20task\x20'+_0x1f6929['name'],null,'i'),xoaTimeout(_0x38158a),_0xf57134(!![]);return;}else{if(!_0x357f59[_0x5326a5(0x19c)]){log('main','[handleWorkerMessage]0:\x20Lỗi\x20xử\x20lý\x20task\x20'+_0x1f6929[_0x5326a5(0x1d5)]+':\x20'+_0x357f59[_0x5326a5(0x219)],null,![]),_0x114b44(new Error(_0x357f59[_0x5326a5(0x219)]||_0x5326a5(0x185)));return;}else{log(_0x5326a5(0x221),_0x5326a5(0x1ca)+_0x1f6929[_0x5326a5(0x1d5)]+':\x20'+json(_0x357f59),null,'c','x'),log('main','[handleWorkerMessage]2:\x20Lỗi\x20xử\x20lý\x20task\x20'+_0x1f6929[_0x5326a5(0x1d5)]+':\x20'+_0x357f59['error'],null,![]),_0x114b44(new Error(_0x357f59[_0x5326a5(0x219)]||_0x5326a5(0x185)));return;}}}catch(_0x1cef71){log('main',_0x5326a5(0x1cc)+_0x1f6929[_0x5326a5(0x1d5)]+':\x20'+_0x1cef71[_0x5326a5(0x1d3)],null,![]),xoaTimeout(_0x38158a),_0x114b44(_0x1cef71);return;}},_0x4ebd05=new Promise(async(_0x92c5d1,_0x253801)=>{const _0x7fdab7=_0x9b7709;try{const _0x3f794c=await _0x2b89f4[_0x7fdab7(0x1f8)]({'version0':version,'tasksDataBuffer':tasksDataBuffer,'screenDataBuffer':screenDataBuffer,'task':_0x1f6929,'dataBrw':getAllProfiles,'GenDataProfile0':GenDataProfile,'timgame0':timgame,'tele_id':tele_id}),_0x1e57da=await _0x587dbb(_0x3f794c);_0x92c5d1(_0x1e57da);}catch(_0xb4cb2c){_0x253801(_0xb4cb2c);}}),_0x9b7b0a=await Promise[_0x9b7709(0x1d2)]([_0x4ebd05]);log(_0x9b7709(0x221),_0x9b7709(0x1cb)+json(_0x9b7b0a),null,'w','@'),log('main','[createWorkerPromise]:\x20main\x20kết\x20thúc\x20worker',null,'w','-');_0x2b89f4&&Thread[_0x9b7709(0x206)]in _0x2b89f4?await Thread[_0x9b7709(0x206)](_0x2b89f4):log(_0x9b7709(0x221),_0x9b7709(0x17d),null,![],'x');_0xf57134(_0x9b7b0a);return;}catch(_0x2198e1){log('main',_0x9b7709(0x21f)+_0x2198e1[_0x9b7709(0x1d3)],null,![]),_0x2b89f4&&Thread['terminate']in _0x2b89f4?await Thread[_0x9b7709(0x206)](_0x2b89f4):log('main',_0x9b7709(0x17d),null,![],'x'),_0x114b44(_0x2198e1);}});}async function updateTask(_0x6e1384,_0x3e7f2b){const _0x526705=a0_0x3652f3;if(!http||typeof http['updateTask']!==_0x526705(0x1fc)){log(_0x526705(0x221),_0x526705(0x1bd),null,![]);return;}return log(_0x526705(0x221),_0x526705(0x215)+_0x6e1384+_0x526705(0x1b6)+_0x3e7f2b['status']+'|'+_0x3e7f2b['nextRun'],null,'i'),await http[_0x526705(0x202)](_0x526705(0x221),_0x6e1384,_0x3e7f2b);}async function processProfile(_0x1d82de){const _0x40164b=a0_0x3652f3;console[_0x40164b(0x204)](_0x40164b(0x221),_0x40164b(0x1db)+_0x1d82de['name']);const _0x53dd2d=_0x1d82de[_0x40164b(0x1de)];for(const _0x171e25 of _0x53dd2d){await gameQueue[_0x40164b(0x21a)](()=>processGame(_0x171e25));}}async function getRunningTasks(_0x216ba1,_0x2d3ad0){const _0x217ebe=a0_0x3652f3,_0x2add1f=[];for(const [_0x35b4d9,_0x2d8504]of _0x216ba1[_0x217ebe(0x1f3)]()){_0x2d8504===_0x2d8504&&_0x2add1f[_0x217ebe(0x1a7)](_0x35b4d9);}return _0x2add1f;}async function calScreenArr(_0x594a64,_0x542d5a,_0x47ff5c,_0x2ce762,_0x110497,_0x42bcfc=0x1){const _0x21640c=a0_0x3652f3,_0x37ce69=0x0;let _0x4d88b5=_0x594a64,_0x27369e=_0x542d5a,_0x4c4b80,_0x4f0c8e,_0x18a1d9=0x1;while(!![]){_0x4f0c8e=Math['floor'](_0x47ff5c/_0x4d88b5),_0x4c4b80=Math['ceil'](_0x110497/_0x4f0c8e);if(_0x4c4b80*_0x27369e<=_0x2ce762)break;_0x18a1d9*=0.95,_0x4d88b5=Math[_0x21640c(0x1a9)](_0x594a64*_0x18a1d9),_0x27369e=Math[_0x21640c(0x1a9)](_0x542d5a*_0x18a1d9);}_0x4d88b5=Math['floor'](_0x4d88b5*1.26);const _0x381282=[];let _0x501a33=0x0;for(let _0x565655=0x0;_0x565655<_0x42bcfc;_0x565655++){const _0x31d7cc=Math[_0x21640c(0x1ff)](_0x18a1d9*0xf4240);Atomics[_0x21640c(0x1f2)](screenData,0x0,_0x565655),Atomics['store'](screenData,0x1,_0x31d7cc),Atomics[_0x21640c(0x1f2)](screenData,0x2,_0x594a64),Atomics[_0x21640c(0x1f2)](screenData,0x3,_0x542d5a),Atomics[_0x21640c(0x1f2)](screenData,0x4,_0x4d88b5),Atomics[_0x21640c(0x1f2)](screenData,0x5,_0x27369e);let _0x8a2b0e=0xa;for(let _0x2144e3=0x0;_0x2144e3<_0x4c4b80;_0x2144e3++){const _0x26c075=[];for(let _0x586eb8=0x0;_0x586eb8<_0x4f0c8e;_0x586eb8++){if(_0x501a33>=_0x110497)break;const _0x2fd911=Math[_0x21640c(0x1a9)](_0x586eb8*_0x4d88b5),_0x540a5d=Math[_0x21640c(0x1a9)](_0x2144e3*_0x27369e);if(_0x2fd911>_0x47ff5c||_0x540a5d>_0x2ce762)continue;Atomics[_0x21640c(0x1f2)](screenData,_0x8a2b0e++,0x2),Atomics[_0x21640c(0x1f2)](screenData,_0x8a2b0e++,_0x2fd911),Atomics['store'](screenData,_0x8a2b0e++,_0x540a5d),_0x501a33++;}if(_0x501a33>=_0x110497)break;}break;}return{'screenData':screenData,'scale':_0x18a1d9,'rows':_0x4c4b80,'cols':_0x4f0c8e,'total':_0x501a33,'positions':_0x381282};}async function xoaTimeout(_0x47d01f){const _0x33d412=a0_0x3652f3;try{clearTimeout(_0x47d01f),log(_0x33d412(0x221),_0x33d412(0x197)+_0x47d01f,null,'w',_0x33d412(0x195));}catch(_0x5644d8){log('main',_0x33d412(0x1ec)+_0x5644d8,null,![]);}}async function delay(_0x103c42){return new Promise(_0x3ebf7b=>{setTimeout(_0x3ebf7b,_0x103c42);});}async function eTimeout(_0x3c0083){const _0x1170aa=a0_0x3652f3;return log(_0x1170aa(0x221),_0x1170aa(0x1c8),null,'w'),Atomics[_0x1170aa(0x1f2)](tasksData,_0x3c0083,0x1),!![];}async function rstTimeout(_0x555971){const _0x2c221f=a0_0x3652f3;return log('main',_0x2c221f(0x203),null,'w'),Atomics['compareExchange'](tasksData,_0x555971,0x1,0x2),!![];}async function closeGenlogin(){const _0x151e9e=a0_0x3652f3;try{log(_0x151e9e(0x221),'Tự\x20động\x20tắt\x20genlogin',null,'w','-'),exec(_0x151e9e(0x1dc),(_0x4f350e,_0x2e5fbf,_0x29e5b0)=>{const _0xbd9777=_0x151e9e;if(_0x4f350e){log('main','Lỗi:\x20'+_0x4f350e[_0xbd9777(0x1d3)],null,![]);return;}if(_0x29e5b0){log(_0xbd9777(0x221),_0xbd9777(0x20f)+_0x29e5b0,null,![]);return;}log('main',_0xbd9777(0x225));});}catch(_0x543547){log(_0x151e9e(0x221),_0x151e9e(0x1c0)+_0x543547,null,![]);}}async function checkUpdate(){const _0x52bfef=a0_0x3652f3;try{const _0x17bfaf=_0x52bfef(0x1f1),_0x1b5164=a0_0x3e360b[_0x52bfef(0x19e)](process[_0x52bfef(0x186)](),'package.json'),_0x41a26d=await a0_0x581fa8['promises'][_0x52bfef(0x1e8)](_0x1b5164,_0x52bfef(0x20a)),_0x31df20=JSON[_0x52bfef(0x205)](_0x41a26d),_0x41a2d4=_0x31df20[_0x52bfef(0x1ac)];log(_0x52bfef(0x221),'[checkUpdate]Version:\x20'+_0x41a2d4,null,'w','-');const _0x2d32bc=await http[_0x52bfef(0x1fe)]('main',_0x17bfaf);await delay(0x3e8);if(_0x2d32bc)try{const _0x38127b=typeof _0x2d32bc===_0x52bfef(0x217)?JSON[_0x52bfef(0x205)](_0x2d32bc):_0x2d32bc,_0x49551f=_0x38127b[_0x52bfef(0x1ac)];await delay(0x3e8),_0x49551f!=_0x41a2d4?(log(_0x52bfef(0x221),_0x52bfef(0x1fb)+_0x49551f,null,'w'),tele_id&&tele_id[_0x52bfef(0x1ab)]&&await http[_0x52bfef(0x189)](_0x52bfef(0x221),tele_id['tele_id'],_0x52bfef(0x18e)+_0x49551f)):log(_0x52bfef(0x221),_0x52bfef(0x1e9),null,'w');}catch(_0x308f37){log(_0x52bfef(0x221),_0x52bfef(0x1ad)+_0x308f37[_0x52bfef(0x1d3)],null,![]);}return _0x41a2d4;}catch(_0x302783){return log(_0x52bfef(0x221),_0x52bfef(0x1d9)+_0x302783,null,![]),null;}}async function logMemoryUsage(){const _0x1425d7=a0_0x3652f3,_0x14e409=process['memoryUsage']();log(_0x1425d7(0x1fd),_0x1425d7(0x1e4)+(_0x14e409[_0x1425d7(0x20b)]/0x400/0x400)['toFixed'](0x2)+_0x1425d7(0x17c)+(_0x14e409[_0x1425d7(0x1af)]/0x400/0x400)[_0x1425d7(0x1b5)](0x2)+'\x20MB',null,'w','+'),_0x14e409[_0x1425d7(0x1af)]>0x400*0x400*0x400*0x5&&(tele_id['tele_id']&&await http[_0x1425d7(0x189)](_0x1425d7(0x1fd),tele_id[_0x1425d7(0x1ab)],_0x1425d7(0x183)+(_0x14e409[_0x1425d7(0x20b)]/0x400/0x400)[_0x1425d7(0x1b5)](0x2)+'\x20MB,/1GB!:\x20Thu\x20hồi\x20nhanh\x20còn\x20kịp'),log('Memory',_0x1425d7(0x182),null,'w','+'),global['gc']&&(global['gc'](),log(_0x1425d7(0x1fd),_0x1425d7(0x19b),null,'i','+')));}
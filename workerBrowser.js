const a0_0x37bda7=a0_0x5e68;(function(_0x3b1aec,_0x248364){const _0x1864a2=a0_0x5e68,_0x45f424=_0x3b1aec();while(!![]){try{const _0x487897=parseInt(_0x1864a2(0x1d8))/0x1+parseInt(_0x1864a2(0x1b8))/0x2*(-parseInt(_0x1864a2(0x1d1))/0x3)+parseInt(_0x1864a2(0x1fa))/0x4*(parseInt(_0x1864a2(0x185))/0x5)+parseInt(_0x1864a2(0x1bc))/0x6+parseInt(_0x1864a2(0x1a5))/0x7*(parseInt(_0x1864a2(0x1f4))/0x8)+parseInt(_0x1864a2(0x212))/0x9*(-parseInt(_0x1864a2(0x1a2))/0xa)+-parseInt(_0x1864a2(0x188))/0xb*(-parseInt(_0x1864a2(0x17d))/0xc);if(_0x487897===_0x248364)break;else _0x45f424['push'](_0x45f424['shift']());}catch(_0x249701){_0x45f424['push'](_0x45f424['shift']());}}}(a0_0x524c,0xe4a01));import'dotenv/config';import a0_0x522c8f from'fs';import a0_0x2be5c2 from'path';import{fileURLToPath,pathToFileURL}from'url';import{expose}from'threads/worker';import{log,json}from'./modules/logger.js';import a0_0x36af70 from'./modules/Genlogin.js';import a0_0x19f629 from'./modules/http.js';import a0_0x4d1350 from'p-queue';const __filename=fileURLToPath(import.meta['url']),__dirname=a0_0x2be5c2[a0_0x37bda7(0x197)](__filename);function a0_0x5e68(_0x5bbb12,_0xe4f965){const _0x524c66=a0_0x524c();return a0_0x5e68=function(_0x5e6873,_0x510040){_0x5e6873=_0x5e6873-0x175;let _0x3dcc29=_0x524c66[_0x5e6873];return _0x3dcc29;},a0_0x5e68(_0x5bbb12,_0xe4f965);}let profileQueue,genlogin,http,getAllProfiles,taskInfo,GenDataProfile,timgame;genlogin=new a0_0x36af70('',!![]),http=new a0_0x19f629(process['env'][a0_0x37bda7(0x20b)],process[a0_0x37bda7(0x1a0)]['APIKEY'],!![]);let firstRun=!![],delayOpenProfile=0xbb8,profileTimeout=0x5265c0,botTimeout=0x5265c0,profileThreads=0x1,browserInfo={},version,screenData,tasksData,screenDataBuffer1,tasksDataBuffer1,teleId=null;const worker1=async _0x2708ee=>{const _0x29f8dd=a0_0x37bda7,{version0:_0x14a47b,tasksDataBuffer:_0xddd723,screenDataBuffer:_0xb8bd21,action:_0x44c2ec,task:_0x1b3f37,dataBrw:_0x15341f,GenDataProfile0:_0x5eb5d6,timgame0:_0x519cb9,timeout:_0x5134f6,tele_id:_0x5069f8}=_0x2708ee;taskInfo=_0x1b3f37;_0x5069f8&&_0x5069f8['tele_id']&&(teleId=_0x5069f8[_0x29f8dd(0x17b)]);screenDataBuffer1=_0xb8bd21,tasksDataBuffer1=_0xddd723,screenData=new Int32Array(_0xb8bd21),tasksData=new Int32Array(_0xddd723);try{if(_0x5134f6)return log(_0x29f8dd(0x1bb),_0x29f8dd(0x1d3),null,'w'),await clearVar(),{'success':![],'error':_0x29f8dd(0x1d3)};else{if(_0x1b3f37!==_0x29f8dd(0x238)){version=_0x14a47b,getAllProfiles=_0x15341f,log(_0x29f8dd(0x1bb),_0x29f8dd(0x1b4)+JSON[_0x29f8dd(0x20f)](_0x2708ee['task']),null,'c'),log(_0x29f8dd(0x1bb),_0x29f8dd(0x204)+JSON[_0x29f8dd(0x20f)](getAllProfiles),null,'c'),GenDataProfile=_0x5eb5d6,timgame=_0x519cb9,log(_0x29f8dd(0x1bb),'['+_0x1b3f37[_0x29f8dd(0x225)]+_0x29f8dd(0x22b),null,'w');const _0xfdec2a=await xuLyTask(_0x1b3f37);return log('worker1',''+JSON[_0x29f8dd(0x20f)](_0xfdec2a),null,'w'),log(_0x29f8dd(0x1bb),_0x29f8dd(0x179),null,'w','done'),await clearVar(),_0xfdec2a?{'success':!![],'result':_0xfdec2a}:{'success':![],'result':_0xfdec2a};}else return log(_0x29f8dd(0x1bb),_0x29f8dd(0x1b0)+_0x1b3f37,null,'w'),await clearVar(),{'success':![],'error':_0x29f8dd(0x1bb)};}}catch(_0x9220ec){return log('worker1',_0x29f8dd(0x1c0)+_0x9220ec,null,![]),await clearVar(),{'success':![],'error':'worker1'};}};expose({'worker1':worker1});async function clearVar(){return genlogin=null,http=null,!![];}async function xuLyTask(_0x471f22){const _0x44fa00=a0_0x37bda7;try{log(_0x44fa00(0x1bb),'['+_0x471f22['name']+_0x44fa00(0x210),null,'i','-');const _0x261872=await genlogin[_0x44fa00(0x1ad)](_0x44fa00(0x1bb)),_0x115659=_0x261872[_0x44fa00(0x1d6)];if(_0x115659<_0x471f22[_0x44fa00(0x192)])return log('worker1','['+_0x471f22[_0x44fa00(0x225)]+_0x44fa00(0x233)+JSON[_0x44fa00(0x20f)](_0x471f22[_0x44fa00(0x225)])+_0x44fa00(0x1a9),null,'i'),log(_0x44fa00(0x1bb),'['+_0x471f22[_0x44fa00(0x225)]+_0x44fa00(0x208)+JSON[_0x44fa00(0x20f)](_0x261872)+_0x44fa00(0x1d2)+JSON[_0x44fa00(0x20f)](_0x471f22[_0x44fa00(0x234)]),null,'w'),log(_0x44fa00(0x1bb),'['+_0x471f22['name']+_0x44fa00(0x208)+JSON[_0x44fa00(0x20f)](_0x115659)+'\x20|\x20nextrun:\x20'+JSON[_0x44fa00(0x20f)](taskNextRunDateTime),null,'w'),log(_0x44fa00(0x1bb),'['+_0x471f22[_0x44fa00(0x225)]+_0x44fa00(0x1eb),null,'i'),await delay(0x1388),null;let _0xc5a92d=await http['getTask']('worker1',_0x471f22[_0x44fa00(0x225)]);if(_0xc5a92d['value']['profiles'][_0x44fa00(0x20a)]<=0x0){log(_0x44fa00(0x1bb),'['+_0x471f22['name']+_0x44fa00(0x199),null,![]);throw new Error(_0x44fa00(0x195));}firstRun&&(profileThreads=parseInt(_0x471f22[_0x44fa00(0x1d7)]),profileQueue=new a0_0x4d1350({'concurrency':profileThreads}),log(_0x44fa00(0x1bb),'['+_0x471f22[_0x44fa00(0x225)]+'][xuLyTask]profileQueue:\x20concurrency:'+profileThreads,null,'w'),firstRun=![],delayOpenProfile=parseInt(_0x471f22['delayOpenProfile'])*0x3e8,profileTimeout=parseInt(_0x471f22['profileTimeout'])*0x3e8,botTimeout=parseInt(_0x471f22[_0x44fa00(0x21c)])*0x3e8);const _0x142ac9=await xuLyProfiles(_0xc5a92d[_0x44fa00(0x239)][_0x44fa00(0x236)],_0x471f22[_0x44fa00(0x225)]);if(!_0x142ac9){log(_0x44fa00(0x1bb),'['+_0x471f22['name']+_0x44fa00(0x229)+json(_0x142ac9),null,![]);throw new Error(_0x44fa00(0x195));}return log(_0x44fa00(0x1bb),'['+_0x471f22[_0x44fa00(0x225)]+_0x44fa00(0x1a7)+_0x471f22['name']+_0x44fa00(0x1e5)),await delay(0x7d0),log(_0x44fa00(0x1bb),'['+_0x471f22[_0x44fa00(0x225)]+_0x44fa00(0x194)+JSON['stringify'](_0x471f22[_0x44fa00(0x225)])),!![];}catch(_0x565cab){return log('worker1','['+_0x471f22[_0x44fa00(0x225)]+_0x44fa00(0x1e8)+_0x565cab,null,![]),null;}}async function xuLyProfiles(_0x27744c,_0x2bf1da){const _0x5e55b8=a0_0x37bda7;try{const _0x337de2=[];for(const [_0x459f0f,_0x387b68]of _0x27744c[_0x5e55b8(0x17c)]()){const _0x4a7d23=await GenDataProfile[_0x5e55b8(0x215)](_0x50fb9c=>_0x50fb9c['pid']===_0x387b68);if(_0x459f0f!==-0x1)log(_0x5e55b8(0x1bb),'['+_0x2bf1da+_0x5e55b8(0x1dd)+_0x4a7d23);else{log(_0x5e55b8(0x1bb),'['+_0x2bf1da+'][xuLyProfiles]Không\x20tìm\x20thấy\x20indexGenP');throw new Error(_0x5e55b8(0x1f6));}log(_0x5e55b8(0x1bb),'['+_0x2bf1da+_0x5e55b8(0x231)+_0x387b68+_0x5e55b8(0x1c5)+profileThreads,null,'i'),_0x337de2['push'](profileQueue['add'](async()=>{const _0x1d52c7=_0x5e55b8;try{delayOpenProfile>0x0?(log(_0x1d52c7(0x1bb),'['+_0x2bf1da+'][xuLyProfiles]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile\x20'+_0x387b68+_0x1d52c7(0x1c2)+delayOpenProfile+'ms',null,'w','-'),await delay(delayOpenProfile)):log(_0x1d52c7(0x1bb),'['+_0x2bf1da+'][xuLyProfiles]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile\x20'+_0x387b68,null,'w','-'),await xuLyTungProfile(_0x387b68,GenDataProfile[_0x4a7d23]);}catch(_0x4d63f1){log(_0x1d52c7(0x1bb),'['+_0x2bf1da+_0x1d52c7(0x214)+_0x387b68+':\x20'+_0x4d63f1[_0x1d52c7(0x1be)],null,![]);throw _0x4d63f1;}})),log(_0x5e55b8(0x1bb),'['+_0x2bf1da+'][xuLyProfiles]:\x20Đã\x20thêm\x20profile\x20'+_0x387b68+_0x5e55b8(0x1ac));}const _0x1c175d=await Promise[_0x5e55b8(0x235)](_0x337de2),_0x1a8643=_0x1c175d[_0x5e55b8(0x1fb)](_0x477d16=>_0x477d16[_0x5e55b8(0x1c6)]===_0x5e55b8(0x1bf));return _0x1a8643['length']>0x0?log(_0x5e55b8(0x1bb),'['+_0x2bf1da+_0x5e55b8(0x17f)+JSON['stringify'](_0x1a8643),null,![]):log(_0x5e55b8(0x1bb),'['+_0x2bf1da+'][xuLyProfiles]:\x20Đã\x20xử\x20lý\x20tất\x20cả\x20profiles\x20thành\x20công\x20'+json(_0x1c175d)),!![];}catch(_0x4fc3a5){return log(_0x5e55b8(0x1bb),'['+_0x2bf1da+_0x5e55b8(0x22f)+_0x4fc3a5,null,![]),null;}}async function xuLyTungProfile(_0x1c334a,_0x4f883f){const _0x14e385=a0_0x37bda7;let _0x479717,_0x59e355;const _0x3e42fb=_0x1c334a;let _0x29a1c7;try{await delay(delayOpenProfile),log(_0x1c334a,_0x14e385(0x1f8),null,'i'),_0x479717=await genlogin['nowTime'](_0x1c334a),await http[_0x14e385(0x1e9)]('worker1',_0x1c334a,_0x14e385(0x1a1),_0x479717[_0x14e385(0x1d6)],'',_0x14e385(0x1da)+version,_0x14e385(0x184));teleId&&await http[_0x14e385(0x1a4)](_0x1c334a,teleId,'['+_0x1c334a+_0x14e385(0x175));log(_0x1c334a,_0x14e385(0x1b2)+_0x1c334a,null,'w'),_0x29a1c7=await procScreenArr('open',null,_0x1c334a);if(_0x29a1c7['x']===undefined||_0x29a1c7['y']===undefined){log(_0x1c334a,_0x14e385(0x17e),null,![]);throw new Error('Không\x20tìm\x20thấy\x20giá\x20trị\x20status=0');}const _0x1cc41c=await xuLyBrowser(_0x1c334a,_0x4f883f,_0x29a1c7);await procScreenArr(_0x14e385(0x232),_0x29a1c7,_0x1c334a);const _0x4548f1=await genlogin['tinhThoiGian'](_0x479717[_0x14e385(0x1ed)]);return await http['addData'](_0x14e385(0x1bb),_0x1c334a,_0x14e385(0x1ba),'','',_0x4548f1,_0x14e385(0x1d0)),teleId&&await http[_0x14e385(0x1a4)](_0x1c334a,teleId,'['+_0x1c334a+'][OK]:\x20STOP\x20SCRIPT'),_0x1cc41c;}catch(_0x2217a8){log(_0x1c334a,_0x14e385(0x201)+_0x2217a8,null,![]);if(_0x59e355)await Thread['terminate'](_0x59e355);await procScreenArr(_0x14e385(0x232),_0x29a1c7,_0x1c334a);const _0x27fb30=await genlogin[_0x14e385(0x1b3)](_0x479717?.[_0x14e385(0x1ed)]||Date[_0x14e385(0x218)]());await http['addData'](_0x14e385(0x1bb),_0x1c334a,_0x14e385(0x1ba),'','',_0x27fb30,_0x14e385(0x1d0));teleId&&await http[_0x14e385(0x1a4)](_0x1c334a,teleId,'['+_0x1c334a+_0x14e385(0x1cd));throw _0x2217a8;}}async function xuLyBrowser(_0x2f309,_0x2086e4,_0x2c16cc){const _0x5e599a=a0_0x37bda7;let _0x3df8a9;try{const _0x15e938=_0x2f309;if(!browserInfo[_0x2f309])browserInfo[_0x2f309]={};browserInfo[_0x2f309][_0x5e599a(0x1fe)]=0x0,log(_0x2f309,_0x5e599a(0x1af)+json(browserInfo),null,'w','w');if(browserInfo[_0x2f309][_0x5e599a(0x1fe)]==0x0){_0x3df8a9=await OpenBrowser(_0x2f309,_0x2086e4,_0x2c16cc);if(!_0x3df8a9){log(_0x2f309,_0x5e599a(0x202)+_0x2f309,null,![]);throw new Error(_0x5e599a(0x202)+_0x2f309);}browserInfo[_0x2f309][_0x5e599a(0x1fe)]=0x1;}if(!_0x3df8a9['connected'])throw new Error(_0x5e599a(0x190)+_0x2f309);let _0x43f645=0x0;const _0xd43125=await http[_0x5e599a(0x213)](_0x5e599a(0x1bb),_0x15e938);if(!_0xd43125){log(_0x2f309,_0x5e599a(0x1a8),null,![]);throw new Error(_0x5e599a(0x207));}if(_0xd43125[_0x5e599a(0x20a)]<=0x0){log(_0x2f309,_0x5e599a(0x180),null,![]);throw new Error(_0x5e599a(0x207));}for(const _0x871434 of _0xd43125){if(_0x871434){if(_0x871434[_0x5e599a(0x1ce)]!=_0x5e599a(0x1db))continue;if(_0x871434[_0x5e599a(0x239)]===_0x5e599a(0x1f2)){log(_0x2f309,_0x5e599a(0x1ca),null,'i');break;}if(!_0x871434['aks']){log(_0x2f309,_0x5e599a(0x1aa)+json(_0x871434)+'\x20ko\x20có\x20aks',null,![]);continue;}if(_0x871434[_0x5e599a(0x1c8)]==='0'){log(_0x2f309,_0x5e599a(0x1aa)+json(_0x871434[_0x5e599a(0x225)])+'\x20OFF',null,![]);continue;}const _0x2404f5=await genlogin['nowTime'](_0x2f309);if(_0x871434[_0x5e599a(0x1c1)]>_0x2404f5['timestamp']){log(_0x2f309,':\x20Bot\x20'+json(_0x871434[_0x5e599a(0x225)])+_0x5e599a(0x200),null,'w');continue;}switch(_0x871434[_0x5e599a(0x1c4)]){case'A':log(_0x2f309,':\x20'+json(_0x871434[_0x5e599a(0x225)])+'\x20Tele\x20A\x20OK'),await xuLyGame(_0x871434,'A',_0x2f309,_0x2086e4,_0x2c16cc,_0x3df8a9);break;case'K':log(_0x2f309,':\x20'+json(_0x871434[_0x5e599a(0x225)])+_0x5e599a(0x1b6)),await xuLyGame(_0x871434,'K',_0x2f309,_0x2086e4,_0x2c16cc,_0x3df8a9);break;case'W':log(_0x2f309,':\x20'+json(_0x871434[_0x5e599a(0x225)])+_0x5e599a(0x18d)),await xuLyGame(_0x871434,'W',_0x2f309,_0x2086e4,_0x2c16cc,_0x3df8a9);break;default:log(_0x2f309,_0x5e599a(0x1fc)+json(_0x871434[_0x5e599a(0x1c4)]),null,![]);break;}log(_0x2f309,_0x5e599a(0x22c));}}return await closeBrowser(_0x2f309,_0x3df8a9),!![];}catch(_0x320845){return log(_0x2f309,_0x5e599a(0x1cb)+_0x320845,null,![]),await closeBrowser(_0x2f309,_0x3df8a9),null;}}async function xuLyGame(_0x882512,_0x4feae4,_0x49c797,_0x20f7e4,_0x3fc923,_0x15271d){const _0x533a43=a0_0x37bda7;try{const _0x227a80=_0x49c797;if(_0x882512[_0x533a43(0x1ce)]===_0x533a43(0x23a)){log(_0x49c797,'[xuLyGame]:\x20'+_0x882512[_0x533a43(0x225)]+'\x20Api\x20mode',null,'i');const _0x730eaa=await genlogin[_0x533a43(0x1ad)](_0x49c797),_0x188390=await http[_0x533a43(0x1e9)](_0x49c797,_0x227a80,_0x882512[_0x533a43(0x225)],_0x730eaa[_0x533a43(0x1d6)],'',_0x533a43(0x1b9),_0x533a43(0x193)),_0x3db97f=_0x188390['ID'],_0x973b7a={'bot':_0x882512,'profileNameId':_0x49c797,'genlogin':genlogin,'http':http,'dataId':_0x3db97f},_0x2f5ab7=await loadGameApi(_0x882512[_0x533a43(0x225)],_0x973b7a);if(!_0x2f5ab7[_0x533a43(0x1c6)])return log(_0x49c797,_0x533a43(0x19c)+_0x882512[_0x533a43(0x225)]+_0x533a43(0x189),null,![]),await http[_0x533a43(0x21a)](_0x49c797,_0x227a80,_0x3db97f,_0x533a43(0x20e),_0x533a43(0x20e)),null;if(_0x2f5ab7[_0x533a43(0x1c6)]==_0x533a43(0x1a3))return log(_0x49c797,'[xuLyGame]:\x20Thực\x20thi\x20'+_0x882512[_0x533a43(0x225)]+_0x533a43(0x187),null,'i'),'loop';if(_0x2f5ab7['status'])return log(_0x49c797,_0x533a43(0x19c)+_0x882512[_0x533a43(0x225)]+_0x533a43(0x181)),await http[_0x533a43(0x1de)](_0x49c797,_0x227a80,_0x882512['id'],_0x2f5ab7[_0x533a43(0x183)],_0x2f5ab7[_0x533a43(0x1c1)]),await http[_0x533a43(0x21a)](_0x49c797,_0x227a80,_0x3db97f,'Ok',_0x533a43(0x18c),_0x2f5ab7[_0x533a43(0x1b1)],_0x2f5ab7[_0x533a43(0x183)]),!![];}else{if(_0x4feae4=='A'||_0x4feae4=='K'){log(_0x49c797,'[xuLyGame]:\x20'+_0x882512[_0x533a43(0x225)]+_0x533a43(0x1f5),null,'w','-');const _0x1f6ada=await http[_0x533a43(0x1f9)](_0x49c797,_0x4feae4);if(_0x1f6ada){log(_0x49c797,_0x533a43(0x1b5));let _0x21a057=0x0;while(_0x21a057<0x2){const _0x24e35a=await checkTeleWebOpen(_0x882512,_0x1f6ada,_0x49c797,_0x3fc923,_0x15271d);if(_0x24e35a===_0x533a43(0x1a3))_0x21a057++,log(_0x49c797,_0x533a43(0x21b)+_0x21a057+'/2',null,'i'),await delay(0x3e8);else return _0x24e35a?(log(_0x49c797,_0x533a43(0x1bd)),!![]):(log(_0x49c797,_0x533a43(0x20c),null,![]),null);}return log(_0x49c797,_0x533a43(0x1ec),null,![]),null;}}else{if(_0x4feae4=='W'){log(_0x49c797,_0x533a43(0x21f)+_0x882512['name']+_0x533a43(0x1dc),null,'w','-');const _0x1a6c9f=await checkTeleWebOpen(_0x882512,_0x4feae4,_0x49c797,_0x3fc923,_0x15271d);return _0x1a6c9f?(log(_0x49c797,'[xuLyGame]:\x20checkTeleWebOpen\x20OK'),!![]):(log(_0x49c797,_0x533a43(0x20c),null,![]),null);}else return log(_0x49c797,_0x533a43(0x211)+_0x4feae4,null,![]),null;}}}catch(_0x40b366){return log(_0x49c797,'[xuLyGame]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20Game:\x20'+_0x40b366,null,![]),null;}}async function OpenBrowser(_0x2f71d5,_0x524c23,_0x535a5c){const _0x5e65cb=a0_0x37bda7;try{const _0x2b2321=_0x2f71d5;log(_0x2f71d5,_0x5e65cb(0x22d)+JSON['stringify'](_0x2f71d5),null,'i');if(getAllProfiles[_0x5e65cb(0x1e0)]==='n'){const _0x537be8=getAllProfiles[_0x5e65cb(0x198)][_0x5e65cb(0x1e6)]('x');parseInt(_0x537be8[0x0])>=0x0&&parseInt(_0x537be8[0x1])>=0x0?(_0x535a5c['x']=parseInt(_0x537be8[0x0]),_0x535a5c['y']=parseInt(_0x537be8[0x1])):(_0x535a5c['x']=0x0,_0x535a5c['y']=0x0),log(_0x2f71d5,'[OpenBrowser]:force\x20set\x20Position:\x20'+_0x535a5c['x']+'x'+_0x535a5c['y'],null,'w');}const _0x49e058=await genlogin['connect'](_0x2f71d5,getAllProfiles,_0x524c23,_0x535a5c);log(_0x2f71d5,_0x5e65cb(0x1e4)+JSON[_0x5e65cb(0x20f)](_0x49e058),null,'i'),await delay(0x1388);if(_0x49e058){let _0x53b003=0x0;const _0x3c58bf=0xa;while(_0x53b003<_0x3c58bf){_0x53b003++;const _0x182d55=await genlogin['countOpenTabs'](_0x2f71d5,_0x49e058);if(_0x182d55<=0x1)return log(_0x2f71d5,_0x5e65cb(0x21e)+_0x182d55+_0x5e65cb(0x17a),null,'i'),_0x49e058;const _0xa615a=await genlogin[_0x5e65cb(0x1ea)](_0x2f71d5,_0x49e058,_0x182d55-0x1,0xbb8);if(!_0xa615a){log(_0x2f71d5,_0x5e65cb(0x230),null,![]);continue;}log(_0x2f71d5,_0x5e65cb(0x1ab)),await delay(0xbb8);continue;}}return log(_0x2f71d5,'[OpenBrowser]:\x20Lỗi\x20khi\x20mở\x20browser:\x20'+JSON['stringify'](_0x2f71d5)),null;}catch(_0x46d4d0){throw new Error(_0x5e65cb(0x18f)+_0x46d4d0[_0x5e65cb(0x1be)]);}}async function checkTeleWebOpen(_0x1b01c1,_0x46791b,_0x4befb4,_0x1616d3,_0x4056c2){const _0x457764=a0_0x37bda7;let _0x2ee632;try{let _0xe5d38e=await genlogin['activateTab'](_0x4befb4,_0x4056c2,0x0,getAllProfiles[_0x457764(0x19a)],_0x1616d3['scale']);if(_0x46791b!='W'){const _0x1ba639=await genlogin[_0x457764(0x1ff)](_0x4befb4,_0xe5d38e,_0x46791b[_0x457764(0x205)],0x7d0);!_0x1ba639&&(await genlogin[_0x457764(0x209)](_0x4befb4,_0xe5d38e,_0x457764(0x228),0xea60),await delay(0x7d0),await genlogin[_0x457764(0x209)](_0x4befb4,_0xe5d38e,_0x46791b[_0x457764(0x19e)],0xea60),await genlogin['setTitle'](_0x4befb4,_0xe5d38e,_0x4befb4),await delay(0x1388));}else _0x46791b='W',await genlogin['openUrl'](_0x4befb4,_0xe5d38e,_0x457764(0x228),0xea60),await delay(0x7d0),await genlogin['openUrl'](_0x4befb4,_0xe5d38e,_0x1b01c1[_0x457764(0x223)],0xea60),await genlogin[_0x457764(0x1e2)](_0x4befb4,_0xe5d38e,_0x4befb4),await delay(0x1388);log(_0x4befb4,'[checkTeleWebOpen]:\x20vào\x20loadGame',null,'i');const _0x1f2b05=await genlogin[_0x457764(0x1ad)](_0x4befb4),_0x4230ca=await http[_0x457764(0x1e9)](_0x4befb4,_0x4befb4,_0x1b01c1[_0x457764(0x225)],_0x1f2b05[_0x457764(0x1d6)],'',_0x457764(0x184),_0x457764(0x193));_0x2ee632=_0x4230ca['ID'];const _0xe86848={'firstPage':_0xe5d38e,'bot':_0x1b01c1,'profileNameId':_0x4befb4,'getAks':_0x46791b,'genlogin':genlogin,'http':http,'browser':_0x4056c2,'dataId':_0x4230ca['ID'],'taskIndex':taskInfo[_0x457764(0x178)],'screenDataBuffer2':screenDataBuffer1,'tasksDataBuffer2':tasksDataBuffer1};let _0x106199=null;log(_0x4befb4,_0x457764(0x1d4)+json(_0x2ee632),null,'i');if(timgame&&_0x46791b!='W'){await http[_0x457764(0x21a)](_0x4befb4,_0x4befb4,_0x2ee632,'Tìm');const _0x4d59a4=await loadGame(_0x457764(0x18e),_0xe86848,_0x106199,_0x2ee632,_0x4befb4);if(_0x4d59a4['status']=='loop')return log(_0x4befb4,_0x457764(0x21d)+_0x1b01c1[_0x457764(0x225)]+'\x20loop',null,'i'),await http[_0x457764(0x21a)](_0x4befb4,_0x4befb4,_0x2ee632,_0x457764(0x1f0)),_0x457764(0x1a3);else{if(!_0x4d59a4)return log(_0x4befb4,'[checkTeleWebOpen]:\x20Không\x20tìm\x20thấy\x20game\x20'+_0x1b01c1[_0x457764(0x225)],null,![]),await http['updateData'](_0x4befb4,_0x4befb4,_0x2ee632,_0x457764(0x20e),_0x457764(0x20e)),null;}_0x4d59a4[_0x457764(0x1fd)]&&(_0x106199=_0x4d59a4[_0x457764(0x1fd)]);}await http[_0x457764(0x21a)](_0x4befb4,_0x4befb4,_0x2ee632,_0x457764(0x186));const _0x2430ea=await loadGame(_0x1b01c1[_0x457764(0x225)],_0xe86848,_0x106199,_0x2ee632,_0x4befb4);if(!_0x2430ea[_0x457764(0x1c6)])return log(_0x4befb4,'[checkTeleWebOpen]:\x20Không\x20thực\x20thi\x20script\x20'+_0x1b01c1[_0x457764(0x225)],null,![]),log(_0x4befb4,_0x457764(0x191)+json(_0x2430ea),null,![]),await http[_0x457764(0x21a)](_0x4befb4,_0x4befb4,_0x2ee632,'Fail',_0x457764(0x20e)),null;else{if(_0x2430ea[_0x457764(0x1c6)]==_0x457764(0x1a3))return log(_0x4befb4,_0x457764(0x21d)+_0x1b01c1['name']+_0x457764(0x187),null,'i'),await http['updateData'](_0x4befb4,_0x4befb4,_0x2ee632,_0x457764(0x1a3)),_0x457764(0x1a3);}return await http['nextRunTime'](_0x4befb4,_0x4befb4,_0x1b01c1['id'],_0x2430ea['nextRun'],_0x2430ea[_0x457764(0x1c1)]),await http[_0x457764(0x21a)](_0x4befb4,_0x4befb4,_0x2ee632,'Ok',_0x457764(0x18c),_0x2430ea[_0x457764(0x1b1)],_0x2430ea['nextRun']),log(_0x4befb4,_0x457764(0x1ef)+_0x1b01c1[_0x457764(0x225)]+_0x457764(0x206)),await delay(0x7d0),!![];}catch(_0x2d35e4){return log(_0x4befb4,_0x457764(0x1e1)+_0x2d35e4,null,![]),await http['updateData'](_0x4befb4,_0x4befb4,_0x2ee632,'Fail',_0x457764(0x20e)),null;}}async function loadGame(_0x3c8780,_0x23030e,_0x57f560,_0x29afc7,_0x130953){const _0x25ca7f=a0_0x37bda7;try{const _0x8ab6f1=pathToFileURL(a0_0x2be5c2[_0x25ca7f(0x22e)](__dirname,_0x25ca7f(0x1c7),_0x3c8780+'.js'))['href'];log(_0x130953,_0x25ca7f(0x182)+_0x8ab6f1);const _0x479641=await import(_0x8ab6f1);if(typeof _0x479641[_0x25ca7f(0x1c3)]===_0x25ca7f(0x18b)){const _0x1eafc3=await _0x479641[_0x25ca7f(0x1c3)](_0x23030e,_0x57f560);await delay(0x3e8);if(!_0x1eafc3['status'])return log(_0x130953,_0x25ca7f(0x217)+_0x3c8780+_0x25ca7f(0x19f),null,![]),null;else return _0x1eafc3['status']===_0x25ca7f(0x1a3)?(log(_0x130953,_0x25ca7f(0x1a6)+_0x3c8780+_0x25ca7f(0x187),null,'i'),_0x1eafc3):(log(_0x130953,_0x25ca7f(0x1a6)+_0x3c8780+'\x20'+_0x1eafc3[_0x25ca7f(0x1c6)],null,'i'),_0x1eafc3);}else return await delay(0x3e8),log(_0x130953,_0x25ca7f(0x217)+_0x3c8780+_0x25ca7f(0x224),null,![]),null;}catch(_0x1e37b1){return log(_0x130953,_0x25ca7f(0x1f3)+_0x3c8780+':\x20'+_0x1e37b1,null,![]),teleId&&await http[_0x25ca7f(0x1a4)](_0x130953,teleId,'['+_0x130953+']['+_0x3c8780+_0x25ca7f(0x1ee)+_0x1e37b1),null;}}async function closeBrowser(_0x255f6c='',_0x3fabe3){const _0x3b7b99=a0_0x37bda7;try{if(_0x3fabe3){if(_0x3fabe3[_0x3b7b99(0x1ae)])return await _0x3fabe3[_0x3b7b99(0x232)](),_0x3fabe3=null,log(_0x255f6c,_0x3b7b99(0x219)+_0x255f6c+_0x3b7b99(0x206),null,'w'),!![];}else log(_0x255f6c,_0x3b7b99(0x1cf),null,'i');return null;}catch(_0x1d0b98){return log(_0x255f6c,_0x3b7b99(0x1e3)+_0x255f6c+':\x20'+_0x1d0b98,null,![]),null;}}async function procScreenArr(_0x46f3cf,_0x2a8d34,_0x42fd18){const _0x12d7a5=a0_0x37bda7;try{await acquireLock(screenData);let _0xc10790={};log(_0x42fd18,'[worker1.procScreenArr]action:\x20'+_0x46f3cf+_0x12d7a5(0x1df)+json(_0x2a8d34),null,'w','-');if(_0x46f3cf===_0x12d7a5(0x19d)){log(_0x42fd18,_0x12d7a5(0x22a),null,'w'),_0xc10790[_0x12d7a5(0x176)]=Atomics[_0x12d7a5(0x226)](screenData,0x1)/0xf4240,_0xc10790[_0x12d7a5(0x1c9)]=Atomics['load'](screenData,0x2),_0xc10790[_0x12d7a5(0x216)]=Atomics[_0x12d7a5(0x226)](screenData,0x3);for(let _0x3718ae=0xa;_0x3718ae<screenData[_0x12d7a5(0x20a)]-0x1;_0x3718ae=_0x3718ae+0x3){const _0x33b6ef=Atomics[_0x12d7a5(0x226)](screenData,_0x3718ae);if(_0x33b6ef===0x2)return Atomics[_0x12d7a5(0x227)](screenData,_0x3718ae,0x1),_0xc10790[_0x12d7a5(0x1c3)]=0x0,_0xc10790['x']=Atomics[_0x12d7a5(0x226)](screenData,_0x3718ae+0x1),_0xc10790['y']=Atomics[_0x12d7a5(0x226)](screenData,_0x3718ae+0x2),log(_0x42fd18,_0x12d7a5(0x1d9)+_0x3718ae+'\x20set\x20open\x20ok\x20pos:'+json(_0xc10790),null,'w'),await releaseLock(screenData),_0xc10790;if(_0x33b6ef===0x0)return Atomics[_0x12d7a5(0x227)](screenData,_0x3718ae,0x1),_0xc10790[_0x12d7a5(0x1c3)]=0x1,_0xc10790['x']=0x0,_0xc10790['y']=0x0,log(_0x42fd18,'[worker1.procScreenArr]\x20index:'+_0x3718ae+_0x12d7a5(0x18a)+json(_0xc10790),null,'w'),await releaseLock(screenData),_0xc10790;}await releaseLock(screenData);throw new Error(_0x12d7a5(0x1f7));}else{if(_0x46f3cf===_0x12d7a5(0x232)&&_0x2a8d34['x']>=0x0&&_0x2a8d34['y']>=0x0){log(_0x42fd18,_0x12d7a5(0x220),null,'w');if(_0x2a8d34[_0x12d7a5(0x1c3)]===0x1)return log(_0x42fd18,'[worker1.procScreenArr]vị\x20trí\x20default\x20không\x20cần\x20close',null,'w'),await releaseLock(screenData),!![];for(let _0x142d12=0xa;_0x142d12<screenData[_0x12d7a5(0x20a)]-0x1;_0x142d12+=0x3){const _0x5adb7c=Atomics[_0x12d7a5(0x226)](screenData,_0x142d12);if(_0x5adb7c===0x1){const _0x3c5e47=Atomics['load'](screenData,_0x142d12+0x1),_0xe7da7f=Atomics[_0x12d7a5(0x226)](screenData,_0x142d12+0x2);if(_0x3c5e47===_0x2a8d34['x']&&_0xe7da7f===_0x2a8d34['y'])return Atomics[_0x12d7a5(0x227)](screenData,_0x142d12,0x2),log(_0x42fd18,_0x12d7a5(0x1d9)+_0x142d12+_0x12d7a5(0x237),null,'w'),Atomics['notify'](screenData,_0x142d12),await releaseLock(screenData),!![];}}await releaseLock(screenData);throw new Error(_0x12d7a5(0x177)+_0x46f3cf+_0x12d7a5(0x1df)+json(_0x2a8d34));}else return log(_0x42fd18,'[worker1.procScreenArr]\x20posVal:'+json(_0x2a8d34)+_0x12d7a5(0x19b)+_0x46f3cf,null,'w'),await releaseLock(screenData),!![];}}catch(_0x19a610){return log(_0x42fd18,_0x12d7a5(0x1d5)+_0x19a610+_0x12d7a5(0x221)+_0x46f3cf+_0x12d7a5(0x1df)+json(_0x2a8d34),null,![]),await releaseLock(screenData),![];}}async function acquireLock(_0x21e544,_0x4564cd=0x7530){const _0x1f0b97=a0_0x37bda7,_0x4689c9=Date[_0x1f0b97(0x218)]();while(Atomics['compareExchange'](_0x21e544,0x8,0x0,0x1)!==0x0){if(Date[_0x1f0b97(0x218)]()-_0x4689c9>_0x4564cd)throw new Error(_0x1f0b97(0x196));Atomics['wait'](_0x21e544,0x8,0x1,_0x4564cd);}}async function releaseLock(_0x169fc0){const _0x50e9c9=a0_0x37bda7;Atomics[_0x50e9c9(0x227)](_0x169fc0,0x8,0x0),Atomics[_0x50e9c9(0x1e7)](_0x169fc0,0x8);}function a0_0x524c(){const _0x534555=['][xuLyProfiles]:\x20Lỗi\x20khi\x20xử\x20lý\x20profile\x20','findIndex','height','[loadGame]:\x20Script\x20','now','[closeBrowser]:\x20Đóng\x20trình\x20duyệt\x20','updateData','[xuLyGame]:\x20Loop\x20lại\x20,\x20loop\x20lại\x20lần\x20','botTimeout','[checkTeleWebOpen]:\x20Thực\x20thi\x20','[OpenBrowser]]Chỉ\x20có\x20','[xuLyGame]:\x20','[worker1.procScreenArr]vào\x20close','\x20action:\x20','[xoaTimeout]worker1:\x20Xóa\x20timeout:','ref','\x20không\x20phải\x20là\x20một\x20hàm\x20hợp\x20lệ','name','load','store','https://www.google.com','][xuLyTask]:\x20Không\x20lấy\x20được\x20dữ\x20liệu\x20profiles\x20','[worker1.procScreenArr]vào\x20open',']:\x20Script\x20Mode','[xuLyBrowser]:\x20Bot\x20OK','[OpenBrowser]:\x20Processing\x20profile:\x20','join','][xuLyProfiles]:\x20Lỗi\x20:\x20','[OpenBrowser]\x20Lỗi\x20khi\x20đóng\x20tab\x20mới','][xuLyProfiles]:\x20Thêm\x20profile\x20','close','][xuLyTask]:\x20Task\x20','nextrun','allSettled','profiles','\x20set\x20close\x20ok','screenArr','value','api',']:\x20START\x20SCRIPT','scale','Không\x20thể\x20đóng\x20màn\x20hình:\x20vị\x20trí\x20không\x20hợp\x20lệ\x20action:\x20','taskIndex','DONE','\x20tab\x20đang\x20mở','tele_id','entries','36YBzocV','[xuLyTungProfile]:\x20Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng','][xuLyProfiles]:\x20Một\x20số\x20profiles\x20gặp\x20lỗi:\x20','[xuLyBrowser]:\x20không\x20lấy\x20được\x20bot','\x20done','[loadGame]:scriptPath\x20','nextRun','Start','5hTDPYS','Vào','\x20loop','5791291MSydoN','\x20lỗi','\x20set\x20open\x20default\x20pos:','function','Done','\x20Web\x20OK','timGame','Lỗi\x20xử\x20lý\x20profile:\x20','[xuLyBrowser]:\x20browser\x20disconnected\x20','[checkTeleWebOpen]:\x20','nextrunstamp','running','][xuLyTask]:\x20Hoàn\x20thành\x20xử\x20lý\x20task:\x20','No\x20profile\x20found','Timeout\x20while\x20acquiring\x20lock','dirname','customBrowserPosition','][xuLyTask]:\x20không\x20lấy\x20được\x20profile','browserWidthHeight','\x20Action:','[xuLyGame]:\x20Thực\x20thi\x20','open','FistUrl','\x20không\x20trả\x20về\x20status','env','START\x20SCRIPT','768730qrFEpj','loop','tele','1883GSIPXI','[loadGame]:\x20Chạy\x20','][xuLyTask]:\x20Tasks:\x20','[xuLyBrowser]:\x20Bot\x20không\x20tìm\x20thấy','\x20chưa\x20đến\x20thời\x20gian\x20chạy',':\x20Bot\x20','[OpenBrowser]\x20Đóng\x20tab\x20mới\x20thành\x20công','\x20vào\x20hàng\x20đợi.','nowTime','connected','[xuLyBrowser]:browserInfo:\x20','Lỗi\x20gì\x20đó\x20task\x20','coin','[xuLyTungProfile]0:\x20Kiểm\x20tra\x20màn\x20hình\x20','tinhThoiGian','[worker1data.task]:data.task\x20','[xuLyGame]:\x20getAks\x20OK','\x20Tele\x20K\x20OK','compareExchange','4QUewwS','StartApi','STOP\x20SCRIPT','worker1','3848478HIgAvq','[xuLyGame]:\x20checkTeleWebOpen\x20OK','message','rejected','Lỗi\x20','nextRunStamp','\x20sau\x20','default','aks','\x20vào\x20hàng\x20đợi\x20max:','status','scripts','onOff','width',':\x20XONG\x201\x20LƯỢT','[xuLyBrowser]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20browser:\x20','[eTimeout]worker1:\x20timeout','][ERR]:\x20STOP\x20SCRIPT','type','[closeBrowser]:\x20Không\x20có\x20trình\x20duyệt\x20để\x20đóng','Stop','1745157vnFHic','\x20|\x20nextrun:\x20','timeout','[checkTeleWebOpen]:\x20dataId:\x20','[worker1.procScreenArr]lỗi\x20','date','profileThreads','183795ohxiNh','[worker1.procScreenArr]\x20index:','Version:','script','\x20Web\x20mode','][xuLyProfiles]index:\x20','nextRunTime',',\x20pos:\x20','autoSetBrowserPosition','[checkTeleWebOpen]:\x20Lỗi\x20trong\x20quá\x20trình\x20mở\x20trang\x20:\x20','setTitle','[closeBrowser]:\x20Lỗi\x20khi\x20đóng\x20trình\x20duyệt\x20','[OpenBrowser]:\x20GenLogin:\x20','\x20ok','split','notify','][xuLyTask]:\x20Lỗi\x20while:\x20','addData','closeTab','][xuLyTask]:\x20Chờ\x205\x20giây\x20trước\x20khi\x20xử\x20lý\x20task\x20tiếp\x20theo...','[xuLyGame]:Max\x20loop\x20rồi\x20bro','timestamp','][ERR]:\x20Lỗi\x20','[checkTeleWebOpen]:\x20Thực\x20thi\x20script\x20','loop\x20new\x20game','[xoaTimeout]worker1:\x20Xóa\x20Interval:','end','[loadGame]:\x20Lỗi\x20khi\x20load\x20và\x20thực\x20thi\x20script\x20','7576vOgCcH','\x20Script\x20mode','Không\x20tìm\x20thấy\x20indexGenP','Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng','[xuLyTungProfile]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile','getAks','4834288TUQGyo','filter',':\x20Sai\x20aks\x20','HostName','fisrtOpenBrowser','elementExistsByXPath','\x20Chưa\x20tới\x20giờ\x20chạy','[xuLyTungProfile]:\x20Lỗi:\x20','[xuLyBrowser]:\x20Không\x20mở\x20được\x20trình\x20duyệt\x20','[eTimeout]worker1:\x20reset\x20timeout','getAllProfiles\x20','InputSearch','\x20thành\x20công','No\x20bot\x20found','][xuLyTask]:\x20currentDateTime:\x20','openUrl','length','SERVER_HOST','[xuLyGame]:\x20checkTeleWebOpen\x20có\x20gì\x20đó\x20sai\x20sai\x20rồi\x20bro','[xoaTimeout]worker1:\x20','Fail','stringify','][xuLyTask]:\x20vào\x20xuLyTask','[xuLyGame]:\x20Sai\x20aks\x20','207ZCgTWR','getBotAll'];a0_0x524c=function(){return _0x534555;};return a0_0x524c();}async function xoaTimeout(_0x5ad8fd){const _0x514003=a0_0x37bda7;try{clearTimeout(_0x5ad8fd),log(_0x514003(0x222)+_0x5ad8fd,null,'i','clrTimeout');}catch(_0x1767fc){log(_0x514003(0x20d)+_0x1767fc,null,![]);}}async function xoaInterval(_0x5bb3a4){const _0x1afc27=a0_0x37bda7;try{clearInterval(_0x5bb3a4),log(_0x1afc27(0x1f1)+_0x5bb3a4,null,'i','clrInterval');}catch(_0x1f1ea1){log('[xoaTimeout]worker1:\x20'+_0x1f1ea1,null,![]);}}async function delay(_0x525475){return new Promise(async _0x3d763e=>{setTimeout(_0x3d763e,_0x525475);});}async function eTimeout(){const _0x24e9fa=a0_0x37bda7;return log(_0x24e9fa(0x1cc),null,'w'),Atomics[_0x24e9fa(0x227)](tasksData,taskInfo[_0x24e9fa(0x178)],0x1),!![];}async function cTimeout(){const _0xaca63a=a0_0x37bda7;if(Atomics[_0xaca63a(0x226)](tasksData,taskInfo[_0xaca63a(0x178)])===0x1)return!![];return null;}async function rstTimeout(){const _0x292f18=a0_0x37bda7;return log(_0x292f18(0x203),null,'w'),Atomics[_0x292f18(0x1b7)](tasksData,taskInfo[_0x292f18(0x178)],0x1,0x2),!![];}
const a0_0x489c48=a0_0x1799;(function(_0x1aa956,_0x2a9c60){const _0x245a6d=a0_0x1799,_0x1706cf=_0x1aa956();while(!![]){try{const _0x449d18=parseInt(_0x245a6d(0x115))/0x1*(-parseInt(_0x245a6d(0x11d))/0x2)+parseInt(_0x245a6d(0xc3))/0x3+parseInt(_0x245a6d(0x143))/0x4*(-parseInt(_0x245a6d(0xcc))/0x5)+parseInt(_0x245a6d(0x12c))/0x6+-parseInt(_0x245a6d(0x104))/0x7+parseInt(_0x245a6d(0x17c))/0x8*(-parseInt(_0x245a6d(0x118))/0x9)+parseInt(_0x245a6d(0xde))/0xa*(parseInt(_0x245a6d(0x101))/0xb);if(_0x449d18===_0x2a9c60)break;else _0x1706cf['push'](_0x1706cf['shift']());}catch(_0x4ad658){_0x1706cf['push'](_0x1706cf['shift']());}}}(a0_0x416a,0xe3248));import'dotenv/config';import a0_0x409d23 from'fs';import a0_0x5f4e1b from'path';import{fileURLToPath,pathToFileURL}from'url';import{expose}from'threads/worker';import{log,json}from'./modules/logger.js';import a0_0x12a26e from'./modules/Genlogin.js';import a0_0x3ae80c from'./modules/http.js';import a0_0x837642 from'p-queue';const __filename=fileURLToPath(import.meta[a0_0x489c48(0x10f)]),__dirname=a0_0x5f4e1b['dirname'](__filename);let profileQueue,genlogin,http,getAllProfiles,taskInfo,GenDataProfile,timgame;genlogin=new a0_0x12a26e('',!![]),http=new a0_0x3ae80c(process[a0_0x489c48(0x13d)][a0_0x489c48(0x13f)],process[a0_0x489c48(0x13d)]['APIKEY'],!![]);let firstRun=!![],delayOpenProfile=0xbb8,profileTimeout=0x5265c0,botTimeout=0x5265c0,profileThreads=0x1,browserInfo={},version,screenData,tasksData,screenDataBuffer1,tasksDataBuffer1,teleId=null;const worker1=async _0x45e0cd=>{const _0x5b499b=a0_0x489c48,{version0:_0x4997bf,tasksDataBuffer:_0x122765,screenDataBuffer:_0x2a3964,action:_0x27714e,task:_0x404e9e,dataBrw:_0x4551f8,GenDataProfile0:_0x4c6c35,timgame0:_0x3c9899,timeout:_0x2dda62,tele_id:_0xab8897}=_0x45e0cd;taskInfo=_0x404e9e;_0xab8897&&_0xab8897[_0x5b499b(0x156)]&&(teleId=_0xab8897['tele_id']);screenDataBuffer1=_0x2a3964,tasksDataBuffer1=_0x122765,screenData=new Int32Array(_0x2a3964),tasksData=new Int32Array(_0x122765);try{if(_0x2dda62)return log(_0x5b499b(0xc8),_0x5b499b(0x12a),null,'w'),await clearVar(),{'success':![],'error':_0x5b499b(0x12a)};else{if(_0x404e9e!==_0x5b499b(0x10a)){version=_0x4997bf,getAllProfiles=_0x4551f8,log(_0x5b499b(0xc8),_0x5b499b(0x106)+JSON[_0x5b499b(0x16a)](_0x45e0cd[_0x5b499b(0x17b)]),null,'c'),log(_0x5b499b(0xc8),_0x5b499b(0x10c)+JSON[_0x5b499b(0x16a)](getAllProfiles),null,'c'),GenDataProfile=_0x4c6c35,timgame=_0x3c9899,log(_0x5b499b(0xc8),'['+_0x404e9e[_0x5b499b(0x127)]+_0x5b499b(0xd0),null,'w');const _0x1188e0=await xuLyTask(_0x404e9e);return log(_0x5b499b(0xc8),''+JSON[_0x5b499b(0x16a)](_0x1188e0),null,'w'),log('worker1','DONE',null,'w',_0x5b499b(0x160)),await clearVar(),_0x1188e0?{'success':!![],'result':_0x1188e0}:{'success':![],'result':_0x1188e0};}else return log(_0x5b499b(0xc8),_0x5b499b(0x120)+_0x404e9e,null,'w'),await clearVar(),{'success':![],'error':_0x5b499b(0xc8)};}}catch(_0xf3080e){return log(_0x5b499b(0xc8),_0x5b499b(0xe3)+_0xf3080e,null,![]),await clearVar(),{'success':![],'error':_0x5b499b(0xc8)};}};expose({'worker1':worker1});async function clearVar(){return genlogin=null,http=null,!![];}async function xuLyTask(_0x3423e1){const _0x458a02=a0_0x489c48;try{log('worker1','['+_0x3423e1[_0x458a02(0x127)]+_0x458a02(0x128),null,'i','-');const _0x1bfc67=await genlogin['nowTime'](_0x458a02(0xc8)),_0x2490cd=_0x1bfc67['date'];if(_0x2490cd<_0x3423e1[_0x458a02(0xf4)])return log('worker1','['+_0x3423e1['name']+_0x458a02(0x174)+JSON[_0x458a02(0x16a)](_0x3423e1[_0x458a02(0x127)])+_0x458a02(0x161),null,'i'),log('worker1','['+_0x3423e1['name']+_0x458a02(0xd1)+JSON['stringify'](_0x1bfc67)+_0x458a02(0xd9)+JSON[_0x458a02(0x16a)](_0x3423e1['nextrun']),null,'w'),log(_0x458a02(0xc8),'['+_0x3423e1['name']+_0x458a02(0xd1)+JSON[_0x458a02(0x16a)](_0x2490cd)+_0x458a02(0xd9)+JSON['stringify'](taskNextRunDateTime),null,'w'),log('worker1','['+_0x3423e1[_0x458a02(0x127)]+_0x458a02(0x103),null,'i'),await delay(0x1388),null;let _0x3710ca=await http[_0x458a02(0x184)]('worker1',_0x3423e1[_0x458a02(0x127)]);if(_0x3710ca[_0x458a02(0x179)][_0x458a02(0xd4)][_0x458a02(0x185)]<=0x0){log(_0x458a02(0xc8),'['+_0x3423e1[_0x458a02(0x127)]+_0x458a02(0x136),null,![]);throw new Error(_0x458a02(0x147));}firstRun&&(profileThreads=parseInt(_0x3423e1[_0x458a02(0x109)]),profileQueue=new a0_0x837642({'concurrency':profileThreads}),log(_0x458a02(0xc8),'['+_0x3423e1[_0x458a02(0x127)]+_0x458a02(0xfd)+profileThreads,null,'w'),firstRun=![],delayOpenProfile=parseInt(_0x3423e1[_0x458a02(0xe8)])*0x3e8,profileTimeout=parseInt(_0x3423e1['profileTimeout'])*0x3e8,botTimeout=parseInt(_0x3423e1[_0x458a02(0x16e)])*0x3e8);const _0x264b90=await xuLyProfiles(_0x3710ca['value']['profiles'],_0x3423e1[_0x458a02(0x127)]);if(!_0x264b90){log(_0x458a02(0xc8),'['+_0x3423e1[_0x458a02(0x127)]+_0x458a02(0x111)+json(_0x264b90),null,![]);throw new Error(_0x458a02(0x147));}return log(_0x458a02(0xc8),'['+_0x3423e1[_0x458a02(0x127)]+_0x458a02(0xc1)+_0x3423e1[_0x458a02(0x127)]+_0x458a02(0x14a)),await delay(0x7d0),log(_0x458a02(0xc8),'['+_0x3423e1[_0x458a02(0x127)]+_0x458a02(0x108)+JSON[_0x458a02(0x16a)](_0x3423e1[_0x458a02(0x127)])),!![];}catch(_0xfe3e52){return log(_0x458a02(0xc8),'['+_0x3423e1[_0x458a02(0x127)]+'][xuLyTask]:\x20Lỗi\x20while:\x20'+_0xfe3e52,null,![]),null;}}async function xuLyProfiles(_0x5b1dd9,_0x54323d){const _0x583738=a0_0x489c48;try{const _0x30c57e=[];for(const [_0x2b8c61,_0x2def71]of _0x5b1dd9[_0x583738(0x13a)]()){const _0x5b7712=await GenDataProfile[_0x583738(0xec)](_0x3dcaca=>_0x3dcaca[_0x583738(0xc9)]===_0x2def71);if(_0x2b8c61!==-0x1)log(_0x583738(0xc8),'['+_0x54323d+'][xuLyProfiles]index:\x20'+_0x5b7712);else{log(_0x583738(0xc8),'['+_0x54323d+_0x583738(0x133));throw new Error(_0x583738(0xed));}log(_0x583738(0xc8),'['+_0x54323d+_0x583738(0x170)+_0x2def71+_0x583738(0x15d)+profileThreads,null,'i'),_0x30c57e[_0x583738(0x145)](profileQueue[_0x583738(0xdb)](async()=>{const _0x5910f=_0x583738;try{delayOpenProfile>0x0?(log(_0x5910f(0xc8),'['+_0x54323d+_0x5910f(0xfc)+_0x2def71+_0x5910f(0x11b)+delayOpenProfile+'ms',null,'w','-'),await delay(delayOpenProfile)):log(_0x5910f(0xc8),'['+_0x54323d+_0x5910f(0xfc)+_0x2def71,null,'w','-'),await xuLyTungProfile(_0x2def71,GenDataProfile[_0x5b7712]);}catch(_0x4f4d02){log(_0x5910f(0xc8),'['+_0x54323d+_0x5910f(0x110)+_0x2def71+':\x20'+_0x4f4d02[_0x5910f(0x169)],null,![]);throw _0x4f4d02;}})),log(_0x583738(0xc8),'['+_0x54323d+_0x583738(0x13c)+_0x2def71+_0x583738(0xce));}const _0x189a27=await Promise[_0x583738(0xef)](_0x30c57e),_0xde7036=_0x189a27[_0x583738(0xe0)](_0x58d435=>_0x58d435[_0x583738(0x149)]===_0x583738(0xcb));return _0xde7036[_0x583738(0x185)]>0x0?log('worker1','['+_0x54323d+_0x583738(0xf2)+JSON[_0x583738(0x16a)](_0xde7036),null,![]):log(_0x583738(0xc8),'['+_0x54323d+_0x583738(0xf8)+json(_0x189a27)),!![];}catch(_0x54f041){return log(_0x583738(0xc8),'['+_0x54323d+'][xuLyProfiles]:\x20Lỗi\x20:\x20'+_0x54f041,null,![]),null;}}function a0_0x1799(_0x248347,_0x35a14a){const _0x416a67=a0_0x416a();return a0_0x1799=function(_0x179943,_0x3070b6){_0x179943=_0x179943-0xc1;let _0x132bd3=_0x416a67[_0x179943];return _0x132bd3;},a0_0x1799(_0x248347,_0x35a14a);}async function xuLyTungProfile(_0x78aeda,_0x1c73c6){const _0x5a27dc=a0_0x489c48;let _0x309cb5,_0x1f2405;const _0x4e0ae0=_0x78aeda;let _0x298258;try{await delay(delayOpenProfile),log(_0x78aeda,_0x5a27dc(0xfe),null,'i'),_0x309cb5=await genlogin['nowTime'](_0x78aeda),await http[_0x5a27dc(0xfa)]('worker1',_0x78aeda,_0x5a27dc(0xc7),_0x309cb5[_0x5a27dc(0x15f)],'','Version:'+version,'Start');teleId&&await http[_0x5a27dc(0xf3)](_0x78aeda,teleId,'['+_0x78aeda+_0x5a27dc(0x186));log(_0x78aeda,_0x5a27dc(0x141)+_0x78aeda,null,'w'),_0x298258=await procScreenArr('open',null,_0x78aeda);if(_0x298258['x']===undefined||_0x298258['y']===undefined){log(_0x78aeda,'[xuLyTungProfile]:\x20Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng',null,![]);throw new Error(_0x5a27dc(0xe9));}const _0x154484=await xuLyBrowser(_0x78aeda,_0x1c73c6,_0x298258);await procScreenArr(_0x5a27dc(0x14c),_0x298258,_0x78aeda);const _0x576be5=await genlogin[_0x5a27dc(0xf6)](_0x309cb5[_0x5a27dc(0x17a)]);return await http[_0x5a27dc(0xfa)](_0x5a27dc(0xc8),_0x78aeda,'STOP\x20SCRIPT','','',_0x576be5,'Stop'),teleId&&await http[_0x5a27dc(0xf3)](_0x78aeda,teleId,'['+_0x78aeda+'][OK]:\x20STOP\x20SCRIPT'),_0x154484;}catch(_0x3652a1){log(_0x78aeda,_0x5a27dc(0x148)+_0x3652a1,null,![]);if(_0x1f2405)await Thread[_0x5a27dc(0x116)](_0x1f2405);await procScreenArr(_0x5a27dc(0x14c),_0x298258,_0x78aeda);const _0x1f25ee=await genlogin['tinhThoiGian'](_0x309cb5?.[_0x5a27dc(0x17a)]||Date[_0x5a27dc(0x155)]());await http[_0x5a27dc(0xfa)]('worker1',_0x78aeda,_0x5a27dc(0xe2),'','',_0x1f25ee,'Stop');teleId&&await http[_0x5a27dc(0xf3)](_0x78aeda,teleId,'['+_0x78aeda+_0x5a27dc(0x135));throw _0x3652a1;}}async function xuLyBrowser(_0x119221,_0x1a4177,_0xef9cbc){const _0x48925d=a0_0x489c48;let _0xbf3445;try{const _0x28abbc=_0x119221;if(!browserInfo[_0x119221])browserInfo[_0x119221]={};browserInfo[_0x119221][_0x48925d(0xe4)]=0x0,log(_0x119221,'[xuLyBrowser]:browserInfo:\x20'+json(browserInfo),null,'w','w');if(browserInfo[_0x119221][_0x48925d(0xe4)]==0x0){_0xbf3445=await OpenBrowser(_0x119221,_0x1a4177,_0xef9cbc);if(!_0xbf3445){log(_0x119221,_0x48925d(0x14f)+_0x119221,null,![]);throw new Error(_0x48925d(0x14f)+_0x119221);}browserInfo[_0x119221][_0x48925d(0xe4)]=0x1;}if(!_0xbf3445['connected'])throw new Error(_0x48925d(0x12e)+_0x119221);let _0xf3f607=0x0;const _0x41fc4e=await http[_0x48925d(0xeb)]('worker1',_0x28abbc);if(!_0x41fc4e){log(_0x119221,_0x48925d(0x13b),null,![]);throw new Error(_0x48925d(0x15c));}if(_0x41fc4e[_0x48925d(0x185)]<=0x0){log(_0x119221,_0x48925d(0x16b),null,![]);throw new Error('No\x20bot\x20found');}for(const _0x1b0013 of _0x41fc4e){if(_0x1b0013){if(_0x1b0013[_0x48925d(0x137)]!='script')continue;if(_0x1b0013[_0x48925d(0x179)]==='end'){log(_0x119221,_0x48925d(0x15e),null,'i');break;}if(!_0x1b0013['aks']){log(_0x119221,_0x48925d(0x157)+json(_0x1b0013)+'\x20ko\x20có\x20aks',null,![]);continue;}if(_0x1b0013['onOff']==='0'){log(_0x119221,':\x20Bot\x20'+json(_0x1b0013['name'])+_0x48925d(0xff),null,![]);continue;}const _0x188fde=await genlogin[_0x48925d(0x14b)](_0x119221);if(_0x1b0013[_0x48925d(0x12b)]>_0x188fde[_0x48925d(0x17a)]){log(_0x119221,':\x20Bot\x20'+json(_0x1b0013[_0x48925d(0x127)])+_0x48925d(0x183),null,'w');continue;}switch(_0x1b0013['aks']){case'A':log(_0x119221,':\x20'+json(_0x1b0013[_0x48925d(0x127)])+_0x48925d(0x177)),await xuLyGame(_0x1b0013,'A',_0x119221,_0x1a4177,_0xef9cbc,_0xbf3445);break;case'K':log(_0x119221,':\x20'+json(_0x1b0013[_0x48925d(0x127)])+_0x48925d(0x122)),await xuLyGame(_0x1b0013,'K',_0x119221,_0x1a4177,_0xef9cbc,_0xbf3445);break;case'W':log(_0x119221,':\x20'+json(_0x1b0013[_0x48925d(0x127)])+_0x48925d(0xdd)),await xuLyGame(_0x1b0013,'W',_0x119221,_0x1a4177,_0xef9cbc,_0xbf3445);break;default:log(_0x119221,':\x20Sai\x20aks\x20'+json(_0x1b0013[_0x48925d(0x121)]),null,![]);break;}log(_0x119221,'[xuLyBrowser]:\x20Bot\x20OK');}}return await closeBrowser(_0x119221,_0xbf3445),!![];}catch(_0x1dd48d){return log(_0x119221,_0x48925d(0x119)+_0x1dd48d,null,![]),log(_0x119221,_0x48925d(0x168)+json(getAllProfiles),null,'w','w'),await closeBrowser(_0x119221,_0xbf3445),null;}}async function xuLyGame(_0x5616ef,_0x2c443a,_0x408e6e,_0x1d2ea8,_0x4e0256,_0x218f8e){const _0x220f98=a0_0x489c48;try{const _0x93164=_0x408e6e;if(_0x5616ef[_0x220f98(0x137)]===_0x220f98(0x163)){log(_0x408e6e,_0x220f98(0xe5)+_0x5616ef[_0x220f98(0x127)]+_0x220f98(0x16c),null,'i');const _0x4f66b3=await genlogin[_0x220f98(0x14b)](_0x408e6e),_0x389fdf=await http[_0x220f98(0xfa)](_0x408e6e,_0x93164,_0x5616ef['name'],_0x4f66b3[_0x220f98(0x15f)],'',_0x220f98(0x152),_0x220f98(0xd2)),_0x32e088=_0x389fdf['ID'],_0x2cbc5b={'bot':_0x5616ef,'profileNameId':_0x408e6e,'genlogin':genlogin,'http':http,'dataId':_0x32e088},_0x2d0242=await loadGameApi(_0x5616ef[_0x220f98(0x127)],_0x2cbc5b);if(!_0x2d0242[_0x220f98(0x149)])return log(_0x408e6e,_0x220f98(0x12f)+_0x5616ef['name']+_0x220f98(0x146),null,![]),await http[_0x220f98(0x113)](_0x408e6e,_0x93164,_0x32e088,_0x220f98(0x153),_0x220f98(0x153)),null;if(_0x2d0242[_0x220f98(0x149)]==_0x220f98(0x139))return log(_0x408e6e,_0x220f98(0x12f)+_0x5616ef[_0x220f98(0x127)]+_0x220f98(0x129),null,'i'),_0x220f98(0x139);if(_0x2d0242[_0x220f98(0x149)])return log(_0x408e6e,'[xuLyGame]:\x20Thực\x20thi\x20'+_0x5616ef[_0x220f98(0x127)]+_0x220f98(0x17e)),await http[_0x220f98(0xca)](_0x408e6e,_0x93164,_0x5616ef['id'],_0x2d0242[_0x220f98(0x10b)],_0x2d0242[_0x220f98(0x12b)]),await http[_0x220f98(0x113)](_0x408e6e,_0x93164,_0x32e088,'Ok','Done',_0x2d0242[_0x220f98(0x16d)],_0x2d0242[_0x220f98(0x10b)]),!![];}else{if(_0x2c443a=='A'||_0x2c443a=='K'){log(_0x408e6e,'[xuLyGame]:\x20'+_0x5616ef['name']+_0x220f98(0xc4),null,'w','-');const _0x33e112=await http[_0x220f98(0xd7)](_0x408e6e,_0x2c443a);if(_0x33e112){log(_0x408e6e,_0x220f98(0x165));let _0x575b05=0x0;while(_0x575b05<0x2){const _0x270b6d=await checkTeleWebOpen(_0x5616ef,_0x33e112,_0x408e6e,_0x4e0256,_0x218f8e);if(_0x270b6d===_0x220f98(0x139))_0x575b05++,log(_0x408e6e,_0x220f98(0x151)+_0x575b05+'/2',null,'i'),await delay(0x3e8);else return _0x270b6d?(log(_0x408e6e,_0x220f98(0x124)),!![]):(log(_0x408e6e,_0x220f98(0x176),null,![]),null);}return log(_0x408e6e,'[xuLyGame]:Max\x20loop\x20rồi\x20bro',null,![]),null;}}else{if(_0x2c443a=='W'){log(_0x408e6e,'[xuLyGame]:\x20'+_0x5616ef[_0x220f98(0x127)]+'\x20Web\x20mode',null,'w','-');const _0x4fa23b=await checkTeleWebOpen(_0x5616ef,_0x2c443a,_0x408e6e,_0x4e0256,_0x218f8e);return _0x4fa23b?(log(_0x408e6e,_0x220f98(0x124)),!![]):(log(_0x408e6e,_0x220f98(0x176),null,![]),null);}else return log(_0x408e6e,_0x220f98(0x114)+_0x2c443a,null,![]),null;}}}catch(_0x1b7b00){return log(_0x408e6e,'[xuLyGame]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20Game:\x20'+_0x1b7b00,null,![]),null;}}function a0_0x416a(){const _0x2d9755=['api','\x20action:\x20','[xuLyGame]:\x20getAks\x20OK','clrTimeout','setTitle','[xuLyBrowser]:getAllProfiles:\x20','message','stringify','[xuLyBrowser]:\x20không\x20lấy\x20được\x20bot','\x20Api\x20mode','coin','botTimeout','[OpenBrowser]:force\x20set\x20Position:\x20','][xuLyProfiles]:\x20Thêm\x20profile\x20','\x20không\x20trả\x20về\x20status','[worker1.procScreenArr]\x20index:','[xoaTimeout]worker1:\x20Xóa\x20timeout:','][xuLyTask]:\x20Task\x20','Memory','[xuLyGame]:\x20checkTeleWebOpen\x20có\x20gì\x20đó\x20sai\x20sai\x20rồi\x20bro','\x20Tele\x20A\x20OK','height','value','timestamp','task','8sakCur','customBrowserPosition','\x20done','closeTab','Tìm','Done','href','\x20Chưa\x20tới\x20giờ\x20chạy','getTask','length',']:\x20START\x20SCRIPT','][xuLyTask]:\x20Tasks:\x20','wait','70203hBCpIv','\x20Script\x20mode','InputSearch','][ERR]:\x20Lỗi\x20','START\x20SCRIPT','worker1','pid','nextRunTime','rejected','1527540huvmxr','HostName','\x20vào\x20hàng\x20đợi.','Không\x20thể\x20đóng\x20màn\x20hình:\x20vị\x20trí\x20không\x20hợp\x20lệ\x20action:\x20',']:\x20Script\x20Mode','][xuLyTask]:\x20currentDateTime:\x20','running','pages','profiles','[checkTeleWebOpen]:\x20Không\x20tìm\x20thấy\x20game\x20','https://www.google.com','getAks','[checkTeleWebOpen]:\x20','\x20|\x20nextrun:\x20','Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng','add',',\x20pos:\x20','\x20Web\x20OK','35470cdMiTS','scripts','filter','activateTab','STOP\x20SCRIPT','Lỗi\x20','fisrtOpenBrowser','[xuLyGame]:\x20','connected','clrInterval','delayOpenProfile','Không\x20tìm\x20thấy\x20giá\x20trị\x20status=0','compareExchange','getBotAll','findIndex','Không\x20tìm\x20thấy\x20indexGenP','[eTimeout]worker1:\x20reset\x20timeout','allSettled','[OpenBrowser]]Chỉ\x20có\x20','[loadGame]:\x20Script\x20','][xuLyProfiles]:\x20Một\x20số\x20profiles\x20gặp\x20lỗi:\x20','tele','nextrunstamp','[checkTeleWebOpen]:\x20Lỗi\x20trong\x20quá\x20trình\x20mở\x20trang\x20:\x20','tinhThoiGian','[OpenBrowser]\x20Đóng\x20tab\x20mới\x20thành\x20công','][xuLyProfiles]:\x20Đã\x20xử\x20lý\x20tất\x20cả\x20profiles\x20thành\x20công\x20','default','addData','openUrl','][xuLyProfiles]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile\x20','][xuLyTask]profileQueue:\x20concurrency:','[xuLyTungProfile]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile','\x20OFF','[worker1.procScreenArr]vào\x20close','9119APSCiZ','[worker1.procScreenArr]action:\x20','][xuLyTask]:\x20Chờ\x205\x20giây\x20trước\x20khi\x20xử\x20lý\x20task\x20tiếp\x20theo...','7043071myzTGR','[checkTeleWebOpen]:\x20dataId:\x20','[worker1data.task]:data.task\x20','ref','][xuLyTask]:\x20Hoàn\x20thành\x20xử\x20lý\x20task:\x20','profileThreads','screenArr','nextRun','getAllProfiles\x20','taskIndex','width','url','][xuLyProfiles]:\x20Lỗi\x20khi\x20xử\x20lý\x20profile\x20','][xuLyTask]:\x20Không\x20lấy\x20được\x20dữ\x20liệu\x20profiles\x20','\x20set\x20close\x20ok','updateData','[xuLyGame]:\x20Sai\x20aks\x20','297LqmiIA','terminate','[OpenBrowser]:\x20Processing\x20profile:\x20','721269sIbDmw','[xuLyBrowser]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20browser:\x20','[checkTeleWebOpen]:\x20Thực\x20thi\x20script\x20','\x20sau\x20','connect','5954NixSSG','[worker1.procScreenArr]vị\x20trí\x20default\x20không\x20cần\x20close','[OpenBrowser]\x20Lỗi\x20khi\x20đóng\x20tab\x20mới','Lỗi\x20gì\x20đó\x20task\x20','aks','\x20Tele\x20K\x20OK','[xoaTimeout]worker1:\x20','[xuLyGame]:\x20checkTeleWebOpen\x20OK','notify','countOpenTabs','name','][xuLyTask]:\x20vào\x20xuLyTask','\x20loop','timeout','nextRunStamp','8787090lDhPsS','load','[xuLyBrowser]:\x20browser\x20disconnected\x20','[xuLyGame]:\x20Thực\x20thi\x20','[closeBrowser]:\x20Đóng\x20trình\x20duyệt\x20','[worker1.procScreenArr]\x20posVal:','scale','][xuLyProfiles]Không\x20tìm\x20thấy\x20indexGenP','[xoaTimeout]worker1:\x20Xóa\x20Interval:','][ERR]:\x20STOP\x20SCRIPT','][xuLyTask]:\x20không\x20lấy\x20được\x20profile','type','\x20thành\x20công','loop','entries','[xuLyBrowser]:\x20Bot\x20không\x20tìm\x20thấy','][xuLyProfiles]:\x20Đã\x20thêm\x20profile\x20','env','[eTimeout]worker1:\x20timeout','SERVER_HOST','browserWidthHeight','[xuLyTungProfile]0:\x20Kiểm\x20tra\x20màn\x20hình\x20','\x20set\x20open\x20ok\x20pos:','20hKvRjs','[checkTeleWebOpen]:\x20vào\x20loadGame','push','\x20lỗi','No\x20profile\x20found','[xuLyTungProfile]:\x20Lỗi:\x20','status','\x20ok','nowTime','close','Lỗi\x20xử\x20lý\x20profile:\x20','[checkTeleWebOpen]:\x20Thực\x20thi\x20','[xuLyBrowser]:\x20Không\x20mở\x20được\x20trình\x20duyệt\x20','Garbage\x20Collector\x20đã\x20chạy!','[xuLyGame]:\x20Loop\x20lại\x20,\x20loop\x20lại\x20lần\x20','StartApi','Fail','[loadGame]:scriptPath\x20','now','tele_id',':\x20Bot\x20','open','[worker1.procScreenArr]vào\x20open','split','elementExistsByXPath','No\x20bot\x20found','\x20vào\x20hàng\x20đợi\x20max:',':\x20XONG\x201\x20LƯỢT','date','done','\x20chưa\x20đến\x20thời\x20gian\x20chạy','store'];a0_0x416a=function(){return _0x2d9755;};return a0_0x416a();}async function OpenBrowser(_0x30586e,_0x5a701d,_0x67f307){const _0x490238=a0_0x489c48;try{const _0x56c570=_0x30586e;log(_0x30586e,_0x490238(0x117)+JSON[_0x490238(0x16a)](_0x30586e),null,'i');if(getAllProfiles['autoSetBrowserPosition']==='n'){const _0x112519=getAllProfiles[_0x490238(0x17d)][_0x490238(0x15a)]('x');parseInt(_0x112519[0x0])>=0x0&&parseInt(_0x112519[0x1])>=0x0?(_0x67f307['x']=parseInt(_0x112519[0x0]),_0x67f307['y']=parseInt(_0x112519[0x1])):(_0x67f307['x']=0x0,_0x67f307['y']=0x0),log(_0x30586e,_0x490238(0x16f)+_0x67f307['x']+'x'+_0x67f307['y'],null,'w');}const _0x1b0645=await genlogin[_0x490238(0x11c)](_0x30586e,getAllProfiles,_0x5a701d,_0x67f307);log(_0x30586e,'[OpenBrowser]:\x20GenLogin:\x20'+JSON[_0x490238(0x16a)](_0x1b0645),null,'i'),await delay(0x1388);if(_0x1b0645){let _0x1c636a=0x0;const _0x2c0ecc=0xa;while(_0x1c636a<_0x2c0ecc){_0x1c636a++;const _0x5334a2=await genlogin[_0x490238(0x126)](_0x30586e,_0x1b0645);if(_0x5334a2<=0x1)return log(_0x30586e,_0x490238(0xf0)+_0x5334a2+'\x20tab\x20đang\x20mở',null,'i'),_0x1b0645;const _0x138e00=await genlogin[_0x490238(0x17f)](_0x30586e,_0x1b0645,_0x5334a2-0x1,0xbb8);if(!_0x138e00){log(_0x30586e,_0x490238(0x11f),null,![]);continue;}log(_0x30586e,_0x490238(0xf7)),await delay(0xbb8);continue;}}return log(_0x30586e,'[OpenBrowser]:\x20Lỗi\x20khi\x20mở\x20browser:\x20'+JSON[_0x490238(0x16a)](_0x30586e)),null;}catch(_0x436ef1){throw new Error(_0x490238(0x14d)+_0x436ef1[_0x490238(0x169)]);}}async function checkTeleWebOpen(_0x12a374,_0x206429,_0x1651b3,_0x428a6c,_0x406c63){const _0x58fac1=a0_0x489c48;let _0x26d7ab,_0x300591;try{_0x300591=await genlogin[_0x58fac1(0xe1)](_0x1651b3,_0x406c63,0x0,getAllProfiles[_0x58fac1(0x140)],_0x428a6c[_0x58fac1(0x132)]);if(_0x206429!='W'){const _0x3c2227=await genlogin[_0x58fac1(0x15b)](_0x1651b3,_0x300591,_0x206429[_0x58fac1(0xc5)],0x7d0);!_0x3c2227&&(await genlogin['openUrl'](_0x1651b3,_0x300591,_0x58fac1(0xd6),0xea60),await delay(0x7d0),await genlogin[_0x58fac1(0xfb)](_0x1651b3,_0x300591,_0x206429['FistUrl'],0xea60),await genlogin['setTitle'](_0x1651b3,_0x300591,_0x1651b3),await delay(0x1388));}else _0x206429='W',await genlogin[_0x58fac1(0xfb)](_0x1651b3,_0x300591,'https://www.google.com',0xea60),await delay(0x7d0),await genlogin[_0x58fac1(0xfb)](_0x1651b3,_0x300591,_0x12a374[_0x58fac1(0x107)],0xea60),await genlogin[_0x58fac1(0x167)](_0x1651b3,_0x300591,_0x1651b3),await delay(0x1388);log(_0x1651b3,_0x58fac1(0x144),null,'i');const _0x509db8=await genlogin[_0x58fac1(0x14b)](_0x1651b3),_0x359bc3=await http[_0x58fac1(0xfa)](_0x1651b3,_0x1651b3,_0x12a374['name'],_0x509db8[_0x58fac1(0x15f)],'','Start',_0x58fac1(0xd2));_0x26d7ab=_0x359bc3['ID'];const _0x20edb4={'firstPage':_0x300591,'bot':_0x12a374,'profileNameId':_0x1651b3,'getAks':_0x206429,'genlogin':genlogin,'http':http,'browser':_0x406c63,'dataId':_0x359bc3['ID'],'taskIndex':taskInfo[_0x58fac1(0x10d)],'screenDataBuffer2':screenDataBuffer1,'tasksDataBuffer2':tasksDataBuffer1};let _0x43ec24=null;log(_0x1651b3,_0x58fac1(0x105)+json(_0x26d7ab),null,'i');if(timgame&&_0x206429!='W'){await http[_0x58fac1(0x113)](_0x1651b3,_0x1651b3,_0x26d7ab,_0x58fac1(0x180));const _0x102dc8=await loadGame('timGame',_0x20edb4,_0x43ec24,_0x26d7ab,_0x1651b3);if(_0x102dc8[_0x58fac1(0x149)]=='loop')return log(_0x1651b3,_0x58fac1(0x14e)+_0x12a374['name']+'\x20loop',null,'i'),await http[_0x58fac1(0x113)](_0x1651b3,_0x1651b3,_0x26d7ab,'loop\x20new\x20game'),_0x58fac1(0x139);else{if(!_0x102dc8)return log(_0x1651b3,_0x58fac1(0xd5)+_0x12a374['name'],null,![]),await http['updateData'](_0x1651b3,_0x1651b3,_0x26d7ab,_0x58fac1(0x153),'Fail'),null;}_0x102dc8[_0x58fac1(0xcd)]&&(_0x43ec24=_0x102dc8[_0x58fac1(0xcd)]);}await http['updateData'](_0x1651b3,_0x1651b3,_0x26d7ab,'Vào');const _0x298f8e=await loadGame(_0x12a374['name'],_0x20edb4,_0x43ec24,_0x26d7ab,_0x1651b3);if(!_0x298f8e[_0x58fac1(0x149)])return log(_0x1651b3,'[checkTeleWebOpen]:\x20Không\x20thực\x20thi\x20script\x20'+_0x12a374['name'],null,![]),log(_0x1651b3,_0x58fac1(0xd8)+json(_0x298f8e),null,![]),await http[_0x58fac1(0x113)](_0x1651b3,_0x1651b3,_0x26d7ab,'Fail',_0x58fac1(0x153)),null;else{if(_0x298f8e[_0x58fac1(0x149)]==_0x58fac1(0x139))return log(_0x1651b3,_0x58fac1(0x14e)+_0x12a374['name']+_0x58fac1(0x129),null,'i'),await http[_0x58fac1(0x113)](_0x1651b3,_0x1651b3,_0x26d7ab,_0x58fac1(0x139)),_0x58fac1(0x139);}return await http['nextRunTime'](_0x1651b3,_0x1651b3,_0x12a374['id'],_0x298f8e[_0x58fac1(0x10b)],_0x298f8e['nextRunStamp']),await http[_0x58fac1(0x113)](_0x1651b3,_0x1651b3,_0x26d7ab,'Ok',_0x58fac1(0x181),_0x298f8e[_0x58fac1(0x16d)],_0x298f8e[_0x58fac1(0x10b)]),log(_0x1651b3,_0x58fac1(0x11a)+_0x12a374[_0x58fac1(0x127)]+_0x58fac1(0x138)),await delay(0x7d0),_0x26d7ab=null,_0x300591=null,!![];}catch(_0x3ad0fd){return log(_0x1651b3,_0x58fac1(0xf5)+_0x3ad0fd,null,![]),await http[_0x58fac1(0x113)](_0x1651b3,_0x1651b3,_0x26d7ab,_0x58fac1(0x153),'Fail'),_0x26d7ab=null,_0x300591=null,null;}}async function loadGame(_0x3eba45,_0x312bde,_0xa268fb,_0x394d54,_0x3931b8){const _0x265680=a0_0x489c48;try{const _0x44cd2f=pathToFileURL(a0_0x5f4e1b['join'](__dirname,_0x265680(0xdf),_0x3eba45+'.js'))[_0x265680(0x182)];log(_0x3931b8,_0x265680(0x154)+_0x44cd2f);const _0x1985a7=await import(_0x44cd2f);if(typeof _0x1985a7['default']==='function'){const _0x550374=await _0x1985a7[_0x265680(0xf9)](_0x312bde,_0xa268fb);await delay(0x3e8);if(!_0x550374['status'])return log(_0x3931b8,_0x265680(0xf1)+_0x3eba45+_0x265680(0x171),null,![]),null;else return _0x550374['status']===_0x265680(0x139)?(log(_0x3931b8,'[loadGame]:\x20Chạy\x20'+_0x3eba45+_0x265680(0x129),null,'i'),_0x550374):(log(_0x3931b8,'[loadGame]:\x20Chạy\x20'+_0x3eba45+'\x20'+_0x550374[_0x265680(0x149)],null,'i'),_0x550374);}else return await delay(0x3e8),log(_0x3931b8,_0x265680(0xf1)+_0x3eba45+'\x20không\x20phải\x20là\x20một\x20hàm\x20hợp\x20lệ',null,![]),null;}catch(_0x2ae01d){return log(_0x3931b8,'[loadGame]:\x20Lỗi\x20khi\x20load\x20và\x20thực\x20thi\x20script\x20'+_0x3eba45+':\x20'+_0x2ae01d,null,![]),teleId&&await http[_0x265680(0xf3)](_0x3931b8,teleId,'['+_0x3931b8+']['+_0x3eba45+_0x265680(0xc6)+_0x2ae01d),null;}}async function closeBrowser(_0x4e0817='',_0x3d4c9f){const _0x5a31d7=a0_0x489c48;try{if(_0x3d4c9f){if(_0x3d4c9f[_0x5a31d7(0xe6)]){for(const _0x56e1a4 of await _0x3d4c9f[_0x5a31d7(0xd3)]()){await _0x56e1a4[_0x5a31d7(0x14c)]();}return await _0x3d4c9f[_0x5a31d7(0x14c)](),_0x3d4c9f=null,global['gc']&&(global['gc'](),log(_0x5a31d7(0x175),_0x5a31d7(0x150),null,'i','+')),log(_0x4e0817,_0x5a31d7(0x130)+_0x4e0817+_0x5a31d7(0x138),null,'w'),!![];}}else log(_0x4e0817,'[closeBrowser]:\x20Không\x20có\x20trình\x20duyệt\x20để\x20đóng',null,'i');return null;}catch(_0x2fa0d1){return log(_0x4e0817,'[closeBrowser]:\x20Lỗi\x20khi\x20đóng\x20trình\x20duyệt\x20'+_0x4e0817+':\x20'+_0x2fa0d1,null,![]),null;}}async function procScreenArr(_0x27473e,_0x1344f6,_0x492aad){const _0x319a87=a0_0x489c48;try{await acquireLock(screenData);let _0x1fb4f3={};log(_0x492aad,_0x319a87(0x102)+_0x27473e+_0x319a87(0xdc)+json(_0x1344f6),null,'w','-');if(_0x27473e===_0x319a87(0x158)){log(_0x492aad,_0x319a87(0x159),null,'w'),_0x1fb4f3[_0x319a87(0x132)]=Atomics[_0x319a87(0x12d)](screenData,0x1)/0xf4240,_0x1fb4f3[_0x319a87(0x10e)]=Atomics[_0x319a87(0x12d)](screenData,0x2),_0x1fb4f3[_0x319a87(0x178)]=Atomics[_0x319a87(0x12d)](screenData,0x3);for(let _0x193a95=0xa;_0x193a95<screenData[_0x319a87(0x185)]-0x1;_0x193a95=_0x193a95+0x3){const _0x1ee6d7=Atomics[_0x319a87(0x12d)](screenData,_0x193a95);if(_0x1ee6d7===0x2)return Atomics['store'](screenData,_0x193a95,0x1),_0x1fb4f3[_0x319a87(0xf9)]=0x0,_0x1fb4f3['x']=Atomics[_0x319a87(0x12d)](screenData,_0x193a95+0x1),_0x1fb4f3['y']=Atomics['load'](screenData,_0x193a95+0x2),log(_0x492aad,_0x319a87(0x172)+_0x193a95+_0x319a87(0x142)+json(_0x1fb4f3),null,'w'),await releaseLock(screenData),_0x1fb4f3;if(_0x1ee6d7===0x0)return Atomics[_0x319a87(0x162)](screenData,_0x193a95,0x1),_0x1fb4f3['default']=0x1,_0x1fb4f3['x']=0x0,_0x1fb4f3['y']=0x0,log(_0x492aad,_0x319a87(0x172)+_0x193a95+'\x20set\x20open\x20default\x20pos:'+json(_0x1fb4f3),null,'w'),await releaseLock(screenData),_0x1fb4f3;}await releaseLock(screenData);throw new Error(_0x319a87(0xda));}else{if(_0x27473e===_0x319a87(0x14c)&&_0x1344f6['x']>=0x0&&_0x1344f6['y']>=0x0){log(_0x492aad,_0x319a87(0x100),null,'w');if(_0x1344f6[_0x319a87(0xf9)]===0x1)return log(_0x492aad,_0x319a87(0x11e),null,'w'),await releaseLock(screenData),!![];for(let _0x20f252=0xa;_0x20f252<screenData['length']-0x1;_0x20f252+=0x3){const _0x12a252=Atomics[_0x319a87(0x12d)](screenData,_0x20f252);if(_0x12a252===0x1){const _0x1a6c86=Atomics[_0x319a87(0x12d)](screenData,_0x20f252+0x1),_0x5bc727=Atomics[_0x319a87(0x12d)](screenData,_0x20f252+0x2);if(_0x1a6c86===_0x1344f6['x']&&_0x5bc727===_0x1344f6['y'])return Atomics[_0x319a87(0x162)](screenData,_0x20f252,0x2),log(_0x492aad,_0x319a87(0x172)+_0x20f252+_0x319a87(0x112),null,'w'),Atomics[_0x319a87(0x125)](screenData,_0x20f252),await releaseLock(screenData),!![];}}await releaseLock(screenData);throw new Error(_0x319a87(0xcf)+_0x27473e+',\x20pos:\x20'+json(_0x1344f6));}else return log(_0x492aad,_0x319a87(0x131)+json(_0x1344f6)+'\x20Action:'+_0x27473e,null,'w'),await releaseLock(screenData),!![];}}catch(_0x288717){return log(_0x492aad,'[worker1.procScreenArr]lỗi\x20'+_0x288717+_0x319a87(0x164)+_0x27473e+',\x20pos:\x20'+json(_0x1344f6),null,![]),await releaseLock(screenData),![];}}async function acquireLock(_0x1782cb,_0x4ccfb1=0x7530){const _0x312c09=a0_0x489c48,_0x2623a3=Date['now']();while(Atomics[_0x312c09(0xea)](_0x1782cb,0x8,0x0,0x1)!==0x0){if(Date[_0x312c09(0x155)]()-_0x2623a3>_0x4ccfb1)throw new Error('Timeout\x20while\x20acquiring\x20lock');Atomics[_0x312c09(0xc2)](_0x1782cb,0x8,0x1,_0x4ccfb1);}}async function releaseLock(_0x5ae488){const _0x2c6e5c=a0_0x489c48;Atomics['store'](_0x5ae488,0x8,0x0),Atomics[_0x2c6e5c(0x125)](_0x5ae488,0x8);}async function xoaTimeout(_0x3a392a){const _0x303fda=a0_0x489c48;try{clearTimeout(_0x3a392a),log(_0x303fda(0x173)+_0x3a392a,null,'i',_0x303fda(0x166));}catch(_0x352fb3){log(_0x303fda(0x123)+_0x352fb3,null,![]);}}async function xoaInterval(_0x28bcde){const _0x23350e=a0_0x489c48;try{clearInterval(_0x28bcde),log(_0x23350e(0x134)+_0x28bcde,null,'i',_0x23350e(0xe7));}catch(_0x54ee05){log(_0x23350e(0x123)+_0x54ee05,null,![]);}}async function delay(_0x428172){return new Promise(async _0x5cc47c=>{setTimeout(_0x5cc47c,_0x428172);});}async function eTimeout(){const _0x491cf4=a0_0x489c48;return log(_0x491cf4(0x13e),null,'w'),Atomics[_0x491cf4(0x162)](tasksData,taskInfo[_0x491cf4(0x10d)],0x1),!![];}async function cTimeout(){const _0x16e636=a0_0x489c48;if(Atomics[_0x16e636(0x12d)](tasksData,taskInfo[_0x16e636(0x10d)])===0x1)return!![];return null;}async function rstTimeout(){const _0x2a41ef=a0_0x489c48;return log(_0x2a41ef(0xee),null,'w'),Atomics['compareExchange'](tasksData,taskInfo[_0x2a41ef(0x10d)],0x1,0x2),!![];}
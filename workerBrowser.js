const a0_0x10a905=a0_0x33fb;(function(_0x3978dd,_0x52ad98){const _0x15dbd9=a0_0x33fb,_0x2a1460=_0x3978dd();while(!![]){try{const _0xc78715=parseInt(_0x15dbd9(0xe0))/0x1+parseInt(_0x15dbd9(0xda))/0x2+-parseInt(_0x15dbd9(0x1a0))/0x3*(parseInt(_0x15dbd9(0x156))/0x4)+-parseInt(_0x15dbd9(0xf2))/0x5*(parseInt(_0x15dbd9(0x194))/0x6)+-parseInt(_0x15dbd9(0x17c))/0x7*(-parseInt(_0x15dbd9(0x114))/0x8)+-parseInt(_0x15dbd9(0x146))/0x9+parseInt(_0x15dbd9(0x13a))/0xa*(-parseInt(_0x15dbd9(0x139))/0xb);if(_0xc78715===_0x52ad98)break;else _0x2a1460['push'](_0x2a1460['shift']());}catch(_0x380f1c){_0x2a1460['push'](_0x2a1460['shift']());}}}(a0_0x1342,0x27cdd));import'dotenv/config';import a0_0xbb256d from'fs';import a0_0x55e184 from'path';import{fileURLToPath,pathToFileURL}from'url';import{expose}from'threads/worker';import{log,json}from'./modules/logger.js';import a0_0x2d230a from'./modules/Genlogin.js';import a0_0x3158bf from'./modules/http.js';import a0_0x3fbce5 from'p-queue';const __filename=fileURLToPath(import.meta[a0_0x10a905(0xed)]),__dirname=a0_0x55e184[a0_0x10a905(0xf7)](__filename);let profileQueue,genlogin,http,getAllProfiles,taskInfo,GenDataProfile,timgame;function a0_0x33fb(_0x24c67f,_0x557ce7){const _0x1342a8=a0_0x1342();return a0_0x33fb=function(_0x33fbf1,_0x1f1b4d){_0x33fbf1=_0x33fbf1-0xd4;let _0x32d0ca=_0x1342a8[_0x33fbf1];return _0x32d0ca;},a0_0x33fb(_0x24c67f,_0x557ce7);}genlogin=new a0_0x2d230a('',!![]),http=new a0_0x3158bf(process[a0_0x10a905(0xdf)][a0_0x10a905(0x11c)],process[a0_0x10a905(0xdf)][a0_0x10a905(0x148)],!![]);let firstRun=!![],delayOpenProfile=0xbb8,profileTimeout=0x5265c0,botTimeout=0x5265c0,profileThreads=0x1,browserInfo={},version,screenData,tasksData,screenDataBuffer1,tasksDataBuffer1,teleId=null;const worker1=async _0x547e71=>{const _0x10ddf1=a0_0x10a905,{version0:_0x1df540,tasksDataBuffer:_0x285caf,screenDataBuffer:_0xa3fb1,action:_0x1bf1bd,task:_0x4ee20c,dataBrw:_0x4ee0be,GenDataProfile0:_0x4c2eef,timgame0:_0x841aea,timeout:_0x44cc16,tele_id:_0x37d50c}=_0x547e71;taskInfo=_0x4ee20c;_0x37d50c&&_0x37d50c[_0x10ddf1(0x137)]&&(teleId=_0x37d50c['tele_id']);screenDataBuffer1=_0xa3fb1,tasksDataBuffer1=_0x285caf,screenData=new Int32Array(_0xa3fb1),tasksData=new Int32Array(_0x285caf);try{if(_0x44cc16)return log(_0x10ddf1(0xe6),_0x10ddf1(0x118),null,'w'),await clearVar(),{'success':![],'error':_0x10ddf1(0x118)};else{if(_0x4ee20c!=='screenArr'){version=_0x1df540,getAllProfiles=_0x4ee0be,log(_0x10ddf1(0xe6),'[worker1data.task]:data.task\x20'+JSON[_0x10ddf1(0x15d)](_0x547e71[_0x10ddf1(0x125)]),null,'c'),log(_0x10ddf1(0xe6),_0x10ddf1(0x176)+JSON[_0x10ddf1(0x15d)](getAllProfiles),null,'c'),GenDataProfile=_0x4c2eef,timgame=_0x841aea,log(_0x10ddf1(0xe6),'['+_0x4ee20c[_0x10ddf1(0x18d)]+_0x10ddf1(0xe8),null,'w');const _0x23fc87=await xuLyTask(_0x4ee20c);return log(_0x10ddf1(0xe6),''+JSON[_0x10ddf1(0x15d)](_0x23fc87),null,'w'),log(_0x10ddf1(0xe6),_0x10ddf1(0x104),null,'w',_0x10ddf1(0x144)),await clearVar(),_0x23fc87?{'success':!![],'result':_0x23fc87}:{'success':![],'result':_0x23fc87};}else return log(_0x10ddf1(0xe6),'Lỗi\x20gì\x20đó\x20task\x20'+_0x4ee20c,null,'w'),await clearVar(),{'success':![],'error':'worker1'};}}catch(_0x2e4ddb){return log('worker1',_0x10ddf1(0x116)+_0x2e4ddb,null,![]),await clearVar(),{'success':![],'error':_0x10ddf1(0xe6)};}};expose({'worker1':worker1});async function clearVar(){return genlogin=null,http=null,!![];}async function xuLyTask(_0x1cf389){const _0x236d1b=a0_0x10a905;try{log(_0x236d1b(0xe6),'['+_0x1cf389[_0x236d1b(0x18d)]+'][xuLyTask]:\x20vào\x20xuLyTask',null,'i','-');const _0x3fd475=await genlogin['nowTime'](_0x236d1b(0xe6)),_0x497238=_0x3fd475[_0x236d1b(0x16f)];if(_0x497238<_0x1cf389['nextrunstamp'])return log(_0x236d1b(0xe6),'['+_0x1cf389[_0x236d1b(0x18d)]+_0x236d1b(0x196)+JSON['stringify'](_0x1cf389['name'])+_0x236d1b(0x13c),null,'i'),log('worker1','['+_0x1cf389[_0x236d1b(0x18d)]+_0x236d1b(0xe3)+JSON['stringify'](_0x3fd475)+_0x236d1b(0x12b)+JSON[_0x236d1b(0x15d)](_0x1cf389[_0x236d1b(0x13b)]),null,'w'),log(_0x236d1b(0xe6),'['+_0x1cf389[_0x236d1b(0x18d)]+_0x236d1b(0xe3)+JSON[_0x236d1b(0x15d)](_0x497238)+_0x236d1b(0x12b)+JSON[_0x236d1b(0x15d)](taskNextRunDateTime),null,'w'),log(_0x236d1b(0xe6),'['+_0x1cf389[_0x236d1b(0x18d)]+_0x236d1b(0x178),null,'i'),await delay(0x1388),null;let _0x217a3a=await http[_0x236d1b(0x126)](_0x236d1b(0xe6),_0x1cf389[_0x236d1b(0x18d)]);if(_0x217a3a[_0x236d1b(0x106)]['profiles'][_0x236d1b(0x191)]<=0x0){log(_0x236d1b(0xe6),'['+_0x1cf389[_0x236d1b(0x18d)]+'][xuLyTask]:\x20không\x20lấy\x20được\x20profile',null,![]);throw new Error(_0x236d1b(0x14e));}firstRun&&(profileThreads=parseInt(_0x1cf389[_0x236d1b(0x10e)]),profileQueue=new a0_0x3fbce5({'concurrency':profileThreads}),log(_0x236d1b(0xe6),'['+_0x1cf389['name']+_0x236d1b(0xd7)+profileThreads,null,'w'),firstRun=![],delayOpenProfile=parseInt(_0x1cf389[_0x236d1b(0x158)])*0x3e8,profileTimeout=parseInt(_0x1cf389[_0x236d1b(0x128)])*0x3e8,botTimeout=parseInt(_0x1cf389[_0x236d1b(0x10d)])*0x3e8);const _0x40f535=await xuLyProfiles(_0x217a3a['value']['profiles'],_0x1cf389['name']);if(!_0x40f535){log(_0x236d1b(0xe6),'['+_0x1cf389['name']+_0x236d1b(0x166)+json(_0x40f535),null,![]);throw new Error(_0x236d1b(0x14e));}return log(_0x236d1b(0xe6),'['+_0x1cf389[_0x236d1b(0x18d)]+_0x236d1b(0x14f)+_0x1cf389[_0x236d1b(0x18d)]+_0x236d1b(0xec)),await delay(0x7d0),log(_0x236d1b(0xe6),'['+_0x1cf389[_0x236d1b(0x18d)]+_0x236d1b(0x120)+JSON[_0x236d1b(0x15d)](_0x1cf389[_0x236d1b(0x18d)])),!![];}catch(_0x8d6664){return log(_0x236d1b(0xe6),'['+_0x1cf389[_0x236d1b(0x18d)]+_0x236d1b(0x15c)+_0x8d6664,null,![]),null;}}async function xuLyProfiles(_0x475131,_0x3757d2){const _0x3f63ed=a0_0x10a905;try{const _0x40d74c=[];for(const [_0x5775d5,_0x39594c]of _0x475131[_0x3f63ed(0x147)]()){const _0x31f124=await GenDataProfile[_0x3f63ed(0x119)](_0x55ba6d=>_0x55ba6d[_0x3f63ed(0x169)]===_0x39594c);if(_0x5775d5!==-0x1)log(_0x3f63ed(0xe6),'['+_0x3757d2+_0x3f63ed(0x142)+_0x31f124);else{log(_0x3f63ed(0xe6),'['+_0x3757d2+_0x3f63ed(0x17a));throw new Error(_0x3f63ed(0x15b));}log('worker1','['+_0x3757d2+_0x3f63ed(0x16a)+_0x39594c+_0x3f63ed(0x135)+profileThreads,null,'i'),_0x40d74c[_0x3f63ed(0x19b)](profileQueue[_0x3f63ed(0x13f)](async()=>{const _0x3a15f6=_0x3f63ed;try{delayOpenProfile>0x0?(log(_0x3a15f6(0xe6),'['+_0x3757d2+_0x3a15f6(0xf1)+_0x39594c+_0x3a15f6(0xff)+delayOpenProfile+'ms',null,'w','-'),await delay(delayOpenProfile)):log('worker1','['+_0x3757d2+'][xuLyProfiles]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile\x20'+_0x39594c,null,'w','-'),await xuLyTungProfile(_0x39594c,GenDataProfile[_0x31f124]);}catch(_0x29d451){log(_0x3a15f6(0xe6),'['+_0x3757d2+_0x3a15f6(0x181)+_0x39594c+':\x20'+_0x29d451[_0x3a15f6(0x1a3)],null,![]);throw _0x29d451;}})),log(_0x3f63ed(0xe6),'['+_0x3757d2+_0x3f63ed(0x117)+_0x39594c+_0x3f63ed(0x149));}const _0x54e8f2=await Promise[_0x3f63ed(0x186)](_0x40d74c),_0x25e1ec=_0x54e8f2[_0x3f63ed(0x105)](_0x3fa143=>_0x3fa143['status']==='rejected');return _0x25e1ec[_0x3f63ed(0x191)]>0x0?log(_0x3f63ed(0xe6),'['+_0x3757d2+_0x3f63ed(0x11b)+JSON['stringify'](_0x25e1ec),null,![]):log(_0x3f63ed(0xe6),'['+_0x3757d2+'][xuLyProfiles]:\x20Đã\x20xử\x20lý\x20tất\x20cả\x20profiles\x20thành\x20công\x20'+json(_0x54e8f2)),!![];}catch(_0x20e8ec){return log(_0x3f63ed(0xe6),'['+_0x3757d2+_0x3f63ed(0x141)+_0x20e8ec,null,![]),null;}}async function xuLyTungProfile(_0x2b0df4,_0x4e2ebd){const _0x5f1fd1=a0_0x10a905;let _0x3148d3,_0x115993;const _0x9344b7=_0x2b0df4;let _0x1f541a;try{await delay(delayOpenProfile),log(_0x2b0df4,_0x5f1fd1(0x188),null,'i'),_0x3148d3=await genlogin[_0x5f1fd1(0x103)](_0x2b0df4),await http[_0x5f1fd1(0x1a1)](_0x5f1fd1(0xe6),_0x2b0df4,_0x5f1fd1(0x14d),_0x3148d3['date'],'',_0x5f1fd1(0x179)+version,_0x5f1fd1(0x19e));teleId&&await http[_0x5f1fd1(0xf6)](_0x2b0df4,teleId,'['+_0x2b0df4+']:\x20START\x20SCRIPT');log(_0x2b0df4,'[xuLyTungProfile]0:\x20Kiểm\x20tra\x20màn\x20hình\x20'+_0x2b0df4,null,'w'),_0x1f541a=await procScreenArr(_0x5f1fd1(0xd9),null,_0x2b0df4);if(_0x1f541a['x']===undefined||_0x1f541a['y']===undefined){log(_0x2b0df4,_0x5f1fd1(0x16c),null,![]);throw new Error('Không\x20tìm\x20thấy\x20giá\x20trị\x20status=0');}const _0x8f6b48=await xuLyBrowser(_0x2b0df4,_0x4e2ebd,_0x1f541a);await procScreenArr(_0x5f1fd1(0xe4),_0x1f541a,_0x2b0df4);const _0x1df602=await genlogin[_0x5f1fd1(0x16b)](_0x3148d3[_0x5f1fd1(0x115)]);return await http['addData'](_0x5f1fd1(0xe6),_0x2b0df4,'STOP\x20SCRIPT','','',_0x1df602,_0x5f1fd1(0x133)),teleId&&await http[_0x5f1fd1(0xf6)](_0x2b0df4,teleId,'['+_0x2b0df4+_0x5f1fd1(0xfd)),process[_0x5f1fd1(0x162)](0x0),_0x8f6b48;}catch(_0x4bb53d){log(_0x2b0df4,_0x5f1fd1(0x159)+_0x4bb53d,null,![]);if(_0x115993)await Thread[_0x5f1fd1(0xfa)](_0x115993);await procScreenArr(_0x5f1fd1(0xe4),_0x1f541a,_0x2b0df4);const _0x5bd5fa=await genlogin[_0x5f1fd1(0x16b)](_0x3148d3?.[_0x5f1fd1(0x115)]||Date[_0x5f1fd1(0x19d)]());await http[_0x5f1fd1(0x1a1)](_0x5f1fd1(0xe6),_0x2b0df4,_0x5f1fd1(0x12f),'','',_0x5bd5fa,'Stop');teleId&&await http[_0x5f1fd1(0xf6)](_0x2b0df4,teleId,'['+_0x2b0df4+_0x5f1fd1(0x163));process[_0x5f1fd1(0x162)](0x0);throw _0x4bb53d;}}async function xuLyBrowser(_0x2e3606,_0x2f4fae,_0x4dbf54){const _0x3913b1=a0_0x10a905;let _0x25ebfb;try{const _0x6e0461=_0x2e3606;if(!browserInfo[_0x2e3606])browserInfo[_0x2e3606]={};browserInfo[_0x2e3606][_0x3913b1(0x17d)]=0x0,log(_0x2e3606,_0x3913b1(0x199)+json(browserInfo),null,'w','w');if(browserInfo[_0x2e3606][_0x3913b1(0x17d)]==0x0){_0x25ebfb=await OpenBrowser(_0x2e3606,_0x2f4fae,_0x4dbf54);if(!_0x25ebfb){log(_0x2e3606,_0x3913b1(0x180)+_0x2e3606,null,![]);throw new Error('[xuLyBrowser]:\x20Không\x20mở\x20được\x20trình\x20duyệt\x20'+_0x2e3606);}browserInfo[_0x2e3606]['fisrtOpenBrowser']=0x1;}if(!_0x25ebfb[_0x3913b1(0x155)])throw new Error('[xuLyBrowser]:\x20browser\x20disconnected\x20'+_0x2e3606);let _0xff7ca1=0x0;const _0x25879e=await http[_0x3913b1(0xe1)]('worker1',_0x6e0461);if(!_0x25879e){log(_0x2e3606,_0x3913b1(0x170),null,![]);throw new Error(_0x3913b1(0x18f));}if(_0x25879e[_0x3913b1(0x191)]<=0x0){log(_0x2e3606,_0x3913b1(0xf0),null,![]);throw new Error(_0x3913b1(0x18f));}for(const _0x277901 of _0x25879e){if(_0x277901){if(_0x277901[_0x3913b1(0x10a)]!=_0x3913b1(0x108))continue;if(_0x277901['value']===_0x3913b1(0xeb)){log(_0x2e3606,_0x3913b1(0x164),null,'i');break;}if(!_0x277901[_0x3913b1(0x195)]){log(_0x2e3606,_0x3913b1(0x143)+json(_0x277901)+_0x3913b1(0x185),null,![]);continue;}if(_0x277901[_0x3913b1(0x160)]==='0'){log(_0x2e3606,_0x3913b1(0x143)+json(_0x277901[_0x3913b1(0x18d)])+_0x3913b1(0x11e),null,![]);continue;}const _0x343848=await genlogin[_0x3913b1(0x103)](_0x2e3606);if(_0x277901[_0x3913b1(0x107)]>_0x343848[_0x3913b1(0x115)]){log(_0x2e3606,_0x3913b1(0x143)+json(_0x277901['name'])+_0x3913b1(0x11d),null,'w');continue;}switch(_0x277901['aks']){case'A':log(_0x2e3606,':\x20'+json(_0x277901[_0x3913b1(0x18d)])+'\x20Tele\x20A\x20OK'),await xuLyGame(_0x277901,'A',_0x2e3606,_0x2f4fae,_0x4dbf54,_0x25ebfb);break;case'K':log(_0x2e3606,':\x20'+json(_0x277901[_0x3913b1(0x18d)])+_0x3913b1(0x198)),await xuLyGame(_0x277901,'K',_0x2e3606,_0x2f4fae,_0x4dbf54,_0x25ebfb);break;case'W':log(_0x2e3606,':\x20'+json(_0x277901['name'])+_0x3913b1(0x111)),await xuLyGame(_0x277901,'W',_0x2e3606,_0x2f4fae,_0x4dbf54,_0x25ebfb);break;default:log(_0x2e3606,_0x3913b1(0x11f)+json(_0x277901['aks']),null,![]);break;}log(_0x2e3606,_0x3913b1(0x184));}}return await closeBrowser(_0x2e3606,_0x25ebfb),!![];}catch(_0x25e56a){return log(_0x2e3606,'[xuLyBrowser]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20browser:\x20'+_0x25e56a,null,![]),await closeBrowser(_0x2e3606,_0x25ebfb),null;}}async function xuLyGame(_0x13e9c7,_0x1ca837,_0x28814d,_0x32a322,_0x4bc792,_0x14fbbb){const _0x269b44=a0_0x10a905;try{const _0x3b7f05=_0x28814d;if(_0x13e9c7['type']===_0x269b44(0x101)){log(_0x28814d,_0x269b44(0x10f)+_0x13e9c7[_0x269b44(0x18d)]+_0x269b44(0xd5),null,'i');const _0x2c0e7d=await genlogin[_0x269b44(0x103)](_0x28814d),_0x5f1f80=await http['addData'](_0x28814d,_0x3b7f05,_0x13e9c7[_0x269b44(0x18d)],_0x2c0e7d['date'],'','StartApi',_0x269b44(0x112)),_0x15b4eb=_0x5f1f80['ID'],_0x2ace17={'bot':_0x13e9c7,'profileNameId':_0x28814d,'genlogin':genlogin,'http':http,'dataId':_0x15b4eb},_0x2c6463=await loadGameApi(_0x13e9c7['name'],_0x2ace17);if(!_0x2c6463[_0x269b44(0xf3)])return log(_0x28814d,_0x269b44(0xe5)+_0x13e9c7[_0x269b44(0x18d)]+'\x20lỗi',null,![]),await http[_0x269b44(0xdd)](_0x28814d,_0x3b7f05,_0x15b4eb,_0x269b44(0x165),_0x269b44(0x165)),null;if(_0x2c6463[_0x269b44(0xf3)]==_0x269b44(0x19a))return log(_0x28814d,_0x269b44(0xe5)+_0x13e9c7[_0x269b44(0x18d)]+'\x20loop',null,'i'),'loop';if(_0x2c6463[_0x269b44(0xf3)])return log(_0x28814d,_0x269b44(0xe5)+_0x13e9c7[_0x269b44(0x18d)]+'\x20done'),await http['nextRunTime'](_0x28814d,_0x3b7f05,_0x13e9c7['id'],_0x2c6463[_0x269b44(0x16d)],_0x2c6463[_0x269b44(0x107)]),await http[_0x269b44(0xdd)](_0x28814d,_0x3b7f05,_0x15b4eb,'Ok',_0x269b44(0xfb),_0x2c6463[_0x269b44(0xf8)],_0x2c6463[_0x269b44(0x16d)]),!![];}else{if(_0x1ca837=='A'||_0x1ca837=='K'){log(_0x28814d,'[xuLyGame]:\x20'+_0x13e9c7[_0x269b44(0x18d)]+_0x269b44(0x109),null,'w','-');const _0x497223=await http[_0x269b44(0x18c)](_0x28814d,_0x1ca837);if(_0x497223){log(_0x28814d,_0x269b44(0x100));let _0x31f9bc=0x0;while(_0x31f9bc<0x2){const _0x2b6126=await checkTeleWebOpen(_0x13e9c7,_0x497223,_0x28814d,_0x4bc792,_0x14fbbb);if(_0x2b6126===_0x269b44(0x19a))_0x31f9bc++,log(_0x28814d,_0x269b44(0x17b)+_0x31f9bc+'/2',null,'i'),await delay(0x3e8);else return _0x2b6126?(log(_0x28814d,_0x269b44(0xef)),!![]):(log(_0x28814d,_0x269b44(0x187),null,![]),null);}return log(_0x28814d,_0x269b44(0x127),null,![]),null;}}else{if(_0x1ca837=='W'){log(_0x28814d,_0x269b44(0x10f)+_0x13e9c7[_0x269b44(0x18d)]+'\x20Web\x20mode',null,'w','-');const _0x231123=await checkTeleWebOpen(_0x13e9c7,_0x1ca837,_0x28814d,_0x4bc792,_0x14fbbb);return _0x231123?(log(_0x28814d,_0x269b44(0xef)),!![]):(log(_0x28814d,_0x269b44(0x187),null,![]),null);}else return log(_0x28814d,_0x269b44(0x145)+_0x1ca837,null,![]),null;}}}catch(_0x42e76d){return log(_0x28814d,'[xuLyGame]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20Game:\x20'+_0x42e76d,null,![]),null;}}async function OpenBrowser(_0x1d3125,_0x3c25ab,_0x2a1585){const _0x4e1e82=a0_0x10a905;try{const _0x4959f0=_0x1d3125;log(_0x1d3125,_0x4e1e82(0x10c)+JSON[_0x4e1e82(0x15d)](_0x1d3125),null,'i');if(getAllProfiles[_0x4e1e82(0x190)]==='n'){const _0x4ca270=getAllProfiles[_0x4e1e82(0x113)][_0x4e1e82(0x134)]('x');parseInt(_0x4ca270[0x0])>=0x0&&parseInt(_0x4ca270[0x1])>=0x0?(_0x2a1585['x']=parseInt(_0x4ca270[0x0]),_0x2a1585['y']=parseInt(_0x4ca270[0x1])):(_0x2a1585['x']=0x0,_0x2a1585['y']=0x0),log(_0x1d3125,_0x4e1e82(0x130)+_0x2a1585['x']+'x'+_0x2a1585['y'],null,'w');}const _0x140034=await genlogin[_0x4e1e82(0x177)](_0x1d3125,getAllProfiles,_0x3c25ab,_0x2a1585);log(_0x1d3125,_0x4e1e82(0xe9)+JSON['stringify'](_0x140034),null,'i'),await delay(0x1388);if(_0x140034){let _0xd61ab2=0x0;const _0xb97f2e=0xa;while(_0xd61ab2<_0xb97f2e){_0xd61ab2++;const _0x3f354c=await genlogin[_0x4e1e82(0x12d)](_0x1d3125,_0x140034);if(_0x3f354c<=0x1)return log(_0x1d3125,_0x4e1e82(0x19f)+_0x3f354c+_0x4e1e82(0x14c),null,'i'),_0x140034;const _0x44e8ac=await genlogin[_0x4e1e82(0x129)](_0x1d3125,_0x140034,_0x3f354c-0x1,0xbb8);if(!_0x44e8ac){log(_0x1d3125,_0x4e1e82(0xee),null,![]);continue;}log(_0x1d3125,_0x4e1e82(0x174)),await delay(0xbb8);continue;}}return log(_0x1d3125,_0x4e1e82(0x152)+JSON[_0x4e1e82(0x15d)](_0x1d3125)),null;}catch(_0x51fc51){throw new Error(_0x4e1e82(0x11a)+_0x51fc51['message']);}}async function checkTeleWebOpen(_0x37211f,_0xa49a5d,_0x44dbe2,_0x4ff964,_0x3ea16f){const _0x26fb58=a0_0x10a905;let _0x2285ea,_0x1a091a;try{_0x1a091a=await genlogin[_0x26fb58(0xe2)](_0x44dbe2,_0x3ea16f,0x0,getAllProfiles[_0x26fb58(0xe7)],_0x4ff964[_0x26fb58(0xde)]);if(_0xa49a5d!='W'){const _0x21801d=await genlogin['elementExistsByXPath'](_0x44dbe2,_0x1a091a,_0xa49a5d['InputSearch'],0x7d0);!_0x21801d&&(await genlogin[_0x26fb58(0x136)](_0x44dbe2,_0x1a091a,'https://www.google.com',0xea60),await delay(0x7d0),await genlogin[_0x26fb58(0x136)](_0x44dbe2,_0x1a091a,_0xa49a5d['FistUrl'],0xea60),await genlogin[_0x26fb58(0x197)](_0x44dbe2,_0x1a091a,_0x44dbe2),await delay(0x1388));}else _0xa49a5d='W',await genlogin[_0x26fb58(0x136)](_0x44dbe2,_0x1a091a,_0x26fb58(0x157),0xea60),await delay(0x7d0),await genlogin[_0x26fb58(0x136)](_0x44dbe2,_0x1a091a,_0x37211f['ref'],0xea60),await genlogin[_0x26fb58(0x197)](_0x44dbe2,_0x1a091a,_0x44dbe2),await delay(0x1388);log(_0x44dbe2,_0x26fb58(0x122),null,'i');const _0x402736=await genlogin['nowTime'](_0x44dbe2),_0x2f1241=await http[_0x26fb58(0x1a1)](_0x44dbe2,_0x44dbe2,_0x37211f[_0x26fb58(0x18d)],_0x402736[_0x26fb58(0x16f)],'',_0x26fb58(0x19e),_0x26fb58(0x112));_0x2285ea=_0x2f1241['ID'];const _0x5accae={'firstPage':_0x1a091a,'bot':_0x37211f,'profileNameId':_0x44dbe2,'getAks':_0xa49a5d,'genlogin':genlogin,'http':http,'browser':_0x3ea16f,'dataId':_0x2f1241['ID'],'taskIndex':taskInfo['taskIndex'],'screenDataBuffer2':screenDataBuffer1,'tasksDataBuffer2':tasksDataBuffer1};let _0x3e60c4=null;log(_0x44dbe2,_0x26fb58(0x123)+json(_0x2285ea),null,'i');if(timgame&&_0xa49a5d!='W'){await http['updateData'](_0x44dbe2,_0x44dbe2,_0x2285ea,_0x26fb58(0x151));const _0x50fa89=await loadGame(_0x26fb58(0x12e),_0x5accae,_0x3e60c4,_0x2285ea,_0x44dbe2);if(_0x50fa89[_0x26fb58(0xf3)]==_0x26fb58(0x19a))return log(_0x44dbe2,_0x26fb58(0x150)+_0x37211f[_0x26fb58(0x18d)]+_0x26fb58(0x12c),null,'i'),await http['updateData'](_0x44dbe2,_0x44dbe2,_0x2285ea,'loop\x20new\x20game'),_0x26fb58(0x19a);else{if(!_0x50fa89)return log(_0x44dbe2,_0x26fb58(0x175)+_0x37211f[_0x26fb58(0x18d)],null,![]),await http[_0x26fb58(0xdd)](_0x44dbe2,_0x44dbe2,_0x2285ea,_0x26fb58(0x165),_0x26fb58(0x165)),null;}_0x50fa89[_0x26fb58(0xd8)]&&(_0x3e60c4=_0x50fa89[_0x26fb58(0xd8)]);}await http[_0x26fb58(0xdd)](_0x44dbe2,_0x44dbe2,_0x2285ea,_0x26fb58(0x15e));const _0x2f8f55=await loadGame(_0x37211f['name'],_0x5accae,_0x3e60c4,_0x2285ea,_0x44dbe2);if(!_0x2f8f55[_0x26fb58(0xf3)])return log(_0x44dbe2,_0x26fb58(0x192)+_0x37211f[_0x26fb58(0x18d)],null,![]),log(_0x44dbe2,_0x26fb58(0x131)+json(_0x2f8f55),null,![]),await http['updateData'](_0x44dbe2,_0x44dbe2,_0x2285ea,_0x26fb58(0x165),_0x26fb58(0x165)),null;else{if(_0x2f8f55[_0x26fb58(0xf3)]==_0x26fb58(0x19a))return log(_0x44dbe2,'[checkTeleWebOpen]:\x20Thực\x20thi\x20'+_0x37211f[_0x26fb58(0x18d)]+'\x20loop',null,'i'),await http['updateData'](_0x44dbe2,_0x44dbe2,_0x2285ea,_0x26fb58(0x19a)),_0x26fb58(0x19a);}return await http[_0x26fb58(0x1a4)](_0x44dbe2,_0x44dbe2,_0x37211f['id'],_0x2f8f55[_0x26fb58(0x16d)],_0x2f8f55[_0x26fb58(0x107)]),await http[_0x26fb58(0xdd)](_0x44dbe2,_0x44dbe2,_0x2285ea,'Ok','Done',_0x2f8f55['coin'],_0x2f8f55[_0x26fb58(0x16d)]),log(_0x44dbe2,_0x26fb58(0x19c)+_0x37211f[_0x26fb58(0x18d)]+'\x20thành\x20công'),await delay(0x7d0),_0x2285ea=null,_0x1a091a=null,!![];}catch(_0x5453bd){return log(_0x44dbe2,_0x26fb58(0xdc)+_0x5453bd,null,![]),await http['updateData'](_0x44dbe2,_0x44dbe2,_0x2285ea,_0x26fb58(0x165),_0x26fb58(0x165)),_0x2285ea=null,_0x1a091a=null,null;}}async function loadGame(_0x2d735e,_0x3e998c,_0x42403f,_0x3f7263,_0x31fabf){const _0x3aeef1=a0_0x10a905;try{const _0x5aa242=pathToFileURL(a0_0x55e184['join'](__dirname,_0x3aeef1(0x193),_0x2d735e+_0x3aeef1(0x102)))[_0x3aeef1(0x1a2)];log(_0x31fabf,_0x3aeef1(0xea)+_0x5aa242);const _0x5686ce=await import(_0x5aa242);if(typeof _0x5686ce[_0x3aeef1(0x16e)]===_0x3aeef1(0x13d)){const _0x32b3ea=await _0x5686ce[_0x3aeef1(0x16e)](_0x3e998c,_0x42403f);await delay(0x3e8);if(!_0x32b3ea['status'])return log(_0x31fabf,_0x3aeef1(0x138)+_0x2d735e+'\x20không\x20trả\x20về\x20status',null,![]),null;else return _0x32b3ea[_0x3aeef1(0xf3)]===_0x3aeef1(0x19a)?(log(_0x31fabf,'[loadGame]:\x20Chạy\x20'+_0x2d735e+'\x20loop',null,'i'),_0x32b3ea):(log(_0x31fabf,_0x3aeef1(0x14a)+_0x2d735e+'\x20'+_0x32b3ea[_0x3aeef1(0xf3)],null,'i'),_0x32b3ea);}else return await delay(0x3e8),log(_0x31fabf,_0x3aeef1(0x138)+_0x2d735e+_0x3aeef1(0x140),null,![]),null;}catch(_0x2f9843){return log(_0x31fabf,_0x3aeef1(0x18b)+_0x2d735e+':\x20'+_0x2f9843,null,![]),teleId&&await http[_0x3aeef1(0xf6)](_0x31fabf,teleId,'['+_0x31fabf+']['+_0x2d735e+_0x3aeef1(0x189)+_0x2f9843),null;}}async function closeBrowser(_0x2e8402='',_0x573191){const _0x39a3e4=a0_0x10a905;try{if(_0x573191){if(_0x573191['connected']){for(const _0x52eed8 of await _0x573191[_0x39a3e4(0x12a)]()){await _0x52eed8['close']();}return await _0x573191['close'](),_0x573191=null,global['gc']&&(global['gc'](),log(_0x39a3e4(0xfc),_0x39a3e4(0xd4),null,'i','+')),log(_0x2e8402,'[closeBrowser]:\x20Đóng\x20trình\x20duyệt\x20'+_0x2e8402+_0x39a3e4(0x17f),null,'w'),!![];}}else log(_0x2e8402,_0x39a3e4(0x161),null,'i');return null;}catch(_0x4f664c){return log(_0x2e8402,_0x39a3e4(0x172)+_0x2e8402+':\x20'+_0x4f664c,null,![]),null;}}async function procScreenArr(_0xcc8b36,_0x4abac5,_0x19b59d){const _0x28daa3=a0_0x10a905;try{await acquireLock(screenData);let _0x15d0a1={};log(_0x19b59d,'[worker1.procScreenArr]action:\x20'+_0xcc8b36+_0x28daa3(0xf4)+json(_0x4abac5),null,'w','-');if(_0xcc8b36===_0x28daa3(0xd9)){log(_0x19b59d,'[worker1.procScreenArr]vào\x20open',null,'w'),_0x15d0a1[_0x28daa3(0xde)]=Atomics[_0x28daa3(0x14b)](screenData,0x1)/0xf4240,_0x15d0a1[_0x28daa3(0x124)]=Atomics[_0x28daa3(0x14b)](screenData,0x2),_0x15d0a1[_0x28daa3(0x18e)]=Atomics[_0x28daa3(0x14b)](screenData,0x3);for(let _0x43e329=0xa;_0x43e329<screenData[_0x28daa3(0x191)]-0x1;_0x43e329=_0x43e329+0x3){const _0x3654cc=Atomics[_0x28daa3(0x14b)](screenData,_0x43e329);if(_0x3654cc===0x2)return Atomics[_0x28daa3(0x15a)](screenData,_0x43e329,0x1),_0x15d0a1[_0x28daa3(0x16e)]=0x0,_0x15d0a1['x']=Atomics[_0x28daa3(0x14b)](screenData,_0x43e329+0x1),_0x15d0a1['y']=Atomics[_0x28daa3(0x14b)](screenData,_0x43e329+0x2),log(_0x19b59d,_0x28daa3(0x182)+_0x43e329+_0x28daa3(0x171)+json(_0x15d0a1),null,'w'),await releaseLock(screenData),_0x15d0a1;if(_0x3654cc===0x0)return Atomics[_0x28daa3(0x15a)](screenData,_0x43e329,0x1),_0x15d0a1[_0x28daa3(0x16e)]=0x1,_0x15d0a1['x']=0x0,_0x15d0a1['y']=0x0,log(_0x19b59d,_0x28daa3(0x182)+_0x43e329+_0x28daa3(0x153)+json(_0x15d0a1),null,'w'),await releaseLock(screenData),_0x15d0a1;}await releaseLock(screenData);throw new Error('Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng');}else{if(_0xcc8b36===_0x28daa3(0xe4)&&_0x4abac5['x']>=0x0&&_0x4abac5['y']>=0x0){log(_0x19b59d,_0x28daa3(0x110),null,'w');if(_0x4abac5[_0x28daa3(0x16e)]===0x1)return log(_0x19b59d,_0x28daa3(0x121),null,'w'),await releaseLock(screenData),!![];for(let _0x5ff4bc=0xa;_0x5ff4bc<screenData[_0x28daa3(0x191)]-0x1;_0x5ff4bc+=0x3){const _0x30dc95=Atomics[_0x28daa3(0x14b)](screenData,_0x5ff4bc);if(_0x30dc95===0x1){const _0x16ac6c=Atomics[_0x28daa3(0x14b)](screenData,_0x5ff4bc+0x1),_0x433a23=Atomics[_0x28daa3(0x14b)](screenData,_0x5ff4bc+0x2);if(_0x16ac6c===_0x4abac5['x']&&_0x433a23===_0x4abac5['y'])return Atomics[_0x28daa3(0x15a)](screenData,_0x5ff4bc,0x2),log(_0x19b59d,_0x28daa3(0x182)+_0x5ff4bc+_0x28daa3(0xdb),null,'w'),Atomics[_0x28daa3(0x173)](screenData,_0x5ff4bc),await releaseLock(screenData),!![];}}await releaseLock(screenData);throw new Error(_0x28daa3(0x10b)+_0xcc8b36+_0x28daa3(0xf4)+json(_0x4abac5));}else return log(_0x19b59d,_0x28daa3(0xf5)+json(_0x4abac5)+_0x28daa3(0x13e)+_0xcc8b36,null,'w'),await releaseLock(screenData),!![];}}catch(_0x1cd3a6){return log(_0x19b59d,'[worker1.procScreenArr]lỗi\x20'+_0x1cd3a6+_0x28daa3(0x167)+_0xcc8b36+_0x28daa3(0xf4)+json(_0x4abac5),null,![]),await releaseLock(screenData),![];}}async function acquireLock(_0x372377,_0x274bd8=0x7530){const _0x1a8a23=a0_0x10a905,_0x348c51=Date[_0x1a8a23(0x19d)]();while(Atomics[_0x1a8a23(0xd6)](_0x372377,0x8,0x0,0x1)!==0x0){if(Date['now']()-_0x348c51>_0x274bd8)throw new Error(_0x1a8a23(0x132));Atomics[_0x1a8a23(0xfe)](_0x372377,0x8,0x1,_0x274bd8);}}async function releaseLock(_0x4e835a){const _0x1e14e4=a0_0x10a905;Atomics[_0x1e14e4(0x15a)](_0x4e835a,0x8,0x0),Atomics[_0x1e14e4(0x173)](_0x4e835a,0x8);}async function xoaTimeout(_0x154c3b){const _0xf09ce7=a0_0x10a905;try{clearTimeout(_0x154c3b),log(_0xf09ce7(0x15f)+_0x154c3b,null,'i',_0xf09ce7(0x183));}catch(_0x4dea70){log(_0xf09ce7(0x154)+_0x4dea70,null,![]);}}function a0_0x1342(){const _0x2dc21d=['tele_id','[loadGame]:\x20Script\x20','22oLfKDn','63260yTxpEE','nextrun','\x20chưa\x20đến\x20thời\x20gian\x20chạy','function','\x20Action:','add','\x20không\x20phải\x20là\x20một\x20hàm\x20hợp\x20lệ','][xuLyProfiles]:\x20Lỗi\x20:\x20','][xuLyProfiles]index:\x20',':\x20Bot\x20','done','[xuLyGame]:\x20Sai\x20aks\x20','1015506vpnJQr','entries','APIKEY','\x20vào\x20hàng\x20đợi.','[loadGame]:\x20Chạy\x20','load','\x20tab\x20đang\x20mở','START\x20SCRIPT','No\x20profile\x20found','][xuLyTask]:\x20Tasks:\x20','[checkTeleWebOpen]:\x20Thực\x20thi\x20','Tìm','[OpenBrowser]:\x20Lỗi\x20khi\x20mở\x20browser:\x20','\x20set\x20open\x20default\x20pos:','[xoaTimeout]worker1:\x20','connected','16griWYz','https://www.google.com','delayOpenProfile','[xuLyTungProfile]:\x20Lỗi:\x20','store','Không\x20tìm\x20thấy\x20indexGenP','][xuLyTask]:\x20Lỗi\x20while:\x20','stringify','Vào','[xoaTimeout]worker1:\x20Xóa\x20timeout:','onOff','[closeBrowser]:\x20Không\x20có\x20trình\x20duyệt\x20để\x20đóng','exit','][ERR]:\x20STOP\x20SCRIPT',':\x20XONG\x201\x20LƯỢT','Fail','][xuLyTask]:\x20Không\x20lấy\x20được\x20dữ\x20liệu\x20profiles\x20','\x20action:\x20','clrInterval','pid','][xuLyProfiles]:\x20Thêm\x20profile\x20','tinhThoiGian','[xuLyTungProfile]:\x20Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng','nextRun','default','date','[xuLyBrowser]:\x20Bot\x20không\x20tìm\x20thấy','\x20set\x20open\x20ok\x20pos:','[closeBrowser]:\x20Lỗi\x20khi\x20đóng\x20trình\x20duyệt\x20','notify','[OpenBrowser]\x20Đóng\x20tab\x20mới\x20thành\x20công','[checkTeleWebOpen]:\x20Không\x20tìm\x20thấy\x20game\x20','getAllProfiles\x20','connect','][xuLyTask]:\x20Chờ\x205\x20giây\x20trước\x20khi\x20xử\x20lý\x20task\x20tiếp\x20theo...','Version:','][xuLyProfiles]Không\x20tìm\x20thấy\x20indexGenP','[xuLyGame]:\x20Loop\x20lại\x20,\x20loop\x20lại\x20lần\x20','189IqsZSp','fisrtOpenBrowser','[eTimeout]worker1:\x20timeout','\x20thành\x20công','[xuLyBrowser]:\x20Không\x20mở\x20được\x20trình\x20duyệt\x20','][xuLyProfiles]:\x20Lỗi\x20khi\x20xử\x20lý\x20profile\x20','[worker1.procScreenArr]\x20index:','clrTimeout','[xuLyBrowser]:\x20Bot\x20OK','\x20ko\x20có\x20aks','allSettled','[xuLyGame]:\x20checkTeleWebOpen\x20có\x20gì\x20đó\x20sai\x20sai\x20rồi\x20bro','[xuLyTungProfile]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile','][ERR]:\x20Lỗi\x20','taskIndex','[loadGame]:\x20Lỗi\x20khi\x20load\x20và\x20thực\x20thi\x20script\x20','getAks','name','height','No\x20bot\x20found','autoSetBrowserPosition','length','[checkTeleWebOpen]:\x20Không\x20thực\x20thi\x20script\x20','scripts','228SinVYz','aks','][xuLyTask]:\x20Task\x20','setTitle','\x20Tele\x20K\x20OK','[xuLyBrowser]:browserInfo:\x20','loop','push','[checkTeleWebOpen]:\x20Thực\x20thi\x20script\x20','now','Start','[OpenBrowser]]Chỉ\x20có\x20','129333ZbGUsX','addData','href','message','nextRunTime','Garbage\x20Collector\x20đã\x20chạy!','\x20Api\x20mode','compareExchange','][xuLyTask]profileQueue:\x20concurrency:','HostName','open','611860kULPek','\x20set\x20close\x20ok','[checkTeleWebOpen]:\x20Lỗi\x20trong\x20quá\x20trình\x20mở\x20trang\x20:\x20','updateData','scale','env','40966MAeOVh','getBotAll','activateTab','][xuLyTask]:\x20currentDateTime:\x20','close','[xuLyGame]:\x20Thực\x20thi\x20','worker1','browserWidthHeight',']:\x20Script\x20Mode','[OpenBrowser]:\x20GenLogin:\x20','[loadGame]:scriptPath\x20','end','\x20ok','url','[OpenBrowser]\x20Lỗi\x20khi\x20đóng\x20tab\x20mới','[xuLyGame]:\x20checkTeleWebOpen\x20OK','[xuLyBrowser]:\x20không\x20lấy\x20được\x20bot','][xuLyProfiles]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile\x20','27505qqmRyK','status',',\x20pos:\x20','[worker1.procScreenArr]\x20posVal:','tele','dirname','coin','[xoaTimeout]worker1:\x20Xóa\x20Interval:','terminate','Done','Memory','][OK]:\x20STOP\x20SCRIPT','wait','\x20sau\x20','[xuLyGame]:\x20getAks\x20OK','api','.js','nowTime','DONE','filter','value','nextRunStamp','script','\x20Script\x20mode','type','Không\x20thể\x20đóng\x20màn\x20hình:\x20vị\x20trí\x20không\x20hợp\x20lệ\x20action:\x20','[OpenBrowser]:\x20Processing\x20profile:\x20','botTimeout','profileThreads','[xuLyGame]:\x20','[worker1.procScreenArr]vào\x20close','\x20Web\x20OK','running','customBrowserPosition','95736ckoZke','timestamp','Lỗi\x20','][xuLyProfiles]:\x20Đã\x20thêm\x20profile\x20','timeout','findIndex','Lỗi\x20xử\x20lý\x20profile:\x20','][xuLyProfiles]:\x20Một\x20số\x20profiles\x20gặp\x20lỗi:\x20','SERVER_HOST','\x20Chưa\x20tới\x20giờ\x20chạy','\x20OFF',':\x20Sai\x20aks\x20','][xuLyTask]:\x20Hoàn\x20thành\x20xử\x20lý\x20task:\x20','[worker1.procScreenArr]vị\x20trí\x20default\x20không\x20cần\x20close','[checkTeleWebOpen]:\x20vào\x20loadGame','[checkTeleWebOpen]:\x20dataId:\x20','width','task','getTask','[xuLyGame]:Max\x20loop\x20rồi\x20bro','profileTimeout','closeTab','pages','\x20|\x20nextrun:\x20','\x20loop','countOpenTabs','timGame','STOP\x20SCRIPT','[OpenBrowser]:force\x20set\x20Position:\x20','[checkTeleWebOpen]:\x20','Timeout\x20while\x20acquiring\x20lock','Stop','split','\x20vào\x20hàng\x20đợi\x20max:','openUrl'];a0_0x1342=function(){return _0x2dc21d;};return a0_0x1342();}async function xoaInterval(_0x106ffc){const _0x584f61=a0_0x10a905;try{clearInterval(_0x106ffc),log(_0x584f61(0xf9)+_0x106ffc,null,'i',_0x584f61(0x168));}catch(_0x4210d3){log('[xoaTimeout]worker1:\x20'+_0x4210d3,null,![]);}}async function delay(_0x4a3e0d){return new Promise(async _0x2c505c=>{setTimeout(_0x2c505c,_0x4a3e0d);});}async function eTimeout(){const _0x38b43d=a0_0x10a905;return log(_0x38b43d(0x17e),null,'w'),Atomics['store'](tasksData,taskInfo[_0x38b43d(0x18a)],0x1),!![];}async function cTimeout(){const _0x1f28b2=a0_0x10a905;if(Atomics[_0x1f28b2(0x14b)](tasksData,taskInfo[_0x1f28b2(0x18a)])===0x1)return!![];return null;}async function rstTimeout(){const _0x18e623=a0_0x10a905;return log('[eTimeout]worker1:\x20reset\x20timeout',null,'w'),Atomics[_0x18e623(0xd6)](tasksData,taskInfo[_0x18e623(0x18a)],0x1,0x2),!![];}
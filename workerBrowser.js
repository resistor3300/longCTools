const a0_0x5de700=a0_0x30e2;function a0_0x4762(){const _0x444786=['[xoaTimeout]worker1:\x20Xóa\x20Interval:','connect','[worker1.procScreenArr]lỗi\x20','[loadGame]:\x20Script\x20','\x20thành\x20công','open','\x20Script\x20mode','env','[OpenBrowser]:\x20Processing\x20profile:\x20','[checkTeleWebOpen]:\x20Thực\x20thi\x20script\x20','[xuLyBrowser]:\x20Không\x20mở\x20được\x20trình\x20duyệt\x20','114656ImikVR','\x20Api\x20mode','\x20set\x20open\x20default\x20pos:','[xoaTimeout]worker1:\x20Xóa\x20timeout:','572656JErMSa','autoSetBrowserPosition','HostName','\x20Tele\x20K\x20OK','][xuLyProfiles]:\x20Lỗi\x20khi\x20xử\x20lý\x20profile\x20','][xuLyProfiles]:\x20Đã\x20thêm\x20profile\x20','][xuLyProfiles]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile\x20','coin','terminate','STOP\x20SCRIPT','[xuLyGame]:\x20Thực\x20thi\x20','task','profileThreads','openUrl','nowTime','join',':\x20Bot\x20','push','][xuLyTask]:\x20Chờ\x205\x20giây\x20trước\x20khi\x20xử\x20lý\x20task\x20tiếp\x20theo...','859150tZdAgD','][xuLyProfiles]:\x20Lỗi\x20:\x20','close',':\x20XONG\x201\x20LƯỢT',']:\x20START\x20SCRIPT','[checkTeleWebOpen]:\x20dataId:\x20','tele','end','Lỗi\x20xử\x20lý\x20profile:\x20','FistUrl','[xuLyBrowser]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20browser:\x20','add','[checkTeleWebOpen]:\x20Thực\x20thi\x20','Lỗi\x20gì\x20đó\x20task\x20','Fail','tinhThoiGian','timeout','done','][xuLyTask]:\x20currentDateTime:\x20','url','href','Start','running','profiles','\x20Web\x20OK','3764BoNCqj','[worker1.procScreenArr]vào\x20open','\x20chưa\x20đến\x20thời\x20gian\x20chạy','[closeBrowser]:\x20Đóng\x20trình\x20duyệt\x20','getAks','][xuLyTask]:\x20Hoàn\x20thành\x20xử\x20lý\x20task:\x20','loop\x20new\x20game','default','Vào','[xuLyBrowser]:\x20không\x20lấy\x20được\x20bot','nextRunTime','value','[loadGame]:scriptPath\x20','[xoaTimeout]worker1:\x20','width','\x20ok','function','load','[xuLyTungProfile]:\x20Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng','now','filter','timestamp','[checkTeleWebOpen]:\x20vào\x20loadGame','getAllProfiles\x20','No\x20profile\x20found','[worker1.procScreenArr]vào\x20close','][xuLyProfiles]:\x20Thêm\x20profile\x20','[OpenBrowser]\x20Đóng\x20tab\x20mới\x20thành\x20công','\x20Web\x20mode','tele_id','48QBYohf',':\x20Sai\x20aks\x20','worker1','\x20không\x20phải\x20là\x20một\x20hàm\x20hợp\x20lệ','connected','stringify','\x20set\x20close\x20ok','customBrowserPosition','Version:','Không\x20thể\x20đóng\x20màn\x20hình:\x20vị\x20trí\x20không\x20hợp\x20lệ\x20action:\x20','fisrtOpenBrowser','wait','[xuLyBrowser]:\x20browser\x20disconnected\x20','\x20loop','setTitle','][ERR]:\x20STOP\x20SCRIPT','[loadGame]:\x20Lỗi\x20khi\x20load\x20và\x20thực\x20thi\x20script\x20','304578ReyzgZ','[OpenBrowser]\x20Lỗi\x20khi\x20đóng\x20tab\x20mới','clrTimeout','Stop','StartApi','[xuLyGame]:\x20checkTeleWebOpen\x20có\x20gì\x20đó\x20sai\x20sai\x20rồi\x20bro','countOpenTabs',']:\x20Script\x20Mode','[xuLyGame]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20Game:\x20',',\x20pos:\x20','[xuLyGame]:\x20','\x20|\x20nextrun:\x20','entries','Không\x20tìm\x20thấy\x20giá\x20trị\x20status=0','screenArr','][xuLyTask]:\x20Lỗi\x20while:\x20','.js','[worker1.procScreenArr]action:\x20','1844144VzMsPW','][xuLyProfiles]Không\x20tìm\x20thấy\x20indexGenP','[xuLyBrowser]:\x20Bot\x20OK','scripts','\x20vào\x20hàng\x20đợi\x20max:','SERVER_HOST','No\x20bot\x20found','nextRun','scale','activateTab','[xuLyGame]:\x20checkTeleWebOpen\x20OK','Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng','clrInterval','profileTimeout','notify','\x20OFF','[loadGame]:\x20Chạy\x20','][xuLyTask]:\x20Tasks:\x20','Lỗi\x20','elementExistsByXPath','type','status','\x20tab\x20đang\x20mở','message','nextRunStamp','getBotAll','onOff','][xuLyProfiles]index:\x20','date','https://www.google.com','1139370zFsfmH','timGame','[xuLyGame]:\x20Sai\x20aks\x20','[checkTeleWebOpen]:\x20Không\x20tìm\x20thấy\x20game\x20','\x20Action:','name','updateData','[OpenBrowser]:\x20GenLogin:\x20','addData','ref','length','Tìm','compareExchange','[xuLyTungProfile]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile','aks','Timeout\x20while\x20acquiring\x20lock','[xuLyGame]:\x20getAks\x20OK','browserWidthHeight','Done','height','[worker1.procScreenArr]\x20index:','[xuLyBrowser]:\x20Bot\x20không\x20tìm\x20thấy','InputSearch','\x20vào\x20hàng\x20đợi.','taskIndex','START\x20SCRIPT','allSettled','][OK]:\x20STOP\x20SCRIPT','loop','DONE','split','][xuLyTask]:\x20vào\x20xuLyTask','store'];a0_0x4762=function(){return _0x444786;};return a0_0x4762();}(function(_0x5d48db,_0x47c4e){const _0x206049=a0_0x30e2,_0x1446dd=_0x5d48db();while(!![]){try{const _0x1f2882=parseInt(_0x206049(0x21b))/0x1+-parseInt(_0x206049(0x27a))/0x2+parseInt(_0x206049(0x269))/0x3*(-parseInt(_0x206049(0x24b))/0x4)+-parseInt(_0x206049(0x232))/0x5+parseInt(_0x206049(0x1ef))/0x6+-parseInt(_0x206049(0x21f))/0x7+parseInt(_0x206049(0x1d1))/0x8;if(_0x1f2882===_0x47c4e)break;else _0x1446dd['push'](_0x1446dd['shift']());}catch(_0x5316d3){_0x1446dd['push'](_0x1446dd['shift']());}}}(a0_0x4762,0x1bda6));import'dotenv/config';import a0_0xcdc3f8 from'fs';import a0_0x2419bb from'path';import{fileURLToPath,pathToFileURL}from'url';import{expose}from'threads/worker';import{log,json}from'./modules/logger.js';import a0_0x4d230f from'./modules/Genlogin.js';import a0_0x264ed5 from'./modules/http.js';import a0_0x3b8611 from'p-queue';const __filename=fileURLToPath(import.meta[a0_0x5de700(0x245)]),__dirname=a0_0x2419bb['dirname'](__filename);function a0_0x30e2(_0x4f7dc4,_0x557bff){const _0x476284=a0_0x4762();return a0_0x30e2=function(_0x30e2f7,_0x55f9d1){_0x30e2f7=_0x30e2f7-0x1cd;let _0x54931f=_0x476284[_0x30e2f7];return _0x54931f;},a0_0x30e2(_0x4f7dc4,_0x557bff);}let profileQueue,genlogin,http,getAllProfiles,taskInfo,GenDataProfile,timgame;genlogin=new a0_0x4d230f('',!![]),http=new a0_0x264ed5(process[a0_0x5de700(0x217)][a0_0x5de700(0x1d6)],process[a0_0x5de700(0x217)]['APIKEY'],!![]);let firstRun=!![],delayOpenProfile=0xbb8,profileTimeout=0x5265c0,botTimeout=0x5265c0,profileThreads=0x1,browserInfo={},version,screenData,tasksData,screenDataBuffer1,tasksDataBuffer1,teleId=null;const worker1=async _0x80d4ad=>{const _0x5c7f78=a0_0x5de700,{version0:_0x549fba,tasksDataBuffer:_0x15e24c,screenDataBuffer:_0x42f537,action:_0x1c769b,task:_0x12643a,dataBrw:_0xac1360,GenDataProfile0:_0x21e19d,timgame0:_0x2355d0,timeout:_0x30925e,tele_id:_0x5586c9}=_0x80d4ad;taskInfo=_0x12643a;_0x5586c9&&_0x5586c9[_0x5c7f78(0x268)]&&(teleId=_0x5586c9[_0x5c7f78(0x268)]);screenDataBuffer1=_0x42f537,tasksDataBuffer1=_0x15e24c,screenData=new Int32Array(_0x42f537),tasksData=new Int32Array(_0x15e24c);try{if(_0x30925e)return log(_0x5c7f78(0x26b),'timeout',null,'w'),await clearVar(),{'success':![],'error':_0x5c7f78(0x242)};else{if(_0x12643a!==_0x5c7f78(0x1cd)){version=_0x549fba,getAllProfiles=_0xac1360,log(_0x5c7f78(0x26b),'[worker1data.task]:data.task\x20'+JSON[_0x5c7f78(0x26e)](_0x80d4ad[_0x5c7f78(0x22a)]),null,'c'),log(_0x5c7f78(0x26b),_0x5c7f78(0x262)+JSON['stringify'](getAllProfiles),null,'c'),GenDataProfile=_0x21e19d,timgame=_0x2355d0,log(_0x5c7f78(0x26b),'['+_0x12643a['name']+_0x5c7f78(0x281),null,'w');const _0x205e23=await xuLyTask(_0x12643a);return log(_0x5c7f78(0x26b),''+JSON[_0x5c7f78(0x26e)](_0x205e23),null,'w'),log('worker1',_0x5c7f78(0x20c),null,'w',_0x5c7f78(0x243)),await clearVar(),_0x205e23?{'success':!![],'result':_0x205e23}:{'success':![],'result':_0x205e23};}else return log(_0x5c7f78(0x26b),_0x5c7f78(0x23f)+_0x12643a,null,'w'),await clearVar(),{'success':![],'error':_0x5c7f78(0x26b)};}}catch(_0x461006){return log(_0x5c7f78(0x26b),_0x5c7f78(0x1e3)+_0x461006,null,![]),await clearVar(),{'success':![],'error':'worker1'};}};expose({'worker1':worker1});async function clearVar(){return genlogin=null,http=null,!![];}async function xuLyTask(_0x292227){const _0x1d8519=a0_0x5de700;try{log(_0x1d8519(0x26b),'['+_0x292227[_0x1d8519(0x1f4)]+_0x1d8519(0x20e),null,'i','-');const _0x163d21=await genlogin[_0x1d8519(0x22d)]('worker1'),_0x101134=_0x163d21[_0x1d8519(0x1ed)];if(_0x101134<_0x292227['nextrunstamp'])return log(_0x1d8519(0x26b),'['+_0x292227[_0x1d8519(0x1f4)]+'][xuLyTask]:\x20Task\x20'+JSON['stringify'](_0x292227[_0x1d8519(0x1f4)])+_0x1d8519(0x24d),null,'i'),log(_0x1d8519(0x26b),'['+_0x292227[_0x1d8519(0x1f4)]+_0x1d8519(0x244)+JSON[_0x1d8519(0x26e)](_0x163d21)+'\x20|\x20nextrun:\x20'+JSON[_0x1d8519(0x26e)](_0x292227['nextrun']),null,'w'),log(_0x1d8519(0x26b),'['+_0x292227[_0x1d8519(0x1f4)]+_0x1d8519(0x244)+JSON['stringify'](_0x101134)+_0x1d8519(0x285)+JSON[_0x1d8519(0x26e)](taskNextRunDateTime),null,'w'),log(_0x1d8519(0x26b),'['+_0x292227[_0x1d8519(0x1f4)]+_0x1d8519(0x231),null,'i'),await delay(0x1388),null;let _0x50a5fe=await http['getTask'](_0x1d8519(0x26b),_0x292227[_0x1d8519(0x1f4)]);if(_0x50a5fe[_0x1d8519(0x256)]['profiles'][_0x1d8519(0x1f9)]<=0x0){log('worker1','['+_0x292227['name']+'][xuLyTask]:\x20không\x20lấy\x20được\x20profile',null,![]);throw new Error(_0x1d8519(0x263));}firstRun&&(profileThreads=parseInt(_0x292227[_0x1d8519(0x22b)]),profileQueue=new a0_0x3b8611({'concurrency':profileThreads}),log(_0x1d8519(0x26b),'['+_0x292227['name']+'][xuLyTask]profileQueue:\x20concurrency:'+profileThreads,null,'w'),firstRun=![],delayOpenProfile=parseInt(_0x292227['delayOpenProfile'])*0x3e8,profileTimeout=parseInt(_0x292227[_0x1d8519(0x1de)])*0x3e8,botTimeout=parseInt(_0x292227['botTimeout'])*0x3e8);const _0x35d061=await xuLyProfiles(_0x50a5fe[_0x1d8519(0x256)][_0x1d8519(0x249)],_0x292227[_0x1d8519(0x1f4)]);if(!_0x35d061){log(_0x1d8519(0x26b),'['+_0x292227[_0x1d8519(0x1f4)]+'][xuLyTask]:\x20Không\x20lấy\x20được\x20dữ\x20liệu\x20profiles\x20'+json(_0x35d061),null,![]);throw new Error('No\x20profile\x20found');}return log(_0x1d8519(0x26b),'['+_0x292227[_0x1d8519(0x1f4)]+_0x1d8519(0x1e2)+_0x292227[_0x1d8519(0x1f4)]+_0x1d8519(0x25a)),await delay(0x7d0),log(_0x1d8519(0x26b),'['+_0x292227[_0x1d8519(0x1f4)]+_0x1d8519(0x250)+JSON[_0x1d8519(0x26e)](_0x292227[_0x1d8519(0x1f4)])),!![];}catch(_0x5dbb16){return log('worker1','['+_0x292227[_0x1d8519(0x1f4)]+_0x1d8519(0x1ce)+_0x5dbb16,null,![]),null;}}async function xuLyProfiles(_0x174548,_0x32d968){const _0x29c489=a0_0x5de700;try{const _0x2e18ff=[];for(const [_0x23acc9,_0x3dcf95]of _0x174548[_0x29c489(0x286)]()){const _0x3d2fdd=await GenDataProfile['findIndex'](_0xdd156f=>_0xdd156f['pid']===_0x3dcf95);if(_0x23acc9!==-0x1)log('worker1','['+_0x32d968+_0x29c489(0x1ec)+_0x3d2fdd);else{log(_0x29c489(0x26b),'['+_0x32d968+_0x29c489(0x1d2));throw new Error('Không\x20tìm\x20thấy\x20indexGenP');}log(_0x29c489(0x26b),'['+_0x32d968+_0x29c489(0x265)+_0x3dcf95+_0x29c489(0x1d5)+profileThreads,null,'i'),_0x2e18ff[_0x29c489(0x230)](profileQueue[_0x29c489(0x23d)](async()=>{const _0x467df7=_0x29c489;try{delayOpenProfile>0x0?(log(_0x467df7(0x26b),'['+_0x32d968+_0x467df7(0x225)+_0x3dcf95+'\x20sau\x20'+delayOpenProfile+'ms',null,'w','-'),await delay(delayOpenProfile)):log(_0x467df7(0x26b),'['+_0x32d968+_0x467df7(0x225)+_0x3dcf95,null,'w','-'),await xuLyTungProfile(_0x3dcf95,GenDataProfile[_0x3d2fdd]);}catch(_0x40e319){log(_0x467df7(0x26b),'['+_0x32d968+_0x467df7(0x223)+_0x3dcf95+':\x20'+_0x40e319[_0x467df7(0x1e8)],null,![]);throw _0x40e319;}})),log(_0x29c489(0x26b),'['+_0x32d968+_0x29c489(0x224)+_0x3dcf95+_0x29c489(0x206));}const _0x54961c=await Promise[_0x29c489(0x209)](_0x2e18ff),_0x2d4294=_0x54961c[_0x29c489(0x25f)](_0x38fbe7=>_0x38fbe7[_0x29c489(0x1e6)]==='rejected');return _0x2d4294[_0x29c489(0x1f9)]>0x0?log('worker1','['+_0x32d968+'][xuLyProfiles]:\x20Một\x20số\x20profiles\x20gặp\x20lỗi:\x20'+JSON['stringify'](_0x2d4294),null,![]):log('worker1','['+_0x32d968+'][xuLyProfiles]:\x20Đã\x20xử\x20lý\x20tất\x20cả\x20profiles\x20thành\x20công\x20'+json(_0x54961c)),!![];}catch(_0x1ccf20){return log(_0x29c489(0x26b),'['+_0x32d968+_0x29c489(0x233)+_0x1ccf20,null,![]),null;}}async function xuLyTungProfile(_0x374c7d,_0x54113c){const _0x47d98e=a0_0x5de700;let _0x19ca44,_0x10be40;const _0x5de2f1=_0x374c7d;let _0x3768ed;try{await delay(delayOpenProfile),log(_0x374c7d,_0x47d98e(0x1fc),null,'i'),_0x19ca44=await genlogin[_0x47d98e(0x22d)](_0x374c7d),await http['addData']('worker1',_0x374c7d,_0x47d98e(0x208),_0x19ca44[_0x47d98e(0x1ed)],'',_0x47d98e(0x271)+version,_0x47d98e(0x247));teleId&&await http[_0x47d98e(0x238)](_0x374c7d,teleId,'['+_0x374c7d+_0x47d98e(0x236));log(_0x374c7d,'[xuLyTungProfile]0:\x20Kiểm\x20tra\x20màn\x20hình\x20'+_0x374c7d,null,'w'),_0x3768ed=await procScreenArr('open',null,_0x374c7d);if(_0x3768ed['x']===undefined||_0x3768ed['y']===undefined){log(_0x374c7d,_0x47d98e(0x25d),null,![]);throw new Error(_0x47d98e(0x287));}const _0x2ee6e9=await xuLyBrowser(_0x374c7d,_0x54113c,_0x3768ed);await procScreenArr(_0x47d98e(0x234),_0x3768ed,_0x374c7d);const _0x14c570=await genlogin[_0x47d98e(0x241)](_0x19ca44[_0x47d98e(0x260)]);return await http[_0x47d98e(0x1f7)](_0x47d98e(0x26b),_0x374c7d,'STOP\x20SCRIPT','','',_0x14c570,_0x47d98e(0x27d)),teleId&&await http[_0x47d98e(0x238)](_0x374c7d,teleId,'['+_0x374c7d+_0x47d98e(0x20a)),_0x2ee6e9;}catch(_0x5a1053){log(_0x374c7d,'[xuLyTungProfile]:\x20Lỗi:\x20'+_0x5a1053,null,![]);if(_0x10be40)await Thread[_0x47d98e(0x227)](_0x10be40);await procScreenArr(_0x47d98e(0x234),_0x3768ed,_0x374c7d);const _0x1bf45a=await genlogin[_0x47d98e(0x241)](_0x19ca44?.[_0x47d98e(0x260)]||Date['now']());await http[_0x47d98e(0x1f7)](_0x47d98e(0x26b),_0x374c7d,_0x47d98e(0x228),'','',_0x1bf45a,'Stop');teleId&&await http['tele'](_0x374c7d,teleId,'['+_0x374c7d+_0x47d98e(0x278));throw _0x5a1053;}}async function xuLyBrowser(_0x156856,_0x94e15a,_0x25cf54){const _0x3c4ac9=a0_0x5de700;let _0x24777a;try{const _0x3684b5=_0x156856;if(!browserInfo[_0x156856])browserInfo[_0x156856]={};browserInfo[_0x156856][_0x3c4ac9(0x273)]=0x0,log(_0x156856,'[xuLyBrowser]:browserInfo:\x20'+json(browserInfo),null,'w','w');if(browserInfo[_0x156856][_0x3c4ac9(0x273)]==0x0){_0x24777a=await OpenBrowser(_0x156856,_0x94e15a,_0x25cf54);if(!_0x24777a){log(_0x156856,'[xuLyBrowser]:\x20Không\x20mở\x20được\x20trình\x20duyệt\x20'+_0x156856,null,![]);throw new Error(_0x3c4ac9(0x21a)+_0x156856);}browserInfo[_0x156856][_0x3c4ac9(0x273)]=0x1;}if(!_0x24777a[_0x3c4ac9(0x26d)])throw new Error(_0x3c4ac9(0x275)+_0x156856);let _0x47f7a3=0x0;const _0xffa85a=await http[_0x3c4ac9(0x1ea)]('worker1',_0x3684b5);if(!_0xffa85a){log(_0x156856,_0x3c4ac9(0x204),null,![]);throw new Error(_0x3c4ac9(0x1d7));}if(_0xffa85a[_0x3c4ac9(0x1f9)]<=0x0){log(_0x156856,_0x3c4ac9(0x254),null,![]);throw new Error(_0x3c4ac9(0x1d7));}for(const _0xa722f9 of _0xffa85a){if(_0xa722f9){if(_0xa722f9['type']!='script')continue;if(_0xa722f9[_0x3c4ac9(0x256)]===_0x3c4ac9(0x239)){log(_0x156856,_0x3c4ac9(0x235),null,'i');break;}if(!_0xa722f9[_0x3c4ac9(0x1fd)]){log(_0x156856,_0x3c4ac9(0x22f)+json(_0xa722f9)+'\x20ko\x20có\x20aks',null,![]);continue;}if(_0xa722f9[_0x3c4ac9(0x1eb)]==='0'){log(_0x156856,':\x20Bot\x20'+json(_0xa722f9[_0x3c4ac9(0x1f4)])+_0x3c4ac9(0x1e0),null,![]);continue;}const _0x259bef=await genlogin[_0x3c4ac9(0x22d)](_0x156856);if(_0xa722f9[_0x3c4ac9(0x1e9)]>_0x259bef[_0x3c4ac9(0x260)]){log(_0x156856,':\x20Bot\x20'+json(_0xa722f9['name'])+'\x20Chưa\x20tới\x20giờ\x20chạy',null,'w');continue;}switch(_0xa722f9['aks']){case'A':log(_0x156856,':\x20'+json(_0xa722f9[_0x3c4ac9(0x1f4)])+'\x20Tele\x20A\x20OK'),await xuLyGame(_0xa722f9,'A',_0x156856,_0x94e15a,_0x25cf54,_0x24777a);break;case'K':log(_0x156856,':\x20'+json(_0xa722f9['name'])+_0x3c4ac9(0x222)),await xuLyGame(_0xa722f9,'K',_0x156856,_0x94e15a,_0x25cf54,_0x24777a);break;case'W':log(_0x156856,':\x20'+json(_0xa722f9[_0x3c4ac9(0x1f4)])+_0x3c4ac9(0x24a)),await xuLyGame(_0xa722f9,'W',_0x156856,_0x94e15a,_0x25cf54,_0x24777a);break;default:log(_0x156856,_0x3c4ac9(0x26a)+json(_0xa722f9[_0x3c4ac9(0x1fd)]),null,![]);break;}log(_0x156856,_0x3c4ac9(0x1d3));}}return await closeBrowser(_0x156856,_0x24777a),!![];}catch(_0x1272e6){return log(_0x156856,_0x3c4ac9(0x23c)+_0x1272e6,null,![]),await closeBrowser(_0x156856,_0x24777a),null;}}async function xuLyGame(_0x32df62,_0x52940c,_0x399fa2,_0x5f3f12,_0x23749e,_0x1b02c5){const _0x104ede=a0_0x5de700;try{const _0xcc95c7=_0x399fa2;if(_0x32df62[_0x104ede(0x1e5)]==='api'){log(_0x399fa2,'[xuLyGame]:\x20'+_0x32df62[_0x104ede(0x1f4)]+_0x104ede(0x21c),null,'i');const _0x3c59cc=await genlogin['nowTime'](_0x399fa2),_0x242db2=await http[_0x104ede(0x1f7)](_0x399fa2,_0xcc95c7,_0x32df62[_0x104ede(0x1f4)],_0x3c59cc['date'],'',_0x104ede(0x27e),_0x104ede(0x248)),_0x410424=_0x242db2['ID'],_0x3df476={'bot':_0x32df62,'profileNameId':_0x399fa2,'genlogin':genlogin,'http':http,'dataId':_0x410424},_0x4f366f=await loadGameApi(_0x32df62[_0x104ede(0x1f4)],_0x3df476);if(!_0x4f366f[_0x104ede(0x1e6)])return log(_0x399fa2,_0x104ede(0x229)+_0x32df62[_0x104ede(0x1f4)]+'\x20lỗi',null,![]),await http[_0x104ede(0x1f5)](_0x399fa2,_0xcc95c7,_0x410424,_0x104ede(0x240),'Fail'),null;if(_0x4f366f[_0x104ede(0x1e6)]==_0x104ede(0x20b))return log(_0x399fa2,_0x104ede(0x229)+_0x32df62['name']+_0x104ede(0x276),null,'i'),'loop';if(_0x4f366f[_0x104ede(0x1e6)])return log(_0x399fa2,_0x104ede(0x229)+_0x32df62[_0x104ede(0x1f4)]+'\x20done'),await http['nextRunTime'](_0x399fa2,_0xcc95c7,_0x32df62['id'],_0x4f366f[_0x104ede(0x1d8)],_0x4f366f['nextRunStamp']),await http[_0x104ede(0x1f5)](_0x399fa2,_0xcc95c7,_0x410424,'Ok',_0x104ede(0x201),_0x4f366f[_0x104ede(0x226)],_0x4f366f[_0x104ede(0x1d8)]),!![];}else{if(_0x52940c=='A'||_0x52940c=='K'){log(_0x399fa2,_0x104ede(0x284)+_0x32df62[_0x104ede(0x1f4)]+_0x104ede(0x216),null,'w','-');const _0x4dace9=await http[_0x104ede(0x24f)](_0x399fa2,_0x52940c);if(_0x4dace9){log(_0x399fa2,_0x104ede(0x1ff));let _0x39b2a4=0x0;while(_0x39b2a4<0x2){const _0x40c6a7=await checkTeleWebOpen(_0x32df62,_0x4dace9,_0x399fa2,_0x23749e,_0x1b02c5);if(_0x40c6a7===_0x104ede(0x20b))_0x39b2a4++,log(_0x399fa2,'[xuLyGame]:\x20Loop\x20lại\x20,\x20loop\x20lại\x20lần\x20'+_0x39b2a4+'/2',null,'i'),await delay(0x3e8);else return _0x40c6a7?(log(_0x399fa2,_0x104ede(0x1db)),!![]):(log(_0x399fa2,_0x104ede(0x27f),null,![]),null);}return log(_0x399fa2,'[xuLyGame]:Max\x20loop\x20rồi\x20bro',null,![]),null;}}else{if(_0x52940c=='W'){log(_0x399fa2,_0x104ede(0x284)+_0x32df62[_0x104ede(0x1f4)]+_0x104ede(0x267),null,'w','-');const _0x539033=await checkTeleWebOpen(_0x32df62,_0x52940c,_0x399fa2,_0x23749e,_0x1b02c5);return _0x539033?(log(_0x399fa2,_0x104ede(0x1db)),!![]):(log(_0x399fa2,_0x104ede(0x27f),null,![]),null);}else return log(_0x399fa2,_0x104ede(0x1f1)+_0x52940c,null,![]),null;}}}catch(_0x5c65a8){return log(_0x399fa2,_0x104ede(0x282)+_0x5c65a8,null,![]),null;}}async function OpenBrowser(_0x15f28d,_0x2772a1,_0x4539b3){const _0x2dc0d3=a0_0x5de700;try{const _0x409b59=_0x15f28d;log(_0x15f28d,_0x2dc0d3(0x218)+JSON[_0x2dc0d3(0x26e)](_0x15f28d),null,'i');if(getAllProfiles[_0x2dc0d3(0x220)]==='n'){const _0x1a2371=getAllProfiles[_0x2dc0d3(0x270)][_0x2dc0d3(0x20d)]('x');parseInt(_0x1a2371[0x0])>=0x0&&parseInt(_0x1a2371[0x1])>=0x0?(_0x4539b3['x']=parseInt(_0x1a2371[0x0]),_0x4539b3['y']=parseInt(_0x1a2371[0x1])):(_0x4539b3['x']=0x0,_0x4539b3['y']=0x0),log(_0x15f28d,'[OpenBrowser]:force\x20set\x20Position:\x20'+_0x4539b3['x']+'x'+_0x4539b3['y'],null,'w');}const _0x9546ec=await genlogin[_0x2dc0d3(0x211)](_0x15f28d,getAllProfiles,_0x2772a1,_0x4539b3);log(_0x15f28d,_0x2dc0d3(0x1f6)+JSON[_0x2dc0d3(0x26e)](_0x9546ec),null,'i'),await delay(0x1388);if(_0x9546ec){let _0x4d7177=0x0;const _0x5e1c30=0xa;while(_0x4d7177<_0x5e1c30){_0x4d7177++;const _0x4791cd=await genlogin[_0x2dc0d3(0x280)](_0x15f28d,_0x9546ec);if(_0x4791cd<=0x1)return log(_0x15f28d,'[OpenBrowser]]Chỉ\x20có\x20'+_0x4791cd+_0x2dc0d3(0x1e7),null,'i'),_0x9546ec;const _0x3e9aa5=await genlogin['closeTab'](_0x15f28d,_0x9546ec,_0x4791cd-0x1,0xbb8);if(!_0x3e9aa5){log(_0x15f28d,_0x2dc0d3(0x27b),null,![]);continue;}log(_0x15f28d,_0x2dc0d3(0x266)),await delay(0xbb8);continue;}}return log(_0x15f28d,'[OpenBrowser]:\x20Lỗi\x20khi\x20mở\x20browser:\x20'+JSON[_0x2dc0d3(0x26e)](_0x15f28d)),null;}catch(_0xbad803){throw new Error(_0x2dc0d3(0x23a)+_0xbad803[_0x2dc0d3(0x1e8)]);}}async function checkTeleWebOpen(_0x22d43b,_0x505812,_0x1133ec,_0x44b94e,_0xc7fa75){const _0xea6904=a0_0x5de700;let _0x485c76,_0x4a8189;try{_0x4a8189=await genlogin[_0xea6904(0x1da)](_0x1133ec,_0xc7fa75,0x0,getAllProfiles[_0xea6904(0x200)],_0x44b94e[_0xea6904(0x1d9)]);if(_0x505812!='W'){const _0x4a7907=await genlogin[_0xea6904(0x1e4)](_0x1133ec,_0x4a8189,_0x505812[_0xea6904(0x205)],0x7d0);!_0x4a7907&&(await genlogin[_0xea6904(0x22c)](_0x1133ec,_0x4a8189,_0xea6904(0x1ee),0xea60),await delay(0x7d0),await genlogin['openUrl'](_0x1133ec,_0x4a8189,_0x505812[_0xea6904(0x23b)],0xea60),await genlogin[_0xea6904(0x277)](_0x1133ec,_0x4a8189,_0x1133ec),await delay(0x1388));}else _0x505812='W',await genlogin[_0xea6904(0x22c)](_0x1133ec,_0x4a8189,'https://www.google.com',0xea60),await delay(0x7d0),await genlogin[_0xea6904(0x22c)](_0x1133ec,_0x4a8189,_0x22d43b[_0xea6904(0x1f8)],0xea60),await genlogin[_0xea6904(0x277)](_0x1133ec,_0x4a8189,_0x1133ec),await delay(0x1388);log(_0x1133ec,_0xea6904(0x261),null,'i');const _0x30b5c8=await genlogin[_0xea6904(0x22d)](_0x1133ec),_0x4ec841=await http['addData'](_0x1133ec,_0x1133ec,_0x22d43b[_0xea6904(0x1f4)],_0x30b5c8[_0xea6904(0x1ed)],'',_0xea6904(0x247),_0xea6904(0x248));_0x485c76=_0x4ec841['ID'];const _0x333c6b={'firstPage':_0x4a8189,'bot':_0x22d43b,'profileNameId':_0x1133ec,'getAks':_0x505812,'genlogin':genlogin,'http':http,'browser':_0xc7fa75,'dataId':_0x4ec841['ID'],'taskIndex':taskInfo['taskIndex'],'screenDataBuffer2':screenDataBuffer1,'tasksDataBuffer2':tasksDataBuffer1};let _0x296cc2=null;log(_0x1133ec,_0xea6904(0x237)+json(_0x485c76),null,'i');if(timgame&&_0x505812!='W'){await http[_0xea6904(0x1f5)](_0x1133ec,_0x1133ec,_0x485c76,_0xea6904(0x1fa));const _0x3c68c6=await loadGame(_0xea6904(0x1f0),_0x333c6b,_0x296cc2,_0x485c76,_0x1133ec);if(_0x3c68c6[_0xea6904(0x1e6)]=='loop')return log(_0x1133ec,'[checkTeleWebOpen]:\x20Thực\x20thi\x20'+_0x22d43b[_0xea6904(0x1f4)]+_0xea6904(0x276),null,'i'),await http['updateData'](_0x1133ec,_0x1133ec,_0x485c76,_0xea6904(0x251)),'loop';else{if(!_0x3c68c6)return log(_0x1133ec,_0xea6904(0x1f2)+_0x22d43b[_0xea6904(0x1f4)],null,![]),await http['updateData'](_0x1133ec,_0x1133ec,_0x485c76,_0xea6904(0x240),_0xea6904(0x240)),null;}_0x3c68c6[_0xea6904(0x221)]&&(_0x296cc2=_0x3c68c6[_0xea6904(0x221)]);}await http[_0xea6904(0x1f5)](_0x1133ec,_0x1133ec,_0x485c76,_0xea6904(0x253));const _0x262ced=await loadGame(_0x22d43b[_0xea6904(0x1f4)],_0x333c6b,_0x296cc2,_0x485c76,_0x1133ec);if(!_0x262ced[_0xea6904(0x1e6)])return log(_0x1133ec,'[checkTeleWebOpen]:\x20Không\x20thực\x20thi\x20script\x20'+_0x22d43b[_0xea6904(0x1f4)],null,![]),log(_0x1133ec,'[checkTeleWebOpen]:\x20'+json(_0x262ced),null,![]),await http[_0xea6904(0x1f5)](_0x1133ec,_0x1133ec,_0x485c76,_0xea6904(0x240),_0xea6904(0x240)),null;else{if(_0x262ced['status']==_0xea6904(0x20b))return log(_0x1133ec,_0xea6904(0x23e)+_0x22d43b['name']+_0xea6904(0x276),null,'i'),await http['updateData'](_0x1133ec,_0x1133ec,_0x485c76,_0xea6904(0x20b)),_0xea6904(0x20b);}return await http[_0xea6904(0x255)](_0x1133ec,_0x1133ec,_0x22d43b['id'],_0x262ced[_0xea6904(0x1d8)],_0x262ced[_0xea6904(0x1e9)]),await http[_0xea6904(0x1f5)](_0x1133ec,_0x1133ec,_0x485c76,'Ok',_0xea6904(0x201),_0x262ced[_0xea6904(0x226)],_0x262ced[_0xea6904(0x1d8)]),log(_0x1133ec,_0xea6904(0x219)+_0x22d43b[_0xea6904(0x1f4)]+'\x20thành\x20công'),await delay(0x7d0),_0x485c76=null,_0x4a8189=null,!![];}catch(_0x56b494){return log(_0x1133ec,'[checkTeleWebOpen]:\x20Lỗi\x20trong\x20quá\x20trình\x20mở\x20trang\x20:\x20'+_0x56b494,null,![]),await http['updateData'](_0x1133ec,_0x1133ec,_0x485c76,'Fail',_0xea6904(0x240)),_0x485c76=null,_0x4a8189=null,null;}}async function loadGame(_0xf3f1e4,_0x209c8e,_0x522bfc,_0x46fbf5,_0x250224){const _0xc9a4f9=a0_0x5de700;try{const _0x46fdba=pathToFileURL(a0_0x2419bb[_0xc9a4f9(0x22e)](__dirname,_0xc9a4f9(0x1d4),_0xf3f1e4+_0xc9a4f9(0x1cf)))[_0xc9a4f9(0x246)];log(_0x250224,_0xc9a4f9(0x257)+_0x46fdba);const _0x5f5cb1=await import(_0x46fdba);if(typeof _0x5f5cb1['default']===_0xc9a4f9(0x25b)){const _0x3f9f39=await _0x5f5cb1[_0xc9a4f9(0x252)](_0x209c8e,_0x522bfc);await delay(0x3e8);if(!_0x3f9f39[_0xc9a4f9(0x1e6)])return log(_0x250224,_0xc9a4f9(0x213)+_0xf3f1e4+'\x20không\x20trả\x20về\x20status',null,![]),null;else return _0x3f9f39[_0xc9a4f9(0x1e6)]===_0xc9a4f9(0x20b)?(log(_0x250224,_0xc9a4f9(0x1e1)+_0xf3f1e4+_0xc9a4f9(0x276),null,'i'),_0x3f9f39):(log(_0x250224,_0xc9a4f9(0x1e1)+_0xf3f1e4+'\x20'+_0x3f9f39[_0xc9a4f9(0x1e6)],null,'i'),_0x3f9f39);}else return await delay(0x3e8),log(_0x250224,_0xc9a4f9(0x213)+_0xf3f1e4+_0xc9a4f9(0x26c),null,![]),null;}catch(_0x5f1b80){return log(_0x250224,_0xc9a4f9(0x279)+_0xf3f1e4+':\x20'+_0x5f1b80,null,![]),teleId&&await http[_0xc9a4f9(0x238)](_0x250224,teleId,'['+_0x250224+']['+_0xf3f1e4+'][ERR]:\x20Lỗi\x20'+_0x5f1b80),null;}}async function closeBrowser(_0x11433a='',_0x292fc8){const _0x40de06=a0_0x5de700;try{if(_0x292fc8){if(_0x292fc8[_0x40de06(0x26d)])return await _0x292fc8[_0x40de06(0x234)](),_0x292fc8=null,log(_0x11433a,_0x40de06(0x24e)+_0x11433a+_0x40de06(0x214),null,'w'),!![];}else log(_0x11433a,'[closeBrowser]:\x20Không\x20có\x20trình\x20duyệt\x20để\x20đóng',null,'i');return null;}catch(_0x1904a3){return log(_0x11433a,'[closeBrowser]:\x20Lỗi\x20khi\x20đóng\x20trình\x20duyệt\x20'+_0x11433a+':\x20'+_0x1904a3,null,![]),null;}}async function procScreenArr(_0x5276d8,_0x3a19a2,_0x18cb31){const _0x3d6c14=a0_0x5de700;try{await acquireLock(screenData);let _0x15f99a={};log(_0x18cb31,_0x3d6c14(0x1d0)+_0x5276d8+',\x20pos:\x20'+json(_0x3a19a2),null,'w','-');if(_0x5276d8===_0x3d6c14(0x215)){log(_0x18cb31,_0x3d6c14(0x24c),null,'w'),_0x15f99a['scale']=Atomics[_0x3d6c14(0x25c)](screenData,0x1)/0xf4240,_0x15f99a[_0x3d6c14(0x259)]=Atomics[_0x3d6c14(0x25c)](screenData,0x2),_0x15f99a[_0x3d6c14(0x202)]=Atomics[_0x3d6c14(0x25c)](screenData,0x3);for(let _0x2ea679=0xa;_0x2ea679<screenData[_0x3d6c14(0x1f9)]-0x1;_0x2ea679=_0x2ea679+0x3){const _0x517e10=Atomics[_0x3d6c14(0x25c)](screenData,_0x2ea679);if(_0x517e10===0x2)return Atomics[_0x3d6c14(0x20f)](screenData,_0x2ea679,0x1),_0x15f99a[_0x3d6c14(0x252)]=0x0,_0x15f99a['x']=Atomics[_0x3d6c14(0x25c)](screenData,_0x2ea679+0x1),_0x15f99a['y']=Atomics[_0x3d6c14(0x25c)](screenData,_0x2ea679+0x2),log(_0x18cb31,_0x3d6c14(0x203)+_0x2ea679+'\x20set\x20open\x20ok\x20pos:'+json(_0x15f99a),null,'w'),await releaseLock(screenData),_0x15f99a;if(_0x517e10===0x0)return Atomics[_0x3d6c14(0x20f)](screenData,_0x2ea679,0x1),_0x15f99a['default']=0x1,_0x15f99a['x']=0x0,_0x15f99a['y']=0x0,log(_0x18cb31,_0x3d6c14(0x203)+_0x2ea679+_0x3d6c14(0x21d)+json(_0x15f99a),null,'w'),await releaseLock(screenData),_0x15f99a;}await releaseLock(screenData);throw new Error(_0x3d6c14(0x1dc));}else{if(_0x5276d8===_0x3d6c14(0x234)&&_0x3a19a2['x']>=0x0&&_0x3a19a2['y']>=0x0){log(_0x18cb31,_0x3d6c14(0x264),null,'w');if(_0x3a19a2[_0x3d6c14(0x252)]===0x1)return log(_0x18cb31,'[worker1.procScreenArr]vị\x20trí\x20default\x20không\x20cần\x20close',null,'w'),await releaseLock(screenData),!![];for(let _0x3baea0=0xa;_0x3baea0<screenData[_0x3d6c14(0x1f9)]-0x1;_0x3baea0+=0x3){const _0x624f85=Atomics[_0x3d6c14(0x25c)](screenData,_0x3baea0);if(_0x624f85===0x1){const _0x43eff0=Atomics[_0x3d6c14(0x25c)](screenData,_0x3baea0+0x1),_0x490cf0=Atomics[_0x3d6c14(0x25c)](screenData,_0x3baea0+0x2);if(_0x43eff0===_0x3a19a2['x']&&_0x490cf0===_0x3a19a2['y'])return Atomics[_0x3d6c14(0x20f)](screenData,_0x3baea0,0x2),log(_0x18cb31,_0x3d6c14(0x203)+_0x3baea0+_0x3d6c14(0x26f),null,'w'),Atomics['notify'](screenData,_0x3baea0),await releaseLock(screenData),!![];}}await releaseLock(screenData);throw new Error(_0x3d6c14(0x272)+_0x5276d8+_0x3d6c14(0x283)+json(_0x3a19a2));}else return log(_0x18cb31,'[worker1.procScreenArr]\x20posVal:'+json(_0x3a19a2)+_0x3d6c14(0x1f3)+_0x5276d8,null,'w'),await releaseLock(screenData),!![];}}catch(_0x1ab06f){return log(_0x18cb31,_0x3d6c14(0x212)+_0x1ab06f+'\x20action:\x20'+_0x5276d8+_0x3d6c14(0x283)+json(_0x3a19a2),null,![]),await releaseLock(screenData),![];}}async function acquireLock(_0x144d4e,_0x18413e=0x7530){const _0x262fdf=a0_0x5de700,_0x23a6fb=Date['now']();while(Atomics[_0x262fdf(0x1fb)](_0x144d4e,0x8,0x0,0x1)!==0x0){if(Date[_0x262fdf(0x25e)]()-_0x23a6fb>_0x18413e)throw new Error(_0x262fdf(0x1fe));Atomics[_0x262fdf(0x274)](_0x144d4e,0x8,0x1,_0x18413e);}}async function releaseLock(_0x53c5e2){const _0xe06199=a0_0x5de700;Atomics[_0xe06199(0x20f)](_0x53c5e2,0x8,0x0),Atomics[_0xe06199(0x1df)](_0x53c5e2,0x8);}async function xoaTimeout(_0xcd3cc9){const _0x15c49d=a0_0x5de700;try{clearTimeout(_0xcd3cc9),log(_0x15c49d(0x21e)+_0xcd3cc9,null,'i',_0x15c49d(0x27c));}catch(_0x23e1ec){log(_0x15c49d(0x258)+_0x23e1ec,null,![]);}}async function xoaInterval(_0x16acff){const _0x4a4d01=a0_0x5de700;try{clearInterval(_0x16acff),log(_0x4a4d01(0x210)+_0x16acff,null,'i',_0x4a4d01(0x1dd));}catch(_0xdd3a7a){log(_0x4a4d01(0x258)+_0xdd3a7a,null,![]);}}async function delay(_0x5e03b7){return new Promise(async _0x14e631=>{setTimeout(_0x14e631,_0x5e03b7);});}async function eTimeout(){const _0x11d630=a0_0x5de700;return log('[eTimeout]worker1:\x20timeout',null,'w'),Atomics[_0x11d630(0x20f)](tasksData,taskInfo[_0x11d630(0x207)],0x1),!![];}async function cTimeout(){if(Atomics['load'](tasksData,taskInfo['taskIndex'])===0x1)return!![];return null;}async function rstTimeout(){const _0x1ebbb8=a0_0x5de700;return log('[eTimeout]worker1:\x20reset\x20timeout',null,'w'),Atomics[_0x1ebbb8(0x1fb)](tasksData,taskInfo[_0x1ebbb8(0x207)],0x1,0x2),!![];}
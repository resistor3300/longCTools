const a0_0xca4d78=a0_0x29af;(function(_0x307dee,_0x31aea7){const _0x51fbbc=a0_0x29af,_0x62abd7=_0x307dee();while(!![]){try{const _0xad1f79=parseInt(_0x51fbbc(0x106))/0x1+-parseInt(_0x51fbbc(0x10c))/0x2*(parseInt(_0x51fbbc(0x9e))/0x3)+-parseInt(_0x51fbbc(0x8a))/0x4+parseInt(_0x51fbbc(0xc9))/0x5+-parseInt(_0x51fbbc(0xc3))/0x6*(-parseInt(_0x51fbbc(0x127))/0x7)+parseInt(_0x51fbbc(0xc2))/0x8*(parseInt(_0x51fbbc(0xc0))/0x9)+-parseInt(_0x51fbbc(0xf4))/0xa;if(_0xad1f79===_0x31aea7)break;else _0x62abd7['push'](_0x62abd7['shift']());}catch(_0x26f252){_0x62abd7['push'](_0x62abd7['shift']());}}}(a0_0x2475,0x41b92));import'dotenv/config';import a0_0x375c17 from'fs';import a0_0x5271e5 from'path';import{fileURLToPath,pathToFileURL}from'url';import{expose}from'threads/worker';import{log,json}from'./modules/logger.js';import a0_0x4c4110 from'./modules/Genlogin.js';import a0_0x5b5617 from'./modules/http.js';function a0_0x29af(_0x33287e,_0x481e56){const _0x2475a3=a0_0x2475();return a0_0x29af=function(_0x29af31,_0x562e91){_0x29af31=_0x29af31-0x71;let _0x153dba=_0x2475a3[_0x29af31];return _0x153dba;},a0_0x29af(_0x33287e,_0x481e56);}import a0_0x5e6e7d from'p-queue';const __filename=fileURLToPath(import.meta[a0_0xca4d78(0x96)]),__dirname=a0_0x5271e5[a0_0xca4d78(0xe9)](__filename);let profileQueue,genlogin,profileNameId0,profileId,http,getAllProfiles,taskInfo,GenDataProfile,screenArrData,timgame;genlogin=new a0_0x4c4110('',!![]),http=new a0_0x5b5617(process[a0_0xca4d78(0x7b)][a0_0xca4d78(0x10a)],process[a0_0xca4d78(0x7b)][a0_0xca4d78(0x9f)],!![]);let firstRun=!![],delayOpenProfile=0xbb8,profileTimeout=0x5265c0,botTimeout=0x5265c0,profileThreads=0x1,browserInfo={},version,pos0,screenData,tasksData,screenDataBuffer1,tasksDataBuffer1,teleId=null;const worker1=async _0x43d7eb=>{const _0x28db4a=a0_0xca4d78,{tasksDataBuffer:_0x5d549f,screenDataBuffer:_0x4a51a2,action:_0x41942a,task:_0x392efa,dataBrw:_0x453287,GenDataProfile0:_0x348b77,timgame0:_0x5814e9,dataPayload:_0x432db2,timeout:_0x217bb5,tele_id:_0x379650}=_0x43d7eb;taskInfo=_0x392efa;_0x379650&&_0x379650[_0x28db4a(0xc7)]&&(teleId=_0x379650[_0x28db4a(0xc7)]);screenDataBuffer1=_0x4a51a2,tasksDataBuffer1=_0x5d549f,screenData=new Int32Array(_0x4a51a2),tasksData=new Int32Array(_0x5d549f);try{if(_0x217bb5)return log(_0x28db4a(0xbe),_0x28db4a(0x11b),null,'w'),{'success':![],'error':_0x28db4a(0x11b)};else{if(_0x392efa!==_0x28db4a(0x74)){getAllProfiles=_0x453287,log(_0x28db4a(0xbe),_0x28db4a(0x10d)+JSON['stringify'](_0x43d7eb['task']),null,'c'),log('worker1',_0x28db4a(0xa1)+JSON['stringify'](getAllProfiles),null,'c'),GenDataProfile=_0x348b77,timgame=_0x5814e9,log(_0x28db4a(0xbe),'['+_0x392efa[_0x28db4a(0xec)]+_0x28db4a(0x122),null,'w');const _0x2bdaf1=await xuLyTask(_0x392efa);return log(_0x28db4a(0xbe),''+JSON[_0x28db4a(0xa4)](_0x2bdaf1),null,'w'),log(_0x28db4a(0xbe),_0x28db4a(0xee),null,'w','done'),_0x2bdaf1?{'success':!![],'result':_0x2bdaf1}:{'success':![],'result':_0x2bdaf1};}else return log('worker1',_0x28db4a(0x71)+_0x392efa,null,'w'),{'success':![],'error':_0x28db4a(0xbe)};}}catch(_0x1b74c3){return log(_0x28db4a(0xbe),_0x28db4a(0x9a)+_0x1b74c3,null,![]),{'success':![],'error':'worker1'};}};expose({'worker1':worker1});async function xuLyTask(_0x2e6ddd){const _0x2b9042=a0_0xca4d78;try{log(_0x2b9042(0xbe),'['+_0x2e6ddd[_0x2b9042(0xec)]+_0x2b9042(0x81),null,'i','-');const _0x4a517b=await genlogin[_0x2b9042(0xc6)]('worker1'),_0x37ea63=_0x4a517b[_0x2b9042(0xa7)];if(_0x37ea63<_0x2e6ddd['nextrunstamp'])return log('worker1','['+_0x2e6ddd['name']+'][xuLyTask]:\x20Task\x20'+JSON[_0x2b9042(0xa4)](_0x2e6ddd[_0x2b9042(0xec)])+_0x2b9042(0xd2),null,'i'),log('worker1','['+_0x2e6ddd[_0x2b9042(0xec)]+_0x2b9042(0xd5)+JSON[_0x2b9042(0xa4)](_0x4a517b)+_0x2b9042(0x123)+JSON[_0x2b9042(0xa4)](_0x2e6ddd[_0x2b9042(0x7f)]),null,'w'),log('worker1','['+_0x2e6ddd[_0x2b9042(0xec)]+_0x2b9042(0xd5)+JSON[_0x2b9042(0xa4)](_0x37ea63)+'\x20|\x20nextrun:\x20'+JSON[_0x2b9042(0xa4)](taskNextRunDateTime),null,'w'),log(_0x2b9042(0xbe),'['+_0x2e6ddd[_0x2b9042(0xec)]+_0x2b9042(0x7d),null,'i'),await delay(0x1388),null;let _0x497a8f=await http['getTask'](_0x2b9042(0xbe),_0x2e6ddd[_0x2b9042(0xec)]);if(_0x497a8f[_0x2b9042(0xd9)][_0x2b9042(0xfd)][_0x2b9042(0x91)]<=0x0){log(_0x2b9042(0xbe),'['+_0x2e6ddd[_0x2b9042(0xec)]+_0x2b9042(0xb0),null,![]);throw new Error(_0x2b9042(0xce));}firstRun&&(profileThreads=parseInt(_0x2e6ddd[_0x2b9042(0x112)]),profileQueue=new a0_0x5e6e7d({'concurrency':profileThreads}),log(_0x2b9042(0xbe),'['+_0x2e6ddd['name']+_0x2b9042(0xe2)+profileThreads,null,'w'),firstRun=![],delayOpenProfile=parseInt(_0x2e6ddd['delayOpenProfile'])*0x3e8,profileTimeout=parseInt(_0x2e6ddd[_0x2b9042(0x95)])*0x3e8,botTimeout=parseInt(_0x2e6ddd[_0x2b9042(0xe8)])*0x3e8,version=await getPackageVersion());const _0x373fb0=await xuLyProfiles(_0x497a8f['value'][_0x2b9042(0xfd)],_0x2e6ddd['name']);if(!_0x373fb0){log('worker1','['+_0x2e6ddd[_0x2b9042(0xec)]+_0x2b9042(0x130)+json(_0x373fb0),null,![]);throw new Error(_0x2b9042(0xce));}return log(_0x2b9042(0xbe),'['+_0x2e6ddd[_0x2b9042(0xec)]+_0x2b9042(0x114)+_0x2e6ddd['name']+'\x20ok'),await delay(0x7d0),log(_0x2b9042(0xbe),'['+_0x2e6ddd[_0x2b9042(0xec)]+_0x2b9042(0x8b)+JSON[_0x2b9042(0xa4)](_0x2e6ddd[_0x2b9042(0xec)])),!![];}catch(_0x5baa21){return log(_0x2b9042(0xbe),'['+_0x2e6ddd[_0x2b9042(0xec)]+_0x2b9042(0xff)+_0x5baa21,null,![]),null;}}async function xuLyProfiles(_0x712e65,_0x1868bb){const _0x268802=a0_0xca4d78;try{const _0x36bfa6=[];for(const [_0x3d8715,_0x130a4e]of _0x712e65[_0x268802(0x89)]()){const _0x16d49e=await GenDataProfile[_0x268802(0xc4)](_0x251e7d=>_0x251e7d[_0x268802(0xef)]===_0x130a4e);if(_0x3d8715!==-0x1)log(_0x268802(0xbe),'['+_0x1868bb+'][xuLyProfiles]index:\x20'+_0x16d49e);else{log('worker1','['+_0x1868bb+'][xuLyProfiles]Không\x20tìm\x20thấy\x20indexGenP');throw new Error(_0x268802(0xa3));}log(_0x268802(0xbe),'['+_0x1868bb+_0x268802(0x126)+_0x130a4e+_0x268802(0xc5)+profileThreads,null,'i'),_0x36bfa6[_0x268802(0x103)](profileQueue[_0x268802(0x113)](async()=>{const _0x21b736=_0x268802;try{delayOpenProfile>0x0?(log(_0x21b736(0xbe),'['+_0x1868bb+_0x21b736(0x12e)+_0x130a4e+'\x20sau\x20'+delayOpenProfile+'ms',null,'w','-'),await delay(delayOpenProfile)):log(_0x21b736(0xbe),'['+_0x1868bb+_0x21b736(0x12e)+_0x130a4e,null,'w','-'),await xuLyTungProfile(_0x130a4e,GenDataProfile[_0x16d49e]);}catch(_0xb9db31){log(_0x21b736(0xbe),'['+_0x1868bb+_0x21b736(0x120)+_0x130a4e+':\x20'+_0xb9db31[_0x21b736(0xae)],null,![]);throw _0xb9db31;}})),log(_0x268802(0xbe),'['+_0x1868bb+_0x268802(0xe3)+_0x130a4e+_0x268802(0x78));}const _0x19f539=await Promise['allSettled'](_0x36bfa6),_0x59ac84=_0x19f539[_0x268802(0x12f)](_0x5efd06=>_0x5efd06['status']===_0x268802(0x73));return _0x59ac84['length']>0x0?log(_0x268802(0xbe),'['+_0x1868bb+'][xuLyProfiles]:\x20Một\x20số\x20profiles\x20gặp\x20lỗi:\x20'+JSON['stringify'](_0x59ac84),null,![]):log(_0x268802(0xbe),'['+_0x1868bb+'][xuLyProfiles]:\x20Đã\x20xử\x20lý\x20tất\x20cả\x20profiles\x20thành\x20công\x20'+json(_0x19f539)),!![];}catch(_0x1da982){return log(_0x268802(0xbe),'['+_0x1868bb+_0x268802(0x82)+_0x1da982,null,![]),null;}}async function xuLyTungProfile(_0x2cbc35,_0xab9958){const _0x271290=a0_0xca4d78;let _0x34715c,_0x3b863f;const _0xa312bc=_0x2cbc35;let _0x45c303;try{await delay(delayOpenProfile),log(_0x2cbc35,'[xuLyTungProfile]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile',null,'i'),_0x34715c=await genlogin[_0x271290(0xc6)](_0x2cbc35),await http[_0x271290(0xf5)](_0x271290(0xbe),_0x2cbc35,_0x271290(0x117),_0x34715c['date'],'','Version:'+version,_0x271290(0x129));teleId&&await http[_0x271290(0x88)](_0x2cbc35,teleId,'['+_0x2cbc35+']:\x20START\x20SCRIPT');log(_0x2cbc35,'[xuLyTungProfile]0:\x20Kiểm\x20tra\x20màn\x20hình\x20'+_0x2cbc35,null,'w'),_0x45c303=await procScreenArr('open',null,_0x2cbc35);if(_0x45c303['x']===undefined||_0x45c303['y']===undefined){log(_0x2cbc35,_0x271290(0xab),null,![]);throw new Error(_0x271290(0x86));}const _0x270954=await xuLyBrowser(_0x2cbc35,_0xab9958,_0x45c303);await procScreenArr(_0x271290(0x93),_0x45c303,_0x2cbc35);const _0x1a67ae=await genlogin[_0x271290(0xf7)](_0x34715c[_0x271290(0xdb)]);return await http[_0x271290(0xf5)](_0x271290(0xbe),_0x2cbc35,_0x271290(0xcd),'','',_0x1a67ae,'Stop'),teleId&&await http['tele'](_0x2cbc35,teleId,'['+_0x2cbc35+_0x271290(0x85)),_0x270954;}catch(_0x1e6f85){log(_0x2cbc35,'[xuLyTungProfile]:\x20Lỗi:\x20'+_0x1e6f85,null,![]);if(_0x3b863f)await Thread[_0x271290(0xaa)](_0x3b863f);await procScreenArr(_0x271290(0x93),_0x45c303,_0x2cbc35);const _0x38888d=await genlogin[_0x271290(0xf7)](_0x34715c?.[_0x271290(0xdb)]||Date[_0x271290(0xf1)]());await http[_0x271290(0xf5)](_0x271290(0xbe),_0x2cbc35,_0x271290(0xcd),'','',_0x38888d,_0x271290(0x11a));teleId&&await http[_0x271290(0x88)](_0x2cbc35,teleId,'['+_0x2cbc35+_0x271290(0x9c));throw _0x1e6f85;}}async function xuLyBrowser(_0x23d9d4,_0x25f412,_0x1a05a8){const _0x392c9b=a0_0xca4d78;let _0x29e823;try{const _0x4dcaaf=_0x23d9d4;if(!browserInfo[_0x23d9d4])browserInfo[_0x23d9d4]={};browserInfo[_0x23d9d4]['fisrtOpenBrowser']=0x0,log(_0x23d9d4,_0x392c9b(0xf2)+json(browserInfo),null,'w','w');if(browserInfo[_0x23d9d4]['fisrtOpenBrowser']==0x0){_0x29e823=await OpenBrowser(_0x23d9d4,_0x25f412,_0x1a05a8);if(!_0x29e823){log(_0x23d9d4,_0x392c9b(0xd1)+_0x23d9d4,null,![]);throw new Error('[xuLyBrowser]:\x20Không\x20mở\x20được\x20trình\x20duyệt\x20'+_0x23d9d4);}browserInfo[_0x23d9d4][_0x392c9b(0xe4)]=0x1;}if(!_0x29e823[_0x392c9b(0x10e)])throw new Error(_0x392c9b(0x12d)+_0x23d9d4);let _0x252891=0x0;const _0x200693=await http[_0x392c9b(0xad)]('worker1',_0x4dcaaf);if(!_0x200693){log(_0x23d9d4,_0x392c9b(0x79),null,![]);throw new Error('No\x20bot\x20found');}if(_0x200693['length']<=0x0){log(_0x23d9d4,_0x392c9b(0x10f),null,![]);throw new Error('No\x20bot\x20found');}for(const _0x173d2f of _0x200693){if(_0x173d2f){if(_0x173d2f['type']!=_0x392c9b(0x90))continue;if(_0x173d2f[_0x392c9b(0xd9)]==='end'){log(_0x23d9d4,_0x392c9b(0xeb),null,'i');break;}if(!_0x173d2f[_0x392c9b(0x7a)]){log(_0x23d9d4,':\x20Bot\x20'+json(_0x173d2f)+_0x392c9b(0xf8),null,![]);continue;}if(_0x173d2f[_0x392c9b(0x8e)]==='0'){log(_0x23d9d4,_0x392c9b(0xa0)+json(_0x173d2f['name'])+_0x392c9b(0xda),null,![]);continue;}const _0x7aca97=await genlogin['nowTime'](_0x23d9d4);if(_0x173d2f[_0x392c9b(0xfa)]>_0x7aca97[_0x392c9b(0xdb)]){log(_0x23d9d4,_0x392c9b(0xa0)+json(_0x173d2f[_0x392c9b(0xec)])+'\x20Chưa\x20tới\x20giờ\x20chạy',null,'w');continue;}switch(_0x173d2f[_0x392c9b(0x7a)]){case'A':log(_0x23d9d4,':\x20'+json(_0x173d2f[_0x392c9b(0xec)])+_0x392c9b(0xf9)),await xuLyGame(_0x173d2f,'A',_0x23d9d4,_0x25f412,_0x1a05a8,_0x29e823);break;case'K':log(_0x23d9d4,':\x20'+json(_0x173d2f[_0x392c9b(0xec)])+_0x392c9b(0xc8)),await xuLyGame(_0x173d2f,'K',_0x23d9d4,_0x25f412,_0x1a05a8,_0x29e823);break;case'W':log(_0x23d9d4,':\x20'+json(_0x173d2f['name'])+'\x20Web\x20OK'),await xuLyGame(_0x173d2f,'W',_0x23d9d4,_0x25f412,_0x1a05a8,_0x29e823);break;default:log(_0x23d9d4,_0x392c9b(0xca)+json(_0x173d2f[_0x392c9b(0x7a)]),null,![]);break;}log(_0x23d9d4,_0x392c9b(0xbf));}}return await closeBrowser(_0x23d9d4,_0x29e823),!![];}catch(_0x143b27){return log(_0x23d9d4,_0x392c9b(0x134)+_0x143b27,null,![]),await closeBrowser(_0x23d9d4,_0x29e823),null;}}async function xuLyGame(_0x47d373,_0x30bb0b,_0x2ff7a6,_0x4fc93f,_0x50f6b0,_0x4eeb2f){const _0x407066=a0_0xca4d78;try{const _0x4c4715=_0x2ff7a6;if(_0x47d373[_0x407066(0x11f)]==='api'){log(_0x2ff7a6,'[xuLyGame]:\x20'+_0x47d373[_0x407066(0xec)]+_0x407066(0xdf),null,'i');const _0x23bc0b=await genlogin[_0x407066(0xc6)](_0x2ff7a6),_0x15c3f8=await http[_0x407066(0xf5)](_0x2ff7a6,_0x4c4715,_0x47d373['name'],_0x23bc0b[_0x407066(0xa7)],'',_0x407066(0x136),_0x407066(0x119)),_0x554cd8=_0x15c3f8['ID'],_0x5e88ab={'bot':_0x47d373,'profileNameId':_0x2ff7a6,'genlogin':genlogin,'http':http,'dataId':_0x554cd8},_0x51102e=await loadGameApi(_0x47d373[_0x407066(0xec)],_0x5e88ab);if(!_0x51102e[_0x407066(0xe5)])return log(_0x2ff7a6,_0x407066(0xe0)+_0x47d373[_0x407066(0xec)]+'\x20lỗi',null,![]),await http[_0x407066(0x133)](_0x2ff7a6,_0x4c4715,_0x554cd8,'Fail',_0x407066(0x110)),null;if(_0x51102e['status']=='loop')return log(_0x2ff7a6,_0x407066(0xe0)+_0x47d373['name']+_0x407066(0x128),null,'i'),_0x407066(0xd6);if(_0x51102e[_0x407066(0xe5)])return log(_0x2ff7a6,_0x407066(0xe0)+_0x47d373[_0x407066(0xec)]+_0x407066(0x104)),await http[_0x407066(0x92)](_0x2ff7a6,_0x4c4715,_0x47d373['id'],_0x51102e[_0x407066(0x12b)],_0x51102e['nextRunStamp']),await http[_0x407066(0x133)](_0x2ff7a6,_0x4c4715,_0x554cd8,'Ok',_0x407066(0xd7),_0x51102e['coin'],_0x51102e['nextRun']),!![];}else{log(_0x2ff7a6,_0x407066(0xd3)+_0x47d373[_0x407066(0xec)]+'\x20Script\x20mode',null,'i');const _0x22e380=await http[_0x407066(0x8c)](_0x2ff7a6,_0x30bb0b);if(_0x22e380){log(_0x2ff7a6,_0x407066(0x107));let _0xd8e738=0x0;while(_0xd8e738<0x2){const _0x3bc3ef=await checkTeleWebOpen(_0x47d373,_0x22e380,_0x2ff7a6,_0x50f6b0,_0x4eeb2f);if(_0x3bc3ef===_0x407066(0xd6))_0xd8e738++,log(_0x2ff7a6,_0x407066(0xb3)+_0xd8e738+'/2',null,'i'),await delay(0x3e8);else return _0x3bc3ef?(log(_0x2ff7a6,_0x407066(0x87)),!![]):(log(_0x2ff7a6,_0x407066(0xba),null,![]),null);}return log(_0x2ff7a6,_0x407066(0x118),null,![]),null;}}}catch(_0x54f177){return log(_0x2ff7a6,_0x407066(0x12a)+_0x54f177,null,![]),null;}}async function OpenBrowser(_0x143d0a,_0x4a4960,_0x14c4d4){const _0x219d61=a0_0xca4d78;try{const _0x5a53a6=_0x143d0a;log(_0x143d0a,'[OpenBrowser]:\x20Processing\x20profile:\x20'+JSON['stringify'](_0x143d0a),null,'i');if(getAllProfiles[_0x219d61(0xf6)]==='n'){const _0x5c115d=getAllProfiles[_0x219d61(0x75)]['split']('x');parseInt(_0x5c115d[0x0])>=0x0&&parseInt(_0x5c115d[0x1])>=0x0?(_0x14c4d4['x']=parseInt(_0x5c115d[0x0]),_0x14c4d4['y']=parseInt(_0x5c115d[0x1])):(_0x14c4d4['x']=0x0,_0x14c4d4['y']=0x0),log(_0x143d0a,_0x219d61(0x11e)+_0x14c4d4['x']+'x'+_0x14c4d4['y'],null,'w');}const _0x5e78b0=await genlogin[_0x219d61(0xe7)](_0x143d0a,getAllProfiles,_0x4a4960,_0x14c4d4);log(_0x143d0a,_0x219d61(0x76)+JSON['stringify'](_0x5e78b0),null,'i'),await delay(0x1388);if(_0x5e78b0){let _0x11c6aa=0x0;const _0x836e32=0xa;while(_0x11c6aa<_0x836e32){_0x11c6aa++;const _0x1c8e94=await genlogin[_0x219d61(0x111)](_0x143d0a,_0x5e78b0);if(_0x1c8e94<=0x1)return log(_0x143d0a,_0x219d61(0x12c)+_0x1c8e94+_0x219d61(0xcc),null,'i'),_0x5e78b0;const _0x5003ae=await genlogin[_0x219d61(0x108)](_0x143d0a,_0x5e78b0,_0x1c8e94-0x1,0xbb8);if(!_0x5003ae){log(_0x143d0a,_0x219d61(0x84),null,![]);continue;}log(_0x143d0a,_0x219d61(0xa6)),await delay(0xbb8);continue;}}return log(_0x143d0a,_0x219d61(0x11d)+JSON[_0x219d61(0xa4)](_0x143d0a)),null;}catch(_0x2f6a59){throw new Error(_0x219d61(0x11c)+_0x2f6a59[_0x219d61(0xae)]);}}async function checkTeleWebOpen(_0x5c3284,_0x1455c1,_0x5e9b64,_0x183e0f,_0x4467bc){const _0x225126=a0_0xca4d78;let _0x41bfc3;try{let _0x5eaf7f=await genlogin[_0x225126(0xb8)](_0x5e9b64,_0x4467bc,0x0,getAllProfiles[_0x225126(0xdd)],_0x183e0f[_0x225126(0x115)]);const _0x32ff92=await genlogin['elementExistsByXPath'](_0x5e9b64,_0x5eaf7f,_0x1455c1[_0x225126(0x125)],0x7d0);!_0x32ff92&&(await genlogin[_0x225126(0x9b)](_0x5e9b64,_0x5eaf7f,'https://www.google.com',0xea60),await delay(0x7d0),await genlogin['openUrl'](_0x5e9b64,_0x5eaf7f,_0x1455c1[_0x225126(0xb5)],0xea60),await genlogin[_0x225126(0x105)](_0x5e9b64,_0x5eaf7f,_0x5e9b64),await delay(0x1388));log(_0x5e9b64,'[checkTeleWebOpen]:\x20vào\x20loadGame',null,'i');const _0x13e33b=await genlogin[_0x225126(0xc6)](_0x5e9b64),_0x2941bb=await http[_0x225126(0xf5)](_0x5e9b64,_0x5e9b64,_0x5c3284[_0x225126(0xec)],_0x13e33b[_0x225126(0xa7)],'',_0x225126(0x129),_0x225126(0x119));_0x41bfc3=_0x2941bb['ID'];const _0x27eff6={'firstPage':_0x5eaf7f,'bot':_0x5c3284,'profileNameId':_0x5e9b64,'getAks':_0x1455c1,'genlogin':genlogin,'http':http,'browser':_0x4467bc,'dataId':_0x2941bb['ID'],'taskIndex':taskInfo['taskIndex'],'screenDataBuffer2':screenDataBuffer1,'tasksDataBuffer2':tasksDataBuffer1};let _0x134920=null;log(_0x5e9b64,_0x225126(0x9d)+json(_0x41bfc3),null,'i');if(timgame){await http[_0x225126(0x133)](_0x5e9b64,_0x5e9b64,_0x41bfc3,'Tìm');const _0x3bdae9=await loadGame('timGame',_0x27eff6,_0x134920,_0x41bfc3,_0x5e9b64);if(_0x3bdae9[_0x225126(0xe5)]==_0x225126(0xd6))return log(_0x5e9b64,_0x225126(0xa5)+_0x5c3284['name']+'\x20loop',null,'i'),await http[_0x225126(0x133)](_0x5e9b64,_0x5e9b64,_0x41bfc3,_0x225126(0x7c)),'loop';else{if(!_0x3bdae9)return log(_0x5e9b64,_0x225126(0x131)+_0x5c3284[_0x225126(0xec)],null,![]),await http[_0x225126(0x133)](_0x5e9b64,_0x5e9b64,_0x41bfc3,_0x225126(0x110),'Fail'),null;}_0x3bdae9[_0x225126(0xac)]&&(_0x134920=_0x3bdae9[_0x225126(0xac)]);}await http[_0x225126(0x133)](_0x5e9b64,_0x5e9b64,_0x41bfc3,_0x225126(0x98));const _0x57faf4=await loadGame(_0x5c3284[_0x225126(0xec)],_0x27eff6,_0x134920,_0x41bfc3,_0x5e9b64);if(!_0x57faf4['status'])return log(_0x5e9b64,_0x225126(0xc1)+_0x5c3284['name'],null,![]),log(_0x5e9b64,_0x225126(0xfc)+json(_0x57faf4),null,![]),await http[_0x225126(0x133)](_0x5e9b64,_0x5e9b64,_0x41bfc3,_0x225126(0x110),_0x225126(0x110)),null;else{if(_0x57faf4[_0x225126(0xe5)]==_0x225126(0xd6))return log(_0x5e9b64,_0x225126(0xa5)+_0x5c3284[_0x225126(0xec)]+'\x20loop',null,'i'),await http['updateData'](_0x5e9b64,_0x5e9b64,_0x41bfc3,_0x225126(0xd6)),'loop';}return await http[_0x225126(0x92)](_0x5e9b64,_0x5e9b64,_0x5c3284['id'],_0x57faf4[_0x225126(0x12b)],_0x57faf4[_0x225126(0xfa)]),await http[_0x225126(0x133)](_0x5e9b64,_0x5e9b64,_0x41bfc3,'Ok',_0x225126(0xd7),_0x57faf4[_0x225126(0xa8)],_0x57faf4[_0x225126(0x12b)]),log(_0x5e9b64,_0x225126(0x101)+_0x5c3284[_0x225126(0xec)]+_0x225126(0x99)),await delay(0x7d0),!![];}catch(_0xd90269){return log(_0x5e9b64,_0x225126(0x83)+_0xd90269,null,![]),await http[_0x225126(0x133)](_0x5e9b64,_0x5e9b64,_0x41bfc3,_0x225126(0x110),_0x225126(0x110)),null;}}async function loadGame(_0x1b8cd2,_0x49569a,_0x49d807,_0xcaed31,_0x4cf4fc){const _0x59b6a8=a0_0xca4d78;try{const _0x16c5ad=pathToFileURL(a0_0x5271e5[_0x59b6a8(0x102)](__dirname,_0x59b6a8(0xea),_0x1b8cd2+'.js'))['href'];log(_0x4cf4fc,'[loadGame]:scriptPath\x20'+_0x16c5ad);const _0x49b8f7=await import(_0x16c5ad);if(typeof _0x49b8f7[_0x59b6a8(0xb7)]===_0x59b6a8(0x72)){const _0x5548e2=await _0x49b8f7['default'](_0x49569a,_0x49d807);await delay(0x3e8);if(!_0x5548e2[_0x59b6a8(0xe5)])return log(_0x4cf4fc,_0x59b6a8(0xf0)+_0x1b8cd2+_0x59b6a8(0x121),null,![]),null;else return _0x5548e2[_0x59b6a8(0xe5)]===_0x59b6a8(0xd6)?(log(_0x4cf4fc,'[loadGame]:\x20Chạy\x20'+_0x1b8cd2+_0x59b6a8(0x128),null,'i'),_0x5548e2):(log(_0x4cf4fc,_0x59b6a8(0xdc)+_0x1b8cd2+'\x20'+_0x5548e2['status'],null,'i'),_0x5548e2);}else return await delay(0x3e8),log(_0x4cf4fc,'[loadGame]:\x20Script\x20'+_0x1b8cd2+_0x59b6a8(0xa9),null,![]),null;}catch(_0x1fe124){return log(_0x4cf4fc,'[loadGame]:\x20Lỗi\x20khi\x20load\x20và\x20thực\x20thi\x20script\x20'+_0x1b8cd2+':\x20'+_0x1fe124,null,![]),teleId&&await http[_0x59b6a8(0x88)](_0x4cf4fc,teleId,'['+_0x4cf4fc+']['+_0x1b8cd2+_0x59b6a8(0xd4)+_0x1fe124),null;}}async function closeBrowser(_0x24a5b0='',_0x21678c){const _0x454c80=a0_0xca4d78;try{if(_0x21678c){if(_0x21678c[_0x454c80(0x10e)])return await _0x21678c[_0x454c80(0x93)](),log(_0x24a5b0,_0x454c80(0xbc)+_0x24a5b0+_0x454c80(0x99),null,'w'),!![];}else log(_0x24a5b0,_0x454c80(0xfe),null,'i');return null;}catch(_0xb7a923){return log(_0x24a5b0,'[closeBrowser]:\x20Lỗi\x20khi\x20đóng\x20trình\x20duyệt\x20'+_0x24a5b0+':\x20'+_0xb7a923,null,![]),null;}}async function procScreenArr(_0x5832cc,_0x4251e9,_0xfa8bcf){const _0x4b67ab=a0_0xca4d78;try{await acquireLock(screenData);let _0x52a976={};log(_0xfa8bcf,_0x4b67ab(0xb6)+_0x5832cc+',\x20pos:\x20'+json(_0x4251e9),null,'w','-');if(_0x5832cc===_0x4b67ab(0x10b)){log(_0xfa8bcf,_0x4b67ab(0xd0),null,'w'),_0x52a976['scale']=Atomics[_0x4b67ab(0x124)](screenData,0x1)/0xf4240,_0x52a976[_0x4b67ab(0xcf)]=Atomics[_0x4b67ab(0x124)](screenData,0x2),_0x52a976['height']=Atomics['load'](screenData,0x3);for(let _0x4db832=0xa;_0x4db832<screenData[_0x4b67ab(0x91)]-0x1;_0x4db832=_0x4db832+0x3){const _0x4d181f=Atomics[_0x4b67ab(0x124)](screenData,_0x4db832);if(_0x4d181f===0x2)return Atomics['store'](screenData,_0x4db832,0x1),_0x52a976[_0x4b67ab(0xb7)]=0x0,_0x52a976['x']=Atomics[_0x4b67ab(0x124)](screenData,_0x4db832+0x1),_0x52a976['y']=Atomics[_0x4b67ab(0x124)](screenData,_0x4db832+0x2),log(_0xfa8bcf,_0x4b67ab(0xb2)+_0x4db832+'\x20set\x20open\x20ok\x20pos:'+json(_0x52a976),null,'w'),await releaseLock(screenData),_0x52a976;if(_0x4d181f===0x0)return Atomics[_0x4b67ab(0x8f)](screenData,_0x4db832,0x1),_0x52a976[_0x4b67ab(0xb7)]=0x1,_0x52a976['x']=0x0,_0x52a976['y']=0x0,log(_0xfa8bcf,_0x4b67ab(0xb2)+_0x4db832+_0x4b67ab(0xb9)+json(_0x52a976),null,'w'),await releaseLock(screenData),_0x52a976;}await releaseLock(screenData);throw new Error('Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng');}else{if(_0x5832cc===_0x4b67ab(0x93)&&_0x4251e9['x']>=0x0&&_0x4251e9['y']>=0x0){log(_0xfa8bcf,_0x4b67ab(0xa2),null,'w');if(_0x4251e9[_0x4b67ab(0xb7)]===0x1)return log(_0xfa8bcf,'[worker1.procScreenArr]vị\x20trí\x20default\x20không\x20cần\x20close',null,'w'),await releaseLock(screenData),!![];for(let _0x164e50=0xa;_0x164e50<screenData[_0x4b67ab(0x91)]-0x1;_0x164e50+=0x3){const _0x18720f=Atomics[_0x4b67ab(0x124)](screenData,_0x164e50);if(_0x18720f===0x1){const _0x35340d=Atomics[_0x4b67ab(0x124)](screenData,_0x164e50+0x1),_0x30c2f2=Atomics[_0x4b67ab(0x124)](screenData,_0x164e50+0x2);if(_0x35340d===_0x4251e9['x']&&_0x30c2f2===_0x4251e9['y'])return Atomics[_0x4b67ab(0x8f)](screenData,_0x164e50,0x2),log(_0xfa8bcf,_0x4b67ab(0xb2)+_0x164e50+_0x4b67ab(0xbd),null,'w'),Atomics['notify'](screenData,_0x164e50),await releaseLock(screenData),!![];}}await releaseLock(screenData);throw new Error(_0x4b67ab(0xb4)+_0x5832cc+_0x4b67ab(0x100)+json(_0x4251e9));}else return log(_0xfa8bcf,_0x4b67ab(0x132)+json(_0x4251e9)+'\x20Action:'+_0x5832cc,null,'w'),await releaseLock(screenData),!![];}}catch(_0x2d3e80){return log(_0xfa8bcf,'[worker1.procScreenArr]lỗi\x20'+_0x2d3e80+_0x4b67ab(0xf3)+_0x5832cc+_0x4b67ab(0x100)+json(_0x4251e9),null,![]),await releaseLock(screenData),![];}}async function acquireLock(_0x6425c2,_0x16900e=0x7530){const _0x157c62=a0_0xca4d78,_0x297304=Date[_0x157c62(0xf1)]();while(Atomics['compareExchange'](_0x6425c2,0x8,0x0,0x1)!==0x0){if(Date['now']()-_0x297304>_0x16900e)throw new Error(_0x157c62(0xe1));Atomics[_0x157c62(0x94)](_0x6425c2,0x8,0x1,_0x16900e);}}async function releaseLock(_0x26ff91){const _0x209f7c=a0_0xca4d78;Atomics[_0x209f7c(0x8f)](_0x26ff91,0x8,0x0),Atomics[_0x209f7c(0xd8)](_0x26ff91,0x8);}function a0_0x2475(){const _0x5ee0eb=['\x20set\x20open\x20default\x20pos:','[xuLyGame]:\x20checkTeleWebOpen\x20có\x20gì\x20đó\x20sai\x20sai\x20rồi\x20bro','clrTimeout','[closeBrowser]:\x20Đóng\x20trình\x20duyệt\x20','\x20set\x20close\x20ok','worker1','[xuLyBrowser]:\x20Bot\x20OK','9RTQaXR','[checkTeleWebOpen]:\x20Không\x20thực\x20thi\x20script\x20','1344376skXcpI','318EHowCu','findIndex','\x20vào\x20hàng\x20đợi\x20max:','nowTime','tele_id','\x20Tele\x20K\x20OK','11180pSzGWJ',':\x20Sai\x20aks\x20','[xoaTimeout]worker1:\x20Xóa\x20timeout:','\x20tab\x20đang\x20mở','STOP\x20SCRIPT','No\x20profile\x20found','width','[worker1.procScreenArr]vào\x20open','[xuLyBrowser]:\x20Không\x20mở\x20được\x20trình\x20duyệt\x20','\x20chưa\x20đến\x20thời\x20gian\x20chạy','[xuLyGame]:\x20','][ERR]:\x20Lỗi\x20','][xuLyTask]:\x20currentDateTime:\x20','loop','Done','notify','value','\x20OFF','timestamp','[loadGame]:\x20Chạy\x20','browserWidthHeight','parse','\x20Api\x20mode','[xuLyGame]:\x20Thực\x20thi\x20','Timeout\x20while\x20acquiring\x20lock','][xuLyTask]profileQueue:\x20concurrency:','][xuLyProfiles]:\x20Đã\x20thêm\x20profile\x20','fisrtOpenBrowser','status','[getPackageVersion]Lỗi\x20khi\x20đọc\x20file\x20package.json:\x20','connect','botTimeout','dirname','scripts',':\x20XONG\x201\x20LƯỢT','name','cwd','DONE','pid','[loadGame]:\x20Script\x20','now','[xuLyBrowser]:browserInfo:\x20','\x20action:\x20','2427310bleaRM','addData','autoSetBrowserPosition','tinhThoiGian','\x20ko\x20có\x20aks','\x20Tele\x20A\x20OK','nextRunStamp','clrInterval','[checkTeleWebOpen]:\x20','profiles','[closeBrowser]:\x20Không\x20có\x20trình\x20duyệt\x20để\x20đóng','][xuLyTask]:\x20Lỗi\x20while:\x20',',\x20pos:\x20','[checkTeleWebOpen]:\x20Thực\x20thi\x20script\x20','join','push','\x20done','setTitle','504759ugOPNK','[xuLyGame]:\x20getAks\x20OK','closeTab','utf-8','SERVER_HOST','open','2mHQAYG','[worker1data.task]:data.task\x20','connected','[xuLyBrowser]:\x20không\x20lấy\x20được\x20bot','Fail','countOpenTabs','profileThreads','add','][xuLyTask]:\x20Tasks:\x20','scale','readFile','START\x20SCRIPT','[xuLyGame]:Max\x20loop\x20rồi\x20bro','running','Stop','timeout','Lỗi\x20xử\x20lý\x20profile:\x20','[OpenBrowser]:\x20Lỗi\x20khi\x20mở\x20browser:\x20','[OpenBrowser]:force\x20set\x20Position:\x20','type','][xuLyProfiles]:\x20Lỗi\x20khi\x20xử\x20lý\x20profile\x20','\x20không\x20trả\x20về\x20status',']:\x20Script\x20Mode','\x20|\x20nextrun:\x20','load','InputSearch','][xuLyProfiles]:\x20Thêm\x20profile\x20','7630grFkjj','\x20loop','Start','[xuLyGame]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20Game:\x20','nextRun','[OpenBrowser]]Chỉ\x20có\x20','[xuLyBrowser]:\x20browser\x20disconnected\x20','][xuLyProfiles]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile\x20','filter','][xuLyTask]:\x20Không\x20lấy\x20được\x20dữ\x20liệu\x20profiles\x20','[checkTeleWebOpen]:\x20Không\x20tìm\x20thấy\x20game\x20','[worker1.procScreenArr]\x20posVal:','updateData','[xuLyBrowser]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20browser:\x20','[getPackageVersion]Version:\x20','StartApi','Lỗi\x20gì\x20đó\x20task\x20','function','rejected','screenArr','customBrowserPosition','[OpenBrowser]:\x20GenLogin:\x20','[eTimeout]worker1:\x20timeout','\x20vào\x20hàng\x20đợi.','[xuLyBrowser]:\x20Bot\x20không\x20tìm\x20thấy','aks','env','loop\x20new\x20game','][xuLyTask]:\x20Chờ\x205\x20giây\x20trước\x20khi\x20xử\x20lý\x20task\x20tiếp\x20theo...','compareExchange','nextrun','package.json','][xuLyTask]:\x20vào\x20xuLyTask','][xuLyProfiles]:\x20Lỗi\x20:\x20','[checkTeleWebOpen]:\x20Lỗi\x20trong\x20quá\x20trình\x20mở\x20trang\x20:\x20','[OpenBrowser]\x20Lỗi\x20khi\x20đóng\x20tab\x20mới','][OK]:\x20STOP\x20SCRIPT','Không\x20tìm\x20thấy\x20giá\x20trị\x20status=0','[xuLyGame]:\x20checkTeleWebOpen\x20OK','tele','entries','545064vEHszd','][xuLyTask]:\x20Hoàn\x20thành\x20xử\x20lý\x20task:\x20','getAks','[eTimeout]worker1:\x20reset\x20timeout','onOff','store','script','length','nextRunTime','close','wait','profileTimeout','url','[xoaTimeout]worker1:\x20Xóa\x20Interval:','Vào','\x20thành\x20công','Lỗi\x20','openUrl','][ERR]:\x20STOP\x20SCRIPT','[checkTeleWebOpen]:\x20dataId:\x20','253839zNdDOQ','APIKEY',':\x20Bot\x20','getAllProfiles\x20','[worker1.procScreenArr]vào\x20close','Không\x20tìm\x20thấy\x20indexGenP','stringify','[checkTeleWebOpen]:\x20Thực\x20thi\x20','[OpenBrowser]\x20Đóng\x20tab\x20mới\x20thành\x20công','date','coin','\x20không\x20phải\x20là\x20một\x20hàm\x20hợp\x20lệ','terminate','[xuLyTungProfile]:\x20Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng','HostName','getBotAll','message','taskIndex','][xuLyTask]:\x20không\x20lấy\x20được\x20profile','[xoaTimeout]worker1:\x20','[worker1.procScreenArr]\x20index:','[xuLyGame]:\x20Loop\x20lại\x20,\x20loop\x20lại\x20lần\x20','Không\x20thể\x20đóng\x20màn\x20hình:\x20vị\x20trí\x20không\x20hợp\x20lệ\x20action:\x20','FistUrl','[worker1.procScreenArr]action:\x20','default','activateTab'];a0_0x2475=function(){return _0x5ee0eb;};return a0_0x2475();}async function getPackageVersion(){const _0x1bafe7=a0_0xca4d78;try{const _0x119c4d=a0_0x5271e5[_0x1bafe7(0x102)](process[_0x1bafe7(0xed)](),_0x1bafe7(0x80)),_0xd46875=await a0_0x375c17['promises'][_0x1bafe7(0x116)](_0x119c4d,_0x1bafe7(0x109)),_0x13437c=JSON[_0x1bafe7(0xde)](_0xd46875),_0x530757=_0x13437c['version'];return log('worker1',_0x1bafe7(0x135)+_0x530757,null,'w','-'),_0x530757;}catch(_0x4447d3){return log(_0x1bafe7(0xbe),_0x1bafe7(0xe6)+_0x4447d3,null,![]),null;}}async function xoaTimeout(_0x5abcc2){const _0x3514bd=a0_0xca4d78;try{clearTimeout(_0x5abcc2),log(_0x3514bd(0xcb)+_0x5abcc2,null,'i',_0x3514bd(0xbb));}catch(_0x2c11d4){log(_0x3514bd(0xb1)+_0x2c11d4,null,![]);}}async function xoaInterval(_0x2f1e2d){const _0x496fbb=a0_0xca4d78;try{clearInterval(_0x2f1e2d),log(_0x496fbb(0x97)+_0x2f1e2d,null,'i',_0x496fbb(0xfb));}catch(_0x5be523){log('[xoaTimeout]worker1:\x20'+_0x5be523,null,![]);}}async function delay(_0x4dc0b2){return new Promise(async _0x2d5fde=>{setTimeout(_0x2d5fde,_0x4dc0b2);});}async function eTimeout(){const _0x4a8c79=a0_0xca4d78;return log(_0x4a8c79(0x77),null,'w'),Atomics[_0x4a8c79(0x8f)](tasksData,taskInfo[_0x4a8c79(0xaf)],0x1),!![];}async function cTimeout(){const _0x416a72=a0_0xca4d78;if(Atomics[_0x416a72(0x124)](tasksData,taskInfo[_0x416a72(0xaf)])===0x1)return!![];return null;}async function rstTimeout(){const _0x29f3d5=a0_0xca4d78;return log(_0x29f3d5(0x8d),null,'w'),Atomics[_0x29f3d5(0x7e)](tasksData,taskInfo[_0x29f3d5(0xaf)],0x1,0x2),!![];}
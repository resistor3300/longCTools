const a0_0x31d85f=a0_0x228c;function a0_0x21d6(){const _0x4ec41c=['activateTab','InputSearch','task','rejected','[worker1.procScreenArr]lỗi\x20','timGame','][xuLyProfiles]:\x20Một\x20số\x20profiles\x20gặp\x20lỗi:\x20','nextRunStamp','[OpenBrowser]:force\x20set\x20Position:\x20','][xuLyProfiles]:\x20Đã\x20xử\x20lý\x20tất\x20cả\x20profiles\x20thành\x20công\x20','][xuLyProfiles]:\x20Thêm\x20profile\x20','[OpenBrowser]\x20Đóng\x20tab\x20mới\x20thành\x20công',']:\x20START\x20SCRIPT','Memory','\x20Tele\x20A\x20OK','\x20thành\x20công','tele_id','Lỗi\x20xử\x20lý\x20profile:\x20','height','open','name','length','STOP\x20SCRIPT','ref','[xoaTimeout]worker1:\x20','[xuLyGame]:\x20','SERVER_HOST','end','[xuLyGame]:\x20Thực\x20thi\x20','[xuLyGame]:Max\x20loop\x20rồi\x20bro','load','Timeout\x20while\x20acquiring\x20lock','Start',':\x20Sai\x20aks\x20','env','[OpenBrowser]]Chỉ\x20có\x20','3412eXnysT','timeout','START\x20SCRIPT','\x20sau\x20','addData','botTimeout','[closeBrowser]:\x20Đóng\x20trình\x20duyệt\x20','[closeBrowser]:\x20Lỗi\x20khi\x20đóng\x20trình\x20duyệt\x20','notify','\x20set\x20open\x20default\x20pos:','onOff','[worker1.procScreenArr]vị\x20trí\x20default\x20không\x20cần\x20close','Version:','[worker1.procScreenArr]action:\x20','[xuLyBrowser]:\x20browser\x20disconnected\x20','value','tele','[worker1.procScreenArr]\x20posVal:','script','8rWbWXJ','\x20loop','3324294jPIBgU','done','[checkTeleWebOpen]:\x20Thực\x20thi\x20script\x20','function','[loadGame]:\x20Script\x20','\x20không\x20phải\x20là\x20một\x20hàm\x20hợp\x20lệ','[xoaTimeout]worker1:\x20Xóa\x20timeout:','loop\x20new\x20game','dirname','1580978txUiqo','nowTime',':\x20Bot\x20','\x20không\x20trả\x20về\x20status','close','getBotAll','Lỗi\x20','screenArr','nextRunTime',']:\x20Script\x20Mode','profileTimeout','[xuLyBrowser]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20browser:\x20','getTask','allSettled','taskIndex','worker1','\x20Api\x20mode','[xuLyGame]:\x20checkTeleWebOpen\x20OK','1005645uwHPwX','[xuLyBrowser]:\x20Không\x20mở\x20được\x20trình\x20duyệt\x20','[worker1.procScreenArr]vào\x20open','nextrun',':\x20XONG\x201\x20LƯỢT','][xuLyProfiles]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile\x20','filter','][OK]:\x20STOP\x20SCRIPT','join','][xuLyTask]:\x20không\x20lấy\x20được\x20profile','getAks','DONE','][xuLyTask]:\x20currentDateTime:\x20','[eTimeout]worker1:\x20timeout','\x20set\x20open\x20ok\x20pos:','[checkTeleWebOpen]:\x20dataId:\x20','customBrowserPosition','\x20|\x20nextrun:\x20','connected','][xuLyTask]:\x20vào\x20xuLyTask','][xuLyProfiles]:\x20Đã\x20thêm\x20profile\x20','Vào','][xuLyTask]:\x20Chờ\x205\x20giây\x20trước\x20khi\x20xử\x20lý\x20task\x20tiếp\x20theo...','HostName','wait','\x20tab\x20đang\x20mở','running',',\x20pos:\x20','No\x20profile\x20found','fisrtOpenBrowser','connect','compareExchange','now','\x20Web\x20OK','stringify','findIndex','[checkTeleWebOpen]:\x20Không\x20tìm\x20thấy\x20game\x20','Garbage\x20Collector\x20đã\x20chạy!','message','[loadGame]:\x20Chạy\x20','closeTab','[checkTeleWebOpen]:\x20Lỗi\x20trong\x20quá\x20trình\x20mở\x20trang\x20:\x20','[closeBrowser]:\x20Không\x20có\x20trình\x20duyệt\x20để\x20đóng','openUrl','1347AptvaQ','elementExistsByXPath','\x20Web\x20mode','default','1294360kdfoSH','[OpenBrowser]\x20Lỗi\x20khi\x20đóng\x20tab\x20mới','width','setTitle','][xuLyTask]:\x20Lỗi\x20while:\x20','[worker1.procScreenArr]\x20index:','nextRun','[xuLyGame]:\x20Loop\x20lại\x20,\x20loop\x20lại\x20lần\x20','\x20lỗi','profiles','Không\x20thể\x20đóng\x20màn\x20hình:\x20vị\x20trí\x20không\x20hợp\x20lệ\x20action:\x20','\x20action:\x20','9893891oHmyXX','[loadGame]:\x20Lỗi\x20khi\x20load\x20và\x20thực\x20thi\x20script\x20','][xuLyTask]profileQueue:\x20concurrency:','\x20Tele\x20K\x20OK','[OpenBrowser]:\x20GenLogin:\x20','54ctOtcv','\x20ok','StartApi','Fail','APIKEY','[xuLyBrowser]:browserInfo:\x20','][xuLyTask]:\x20Không\x20lấy\x20được\x20dữ\x20liệu\x20profiles\x20','No\x20bot\x20found','date','Done','timestamp','[xuLyBrowser]:\x20Bot\x20OK','][xuLyTask]:\x20Task\x20','.js','countOpenTabs','[xuLyGame]:\x20checkTeleWebOpen\x20có\x20gì\x20đó\x20sai\x20sai\x20rồi\x20bro','[checkTeleWebOpen]:\x20Không\x20thực\x20thi\x20script\x20','2766950fipdXp','[eTimeout]worker1:\x20reset\x20timeout','href','[OpenBrowser]:\x20Processing\x20profile:\x20','url','scale','][xuLyProfiles]:\x20Lỗi\x20khi\x20xử\x20lý\x20profile\x20','[checkTeleWebOpen]:\x20Thực\x20thi\x20','aks','store','Không\x20tìm\x20thấy\x20indexGenP','status','pid','Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng','\x20OFF','https://www.google.com','[xuLyTungProfile]0:\x20Kiểm\x20tra\x20màn\x20hình\x20','[checkTeleWebOpen]:\x20vào\x20loadGame','[xoaTimeout]worker1:\x20Xóa\x20Interval:','type','\x20Action:','updateData','autoSetBrowserPosition','Stop','Không\x20tìm\x20thấy\x20giá\x20trị\x20status=0','[worker1.procScreenArr]vào\x20close','[xuLyGame]:\x20Sai\x20aks\x20','loop','][ERR]:\x20STOP\x20SCRIPT','coin'];a0_0x21d6=function(){return _0x4ec41c;};return a0_0x21d6();}(function(_0xef4c9d,_0x10de0d){const _0x4ec96d=a0_0x228c,_0xa605de=_0xef4c9d();while(!![]){try{const _0x24a299=parseInt(_0x4ec96d(0xea))/0x1+-parseInt(_0x4ec96d(0x8a))/0x2+-parseInt(_0x4ec96d(0x128))/0x3*(-parseInt(_0x4ec96d(0xcc))/0x4)+parseInt(_0x4ec96d(0xfc))/0x5+-parseInt(_0x4ec96d(0xe1))/0x6+-parseInt(_0x4ec96d(0x138))/0x7*(-parseInt(_0x4ec96d(0xdf))/0x8)+parseInt(_0x4ec96d(0x79))/0x9*(-parseInt(_0x4ec96d(0x12c))/0xa);if(_0x24a299===_0x10de0d)break;else _0xa605de['push'](_0xa605de['shift']());}catch(_0x79de1d){_0xa605de['push'](_0xa605de['shift']());}}}(a0_0x21d6,0xd3079));import'dotenv/config';import a0_0x107e42 from'fs';import a0_0x1a9126 from'path';import{fileURLToPath,pathToFileURL}from'url';import{expose}from'threads/worker';function a0_0x228c(_0x4a66c4,_0x619096){const _0x21d64f=a0_0x21d6();return a0_0x228c=function(_0x228c64,_0x407ffd){_0x228c64=_0x228c64-0x78;let _0x4cbd0c=_0x21d64f[_0x228c64];return _0x4cbd0c;},a0_0x228c(_0x4a66c4,_0x619096);}import{log,json}from'./modules/logger.js';import a0_0x507e7a from'./modules/Genlogin.js';import a0_0x1afc85 from'./modules/http.js';import a0_0x38b138 from'p-queue';const __filename=fileURLToPath(import.meta[a0_0x31d85f(0x8e)]),__dirname=a0_0x1a9126[a0_0x31d85f(0xe9)](__filename);let profileQueue,genlogin,http,getAllProfiles,taskInfo,GenDataProfile,timgame;genlogin=new a0_0x507e7a('',!![]),http=new a0_0x1afc85(process[a0_0x31d85f(0xca)][a0_0x31d85f(0xc2)],process['env'][a0_0x31d85f(0x7d)],!![]);let firstRun=!![],delayOpenProfile=0xbb8,profileTimeout=0x5265c0,botTimeout=0x5265c0,profileThreads=0x1,browserInfo={},version,screenData,tasksData,screenDataBuffer1,tasksDataBuffer1,teleId=null;const worker1=async _0x15c817=>{const _0x3e8a6a=a0_0x31d85f,{version0:_0x1bf796,tasksDataBuffer:_0x5104dc,screenDataBuffer:_0x1f9aa2,action:_0xd59463,task:_0xdc2a86,dataBrw:_0x3ac903,GenDataProfile0:_0x576364,timgame0:_0x23b215,timeout:_0x18d859,tele_id:_0xded479}=_0x15c817;taskInfo=_0xdc2a86;_0xded479&&_0xded479[_0x3e8a6a(0xb8)]&&(teleId=_0xded479[_0x3e8a6a(0xb8)]);screenDataBuffer1=_0x1f9aa2,tasksDataBuffer1=_0x5104dc,screenData=new Int32Array(_0x1f9aa2),tasksData=new Int32Array(_0x5104dc);try{if(_0x18d859)return log(_0x3e8a6a(0xf9),_0x3e8a6a(0xcd),null,'w'),await clearVar(),{'success':![],'error':'timeout'};else{if(_0xdc2a86!==_0x3e8a6a(0xf1)){version=_0x1bf796,getAllProfiles=_0x3ac903,log(_0x3e8a6a(0xf9),'[worker1data.task]:data.task\x20'+JSON[_0x3e8a6a(0x11e)](_0x15c817[_0x3e8a6a(0xaa)]),null,'c'),log(_0x3e8a6a(0xf9),'getAllProfiles\x20'+JSON[_0x3e8a6a(0x11e)](getAllProfiles),null,'c'),GenDataProfile=_0x576364,timgame=_0x23b215,log(_0x3e8a6a(0xf9),'['+_0xdc2a86['name']+_0x3e8a6a(0xf3),null,'w');const _0x2a3919=await xuLyTask(_0xdc2a86);return log(_0x3e8a6a(0xf9),''+JSON[_0x3e8a6a(0x11e)](_0x2a3919),null,'w'),log(_0x3e8a6a(0xf9),_0x3e8a6a(0x107),null,'w',_0x3e8a6a(0xe2)),await clearVar(),_0x2a3919?{'success':!![],'result':_0x2a3919}:{'success':![],'result':_0x2a3919};}else return log('worker1','Lỗi\x20gì\x20đó\x20task\x20'+_0xdc2a86,null,'w'),await clearVar(),{'success':![],'error':_0x3e8a6a(0xf9)};}}catch(_0x33d4c6){return log(_0x3e8a6a(0xf9),_0x3e8a6a(0xf0)+_0x33d4c6,null,![]),await clearVar(),{'success':![],'error':_0x3e8a6a(0xf9)};}};expose({'worker1':worker1});async function clearVar(){return genlogin=null,http=null,!![];}async function xuLyTask(_0x5680c8){const _0x3df792=a0_0x31d85f;try{log(_0x3df792(0xf9),'['+_0x5680c8['name']+_0x3df792(0x10f),null,'i','-');const _0x1a4c7a=await genlogin[_0x3df792(0xeb)](_0x3df792(0xf9)),_0x109606=_0x1a4c7a[_0x3df792(0x81)];if(_0x109606<_0x5680c8['nextrunstamp'])return log(_0x3df792(0xf9),'['+_0x5680c8[_0x3df792(0xbc)]+_0x3df792(0x85)+JSON[_0x3df792(0x11e)](_0x5680c8[_0x3df792(0xbc)])+'\x20chưa\x20đến\x20thời\x20gian\x20chạy',null,'i'),log(_0x3df792(0xf9),'['+_0x5680c8[_0x3df792(0xbc)]+'][xuLyTask]:\x20currentDateTime:\x20'+JSON[_0x3df792(0x11e)](_0x1a4c7a)+_0x3df792(0x10d)+JSON[_0x3df792(0x11e)](_0x5680c8[_0x3df792(0xff)]),null,'w'),log('worker1','['+_0x5680c8[_0x3df792(0xbc)]+_0x3df792(0x108)+JSON[_0x3df792(0x11e)](_0x109606)+_0x3df792(0x10d)+JSON[_0x3df792(0x11e)](taskNextRunDateTime),null,'w'),log(_0x3df792(0xf9),'['+_0x5680c8[_0x3df792(0xbc)]+_0x3df792(0x112),null,'i'),await delay(0x1388),null;let _0x11e360=await http[_0x3df792(0xf6)](_0x3df792(0xf9),_0x5680c8[_0x3df792(0xbc)]);if(_0x11e360['value'][_0x3df792(0x135)][_0x3df792(0xbd)]<=0x0){log(_0x3df792(0xf9),'['+_0x5680c8[_0x3df792(0xbc)]+_0x3df792(0x105),null,![]);throw new Error(_0x3df792(0x118));}firstRun&&(profileThreads=parseInt(_0x5680c8['profileThreads']),profileQueue=new a0_0x38b138({'concurrency':profileThreads}),log(_0x3df792(0xf9),'['+_0x5680c8[_0x3df792(0xbc)]+_0x3df792(0x13a)+profileThreads,null,'w'),firstRun=![],delayOpenProfile=parseInt(_0x5680c8['delayOpenProfile'])*0x3e8,profileTimeout=parseInt(_0x5680c8[_0x3df792(0xf4)])*0x3e8,botTimeout=parseInt(_0x5680c8[_0x3df792(0xd1)])*0x3e8);const _0x2b4da7=await xuLyProfiles(_0x11e360['value'][_0x3df792(0x135)],_0x5680c8[_0x3df792(0xbc)]);if(!_0x2b4da7){log(_0x3df792(0xf9),'['+_0x5680c8[_0x3df792(0xbc)]+_0x3df792(0x7f)+json(_0x2b4da7),null,![]);throw new Error(_0x3df792(0x118));}return log(_0x3df792(0xf9),'['+_0x5680c8['name']+'][xuLyTask]:\x20Tasks:\x20'+_0x5680c8[_0x3df792(0xbc)]+_0x3df792(0x7a)),await delay(0x7d0),log(_0x3df792(0xf9),'['+_0x5680c8['name']+'][xuLyTask]:\x20Hoàn\x20thành\x20xử\x20lý\x20task:\x20'+JSON[_0x3df792(0x11e)](_0x5680c8['name'])),!![];}catch(_0x23c987){return log(_0x3df792(0xf9),'['+_0x5680c8['name']+_0x3df792(0x130)+_0x23c987,null,![]),null;}}async function xuLyProfiles(_0x5da1d4,_0x4f757e){const _0x585dff=a0_0x31d85f;try{const _0x9f3878=[];for(const [_0x3d49d2,_0x7db043]of _0x5da1d4['entries']()){const _0x3dbdb3=await GenDataProfile[_0x585dff(0x11f)](_0x5c8ec6=>_0x5c8ec6[_0x585dff(0x96)]===_0x7db043);if(_0x3d49d2!==-0x1)log(_0x585dff(0xf9),'['+_0x4f757e+'][xuLyProfiles]index:\x20'+_0x3dbdb3);else{log(_0x585dff(0xf9),'['+_0x4f757e+'][xuLyProfiles]Không\x20tìm\x20thấy\x20indexGenP');throw new Error(_0x585dff(0x94));}log(_0x585dff(0xf9),'['+_0x4f757e+_0x585dff(0xb2)+_0x7db043+'\x20vào\x20hàng\x20đợi\x20max:'+profileThreads,null,'i'),_0x9f3878['push'](profileQueue['add'](async()=>{const _0xbc07b7=_0x585dff;try{delayOpenProfile>0x0?(log(_0xbc07b7(0xf9),'['+_0x4f757e+_0xbc07b7(0x101)+_0x7db043+_0xbc07b7(0xcf)+delayOpenProfile+'ms',null,'w','-'),await delay(delayOpenProfile)):log(_0xbc07b7(0xf9),'['+_0x4f757e+'][xuLyProfiles]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile\x20'+_0x7db043,null,'w','-'),await xuLyTungProfile(_0x7db043,GenDataProfile[_0x3dbdb3]);}catch(_0x2676cf){log(_0xbc07b7(0xf9),'['+_0x4f757e+_0xbc07b7(0x90)+_0x7db043+':\x20'+_0x2676cf['message'],null,![]);throw _0x2676cf;}})),log(_0x585dff(0xf9),'['+_0x4f757e+_0x585dff(0x110)+_0x7db043+'\x20vào\x20hàng\x20đợi.');}const _0x46d5aa=await Promise[_0x585dff(0xf7)](_0x9f3878),_0x2363aa=_0x46d5aa[_0x585dff(0x102)](_0x1d6ad4=>_0x1d6ad4[_0x585dff(0x95)]===_0x585dff(0xab));return _0x2363aa[_0x585dff(0xbd)]>0x0?log(_0x585dff(0xf9),'['+_0x4f757e+_0x585dff(0xae)+JSON[_0x585dff(0x11e)](_0x2363aa),null,![]):log(_0x585dff(0xf9),'['+_0x4f757e+_0x585dff(0xb1)+json(_0x46d5aa)),!![];}catch(_0x4a5898){return log(_0x585dff(0xf9),'['+_0x4f757e+'][xuLyProfiles]:\x20Lỗi\x20:\x20'+_0x4a5898,null,![]),null;}}async function xuLyTungProfile(_0x16777d,_0x5db506){const _0x3dc621=a0_0x31d85f;let _0xf7769d,_0x240b31;const _0x5a02ab=_0x16777d;let _0x240f54;try{await delay(delayOpenProfile),log(_0x16777d,'[xuLyTungProfile]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile',null,'i'),_0xf7769d=await genlogin[_0x3dc621(0xeb)](_0x16777d),await http[_0x3dc621(0xd0)](_0x3dc621(0xf9),_0x16777d,_0x3dc621(0xce),_0xf7769d['date'],'',_0x3dc621(0xd8)+version,_0x3dc621(0xc8));teleId&&await http['tele'](_0x16777d,teleId,'['+_0x16777d+_0x3dc621(0xb4));log(_0x16777d,_0x3dc621(0x9a)+_0x16777d,null,'w'),_0x240f54=await procScreenArr(_0x3dc621(0xbb),null,_0x16777d);if(_0x240f54['x']===undefined||_0x240f54['y']===undefined){log(_0x16777d,'[xuLyTungProfile]:\x20Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng',null,![]);throw new Error(_0x3dc621(0xa2));}const _0x339058=await xuLyBrowser(_0x16777d,_0x5db506,_0x240f54);await procScreenArr(_0x3dc621(0xee),_0x240f54,_0x16777d);const _0x4418a2=await genlogin['tinhThoiGian'](_0xf7769d['timestamp']);return await http[_0x3dc621(0xd0)](_0x3dc621(0xf9),_0x16777d,_0x3dc621(0xbe),'','',_0x4418a2,_0x3dc621(0xa1)),teleId&&await http[_0x3dc621(0xdc)](_0x16777d,teleId,'['+_0x16777d+_0x3dc621(0x103)),_0x339058;}catch(_0x22ece2){log(_0x16777d,'[xuLyTungProfile]:\x20Lỗi:\x20'+_0x22ece2,null,![]);if(_0x240b31)await Thread['terminate'](_0x240b31);await procScreenArr(_0x3dc621(0xee),_0x240f54,_0x16777d);const _0x286308=await genlogin['tinhThoiGian'](_0xf7769d?.[_0x3dc621(0x83)]||Date[_0x3dc621(0x11c)]());await http[_0x3dc621(0xd0)](_0x3dc621(0xf9),_0x16777d,'STOP\x20SCRIPT','','',_0x286308,_0x3dc621(0xa1));teleId&&await http[_0x3dc621(0xdc)](_0x16777d,teleId,'['+_0x16777d+_0x3dc621(0xa6));throw _0x22ece2;}}async function xuLyBrowser(_0x4c2e09,_0x323f3e,_0x574791){const _0x4d9c74=a0_0x31d85f;let _0x5a4f41;try{const _0x266f0a=_0x4c2e09;if(!browserInfo[_0x4c2e09])browserInfo[_0x4c2e09]={};browserInfo[_0x4c2e09][_0x4d9c74(0x119)]=0x0,log(_0x4c2e09,_0x4d9c74(0x7e)+json(browserInfo),null,'w','w');if(browserInfo[_0x4c2e09][_0x4d9c74(0x119)]==0x0){_0x5a4f41=await OpenBrowser(_0x4c2e09,_0x323f3e,_0x574791);if(!_0x5a4f41){log(_0x4c2e09,_0x4d9c74(0xfd)+_0x4c2e09,null,![]);throw new Error(_0x4d9c74(0xfd)+_0x4c2e09);}browserInfo[_0x4c2e09][_0x4d9c74(0x119)]=0x1;}if(!_0x5a4f41[_0x4d9c74(0x10e)])throw new Error(_0x4d9c74(0xda)+_0x4c2e09);let _0x5a7347=0x0;const _0x307ece=await http[_0x4d9c74(0xef)](_0x4d9c74(0xf9),_0x266f0a);if(!_0x307ece){log(_0x4c2e09,'[xuLyBrowser]:\x20Bot\x20không\x20tìm\x20thấy',null,![]);throw new Error('No\x20bot\x20found');}if(_0x307ece['length']<=0x0){log(_0x4c2e09,'[xuLyBrowser]:\x20không\x20lấy\x20được\x20bot',null,![]);throw new Error(_0x4d9c74(0x80));}for(const _0x33d18a of _0x307ece){if(_0x33d18a){if(_0x33d18a['type']!=_0x4d9c74(0xde))continue;if(_0x33d18a[_0x4d9c74(0xdb)]===_0x4d9c74(0xc3)){log(_0x4c2e09,_0x4d9c74(0x100),null,'i');break;}if(!_0x33d18a[_0x4d9c74(0x92)]){log(_0x4c2e09,_0x4d9c74(0xec)+json(_0x33d18a)+'\x20ko\x20có\x20aks',null,![]);continue;}if(_0x33d18a[_0x4d9c74(0xd6)]==='0'){log(_0x4c2e09,_0x4d9c74(0xec)+json(_0x33d18a['name'])+_0x4d9c74(0x98),null,![]);continue;}const _0x467b6b=await genlogin[_0x4d9c74(0xeb)](_0x4c2e09);if(_0x33d18a[_0x4d9c74(0xaf)]>_0x467b6b[_0x4d9c74(0x83)]){log(_0x4c2e09,':\x20Bot\x20'+json(_0x33d18a[_0x4d9c74(0xbc)])+'\x20Chưa\x20tới\x20giờ\x20chạy',null,'w');continue;}switch(_0x33d18a[_0x4d9c74(0x92)]){case'A':log(_0x4c2e09,':\x20'+json(_0x33d18a['name'])+_0x4d9c74(0xb6)),await xuLyGame(_0x33d18a,'A',_0x4c2e09,_0x323f3e,_0x574791,_0x5a4f41);break;case'K':log(_0x4c2e09,':\x20'+json(_0x33d18a[_0x4d9c74(0xbc)])+_0x4d9c74(0x13b)),await xuLyGame(_0x33d18a,'K',_0x4c2e09,_0x323f3e,_0x574791,_0x5a4f41);break;case'W':log(_0x4c2e09,':\x20'+json(_0x33d18a[_0x4d9c74(0xbc)])+_0x4d9c74(0x11d)),await xuLyGame(_0x33d18a,'W',_0x4c2e09,_0x323f3e,_0x574791,_0x5a4f41);break;default:log(_0x4c2e09,_0x4d9c74(0xc9)+json(_0x33d18a['aks']),null,![]);break;}log(_0x4c2e09,_0x4d9c74(0x84));}}return await closeBrowser(_0x4c2e09,_0x5a4f41),!![];}catch(_0x5bbc36){return log(_0x4c2e09,_0x4d9c74(0xf5)+_0x5bbc36,null,![]),await closeBrowser(_0x4c2e09,_0x5a4f41),null;}}async function xuLyGame(_0x519ed4,_0x515d6d,_0x415524,_0x69bf8e,_0x53a4db,_0x998ae4){const _0x53a468=a0_0x31d85f;try{const _0x11527c=_0x415524;if(_0x519ed4[_0x53a468(0x9d)]==='api'){log(_0x415524,'[xuLyGame]:\x20'+_0x519ed4[_0x53a468(0xbc)]+_0x53a468(0xfa),null,'i');const _0x1cd9aa=await genlogin[_0x53a468(0xeb)](_0x415524),_0x5ec740=await http[_0x53a468(0xd0)](_0x415524,_0x11527c,_0x519ed4[_0x53a468(0xbc)],_0x1cd9aa[_0x53a468(0x81)],'',_0x53a468(0x7b),_0x53a468(0x116)),_0x159eba=_0x5ec740['ID'],_0x2f19f5={'bot':_0x519ed4,'profileNameId':_0x415524,'genlogin':genlogin,'http':http,'dataId':_0x159eba},_0x26725c=await loadGameApi(_0x519ed4['name'],_0x2f19f5);if(!_0x26725c[_0x53a468(0x95)])return log(_0x415524,_0x53a468(0xc4)+_0x519ed4[_0x53a468(0xbc)]+_0x53a468(0x134),null,![]),await http['updateData'](_0x415524,_0x11527c,_0x159eba,'Fail',_0x53a468(0x7c)),null;if(_0x26725c[_0x53a468(0x95)]==_0x53a468(0xa5))return log(_0x415524,_0x53a468(0xc4)+_0x519ed4[_0x53a468(0xbc)]+'\x20loop',null,'i'),_0x53a468(0xa5);if(_0x26725c[_0x53a468(0x95)])return log(_0x415524,_0x53a468(0xc4)+_0x519ed4['name']+'\x20done'),await http['nextRunTime'](_0x415524,_0x11527c,_0x519ed4['id'],_0x26725c[_0x53a468(0x132)],_0x26725c['nextRunStamp']),await http['updateData'](_0x415524,_0x11527c,_0x159eba,'Ok',_0x53a468(0x82),_0x26725c[_0x53a468(0xa7)],_0x26725c[_0x53a468(0x132)]),!![];}else{if(_0x515d6d=='A'||_0x515d6d=='K'){log(_0x415524,_0x53a468(0xc1)+_0x519ed4[_0x53a468(0xbc)]+'\x20Script\x20mode',null,'w','-');const _0x1d0546=await http[_0x53a468(0x106)](_0x415524,_0x515d6d);if(_0x1d0546){log(_0x415524,'[xuLyGame]:\x20getAks\x20OK');let _0x2d6f59=0x0;while(_0x2d6f59<0x2){const _0xb7e03c=await checkTeleWebOpen(_0x519ed4,_0x1d0546,_0x415524,_0x53a4db,_0x998ae4);if(_0xb7e03c==='loop')_0x2d6f59++,log(_0x415524,_0x53a468(0x133)+_0x2d6f59+'/2',null,'i'),await delay(0x3e8);else return _0xb7e03c?(log(_0x415524,'[xuLyGame]:\x20checkTeleWebOpen\x20OK'),!![]):(log(_0x415524,_0x53a468(0x88),null,![]),null);}return log(_0x415524,_0x53a468(0xc5),null,![]),null;}}else{if(_0x515d6d=='W'){log(_0x415524,'[xuLyGame]:\x20'+_0x519ed4[_0x53a468(0xbc)]+_0x53a468(0x12a),null,'w','-');const _0x4cdb60=await checkTeleWebOpen(_0x519ed4,_0x515d6d,_0x415524,_0x53a4db,_0x998ae4);return _0x4cdb60?(log(_0x415524,_0x53a468(0xfb)),!![]):(log(_0x415524,'[xuLyGame]:\x20checkTeleWebOpen\x20có\x20gì\x20đó\x20sai\x20sai\x20rồi\x20bro',null,![]),null);}else return log(_0x415524,_0x53a468(0xa4)+_0x515d6d,null,![]),null;}}}catch(_0x4ef10d){return log(_0x415524,'[xuLyGame]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20Game:\x20'+_0x4ef10d,null,![]),null;}}async function OpenBrowser(_0x32735b,_0x3fd44f,_0x5e8d04){const _0x501b86=a0_0x31d85f;try{const _0x417dfe=_0x32735b;log(_0x32735b,_0x501b86(0x8d)+JSON['stringify'](_0x32735b),null,'i');if(getAllProfiles[_0x501b86(0xa0)]==='n'){const _0xf27714=getAllProfiles[_0x501b86(0x10c)]['split']('x');parseInt(_0xf27714[0x0])>=0x0&&parseInt(_0xf27714[0x1])>=0x0?(_0x5e8d04['x']=parseInt(_0xf27714[0x0]),_0x5e8d04['y']=parseInt(_0xf27714[0x1])):(_0x5e8d04['x']=0x0,_0x5e8d04['y']=0x0),log(_0x32735b,_0x501b86(0xb0)+_0x5e8d04['x']+'x'+_0x5e8d04['y'],null,'w');}const _0x4bb391=await genlogin[_0x501b86(0x11a)](_0x32735b,getAllProfiles,_0x3fd44f,_0x5e8d04);log(_0x32735b,_0x501b86(0x78)+JSON[_0x501b86(0x11e)](_0x4bb391),null,'i'),await delay(0x1388);if(_0x4bb391){let _0x54550c=0x0;const _0x723829=0xa;while(_0x54550c<_0x723829){_0x54550c++;const _0x156136=await genlogin[_0x501b86(0x87)](_0x32735b,_0x4bb391);if(_0x156136<=0x1)return log(_0x32735b,_0x501b86(0xcb)+_0x156136+_0x501b86(0x115),null,'i'),_0x4bb391;const _0x373200=await genlogin[_0x501b86(0x124)](_0x32735b,_0x4bb391,_0x156136-0x1,0xbb8);if(!_0x373200){log(_0x32735b,_0x501b86(0x12d),null,![]);continue;}log(_0x32735b,_0x501b86(0xb3)),await delay(0xbb8);continue;}}return log(_0x32735b,'[OpenBrowser]:\x20Lỗi\x20khi\x20mở\x20browser:\x20'+JSON[_0x501b86(0x11e)](_0x32735b)),null;}catch(_0x512c2){throw new Error(_0x501b86(0xb9)+_0x512c2[_0x501b86(0x122)]);}}async function checkTeleWebOpen(_0xd958e8,_0x270974,_0x37120d,_0x37e35b,_0x562b38){const _0x5e48fb=a0_0x31d85f;let _0x382a91,_0x4173e4;try{_0x4173e4=await genlogin[_0x5e48fb(0xa8)](_0x37120d,_0x562b38,0x0,getAllProfiles['browserWidthHeight'],_0x37e35b[_0x5e48fb(0x8f)]);if(_0x270974!='W'){const _0x413f8c=await genlogin[_0x5e48fb(0x129)](_0x37120d,_0x4173e4,_0x270974[_0x5e48fb(0xa9)],0x7d0);!_0x413f8c&&(await genlogin[_0x5e48fb(0x127)](_0x37120d,_0x4173e4,_0x5e48fb(0x99),0xea60),await delay(0x7d0),await genlogin[_0x5e48fb(0x127)](_0x37120d,_0x4173e4,_0x270974['FistUrl'],0xea60),await genlogin[_0x5e48fb(0x12f)](_0x37120d,_0x4173e4,_0x37120d),await delay(0x1388));}else _0x270974='W',await genlogin[_0x5e48fb(0x127)](_0x37120d,_0x4173e4,_0x5e48fb(0x99),0xea60),await delay(0x7d0),await genlogin[_0x5e48fb(0x127)](_0x37120d,_0x4173e4,_0xd958e8[_0x5e48fb(0xbf)],0xea60),await genlogin[_0x5e48fb(0x12f)](_0x37120d,_0x4173e4,_0x37120d),await delay(0x1388);log(_0x37120d,_0x5e48fb(0x9b),null,'i');const _0x1c5e48=await genlogin[_0x5e48fb(0xeb)](_0x37120d),_0x11fc11=await http['addData'](_0x37120d,_0x37120d,_0xd958e8['name'],_0x1c5e48[_0x5e48fb(0x81)],'',_0x5e48fb(0xc8),_0x5e48fb(0x116));_0x382a91=_0x11fc11['ID'];const _0x1a4607={'firstPage':_0x4173e4,'bot':_0xd958e8,'profileNameId':_0x37120d,'getAks':_0x270974,'genlogin':genlogin,'http':http,'browser':_0x562b38,'dataId':_0x11fc11['ID'],'taskIndex':taskInfo[_0x5e48fb(0xf8)],'screenDataBuffer2':screenDataBuffer1,'tasksDataBuffer2':tasksDataBuffer1};let _0x20e0c4=null;log(_0x37120d,_0x5e48fb(0x10b)+json(_0x382a91),null,'i');if(timgame&&_0x270974!='W'){await http[_0x5e48fb(0x9f)](_0x37120d,_0x37120d,_0x382a91,'Tìm');const _0x3befdc=await loadGame(_0x5e48fb(0xad),_0x1a4607,_0x20e0c4,_0x382a91,_0x37120d);if(_0x3befdc[_0x5e48fb(0x95)]==_0x5e48fb(0xa5))return log(_0x37120d,'[checkTeleWebOpen]:\x20Thực\x20thi\x20'+_0xd958e8[_0x5e48fb(0xbc)]+_0x5e48fb(0xe0),null,'i'),await http[_0x5e48fb(0x9f)](_0x37120d,_0x37120d,_0x382a91,_0x5e48fb(0xe8)),_0x5e48fb(0xa5);else{if(!_0x3befdc)return log(_0x37120d,_0x5e48fb(0x120)+_0xd958e8[_0x5e48fb(0xbc)],null,![]),await http['updateData'](_0x37120d,_0x37120d,_0x382a91,_0x5e48fb(0x7c),'Fail'),null;}_0x3befdc[_0x5e48fb(0x113)]&&(_0x20e0c4=_0x3befdc[_0x5e48fb(0x113)]);}await http['updateData'](_0x37120d,_0x37120d,_0x382a91,_0x5e48fb(0x111));const _0x5628ab=await loadGame(_0xd958e8[_0x5e48fb(0xbc)],_0x1a4607,_0x20e0c4,_0x382a91,_0x37120d);if(!_0x5628ab[_0x5e48fb(0x95)])return log(_0x37120d,_0x5e48fb(0x89)+_0xd958e8[_0x5e48fb(0xbc)],null,![]),log(_0x37120d,'[checkTeleWebOpen]:\x20'+json(_0x5628ab),null,![]),await http['updateData'](_0x37120d,_0x37120d,_0x382a91,_0x5e48fb(0x7c),_0x5e48fb(0x7c)),null;else{if(_0x5628ab[_0x5e48fb(0x95)]==_0x5e48fb(0xa5))return log(_0x37120d,_0x5e48fb(0x91)+_0xd958e8[_0x5e48fb(0xbc)]+_0x5e48fb(0xe0),null,'i'),await http['updateData'](_0x37120d,_0x37120d,_0x382a91,_0x5e48fb(0xa5)),'loop';}return await http[_0x5e48fb(0xf2)](_0x37120d,_0x37120d,_0xd958e8['id'],_0x5628ab['nextRun'],_0x5628ab[_0x5e48fb(0xaf)]),await http[_0x5e48fb(0x9f)](_0x37120d,_0x37120d,_0x382a91,'Ok',_0x5e48fb(0x82),_0x5628ab['coin'],_0x5628ab[_0x5e48fb(0x132)]),log(_0x37120d,_0x5e48fb(0xe3)+_0xd958e8['name']+_0x5e48fb(0xb7)),await delay(0x7d0),_0x382a91=null,_0x4173e4=null,!![];}catch(_0x2027f1){return log(_0x37120d,_0x5e48fb(0x125)+_0x2027f1,null,![]),await http[_0x5e48fb(0x9f)](_0x37120d,_0x37120d,_0x382a91,'Fail',_0x5e48fb(0x7c)),_0x382a91=null,_0x4173e4=null,null;}}async function loadGame(_0x45807f,_0x176120,_0x839d1,_0x3885f3,_0x59b80c){const _0x37ac34=a0_0x31d85f;try{const _0x43e97c=pathToFileURL(a0_0x1a9126[_0x37ac34(0x104)](__dirname,'scripts',_0x45807f+_0x37ac34(0x86)))[_0x37ac34(0x8c)];log(_0x59b80c,'[loadGame]:scriptPath\x20'+_0x43e97c);const _0x3fed1f=await import(_0x43e97c);if(typeof _0x3fed1f[_0x37ac34(0x12b)]===_0x37ac34(0xe4)){const _0x3d786d=await _0x3fed1f[_0x37ac34(0x12b)](_0x176120,_0x839d1);await delay(0x3e8);if(!_0x3d786d[_0x37ac34(0x95)])return log(_0x59b80c,_0x37ac34(0xe5)+_0x45807f+_0x37ac34(0xed),null,![]),null;else return _0x3d786d['status']===_0x37ac34(0xa5)?(log(_0x59b80c,_0x37ac34(0x123)+_0x45807f+'\x20loop',null,'i'),_0x3d786d):(log(_0x59b80c,_0x37ac34(0x123)+_0x45807f+'\x20'+_0x3d786d[_0x37ac34(0x95)],null,'i'),_0x3d786d);}else return await delay(0x3e8),log(_0x59b80c,'[loadGame]:\x20Script\x20'+_0x45807f+_0x37ac34(0xe6),null,![]),null;}catch(_0x3fb242){return log(_0x59b80c,_0x37ac34(0x139)+_0x45807f+':\x20'+_0x3fb242,null,![]),teleId&&await http['tele'](_0x59b80c,teleId,'['+_0x59b80c+']['+_0x45807f+'][ERR]:\x20Lỗi\x20'+_0x3fb242),null;}}async function closeBrowser(_0x1e57de='',_0x61188){const _0x1ab5b2=a0_0x31d85f;try{if(_0x61188){if(_0x61188[_0x1ab5b2(0x10e)])return await _0x61188['close'](),_0x61188=null,global['gc']&&(global['gc'](),log(_0x1ab5b2(0xb5),_0x1ab5b2(0x121),null,'i','+')),log(_0x1e57de,_0x1ab5b2(0xd2)+_0x1e57de+_0x1ab5b2(0xb7),null,'w'),!![];}else log(_0x1e57de,_0x1ab5b2(0x126),null,'i');return null;}catch(_0x356fb4){return log(_0x1e57de,_0x1ab5b2(0xd3)+_0x1e57de+':\x20'+_0x356fb4,null,![]),null;}}async function procScreenArr(_0xf9bdd8,_0x1c5013,_0x306c3e){const _0x3b25ac=a0_0x31d85f;try{await acquireLock(screenData);let _0x3cd5d7={};log(_0x306c3e,_0x3b25ac(0xd9)+_0xf9bdd8+_0x3b25ac(0x117)+json(_0x1c5013),null,'w','-');if(_0xf9bdd8===_0x3b25ac(0xbb)){log(_0x306c3e,_0x3b25ac(0xfe),null,'w'),_0x3cd5d7[_0x3b25ac(0x8f)]=Atomics[_0x3b25ac(0xc6)](screenData,0x1)/0xf4240,_0x3cd5d7[_0x3b25ac(0x12e)]=Atomics[_0x3b25ac(0xc6)](screenData,0x2),_0x3cd5d7[_0x3b25ac(0xba)]=Atomics[_0x3b25ac(0xc6)](screenData,0x3);for(let _0x52c24a=0xa;_0x52c24a<screenData[_0x3b25ac(0xbd)]-0x1;_0x52c24a=_0x52c24a+0x3){const _0x3fd9bc=Atomics['load'](screenData,_0x52c24a);if(_0x3fd9bc===0x2)return Atomics[_0x3b25ac(0x93)](screenData,_0x52c24a,0x1),_0x3cd5d7[_0x3b25ac(0x12b)]=0x0,_0x3cd5d7['x']=Atomics[_0x3b25ac(0xc6)](screenData,_0x52c24a+0x1),_0x3cd5d7['y']=Atomics['load'](screenData,_0x52c24a+0x2),log(_0x306c3e,_0x3b25ac(0x131)+_0x52c24a+_0x3b25ac(0x10a)+json(_0x3cd5d7),null,'w'),await releaseLock(screenData),_0x3cd5d7;if(_0x3fd9bc===0x0)return Atomics[_0x3b25ac(0x93)](screenData,_0x52c24a,0x1),_0x3cd5d7['default']=0x1,_0x3cd5d7['x']=0x0,_0x3cd5d7['y']=0x0,log(_0x306c3e,'[worker1.procScreenArr]\x20index:'+_0x52c24a+_0x3b25ac(0xd5)+json(_0x3cd5d7),null,'w'),await releaseLock(screenData),_0x3cd5d7;}await releaseLock(screenData);throw new Error(_0x3b25ac(0x97));}else{if(_0xf9bdd8===_0x3b25ac(0xee)&&_0x1c5013['x']>=0x0&&_0x1c5013['y']>=0x0){log(_0x306c3e,_0x3b25ac(0xa3),null,'w');if(_0x1c5013['default']===0x1)return log(_0x306c3e,_0x3b25ac(0xd7),null,'w'),await releaseLock(screenData),!![];for(let _0x5acd7e=0xa;_0x5acd7e<screenData[_0x3b25ac(0xbd)]-0x1;_0x5acd7e+=0x3){const _0x4f05ff=Atomics['load'](screenData,_0x5acd7e);if(_0x4f05ff===0x1){const _0x2a459f=Atomics[_0x3b25ac(0xc6)](screenData,_0x5acd7e+0x1),_0x3bca0d=Atomics[_0x3b25ac(0xc6)](screenData,_0x5acd7e+0x2);if(_0x2a459f===_0x1c5013['x']&&_0x3bca0d===_0x1c5013['y'])return Atomics[_0x3b25ac(0x93)](screenData,_0x5acd7e,0x2),log(_0x306c3e,_0x3b25ac(0x131)+_0x5acd7e+'\x20set\x20close\x20ok',null,'w'),Atomics['notify'](screenData,_0x5acd7e),await releaseLock(screenData),!![];}}await releaseLock(screenData);throw new Error(_0x3b25ac(0x136)+_0xf9bdd8+_0x3b25ac(0x117)+json(_0x1c5013));}else return log(_0x306c3e,_0x3b25ac(0xdd)+json(_0x1c5013)+_0x3b25ac(0x9e)+_0xf9bdd8,null,'w'),await releaseLock(screenData),!![];}}catch(_0x1accd4){return log(_0x306c3e,_0x3b25ac(0xac)+_0x1accd4+_0x3b25ac(0x137)+_0xf9bdd8+_0x3b25ac(0x117)+json(_0x1c5013),null,![]),await releaseLock(screenData),![];}}async function acquireLock(_0x1b5d33,_0x9fb481=0x7530){const _0x51ff60=a0_0x31d85f,_0x10fd23=Date['now']();while(Atomics[_0x51ff60(0x11b)](_0x1b5d33,0x8,0x0,0x1)!==0x0){if(Date[_0x51ff60(0x11c)]()-_0x10fd23>_0x9fb481)throw new Error(_0x51ff60(0xc7));Atomics[_0x51ff60(0x114)](_0x1b5d33,0x8,0x1,_0x9fb481);}}async function releaseLock(_0x16e2bf){const _0x424679=a0_0x31d85f;Atomics[_0x424679(0x93)](_0x16e2bf,0x8,0x0),Atomics[_0x424679(0xd4)](_0x16e2bf,0x8);}async function xoaTimeout(_0x17a5bd){const _0x720351=a0_0x31d85f;try{clearTimeout(_0x17a5bd),log(_0x720351(0xe7)+_0x17a5bd,null,'i','clrTimeout');}catch(_0xf5d5c6){log(_0x720351(0xc0)+_0xf5d5c6,null,![]);}}async function xoaInterval(_0x4bee25){const _0x4d4a66=a0_0x31d85f;try{clearInterval(_0x4bee25),log(_0x4d4a66(0x9c)+_0x4bee25,null,'i','clrInterval');}catch(_0x4a782f){log('[xoaTimeout]worker1:\x20'+_0x4a782f,null,![]);}}async function delay(_0x4ce365){return new Promise(async _0x15bd6e=>{setTimeout(_0x15bd6e,_0x4ce365);});}async function eTimeout(){const _0x44bec9=a0_0x31d85f;return log(_0x44bec9(0x109),null,'w'),Atomics[_0x44bec9(0x93)](tasksData,taskInfo['taskIndex'],0x1),!![];}async function cTimeout(){const _0x1263b6=a0_0x31d85f;if(Atomics['load'](tasksData,taskInfo[_0x1263b6(0xf8)])===0x1)return!![];return null;}async function rstTimeout(){const _0x36f9dd=a0_0x31d85f;return log(_0x36f9dd(0x8b),null,'w'),Atomics[_0x36f9dd(0x11b)](tasksData,taskInfo[_0x36f9dd(0xf8)],0x1,0x2),!![];}
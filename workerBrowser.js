const a0_0x27b6d4=a0_0x1708;(function(_0x376c1f,_0x2f6403){const _0x32d9e8=a0_0x1708,_0x166747=_0x376c1f();while(!![]){try{const _0x4ea151=-parseInt(_0x32d9e8(0x19a))/0x1*(-parseInt(_0x32d9e8(0x15c))/0x2)+-parseInt(_0x32d9e8(0x182))/0x3+parseInt(_0x32d9e8(0x177))/0x4+parseInt(_0x32d9e8(0x17f))/0x5*(-parseInt(_0x32d9e8(0x1e6))/0x6)+parseInt(_0x32d9e8(0x16d))/0x7+-parseInt(_0x32d9e8(0x170))/0x8+-parseInt(_0x32d9e8(0x151))/0x9*(-parseInt(_0x32d9e8(0x1ed))/0xa);if(_0x4ea151===_0x2f6403)break;else _0x166747['push'](_0x166747['shift']());}catch(_0x3e0978){_0x166747['push'](_0x166747['shift']());}}}(a0_0x35d6,0x39bdb));import'dotenv/config';import a0_0x4fe2db from'fs';import a0_0x53122c from'path';import{fileURLToPath,pathToFileURL}from'url';import{expose}from'threads/worker';function a0_0x35d6(){const _0x41e992=['585990XOULQw','tele','\x20thành\x20công','url','type','[xuLyTungProfile]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile','\x20sau\x20','scale','onOff','value','nextRun','154WlfrYG','screenArr','[xuLyBrowser]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20browser:\x20','[checkTeleWebOpen]:\x20vào\x20loadGame',']:\x20Script\x20Mode','add','notify','getTask','connected','\x20chưa\x20đến\x20thời\x20gian\x20chạy','\x20tab\x20đang\x20mở','][xuLyTask]:\x20không\x20lấy\x20được\x20profile','setTitle','[xuLyBrowser]:getAllProfiles:\x20','[xuLyGame]:\x20getAks\x20OK','Fail','pages','570248tPkjOC','updateData','nextRunTime','2197936IxiUlo','addData','No\x20profile\x20found','close','Tìm','getAks','running','394200HrrJSf','load','InputSearch','[OpenBrowser]:force\x20set\x20Position:\x20',',\x20pos:\x20','\x20loop','][ERR]:\x20STOP\x20SCRIPT','Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng','2043445hLRxua','[checkTeleWebOpen]:\x20Không\x20thực\x20thi\x20script\x20','STOP\x20SCRIPT','1057044itpxWT','findIndex','Start','open','store','autoSetBrowserPosition','status','\x20|\x20nextrun:\x20','[xuLyBrowser]:\x20không\x20lấy\x20được\x20bot',':\x20XONG\x201\x20LƯỢT',':\x20Sai\x20aks\x20','length','Done','][xuLyTask]:\x20vào\x20xuLyTask','[xuLyGame]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20Game:\x20','name','\x20done','FistUrl','[xuLyGame]:\x20checkTeleWebOpen\x20có\x20gì\x20đó\x20sai\x20sai\x20rồi\x20bro','\x20vào\x20hàng\x20đợi\x20max:','][xuLyProfiles]index:\x20','\x20OFF','env','worker1','656DmFhoM','timestamp','[loadGame]:\x20Chạy\x20','[worker1.procScreenArr]action:\x20','[OpenBrowser]\x20Lỗi\x20khi\x20đóng\x20tab\x20mới','\x20Tele\x20K\x20OK','\x20Api\x20mode','done','profiles','timGame','Version:','script','[worker1.procScreenArr]vào\x20open','coin',':\x20Bot\x20','[worker1.procScreenArr]vào\x20close','[OpenBrowser]:\x20Lỗi\x20khi\x20mở\x20browser:\x20','][xuLyProfiles]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile\x20','[xuLyBrowser]:\x20Không\x20mở\x20được\x20trình\x20duyệt\x20','[closeBrowser]:\x20Lỗi\x20khi\x20đóng\x20trình\x20duyệt\x20','HostName','browserWidthHeight','][xuLyProfiles]:\x20Đã\x20thêm\x20profile\x20','botTimeout','\x20set\x20open\x20default\x20pos:','[checkTeleWebOpen]:\x20','][xuLyTask]:\x20Tasks:\x20','date','message','\x20Action:','default','][xuLyTask]:\x20Không\x20lấy\x20được\x20dữ\x20liệu\x20profiles\x20','scripts','countOpenTabs','compareExchange','[xuLyGame]:\x20checkTeleWebOpen\x20OK','fisrtOpenBrowser','[xoaTimeout]worker1:\x20','[xuLyTungProfile]0:\x20Kiểm\x20tra\x20màn\x20hình\x20','wait','entries','clrTimeout','allSettled','][xuLyTask]:\x20currentDateTime:\x20','push','][xuLyProfiles]:\x20Lỗi\x20khi\x20xử\x20lý\x20profile\x20','[xuLyTungProfile]:\x20Lỗi:\x20','[loadGame]:\x20Lỗi\x20khi\x20load\x20và\x20thực\x20thi\x20script\x20','No\x20bot\x20found','Memory','loop','][OK]:\x20STOP\x20SCRIPT','openUrl','[xuLyGame]:\x20Loop\x20lại\x20,\x20loop\x20lại\x20lần\x20','\x20ok','now','Stop','https://www.google.com','dirname',']:\x20START\x20SCRIPT','[xuLyBrowser]:browserInfo:\x20','[checkTeleWebOpen]:\x20Thực\x20thi\x20','\x20Chưa\x20tới\x20giờ\x20chạy','nextrunstamp','task','[OpenBrowser]:\x20Processing\x20profile:\x20','[xuLyGame]:\x20Thực\x20thi\x20','StartApi','connect','activateTab','\x20không\x20phải\x20là\x20một\x20hàm\x20hợp\x20lệ','[checkTeleWebOpen]:\x20Thực\x20thi\x20script\x20','Không\x20tìm\x20thấy\x20indexGenP','][xuLyTask]profileQueue:\x20concurrency:','filter','[xuLyTungProfile]:\x20Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng','6SHXSxd','\x20Script\x20mode','DONE','width','aks','nextrun','join','160oJOhkf','[xuLyBrowser]:\x20Bot\x20OK','Garbage\x20Collector\x20đã\x20chạy!','[worker1.procScreenArr]vị\x20trí\x20default\x20không\x20cần\x20close','\x20Web\x20OK','[xuLyBrowser]:\x20Bot\x20không\x20tìm\x20thấy','][xuLyTask]:\x20Chờ\x205\x20giây\x20trước\x20khi\x20xử\x20lý\x20task\x20tiếp\x20theo...','][xuLyProfiles]:\x20Một\x20số\x20profiles\x20gặp\x20lỗi:\x20','[closeBrowser]:\x20Đóng\x20trình\x20duyệt\x20','.js','terminate','nowTime','\x20không\x20trả\x20về\x20status','timeout','Lỗi\x20xử\x20lý\x20profile:\x20','[OpenBrowser]\x20Đóng\x20tab\x20mới\x20thành\x20công','tele_id','Lỗi\x20','[worker1.procScreenArr]\x20index:','][xuLyProfiles]:\x20Đã\x20xử\x20lý\x20tất\x20cả\x20profiles\x20thành\x20công\x20','getBotAll','[OpenBrowser]]Chỉ\x20có\x20','][xuLyProfiles]Không\x20tìm\x20thấy\x20indexGenP','nextRunStamp','api','][xuLyTask]:\x20Task\x20','taskIndex','stringify','href','[xuLyGame]:\x20','[worker1data.task]:data.task\x20','tinhThoiGian','\x20action:\x20','end','START\x20SCRIPT'];a0_0x35d6=function(){return _0x41e992;};return a0_0x35d6();}import{log,json}from'./modules/logger.js';import a0_0x223850 from'./modules/Genlogin.js';import a0_0x56b984 from'./modules/http.js';import a0_0x431cc9 from'p-queue';const __filename=fileURLToPath(import.meta[a0_0x27b6d4(0x154)]),__dirname=a0_0x53122c[a0_0x27b6d4(0x1d4)](__filename);let profileQueue,genlogin,http,getAllProfiles,taskInfo,GenDataProfile,timgame;genlogin=new a0_0x223850('',!![]),http=new a0_0x56b984(process['env']['SERVER_HOST'],process[a0_0x27b6d4(0x198)]['APIKEY'],!![]);let firstRun=!![],delayOpenProfile=0xbb8,profileTimeout=0x5265c0,botTimeout=0x5265c0,profileThreads=0x1,browserInfo={},version,screenData,tasksData,screenDataBuffer1,tasksDataBuffer1,teleId=null;const worker1=async _0xd297e5=>{const _0x1ef74e=a0_0x27b6d4,{version0:_0x48d23d,tasksDataBuffer:_0xc5b611,screenDataBuffer:_0x2aa155,action:_0x5a8786,task:_0x1cf63c,dataBrw:_0xb65299,GenDataProfile0:_0xa90f24,timgame0:_0x4591b5,timeout:_0x248585,tele_id:_0x5dce41}=_0xd297e5;taskInfo=_0x1cf63c;_0x5dce41&&_0x5dce41[_0x1ef74e(0x13e)]&&(teleId=_0x5dce41['tele_id']);screenDataBuffer1=_0x2aa155,tasksDataBuffer1=_0xc5b611,screenData=new Int32Array(_0x2aa155),tasksData=new Int32Array(_0xc5b611);try{if(_0x248585)return log(_0x1ef74e(0x199),_0x1ef74e(0x13b),null,'w'),await clearVar(),{'success':![],'error':_0x1ef74e(0x13b)};else{if(_0x1cf63c!==_0x1ef74e(0x15d)){version=_0x48d23d,getAllProfiles=_0xb65299,log(_0x1ef74e(0x199),_0x1ef74e(0x14c)+JSON['stringify'](_0xd297e5[_0x1ef74e(0x1da)]),null,'c'),log('worker1','getAllProfiles\x20'+JSON['stringify'](getAllProfiles),null,'c'),GenDataProfile=_0xa90f24,timgame=_0x4591b5,log('worker1','['+_0x1cf63c[_0x1ef74e(0x191)]+_0x1ef74e(0x160),null,'w');const _0x41c71d=await xuLyTask(_0x1cf63c);return log(_0x1ef74e(0x199),''+JSON[_0x1ef74e(0x149)](_0x41c71d),null,'w'),log('worker1',_0x1ef74e(0x1e8),null,'w',_0x1ef74e(0x1a1)),await clearVar(),_0x41c71d?{'success':!![],'result':_0x41c71d}:{'success':![],'result':_0x41c71d};}else return log(_0x1ef74e(0x199),'Lỗi\x20gì\x20đó\x20task\x20'+_0x1cf63c,null,'w'),await clearVar(),{'success':![],'error':'worker1'};}}catch(_0x107c20){return log(_0x1ef74e(0x199),_0x1ef74e(0x13f)+_0x107c20,null,![]),await clearVar(),{'success':![],'error':'worker1'};}};function a0_0x1708(_0x7c544f,_0x2f5b5b){const _0x35d686=a0_0x35d6();return a0_0x1708=function(_0x170832,_0x4ceb85){_0x170832=_0x170832-0x13a;let _0x56537d=_0x35d686[_0x170832];return _0x56537d;},a0_0x1708(_0x7c544f,_0x2f5b5b);}expose({'worker1':worker1});async function clearVar(){return genlogin=null,http=null,!![];}async function xuLyTask(_0x5ee28b){const _0x1ae511=a0_0x27b6d4;try{log('worker1','['+_0x5ee28b[_0x1ae511(0x191)]+_0x1ae511(0x18f),null,'i','-');const _0x497679=await genlogin['nowTime']('worker1'),_0xdf2262=_0x497679[_0x1ae511(0x1b5)];if(_0xdf2262<_0x5ee28b[_0x1ae511(0x1d9)])return log(_0x1ae511(0x199),'['+_0x5ee28b['name']+_0x1ae511(0x147)+JSON['stringify'](_0x5ee28b[_0x1ae511(0x191)])+_0x1ae511(0x165),null,'i'),log(_0x1ae511(0x199),'['+_0x5ee28b['name']+_0x1ae511(0x1c5)+JSON[_0x1ae511(0x149)](_0x497679)+_0x1ae511(0x189)+JSON[_0x1ae511(0x149)](_0x5ee28b[_0x1ae511(0x1eb)]),null,'w'),log(_0x1ae511(0x199),'['+_0x5ee28b[_0x1ae511(0x191)]+_0x1ae511(0x1c5)+JSON[_0x1ae511(0x149)](_0xdf2262)+_0x1ae511(0x189)+JSON['stringify'](taskNextRunDateTime),null,'w'),log(_0x1ae511(0x199),'['+_0x5ee28b['name']+_0x1ae511(0x1f3),null,'i'),await delay(0x1388),null;let _0x45f0a2=await http[_0x1ae511(0x163)](_0x1ae511(0x199),_0x5ee28b[_0x1ae511(0x191)]);if(_0x45f0a2[_0x1ae511(0x15a)][_0x1ae511(0x1a2)][_0x1ae511(0x18d)]<=0x0){log(_0x1ae511(0x199),'['+_0x5ee28b[_0x1ae511(0x191)]+_0x1ae511(0x167),null,![]);throw new Error(_0x1ae511(0x172));}firstRun&&(profileThreads=parseInt(_0x5ee28b['profileThreads']),profileQueue=new a0_0x431cc9({'concurrency':profileThreads}),log(_0x1ae511(0x199),'['+_0x5ee28b[_0x1ae511(0x191)]+_0x1ae511(0x1e3)+profileThreads,null,'w'),firstRun=![],delayOpenProfile=parseInt(_0x5ee28b['delayOpenProfile'])*0x3e8,profileTimeout=parseInt(_0x5ee28b['profileTimeout'])*0x3e8,botTimeout=parseInt(_0x5ee28b[_0x1ae511(0x1b1)])*0x3e8);const _0xd433eb=await xuLyProfiles(_0x45f0a2[_0x1ae511(0x15a)][_0x1ae511(0x1a2)],_0x5ee28b[_0x1ae511(0x191)]);if(!_0xd433eb){log('worker1','['+_0x5ee28b[_0x1ae511(0x191)]+_0x1ae511(0x1b9)+json(_0xd433eb),null,![]);throw new Error(_0x1ae511(0x172));}return log(_0x1ae511(0x199),'['+_0x5ee28b[_0x1ae511(0x191)]+_0x1ae511(0x1b4)+_0x5ee28b[_0x1ae511(0x191)]+_0x1ae511(0x1d0)),await delay(0x7d0),log('worker1','['+_0x5ee28b['name']+'][xuLyTask]:\x20Hoàn\x20thành\x20xử\x20lý\x20task:\x20'+JSON[_0x1ae511(0x149)](_0x5ee28b[_0x1ae511(0x191)])),!![];}catch(_0x32c6d3){return log(_0x1ae511(0x199),'['+_0x5ee28b[_0x1ae511(0x191)]+'][xuLyTask]:\x20Lỗi\x20while:\x20'+_0x32c6d3,null,![]),null;}}async function xuLyProfiles(_0x3e5528,_0x16f200){const _0x5598cd=a0_0x27b6d4;try{const _0x5d85c2=[];for(const [_0x9f8bde,_0x5665f1]of _0x3e5528[_0x5598cd(0x1c2)]()){const _0x1db337=await GenDataProfile[_0x5598cd(0x183)](_0x1d596d=>_0x1d596d['pid']===_0x5665f1);if(_0x9f8bde!==-0x1)log(_0x5598cd(0x199),'['+_0x16f200+_0x5598cd(0x196)+_0x1db337);else{log('worker1','['+_0x16f200+_0x5598cd(0x144));throw new Error(_0x5598cd(0x1e2));}log('worker1','['+_0x16f200+'][xuLyProfiles]:\x20Thêm\x20profile\x20'+_0x5665f1+_0x5598cd(0x195)+profileThreads,null,'i'),_0x5d85c2[_0x5598cd(0x1c6)](profileQueue[_0x5598cd(0x161)](async()=>{const _0x48c7f2=_0x5598cd;try{delayOpenProfile>0x0?(log(_0x48c7f2(0x199),'['+_0x16f200+_0x48c7f2(0x1ab)+_0x5665f1+_0x48c7f2(0x157)+delayOpenProfile+'ms',null,'w','-'),await delay(delayOpenProfile)):log('worker1','['+_0x16f200+'][xuLyProfiles]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile\x20'+_0x5665f1,null,'w','-'),await xuLyTungProfile(_0x5665f1,GenDataProfile[_0x1db337]);}catch(_0x10d444){log(_0x48c7f2(0x199),'['+_0x16f200+_0x48c7f2(0x1c7)+_0x5665f1+':\x20'+_0x10d444[_0x48c7f2(0x1b6)],null,![]);throw _0x10d444;}})),log(_0x5598cd(0x199),'['+_0x16f200+_0x5598cd(0x1b0)+_0x5665f1+'\x20vào\x20hàng\x20đợi.');}const _0x49b07e=await Promise[_0x5598cd(0x1c4)](_0x5d85c2),_0x1ab35f=_0x49b07e[_0x5598cd(0x1e4)](_0x21d7c4=>_0x21d7c4[_0x5598cd(0x188)]==='rejected');return _0x1ab35f[_0x5598cd(0x18d)]>0x0?log(_0x5598cd(0x199),'['+_0x16f200+_0x5598cd(0x1f4)+JSON[_0x5598cd(0x149)](_0x1ab35f),null,![]):log(_0x5598cd(0x199),'['+_0x16f200+_0x5598cd(0x141)+json(_0x49b07e)),!![];}catch(_0x581fb4){return log(_0x5598cd(0x199),'['+_0x16f200+'][xuLyProfiles]:\x20Lỗi\x20:\x20'+_0x581fb4,null,![]),null;}}async function xuLyTungProfile(_0x38e3b0,_0x34bfee){const _0x171a34=a0_0x27b6d4;let _0x27f938,_0x23e6dd;const _0x3e19c5=_0x38e3b0;let _0x460282;try{await delay(delayOpenProfile),log(_0x38e3b0,_0x171a34(0x156),null,'i'),_0x27f938=await genlogin['nowTime'](_0x38e3b0),await http[_0x171a34(0x171)](_0x171a34(0x199),_0x38e3b0,_0x171a34(0x150),_0x27f938[_0x171a34(0x1b5)],'',_0x171a34(0x1a4)+version,_0x171a34(0x184));teleId&&await http[_0x171a34(0x152)](_0x38e3b0,teleId,'['+_0x38e3b0+_0x171a34(0x1d5));log(_0x38e3b0,_0x171a34(0x1c0)+_0x38e3b0,null,'w'),_0x460282=await procScreenArr(_0x171a34(0x185),null,_0x38e3b0);if(_0x460282['x']===undefined||_0x460282['y']===undefined){log(_0x38e3b0,_0x171a34(0x1e5),null,![]);throw new Error('Không\x20tìm\x20thấy\x20giá\x20trị\x20status=0');}const _0xca18a0=await xuLyBrowser(_0x38e3b0,_0x34bfee,_0x460282);await procScreenArr(_0x171a34(0x173),_0x460282,_0x38e3b0);const _0x3928b0=await genlogin[_0x171a34(0x14d)](_0x27f938[_0x171a34(0x19b)]);return await http[_0x171a34(0x171)](_0x171a34(0x199),_0x38e3b0,_0x171a34(0x181),'','',_0x3928b0,_0x171a34(0x1d2)),teleId&&await http[_0x171a34(0x152)](_0x38e3b0,teleId,'['+_0x38e3b0+_0x171a34(0x1cd)),_0xca18a0;}catch(_0x46e234){log(_0x38e3b0,_0x171a34(0x1c8)+_0x46e234,null,![]);if(_0x23e6dd)await Thread[_0x171a34(0x1f7)](_0x23e6dd);await procScreenArr(_0x171a34(0x173),_0x460282,_0x38e3b0);const _0x393266=await genlogin[_0x171a34(0x14d)](_0x27f938?.[_0x171a34(0x19b)]||Date[_0x171a34(0x1d1)]());await http['addData'](_0x171a34(0x199),_0x38e3b0,_0x171a34(0x181),'','',_0x393266,_0x171a34(0x1d2));teleId&&await http[_0x171a34(0x152)](_0x38e3b0,teleId,'['+_0x38e3b0+_0x171a34(0x17d));throw _0x46e234;}}async function xuLyBrowser(_0x577e95,_0xa432fb,_0x37daeb){const _0x4a22e2=a0_0x27b6d4;let _0x30b704;try{const _0x389340=_0x577e95;if(!browserInfo[_0x577e95])browserInfo[_0x577e95]={};browserInfo[_0x577e95]['fisrtOpenBrowser']=0x0,log(_0x577e95,_0x4a22e2(0x1d6)+json(browserInfo),null,'w','w');if(browserInfo[_0x577e95][_0x4a22e2(0x1be)]==0x0){_0x30b704=await OpenBrowser(_0x577e95,_0xa432fb,_0x37daeb);if(!_0x30b704){log(_0x577e95,'[xuLyBrowser]:\x20Không\x20mở\x20được\x20trình\x20duyệt\x20'+_0x577e95,null,![]);throw new Error(_0x4a22e2(0x1ac)+_0x577e95);}browserInfo[_0x577e95][_0x4a22e2(0x1be)]=0x1;}if(!_0x30b704[_0x4a22e2(0x164)])throw new Error('[xuLyBrowser]:\x20browser\x20disconnected\x20'+_0x577e95);let _0x40659f=0x0;const _0xf26abc=await http[_0x4a22e2(0x142)](_0x4a22e2(0x199),_0x389340);if(!_0xf26abc){log(_0x577e95,_0x4a22e2(0x1f2),null,![]);throw new Error(_0x4a22e2(0x1ca));}if(_0xf26abc['length']<=0x0){log(_0x577e95,_0x4a22e2(0x18a),null,![]);throw new Error('No\x20bot\x20found');}for(const _0x5b90bf of _0xf26abc){if(_0x5b90bf){if(_0x5b90bf[_0x4a22e2(0x155)]!=_0x4a22e2(0x1a5))continue;if(_0x5b90bf[_0x4a22e2(0x15a)]===_0x4a22e2(0x14f)){log(_0x577e95,_0x4a22e2(0x18b),null,'i');break;}if(!_0x5b90bf['aks']){log(_0x577e95,_0x4a22e2(0x1a8)+json(_0x5b90bf)+'\x20ko\x20có\x20aks',null,![]);continue;}if(_0x5b90bf[_0x4a22e2(0x159)]==='0'){log(_0x577e95,_0x4a22e2(0x1a8)+json(_0x5b90bf[_0x4a22e2(0x191)])+_0x4a22e2(0x197),null,![]);continue;}const _0x4bfca0=await genlogin[_0x4a22e2(0x1f8)](_0x577e95);if(_0x5b90bf['nextRunStamp']>_0x4bfca0['timestamp']){log(_0x577e95,_0x4a22e2(0x1a8)+json(_0x5b90bf['name'])+_0x4a22e2(0x1d8),null,'w');continue;}switch(_0x5b90bf['aks']){case'A':log(_0x577e95,':\x20'+json(_0x5b90bf['name'])+'\x20Tele\x20A\x20OK'),await xuLyGame(_0x5b90bf,'A',_0x577e95,_0xa432fb,_0x37daeb,_0x30b704);break;case'K':log(_0x577e95,':\x20'+json(_0x5b90bf['name'])+_0x4a22e2(0x19f)),await xuLyGame(_0x5b90bf,'K',_0x577e95,_0xa432fb,_0x37daeb,_0x30b704);break;case'W':log(_0x577e95,':\x20'+json(_0x5b90bf[_0x4a22e2(0x191)])+_0x4a22e2(0x1f1)),await xuLyGame(_0x5b90bf,'W',_0x577e95,_0xa432fb,_0x37daeb,_0x30b704);break;default:log(_0x577e95,_0x4a22e2(0x18c)+json(_0x5b90bf[_0x4a22e2(0x1ea)]),null,![]);break;}log(_0x577e95,_0x4a22e2(0x1ee));}}return await closeBrowser(_0x577e95,_0x30b704),!![];}catch(_0x3fec44){return log(_0x577e95,_0x4a22e2(0x15e)+_0x3fec44,null,![]),log(_0x577e95,_0x4a22e2(0x169)+json(getAllProfiles),null,'w','w'),await closeBrowser(_0x577e95,_0x30b704),null;}}async function xuLyGame(_0x108856,_0x4cb0bb,_0x514b26,_0x50a4b5,_0x487aa1,_0x277927){const _0xd4ff01=a0_0x27b6d4;try{const _0x11ba2a=_0x514b26;if(_0x108856[_0xd4ff01(0x155)]===_0xd4ff01(0x146)){log(_0x514b26,_0xd4ff01(0x14b)+_0x108856[_0xd4ff01(0x191)]+_0xd4ff01(0x1a0),null,'i');const _0x13cbc=await genlogin[_0xd4ff01(0x1f8)](_0x514b26),_0x486363=await http[_0xd4ff01(0x171)](_0x514b26,_0x11ba2a,_0x108856[_0xd4ff01(0x191)],_0x13cbc[_0xd4ff01(0x1b5)],'',_0xd4ff01(0x1dd),_0xd4ff01(0x176)),_0xb239d9=_0x486363['ID'],_0x3f2c25={'bot':_0x108856,'profileNameId':_0x514b26,'genlogin':genlogin,'http':http,'dataId':_0xb239d9},_0x9081a2=await loadGameApi(_0x108856[_0xd4ff01(0x191)],_0x3f2c25);if(!_0x9081a2[_0xd4ff01(0x188)])return log(_0x514b26,_0xd4ff01(0x1dc)+_0x108856[_0xd4ff01(0x191)]+'\x20lỗi',null,![]),await http[_0xd4ff01(0x16e)](_0x514b26,_0x11ba2a,_0xb239d9,'Fail','Fail'),null;if(_0x9081a2['status']==_0xd4ff01(0x1cc))return log(_0x514b26,_0xd4ff01(0x1dc)+_0x108856['name']+_0xd4ff01(0x17c),null,'i'),'loop';if(_0x9081a2[_0xd4ff01(0x188)])return log(_0x514b26,_0xd4ff01(0x1dc)+_0x108856[_0xd4ff01(0x191)]+_0xd4ff01(0x192)),await http['nextRunTime'](_0x514b26,_0x11ba2a,_0x108856['id'],_0x9081a2[_0xd4ff01(0x15b)],_0x9081a2[_0xd4ff01(0x145)]),await http[_0xd4ff01(0x16e)](_0x514b26,_0x11ba2a,_0xb239d9,'Ok','Done',_0x9081a2['coin'],_0x9081a2['nextRun']),!![];}else{if(_0x4cb0bb=='A'||_0x4cb0bb=='K'){log(_0x514b26,_0xd4ff01(0x14b)+_0x108856[_0xd4ff01(0x191)]+_0xd4ff01(0x1e7),null,'w','-');const _0x388692=await http[_0xd4ff01(0x175)](_0x514b26,_0x4cb0bb);if(_0x388692){log(_0x514b26,_0xd4ff01(0x16a));let _0x594f1f=0x0;while(_0x594f1f<0x2){const _0x249c40=await checkTeleWebOpen(_0x108856,_0x388692,_0x514b26,_0x487aa1,_0x277927);if(_0x249c40===_0xd4ff01(0x1cc))_0x594f1f++,log(_0x514b26,_0xd4ff01(0x1cf)+_0x594f1f+'/2',null,'i'),await delay(0x3e8);else return _0x249c40?(log(_0x514b26,_0xd4ff01(0x1bd)),!![]):(log(_0x514b26,'[xuLyGame]:\x20checkTeleWebOpen\x20có\x20gì\x20đó\x20sai\x20sai\x20rồi\x20bro',null,![]),null);}return log(_0x514b26,'[xuLyGame]:Max\x20loop\x20rồi\x20bro',null,![]),null;}}else{if(_0x4cb0bb=='W'){log(_0x514b26,_0xd4ff01(0x14b)+_0x108856[_0xd4ff01(0x191)]+'\x20Web\x20mode',null,'w','-');const _0x4b8ff4=await checkTeleWebOpen(_0x108856,_0x4cb0bb,_0x514b26,_0x487aa1,_0x277927);return _0x4b8ff4?(log(_0x514b26,_0xd4ff01(0x1bd)),!![]):(log(_0x514b26,_0xd4ff01(0x194),null,![]),null);}else return log(_0x514b26,'[xuLyGame]:\x20Sai\x20aks\x20'+_0x4cb0bb,null,![]),null;}}}catch(_0x527864){return log(_0x514b26,_0xd4ff01(0x190)+_0x527864,null,![]),null;}}async function OpenBrowser(_0x470435,_0x54fffd,_0x418fa8){const _0x3993fe=a0_0x27b6d4;try{const _0x35494=_0x470435;log(_0x470435,_0x3993fe(0x1db)+JSON[_0x3993fe(0x149)](_0x470435),null,'i');if(getAllProfiles[_0x3993fe(0x187)]==='n'){const _0x12a203=getAllProfiles['customBrowserPosition']['split']('x');parseInt(_0x12a203[0x0])>=0x0&&parseInt(_0x12a203[0x1])>=0x0?(_0x418fa8['x']=parseInt(_0x12a203[0x0]),_0x418fa8['y']=parseInt(_0x12a203[0x1])):(_0x418fa8['x']=0x0,_0x418fa8['y']=0x0),log(_0x470435,_0x3993fe(0x17a)+_0x418fa8['x']+'x'+_0x418fa8['y'],null,'w');}const _0x18ac1e=await genlogin[_0x3993fe(0x1de)](_0x470435,getAllProfiles,_0x54fffd,_0x418fa8);log(_0x470435,'[OpenBrowser]:\x20GenLogin:\x20'+JSON[_0x3993fe(0x149)](_0x18ac1e),null,'i'),await delay(0x1388);if(_0x18ac1e){let _0x3fc9f8=0x0;const _0x13b5e2=0xa;while(_0x3fc9f8<_0x13b5e2){_0x3fc9f8++;const _0x2e2f56=await genlogin[_0x3993fe(0x1bb)](_0x470435,_0x18ac1e);if(_0x2e2f56<=0x1)return log(_0x470435,_0x3993fe(0x143)+_0x2e2f56+_0x3993fe(0x166),null,'i'),_0x18ac1e;const _0x15f8d7=await genlogin['closeTab'](_0x470435,_0x18ac1e,_0x2e2f56-0x1,0xbb8);if(!_0x15f8d7){log(_0x470435,_0x3993fe(0x19e),null,![]);continue;}log(_0x470435,_0x3993fe(0x13d)),await delay(0xbb8);continue;}}return log(_0x470435,_0x3993fe(0x1aa)+JSON[_0x3993fe(0x149)](_0x470435)),null;}catch(_0x38765d){throw new Error(_0x3993fe(0x13c)+_0x38765d[_0x3993fe(0x1b6)]);}}async function checkTeleWebOpen(_0x35c039,_0x2dcb05,_0x56ec8f,_0x8c7d4b,_0x188673){const _0x1e69cc=a0_0x27b6d4;let _0x22c2a4,_0x22aca7;try{_0x22aca7=await genlogin[_0x1e69cc(0x1df)](_0x56ec8f,_0x188673,0x0,getAllProfiles[_0x1e69cc(0x1af)],_0x8c7d4b[_0x1e69cc(0x158)]);if(_0x2dcb05!='W'){const _0x515825=await genlogin['elementExistsByXPath'](_0x56ec8f,_0x22aca7,_0x2dcb05[_0x1e69cc(0x179)],0x7d0);!_0x515825&&(await genlogin[_0x1e69cc(0x1ce)](_0x56ec8f,_0x22aca7,_0x1e69cc(0x1d3),0xea60),await delay(0x7d0),await genlogin[_0x1e69cc(0x1ce)](_0x56ec8f,_0x22aca7,_0x2dcb05[_0x1e69cc(0x193)],0xea60),await genlogin[_0x1e69cc(0x168)](_0x56ec8f,_0x22aca7,_0x56ec8f),await delay(0x1388));}else _0x2dcb05='W',await genlogin[_0x1e69cc(0x1ce)](_0x56ec8f,_0x22aca7,'https://www.google.com',0xea60),await delay(0x7d0),await genlogin[_0x1e69cc(0x1ce)](_0x56ec8f,_0x22aca7,_0x35c039['ref'],0xea60),await genlogin[_0x1e69cc(0x168)](_0x56ec8f,_0x22aca7,_0x56ec8f),await delay(0x1388);log(_0x56ec8f,_0x1e69cc(0x15f),null,'i');const _0x556abf=await genlogin[_0x1e69cc(0x1f8)](_0x56ec8f),_0x27ee92=await http[_0x1e69cc(0x171)](_0x56ec8f,_0x56ec8f,_0x35c039['name'],_0x556abf[_0x1e69cc(0x1b5)],'',_0x1e69cc(0x184),_0x1e69cc(0x176));_0x22c2a4=_0x27ee92['ID'];const _0x2edd8f={'firstPage':_0x22aca7,'bot':_0x35c039,'profileNameId':_0x56ec8f,'getAks':_0x2dcb05,'genlogin':genlogin,'http':http,'browser':_0x188673,'dataId':_0x27ee92['ID'],'taskIndex':taskInfo[_0x1e69cc(0x148)],'screenDataBuffer2':screenDataBuffer1,'tasksDataBuffer2':tasksDataBuffer1};let _0x148dba=null;log(_0x56ec8f,'[checkTeleWebOpen]:\x20dataId:\x20'+json(_0x22c2a4),null,'i');if(timgame&&_0x2dcb05!='W'){await http[_0x1e69cc(0x16e)](_0x56ec8f,_0x56ec8f,_0x22c2a4,_0x1e69cc(0x174));const _0x59f7ab=await loadGame(_0x1e69cc(0x1a3),_0x2edd8f,_0x148dba,_0x22c2a4,_0x56ec8f);if(_0x59f7ab[_0x1e69cc(0x188)]==_0x1e69cc(0x1cc))return log(_0x56ec8f,_0x1e69cc(0x1d7)+_0x35c039['name']+_0x1e69cc(0x17c),null,'i'),await http['updateData'](_0x56ec8f,_0x56ec8f,_0x22c2a4,'loop\x20new\x20game'),_0x1e69cc(0x1cc);else{if(!_0x59f7ab)return log(_0x56ec8f,'[checkTeleWebOpen]:\x20Không\x20tìm\x20thấy\x20game\x20'+_0x35c039[_0x1e69cc(0x191)],null,![]),await http['updateData'](_0x56ec8f,_0x56ec8f,_0x22c2a4,_0x1e69cc(0x16b),_0x1e69cc(0x16b)),null;}_0x59f7ab[_0x1e69cc(0x1ae)]&&(_0x148dba=_0x59f7ab[_0x1e69cc(0x1ae)]);}await http[_0x1e69cc(0x16e)](_0x56ec8f,_0x56ec8f,_0x22c2a4,'Vào');const _0x1d819f=await loadGame(_0x35c039[_0x1e69cc(0x191)],_0x2edd8f,_0x148dba,_0x22c2a4,_0x56ec8f);if(!_0x1d819f[_0x1e69cc(0x188)])return log(_0x56ec8f,_0x1e69cc(0x180)+_0x35c039[_0x1e69cc(0x191)],null,![]),log(_0x56ec8f,_0x1e69cc(0x1b3)+json(_0x1d819f),null,![]),await http[_0x1e69cc(0x16e)](_0x56ec8f,_0x56ec8f,_0x22c2a4,_0x1e69cc(0x16b),_0x1e69cc(0x16b)),null;else{if(_0x1d819f['status']=='loop')return log(_0x56ec8f,'[checkTeleWebOpen]:\x20Thực\x20thi\x20'+_0x35c039[_0x1e69cc(0x191)]+_0x1e69cc(0x17c),null,'i'),await http['updateData'](_0x56ec8f,_0x56ec8f,_0x22c2a4,_0x1e69cc(0x1cc)),'loop';}return await http[_0x1e69cc(0x16f)](_0x56ec8f,_0x56ec8f,_0x35c039['id'],_0x1d819f[_0x1e69cc(0x15b)],_0x1d819f[_0x1e69cc(0x145)]),await http[_0x1e69cc(0x16e)](_0x56ec8f,_0x56ec8f,_0x22c2a4,'Ok',_0x1e69cc(0x18e),_0x1d819f[_0x1e69cc(0x1a7)],_0x1d819f[_0x1e69cc(0x15b)]),log(_0x56ec8f,_0x1e69cc(0x1e1)+_0x35c039[_0x1e69cc(0x191)]+_0x1e69cc(0x153)),await delay(0x7d0),_0x22c2a4=null,_0x22aca7=null,!![];}catch(_0x43353b){return log(_0x56ec8f,'[checkTeleWebOpen]:\x20Lỗi\x20trong\x20quá\x20trình\x20mở\x20trang\x20:\x20'+_0x43353b,null,![]),await http[_0x1e69cc(0x16e)](_0x56ec8f,_0x56ec8f,_0x22c2a4,_0x1e69cc(0x16b),_0x1e69cc(0x16b)),_0x22c2a4=null,_0x22aca7=null,null;}}async function loadGame(_0x46f196,_0x215e0c,_0x1007df,_0x474157,_0x642044){const _0x4f7694=a0_0x27b6d4;try{const _0x3e2059=pathToFileURL(a0_0x53122c[_0x4f7694(0x1ec)](__dirname,_0x4f7694(0x1ba),_0x46f196+_0x4f7694(0x1f6)))[_0x4f7694(0x14a)];log(_0x642044,'[loadGame]:scriptPath\x20'+_0x3e2059);const _0x19d783=await import(_0x3e2059);if(typeof _0x19d783[_0x4f7694(0x1b8)]==='function'){const _0x4d15b6=await _0x19d783[_0x4f7694(0x1b8)](_0x215e0c,_0x1007df);await delay(0x3e8);if(!_0x4d15b6[_0x4f7694(0x188)])return log(_0x642044,'[loadGame]:\x20Script\x20'+_0x46f196+_0x4f7694(0x13a),null,![]),null;else return _0x4d15b6[_0x4f7694(0x188)]==='loop'?(log(_0x642044,_0x4f7694(0x19c)+_0x46f196+_0x4f7694(0x17c),null,'i'),_0x4d15b6):(log(_0x642044,_0x4f7694(0x19c)+_0x46f196+'\x20'+_0x4d15b6[_0x4f7694(0x188)],null,'i'),_0x4d15b6);}else return await delay(0x3e8),log(_0x642044,'[loadGame]:\x20Script\x20'+_0x46f196+_0x4f7694(0x1e0),null,![]),null;}catch(_0x2c7207){return log(_0x642044,_0x4f7694(0x1c9)+_0x46f196+':\x20'+_0x2c7207,null,![]),teleId&&await http['tele'](_0x642044,teleId,'['+_0x642044+']['+_0x46f196+'][ERR]:\x20Lỗi\x20'+_0x2c7207),null;}}async function closeBrowser(_0xd71414='',_0x5ab8e2){const _0x59034a=a0_0x27b6d4;try{if(_0x5ab8e2){if(_0x5ab8e2[_0x59034a(0x164)]){for(const _0x109c9b of await _0x5ab8e2[_0x59034a(0x16c)]()){await _0x109c9b[_0x59034a(0x173)]();}return await _0x5ab8e2[_0x59034a(0x173)](),_0x5ab8e2=null,global['gc']&&(global['gc'](),log(_0x59034a(0x1cb),_0x59034a(0x1ef),null,'i','+')),log(_0xd71414,_0x59034a(0x1f5)+_0xd71414+_0x59034a(0x153),null,'w'),!![];}}else log(_0xd71414,'[closeBrowser]:\x20Không\x20có\x20trình\x20duyệt\x20để\x20đóng',null,'i');return null;}catch(_0x1874ab){return log(_0xd71414,_0x59034a(0x1ad)+_0xd71414+':\x20'+_0x1874ab,null,![]),null;}}async function procScreenArr(_0x194eb5,_0x2c9541,_0x393a5e){const _0x54fca7=a0_0x27b6d4;try{await acquireLock(screenData);let _0x2253f1={};log(_0x393a5e,_0x54fca7(0x19d)+_0x194eb5+_0x54fca7(0x17b)+json(_0x2c9541),null,'w','-');if(_0x194eb5===_0x54fca7(0x185)){log(_0x393a5e,_0x54fca7(0x1a6),null,'w'),_0x2253f1[_0x54fca7(0x158)]=Atomics['load'](screenData,0x1)/0xf4240,_0x2253f1[_0x54fca7(0x1e9)]=Atomics['load'](screenData,0x2),_0x2253f1['height']=Atomics['load'](screenData,0x3);for(let _0x1b7dc6=0xa;_0x1b7dc6<screenData['length']-0x1;_0x1b7dc6=_0x1b7dc6+0x3){const _0x274b7d=Atomics[_0x54fca7(0x178)](screenData,_0x1b7dc6);if(_0x274b7d===0x2)return Atomics[_0x54fca7(0x186)](screenData,_0x1b7dc6,0x1),_0x2253f1['default']=0x0,_0x2253f1['x']=Atomics[_0x54fca7(0x178)](screenData,_0x1b7dc6+0x1),_0x2253f1['y']=Atomics[_0x54fca7(0x178)](screenData,_0x1b7dc6+0x2),log(_0x393a5e,_0x54fca7(0x140)+_0x1b7dc6+'\x20set\x20open\x20ok\x20pos:'+json(_0x2253f1),null,'w'),await releaseLock(screenData),_0x2253f1;if(_0x274b7d===0x0)return Atomics['store'](screenData,_0x1b7dc6,0x1),_0x2253f1[_0x54fca7(0x1b8)]=0x1,_0x2253f1['x']=0x0,_0x2253f1['y']=0x0,log(_0x393a5e,_0x54fca7(0x140)+_0x1b7dc6+_0x54fca7(0x1b2)+json(_0x2253f1),null,'w'),await releaseLock(screenData),_0x2253f1;}await releaseLock(screenData);throw new Error(_0x54fca7(0x17e));}else{if(_0x194eb5===_0x54fca7(0x173)&&_0x2c9541['x']>=0x0&&_0x2c9541['y']>=0x0){log(_0x393a5e,_0x54fca7(0x1a9),null,'w');if(_0x2c9541[_0x54fca7(0x1b8)]===0x1)return log(_0x393a5e,_0x54fca7(0x1f0),null,'w'),await releaseLock(screenData),!![];for(let _0x1810ed=0xa;_0x1810ed<screenData['length']-0x1;_0x1810ed+=0x3){const _0x2536ce=Atomics[_0x54fca7(0x178)](screenData,_0x1810ed);if(_0x2536ce===0x1){const _0x5f22fc=Atomics[_0x54fca7(0x178)](screenData,_0x1810ed+0x1),_0x2df0eb=Atomics[_0x54fca7(0x178)](screenData,_0x1810ed+0x2);if(_0x5f22fc===_0x2c9541['x']&&_0x2df0eb===_0x2c9541['y'])return Atomics[_0x54fca7(0x186)](screenData,_0x1810ed,0x2),log(_0x393a5e,_0x54fca7(0x140)+_0x1810ed+'\x20set\x20close\x20ok',null,'w'),Atomics[_0x54fca7(0x162)](screenData,_0x1810ed),await releaseLock(screenData),!![];}}await releaseLock(screenData);throw new Error('Không\x20thể\x20đóng\x20màn\x20hình:\x20vị\x20trí\x20không\x20hợp\x20lệ\x20action:\x20'+_0x194eb5+',\x20pos:\x20'+json(_0x2c9541));}else return log(_0x393a5e,'[worker1.procScreenArr]\x20posVal:'+json(_0x2c9541)+_0x54fca7(0x1b7)+_0x194eb5,null,'w'),await releaseLock(screenData),!![];}}catch(_0x3037aa){return log(_0x393a5e,'[worker1.procScreenArr]lỗi\x20'+_0x3037aa+_0x54fca7(0x14e)+_0x194eb5+_0x54fca7(0x17b)+json(_0x2c9541),null,![]),await releaseLock(screenData),![];}}async function acquireLock(_0xeb5c9e,_0x39fd6f=0x7530){const _0x189a0d=a0_0x27b6d4,_0x814542=Date['now']();while(Atomics[_0x189a0d(0x1bc)](_0xeb5c9e,0x8,0x0,0x1)!==0x0){if(Date[_0x189a0d(0x1d1)]()-_0x814542>_0x39fd6f)throw new Error('Timeout\x20while\x20acquiring\x20lock');Atomics[_0x189a0d(0x1c1)](_0xeb5c9e,0x8,0x1,_0x39fd6f);}}async function releaseLock(_0x4a4f7a){const _0x333c28=a0_0x27b6d4;Atomics[_0x333c28(0x186)](_0x4a4f7a,0x8,0x0),Atomics['notify'](_0x4a4f7a,0x8);}async function xoaTimeout(_0x201824){const _0x51a21d=a0_0x27b6d4;try{clearTimeout(_0x201824),log('[xoaTimeout]worker1:\x20Xóa\x20timeout:'+_0x201824,null,'i',_0x51a21d(0x1c3));}catch(_0x162ff5){log(_0x51a21d(0x1bf)+_0x162ff5,null,![]);}}async function xoaInterval(_0xb8133b){const _0x2cd7e6=a0_0x27b6d4;try{clearInterval(_0xb8133b),log('[xoaTimeout]worker1:\x20Xóa\x20Interval:'+_0xb8133b,null,'i','clrInterval');}catch(_0x362ed5){log(_0x2cd7e6(0x1bf)+_0x362ed5,null,![]);}}async function delay(_0x54d39f){return new Promise(async _0x1ca481=>{setTimeout(_0x1ca481,_0x54d39f);});}async function eTimeout(){const _0x42deb9=a0_0x27b6d4;return log('[eTimeout]worker1:\x20timeout',null,'w'),Atomics[_0x42deb9(0x186)](tasksData,taskInfo[_0x42deb9(0x148)],0x1),!![];}async function cTimeout(){const _0x259ddf=a0_0x27b6d4;if(Atomics[_0x259ddf(0x178)](tasksData,taskInfo['taskIndex'])===0x1)return!![];return null;}async function rstTimeout(){const _0x2a9e7a=a0_0x27b6d4;return log('[eTimeout]worker1:\x20reset\x20timeout',null,'w'),Atomics[_0x2a9e7a(0x1bc)](tasksData,taskInfo[_0x2a9e7a(0x148)],0x1,0x2),!![];}
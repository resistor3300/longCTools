const a0_0x4e259e=a0_0x2ac9;(function(_0x2524d6,_0x4f6510){const _0x530754=a0_0x2ac9,_0x4a56f8=_0x2524d6();while(!![]){try{const _0x45a2e2=-parseInt(_0x530754(0x215))/0x1+-parseInt(_0x530754(0x1d3))/0x2+-parseInt(_0x530754(0x210))/0x3+parseInt(_0x530754(0x1d4))/0x4+parseInt(_0x530754(0x23e))/0x5*(parseInt(_0x530754(0x1b8))/0x6)+-parseInt(_0x530754(0x1df))/0x7+parseInt(_0x530754(0x235))/0x8;if(_0x45a2e2===_0x4f6510)break;else _0x4a56f8['push'](_0x4a56f8['shift']());}catch(_0xa452ca){_0x4a56f8['push'](_0x4a56f8['shift']());}}}(a0_0x5a9e,0x801e3));import'dotenv/config';import a0_0x3e83f5 from'fs';import a0_0x23cd28 from'path';function a0_0x5a9e(){const _0x304bc5=['elementExistsByXPath','[xuLyBrowser]:\x20browser\x20disconnected\x20','[xuLyBrowser]:\x20Bot\x20OK','][xuLyProfiles]:\x20Thêm\x20profile\x20','fisrtOpenBrowser','\x20ok','timGame','\x20set\x20close\x20ok','entries','aks','[OpenBrowser]]Chỉ\x20có\x20','https://www.google.com','][xuLyTask]:\x20currentDateTime:\x20','[closeBrowser]:\x20Đóng\x20trình\x20duyệt\x20','timestamp','No\x20bot\x20found','promises','profileTimeout','[closeBrowser]:\x20Không\x20có\x20trình\x20duyệt\x20để\x20đóng','\x20Action:','tinhThoiGian','StartApi','\x20Chưa\x20tới\x20giờ\x20chạy','Start','type','getAllProfiles\x20',']:\x20Script\x20Mode','\x20chưa\x20đến\x20thời\x20gian\x20chạy','env','split','[checkTeleWebOpen]:\x20Không\x20thực\x20thi\x20script\x20','customBrowserPosition','botTimeout','Không\x20tìm\x20thấy\x20indexGenP','[OpenBrowser]:\x20Lỗi\x20khi\x20mở\x20browser:\x20','STOP\x20SCRIPT','[xuLyTungProfile]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile','[xoaTimeout]worker1:\x20','[xuLyTungProfile]:\x20Lỗi:\x20','[OpenBrowser]:\x20Processing\x20profile:\x20','8958ETXhOo','][xuLyProfiles]:\x20Lỗi\x20khi\x20xử\x20lý\x20profile\x20','\x20|\x20nextrun:\x20','\x20Api\x20mode','script','profileThreads','\x20loop','[checkTeleWebOpen]:\x20Thực\x20thi\x20','[loadGame]:scriptPath\x20',':\x20Bot\x20','running','pid','cwd','loop\x20new\x20game','utf-8','load','][xuLyProfiles]index:\x20','[xoaTimeout]worker1:\x20Xóa\x20Interval:','[xuLyTungProfile]:\x20Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng','START\x20SCRIPT','APIKEY','\x20thành\x20công','\x20không\x20phải\x20là\x20một\x20hàm\x20hợp\x20lệ','Done','url','[eTimeout]worker1:\x20timeout','getTask','1590574WHkfsv','3640152OwHQoQ','[worker1.procScreenArr]\x20posVal:','[xuLyBrowser]:\x20Không\x20mở\x20được\x20trình\x20duyệt\x20','date','autoSetBrowserPosition',':\x20XONG\x201\x20LƯỢT','stringify','Stop','Vào','countOpenTabs','delayOpenProfile','1389304FKABFN','close','compareExchange','[checkTeleWebOpen]:\x20Thực\x20thi\x20script\x20','\x20sau\x20','api','][xuLyProfiles]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile\x20','Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng','[OpenBrowser]\x20Đóng\x20tab\x20mới\x20thành\x20công','width','\x20tab\x20đang\x20mở','screenArr','][xuLyProfiles]:\x20Lỗi\x20:\x20','[closeBrowser]:\x20Lỗi\x20khi\x20đóng\x20trình\x20duyệt\x20','notify','findIndex','nextrun','length','nowTime',',\x20pos:\x20','name','[checkTeleWebOpen]:\x20','coin','loop','\x20Tele\x20A\x20OK','clrInterval',':\x20Sai\x20aks\x20','][xuLyTask]:\x20Chờ\x205\x20giây\x20trước\x20khi\x20xử\x20lý\x20task\x20tiếp\x20theo...','\x20set\x20open\x20ok\x20pos:','activateTab','[xuLyGame]:Max\x20loop\x20rồi\x20bro','FistUrl','][xuLyProfiles]Không\x20tìm\x20thấy\x20indexGenP','[xuLyGame]:\x20Thực\x20thi\x20','HostName','Không\x20tìm\x20thấy\x20giá\x20trị\x20status=0','[OpenBrowser]\x20Lỗi\x20khi\x20đóng\x20tab\x20mới','connected','[loadGame]:\x20Script\x20','end','\x20OFF','nextRunStamp','[checkTeleWebOpen]:\x20vào\x20loadGame','[xoaTimeout]worker1:\x20Xóa\x20timeout:','nextRun','parse','[checkTeleWebOpen]:\x20Lỗi\x20trong\x20quá\x20trình\x20mở\x20trang\x20:\x20','][xuLyTask]:\x20vào\x20xuLyTask','package.json','1186068dBfHry','taskIndex','add','[worker1.procScreenArr]action:\x20','][xuLyTask]:\x20Không\x20lấy\x20được\x20dữ\x20liệu\x20profiles\x20','558827moKNVS','join','browserWidthHeight','nextRunTime','clrTimeout','[xuLyGame]:\x20','[worker1.procScreenArr]vào\x20open','worker1','setTitle','open','timeout','No\x20profile\x20found','Lỗi\x20','][xuLyTask]profileQueue:\x20concurrency:','scale','[xuLyBrowser]:\x20không\x20lấy\x20được\x20bot','Fail','[xuLyTungProfile]0:\x20Kiểm\x20tra\x20màn\x20hình\x20','default','task','[worker1.procScreenArr]lỗi\x20','updateData','DONE','terminate','\x20action:\x20','onOff','SERVER_HOST','\x20Script\x20mode','[xuLyBrowser]:\x20Bot\x20không\x20tìm\x20thấy','closeTab','[worker1.procScreenArr]\x20index:','][xuLyTask]:\x20Tasks:\x20','8332944TfJBjZ','store','\x20done','openUrl','[xuLyBrowser]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20browser:\x20','version','value','getAks','status','1745ZylggQ','profiles','getBotAll','InputSearch','[OpenBrowser]:\x20GenLogin:\x20','[xuLyGame]:\x20checkTeleWebOpen\x20OK','allSettled','Timeout\x20while\x20acquiring\x20lock','now','Lỗi\x20gì\x20đó\x20task\x20','addData','message','[xuLyBrowser]:browserInfo:\x20','[checkTeleWebOpen]:\x20Không\x20tìm\x20thấy\x20game\x20'];a0_0x5a9e=function(){return _0x304bc5;};return a0_0x5a9e();}import{fileURLToPath,pathToFileURL}from'url';import{expose}from'threads/worker';import{log,json}from'./modules/logger.js';import a0_0x221a36 from'./modules/Genlogin.js';import a0_0x42601b from'./modules/http.js';import a0_0x2b401d from'p-queue';const __filename=fileURLToPath(import.meta[a0_0x4e259e(0x1d0)]),__dirname=a0_0x23cd28['dirname'](__filename);let profileQueue,genlogin,profileNameId0,profileId,http,getAllProfiles,taskInfo,GenDataProfile,screenArrData,timgame;genlogin=new a0_0x221a36('',!![]),http=new a0_0x42601b(process[a0_0x4e259e(0x1ac)][a0_0x4e259e(0x22f)],process[a0_0x4e259e(0x1ac)][a0_0x4e259e(0x1cc)],!![]);let firstRun=!![],delayOpenProfile=0xbb8,profileTimeout=0x5265c0,botTimeout=0x5265c0,profileThreads=0x1,browserInfo={},version,pos0,screenData,tasksData,screenDataBuffer1,tasksDataBuffer1;const worker1=async _0x42e173=>{const _0x3ed49d=a0_0x4e259e,{tasksDataBuffer:_0x79f02a,screenDataBuffer:_0x2de237,action:_0x212190,task:_0x52ff42,dataBrw:_0x16b8ac,GenDataProfile0:_0x23e44c,timgame0:_0x14f463,dataPayload:_0x5de8f4,timeout:_0x2118f7}=_0x42e173;taskInfo=_0x52ff42,screenDataBuffer1=_0x2de237,tasksDataBuffer1=_0x79f02a,screenData=new Int32Array(_0x2de237),tasksData=new Int32Array(_0x79f02a);try{if(_0x2118f7)return log(_0x3ed49d(0x21c),_0x3ed49d(0x21f),null,'w'),{'success':![],'error':_0x3ed49d(0x21f)};else{if(_0x52ff42!==_0x3ed49d(0x1ea)){getAllProfiles=_0x16b8ac,log(_0x3ed49d(0x21c),'[worker1data.task]:data.task\x20'+JSON[_0x3ed49d(0x1da)](_0x42e173[_0x3ed49d(0x228)]),null,'c'),log(_0x3ed49d(0x21c),_0x3ed49d(0x1a9)+JSON[_0x3ed49d(0x1da)](getAllProfiles),null,'c'),GenDataProfile=_0x23e44c,timgame=_0x14f463,log(_0x3ed49d(0x21c),'['+_0x52ff42[_0x3ed49d(0x1f3)]+_0x3ed49d(0x1aa),null,'w');const _0x69c927=await xuLyTask(_0x52ff42);return log(_0x3ed49d(0x21c),''+JSON[_0x3ed49d(0x1da)](_0x69c927),null,'w'),log('worker1',_0x3ed49d(0x22b),null,'w','done'),_0x69c927?{'success':!![],'result':_0x69c927}:{'success':![],'result':_0x69c927};}else return log(_0x3ed49d(0x21c),_0x3ed49d(0x247)+_0x52ff42,null,'w'),{'success':![],'error':_0x3ed49d(0x21c)};}}catch(_0x521192){return log(_0x3ed49d(0x21c),_0x3ed49d(0x221)+_0x521192,null,![]),{'success':![],'error':_0x3ed49d(0x21c)};}};expose({'worker1':worker1});async function xuLyTask(_0x51125d){const _0x2997c6=a0_0x4e259e;try{log('worker1','['+_0x51125d[_0x2997c6(0x1f3)]+_0x2997c6(0x20e),null,'i','-');const _0x2c0369=await genlogin[_0x2997c6(0x1f1)](_0x2997c6(0x21c)),_0x311598=_0x2c0369['date'];if(_0x311598<_0x51125d['nextrunstamp'])return log(_0x2997c6(0x21c),'['+_0x51125d[_0x2997c6(0x1f3)]+'][xuLyTask]:\x20Task\x20'+JSON[_0x2997c6(0x1da)](_0x51125d['name'])+_0x2997c6(0x1ab),null,'i'),log(_0x2997c6(0x21c),'['+_0x51125d[_0x2997c6(0x1f3)]+_0x2997c6(0x19c)+JSON[_0x2997c6(0x1da)](_0x2c0369)+'\x20|\x20nextrun:\x20'+JSON['stringify'](_0x51125d[_0x2997c6(0x1ef)]),null,'w'),log(_0x2997c6(0x21c),'['+_0x51125d['name']+_0x2997c6(0x19c)+JSON['stringify'](_0x311598)+_0x2997c6(0x1ba)+JSON['stringify'](taskNextRunDateTime),null,'w'),log(_0x2997c6(0x21c),'['+_0x51125d[_0x2997c6(0x1f3)]+_0x2997c6(0x1fa),null,'i'),await delay(0x1388),null;let _0x320566=await http[_0x2997c6(0x1d2)](_0x2997c6(0x21c),_0x51125d[_0x2997c6(0x1f3)]);if(_0x320566[_0x2997c6(0x23b)][_0x2997c6(0x23f)][_0x2997c6(0x1f0)]<=0x0){log(_0x2997c6(0x21c),'['+_0x51125d[_0x2997c6(0x1f3)]+'][xuLyTask]:\x20không\x20lấy\x20được\x20profile',null,![]);throw new Error(_0x2997c6(0x220));}firstRun&&(profileThreads=parseInt(_0x51125d[_0x2997c6(0x1bd)]),profileQueue=new a0_0x2b401d({'concurrency':profileThreads}),log(_0x2997c6(0x21c),'['+_0x51125d[_0x2997c6(0x1f3)]+_0x2997c6(0x222)+profileThreads,null,'w'),firstRun=![],delayOpenProfile=parseInt(_0x51125d[_0x2997c6(0x1de)])*0x3e8,profileTimeout=parseInt(_0x51125d[_0x2997c6(0x1a1)])*0x3e8,botTimeout=parseInt(_0x51125d[_0x2997c6(0x1b0)])*0x3e8,version=await getPackageVersion());const _0x4c0c0b=await xuLyProfiles(_0x320566[_0x2997c6(0x23b)][_0x2997c6(0x23f)],_0x51125d[_0x2997c6(0x1f3)]);if(!_0x4c0c0b){log('worker1','['+_0x51125d[_0x2997c6(0x1f3)]+_0x2997c6(0x214)+json(_0x4c0c0b),null,![]);throw new Error(_0x2997c6(0x220));}return log(_0x2997c6(0x21c),'['+_0x51125d[_0x2997c6(0x1f3)]+_0x2997c6(0x234)+_0x51125d[_0x2997c6(0x1f3)]+_0x2997c6(0x251)),await delay(0x7d0),log(_0x2997c6(0x21c),'['+_0x51125d[_0x2997c6(0x1f3)]+'][xuLyTask]:\x20Hoàn\x20thành\x20xử\x20lý\x20task:\x20'+JSON[_0x2997c6(0x1da)](_0x51125d[_0x2997c6(0x1f3)])),!![];}catch(_0x172e65){return log(_0x2997c6(0x21c),'['+_0x51125d[_0x2997c6(0x1f3)]+'][xuLyTask]:\x20Lỗi\x20while:\x20'+_0x172e65,null,![]),null;}}async function xuLyProfiles(_0x41243d,_0x38b187){const _0x5009ab=a0_0x4e259e;try{const _0x1f248e=[];for(const [_0x3a48d0,_0x23de33]of _0x41243d[_0x5009ab(0x254)]()){const _0x570afe=await GenDataProfile[_0x5009ab(0x1ee)](_0x2bd964=>_0x2bd964[_0x5009ab(0x1c3)]===_0x23de33);if(_0x3a48d0!==-0x1)log(_0x5009ab(0x21c),'['+_0x38b187+_0x5009ab(0x1c8)+_0x570afe);else{log(_0x5009ab(0x21c),'['+_0x38b187+_0x5009ab(0x1ff));throw new Error(_0x5009ab(0x1b1));}log(_0x5009ab(0x21c),'['+_0x38b187+_0x5009ab(0x24f)+_0x23de33+'\x20vào\x20hàng\x20đợi\x20max:'+profileThreads,null,'i'),_0x1f248e['push'](profileQueue[_0x5009ab(0x212)](async()=>{const _0x27e6ad=_0x5009ab;try{delayOpenProfile>0x0?(log(_0x27e6ad(0x21c),'['+_0x38b187+_0x27e6ad(0x1e5)+_0x23de33+_0x27e6ad(0x1e3)+delayOpenProfile+'ms',null,'w','-'),await delay(delayOpenProfile)):log('worker1','['+_0x38b187+'][xuLyProfiles]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile\x20'+_0x23de33,null,'w','-'),await xuLyTungProfile(_0x23de33,GenDataProfile[_0x570afe]);}catch(_0x113828){log(_0x27e6ad(0x21c),'['+_0x38b187+_0x27e6ad(0x1b9)+_0x23de33+':\x20'+_0x113828['message'],null,![]);throw _0x113828;}})),log(_0x5009ab(0x21c),'['+_0x38b187+'][xuLyProfiles]:\x20Đã\x20thêm\x20profile\x20'+_0x23de33+'\x20vào\x20hàng\x20đợi.');}const _0x332ef4=await Promise[_0x5009ab(0x244)](_0x1f248e),_0x18c1c9=_0x332ef4['filter'](_0x246c75=>_0x246c75['status']==='rejected');return _0x18c1c9[_0x5009ab(0x1f0)]>0x0?log(_0x5009ab(0x21c),'['+_0x38b187+'][xuLyProfiles]:\x20Một\x20số\x20profiles\x20gặp\x20lỗi:\x20'+JSON[_0x5009ab(0x1da)](_0x18c1c9),null,![]):log(_0x5009ab(0x21c),'['+_0x38b187+'][xuLyProfiles]:\x20Đã\x20xử\x20lý\x20tất\x20cả\x20profiles\x20thành\x20công\x20'+json(_0x332ef4)),!![];}catch(_0x2e0c30){return log(_0x5009ab(0x21c),'['+_0x38b187+_0x5009ab(0x1eb)+_0x2e0c30,null,![]),null;}}async function xuLyTungProfile(_0x3b4c67,_0xbd35a5){const _0x17dde9=a0_0x4e259e;let _0x1cffac,_0x33428b;const _0x3dedd3=_0x3b4c67;let _0x57ae0a;try{await delay(delayOpenProfile),log(_0x3b4c67,_0x17dde9(0x1b4),null,'i'),_0x1cffac=await genlogin[_0x17dde9(0x1f1)](_0x3b4c67),await http['addData'](_0x17dde9(0x21c),_0x3b4c67,_0x17dde9(0x1cb),_0x1cffac[_0x17dde9(0x1d7)],'','Version:'+version,_0x17dde9(0x1a7)),log(_0x3b4c67,_0x17dde9(0x226)+_0x3b4c67,null,'w'),_0x57ae0a=await procScreenArr(_0x17dde9(0x21e),null,_0x3b4c67);if(_0x57ae0a['x']===undefined||_0x57ae0a['y']===undefined){log(_0x3b4c67,_0x17dde9(0x1ca),null,![]);throw new Error(_0x17dde9(0x202));}const _0x170a7e=await xuLyBrowser(_0x3b4c67,_0xbd35a5,_0x57ae0a);await procScreenArr(_0x17dde9(0x1e0),_0x57ae0a,_0x3b4c67);const _0x36d467=await genlogin[_0x17dde9(0x1a4)](_0x1cffac[_0x17dde9(0x19e)]);return await http[_0x17dde9(0x248)](_0x17dde9(0x21c),_0x3b4c67,'STOP\x20SCRIPT','','',_0x36d467,'Stop'),_0x170a7e;}catch(_0x576944){log(_0x3b4c67,_0x17dde9(0x1b6)+_0x576944,null,![]);if(_0x33428b)await Thread[_0x17dde9(0x22c)](_0x33428b);await procScreenArr('close',_0x57ae0a,_0x3b4c67);const _0x4c5d3c=await genlogin[_0x17dde9(0x1a4)](_0x1cffac?.[_0x17dde9(0x19e)]||Date[_0x17dde9(0x246)]());await http[_0x17dde9(0x248)](_0x17dde9(0x21c),_0x3b4c67,_0x17dde9(0x1b3),'','',_0x4c5d3c,_0x17dde9(0x1db));throw _0x576944;}}async function xuLyBrowser(_0x90bd87,_0x3660ce,_0x347a22){const _0x1742cc=a0_0x4e259e;let _0x52184f;try{const _0x19adef=_0x90bd87;if(!browserInfo[_0x90bd87])browserInfo[_0x90bd87]={};browserInfo[_0x90bd87][_0x1742cc(0x250)]=0x0,log(_0x90bd87,_0x1742cc(0x24a)+json(browserInfo),null,'w','w');if(browserInfo[_0x90bd87][_0x1742cc(0x250)]==0x0){_0x52184f=await OpenBrowser(_0x90bd87,_0x3660ce,_0x347a22);if(!_0x52184f){log(_0x90bd87,_0x1742cc(0x1d6)+_0x90bd87,null,![]);throw new Error(_0x1742cc(0x1d6)+_0x90bd87);}browserInfo[_0x90bd87][_0x1742cc(0x250)]=0x1;}if(!_0x52184f['connected'])throw new Error(_0x1742cc(0x24d)+_0x90bd87);let _0x11dbca=0x0;const _0x205546=await http[_0x1742cc(0x240)](_0x1742cc(0x21c),_0x19adef);if(!_0x205546){log(_0x90bd87,_0x1742cc(0x231),null,![]);throw new Error(_0x1742cc(0x19f));}if(_0x205546[_0x1742cc(0x1f0)]<=0x0){log(_0x90bd87,_0x1742cc(0x224),null,![]);throw new Error(_0x1742cc(0x19f));}for(const _0x5469a5 of _0x205546){if(_0x5469a5){if(_0x5469a5[_0x1742cc(0x1a8)]!=_0x1742cc(0x1bc))continue;if(_0x5469a5[_0x1742cc(0x23b)]===_0x1742cc(0x206)){log(_0x90bd87,_0x1742cc(0x1d9),null,'i');break;}if(!_0x5469a5[_0x1742cc(0x199)]){log(_0x90bd87,_0x1742cc(0x1c1)+json(_0x5469a5)+'\x20ko\x20có\x20aks',null,![]);continue;}if(_0x5469a5[_0x1742cc(0x22e)]==='0'){log(_0x90bd87,_0x1742cc(0x1c1)+json(_0x5469a5[_0x1742cc(0x1f3)])+_0x1742cc(0x207),null,![]);continue;}const _0x373ffe=await genlogin[_0x1742cc(0x1f1)](_0x90bd87);if(_0x5469a5[_0x1742cc(0x208)]>_0x373ffe[_0x1742cc(0x19e)]){log(_0x90bd87,_0x1742cc(0x1c1)+json(_0x5469a5[_0x1742cc(0x1f3)])+_0x1742cc(0x1a6),null,'w');continue;}switch(_0x5469a5[_0x1742cc(0x199)]){case'A':log(_0x90bd87,':\x20'+json(_0x5469a5[_0x1742cc(0x1f3)])+_0x1742cc(0x1f7)),await xuLyGame(_0x5469a5,'A',_0x90bd87,_0x3660ce,_0x347a22,_0x52184f);break;case'K':log(_0x90bd87,':\x20'+json(_0x5469a5[_0x1742cc(0x1f3)])+'\x20Tele\x20K\x20OK'),await xuLyGame(_0x5469a5,'K',_0x90bd87,_0x3660ce,_0x347a22,_0x52184f);break;case'W':log(_0x90bd87,':\x20'+json(_0x5469a5[_0x1742cc(0x1f3)])+'\x20Web\x20OK'),await xuLyGame(_0x5469a5,'W',_0x90bd87,_0x3660ce,_0x347a22,_0x52184f);break;default:log(_0x90bd87,_0x1742cc(0x1f9)+json(_0x5469a5[_0x1742cc(0x199)]),null,![]);break;}log(_0x90bd87,_0x1742cc(0x24e));}}return await closeBrowser(_0x90bd87,_0x52184f),!![];}catch(_0x1e459a){return log(_0x90bd87,_0x1742cc(0x239)+_0x1e459a,null,![]),await closeBrowser(_0x90bd87,_0x52184f),null;}}async function xuLyGame(_0x7627d5,_0x2defcb,_0x178745,_0x333d17,_0x5efd07,_0x3708c9){const _0x37ee3a=a0_0x4e259e;try{const _0x59fcb0=_0x178745;if(_0x7627d5[_0x37ee3a(0x1a8)]===_0x37ee3a(0x1e4)){log(_0x178745,_0x37ee3a(0x21a)+_0x7627d5[_0x37ee3a(0x1f3)]+_0x37ee3a(0x1bb),null,'i');const _0x29fc07=await genlogin[_0x37ee3a(0x1f1)](_0x178745),_0x185762=await http['addData'](_0x178745,_0x59fcb0,_0x7627d5['name'],_0x29fc07[_0x37ee3a(0x1d7)],'',_0x37ee3a(0x1a5),_0x37ee3a(0x1c2)),_0x3da3f1=_0x185762['ID'],_0x5aa022={'bot':_0x7627d5,'profileNameId':_0x178745,'genlogin':genlogin,'http':http,'dataId':_0x3da3f1},_0x305000=await loadGameApi(_0x7627d5['name'],_0x5aa022);if(!_0x305000[_0x37ee3a(0x23d)])return log(_0x178745,'[xuLyGame]:\x20Thực\x20thi\x20'+_0x7627d5[_0x37ee3a(0x1f3)]+'\x20lỗi',null,![]),await http[_0x37ee3a(0x22a)](_0x178745,_0x59fcb0,_0x3da3f1,'Fail',_0x37ee3a(0x225)),null;if(_0x305000[_0x37ee3a(0x23d)]==_0x37ee3a(0x1f6))return log(_0x178745,_0x37ee3a(0x200)+_0x7627d5[_0x37ee3a(0x1f3)]+'\x20loop',null,'i'),_0x37ee3a(0x1f6);if(_0x305000[_0x37ee3a(0x23d)])return log(_0x178745,'[xuLyGame]:\x20Thực\x20thi\x20'+_0x7627d5[_0x37ee3a(0x1f3)]+_0x37ee3a(0x237)),await http[_0x37ee3a(0x218)](_0x178745,_0x59fcb0,_0x7627d5['id'],_0x305000[_0x37ee3a(0x20b)],_0x305000['nextRunStamp']),await http[_0x37ee3a(0x22a)](_0x178745,_0x59fcb0,_0x3da3f1,'Ok',_0x37ee3a(0x1cf),_0x305000[_0x37ee3a(0x1f5)],_0x305000[_0x37ee3a(0x20b)]),!![];}else{log(_0x178745,_0x37ee3a(0x21a)+_0x7627d5[_0x37ee3a(0x1f3)]+_0x37ee3a(0x230),null,'i');const _0x422685=await http[_0x37ee3a(0x23c)](_0x178745,_0x2defcb);if(_0x422685){log(_0x178745,'[xuLyGame]:\x20getAks\x20OK');let _0x2b120c=0x0;while(_0x2b120c<0x2){const _0x41da19=await checkTeleWebOpen(_0x7627d5,_0x422685,_0x178745,_0x5efd07,_0x3708c9);if(_0x41da19==='loop')_0x2b120c++,log(_0x178745,'[xuLyGame]:\x20Loop\x20lại\x20,\x20loop\x20lại\x20lần\x20'+_0x2b120c+'/2',null,'i'),await delay(0x3e8);else return _0x41da19?(log(_0x178745,_0x37ee3a(0x243)),!![]):(log(_0x178745,'[xuLyGame]:\x20checkTeleWebOpen\x20có\x20gì\x20đó\x20sai\x20sai\x20rồi\x20bro',null,![]),null);}return log(_0x178745,_0x37ee3a(0x1fd),null,![]),null;}}}catch(_0x3c8cfc){return log(_0x178745,'[xuLyGame]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20Game:\x20'+_0x3c8cfc,null,![]),null;}}async function OpenBrowser(_0x3a2b28,_0x444aa4,_0x4f3e58){const _0x47a557=a0_0x4e259e;try{const _0x134328=_0x3a2b28;log(_0x3a2b28,_0x47a557(0x1b7)+JSON[_0x47a557(0x1da)](_0x3a2b28),null,'i');if(getAllProfiles[_0x47a557(0x1d8)]==='n'){const _0x1aa247=getAllProfiles[_0x47a557(0x1af)][_0x47a557(0x1ad)]('x');parseInt(_0x1aa247[0x0])>=0x0&&parseInt(_0x1aa247[0x1])>=0x0?(_0x4f3e58['x']=parseInt(_0x1aa247[0x0]),_0x4f3e58['y']=parseInt(_0x1aa247[0x1])):(_0x4f3e58['x']=0x0,_0x4f3e58['y']=0x0),log(_0x3a2b28,'[OpenBrowser]:force\x20set\x20Position:\x20'+_0x4f3e58['x']+'x'+_0x4f3e58['y'],null,'w');}const _0x1f976d=await genlogin['connect'](_0x3a2b28,getAllProfiles,_0x444aa4,_0x4f3e58);log(_0x3a2b28,_0x47a557(0x242)+JSON['stringify'](_0x1f976d),null,'i'),await delay(0x1388);if(_0x1f976d){let _0x2af077=0x0;const _0x11209e=0xa;while(_0x2af077<_0x11209e){_0x2af077++;const _0x15ec55=await genlogin[_0x47a557(0x1dd)](_0x3a2b28,_0x1f976d);if(_0x15ec55<=0x1)return log(_0x3a2b28,_0x47a557(0x19a)+_0x15ec55+_0x47a557(0x1e9),null,'i'),_0x1f976d;const _0x25765d=await genlogin[_0x47a557(0x232)](_0x3a2b28,_0x1f976d,_0x15ec55-0x1,0xbb8);if(!_0x25765d){log(_0x3a2b28,_0x47a557(0x203),null,![]);continue;}log(_0x3a2b28,_0x47a557(0x1e7)),await delay(0xbb8);continue;}}return log(_0x3a2b28,_0x47a557(0x1b2)+JSON[_0x47a557(0x1da)](_0x3a2b28)),null;}catch(_0x208125){throw new Error('Lỗi\x20xử\x20lý\x20profile:\x20'+_0x208125[_0x47a557(0x249)]);}}async function checkTeleWebOpen(_0x1a085d,_0x3a25cb,_0x2223fb,_0x2e9460,_0x1e25c3){const _0xe6295c=a0_0x4e259e;try{let _0x2d84a7=await genlogin[_0xe6295c(0x1fc)](_0x2223fb,_0x1e25c3,0x0,getAllProfiles[_0xe6295c(0x217)],_0x2e9460['scale']);const _0x507f14=await genlogin[_0xe6295c(0x24c)](_0x2223fb,_0x2d84a7,_0x3a25cb[_0xe6295c(0x241)],0x7d0);!_0x507f14&&(await genlogin[_0xe6295c(0x238)](_0x2223fb,_0x2d84a7,_0xe6295c(0x19b),0xea60),await delay(0x7d0),await genlogin[_0xe6295c(0x238)](_0x2223fb,_0x2d84a7,_0x3a25cb[_0xe6295c(0x1fe)],0xea60),await genlogin[_0xe6295c(0x21d)](_0x2223fb,_0x2d84a7,_0x2223fb),await delay(0x1388));log(_0x2223fb,_0xe6295c(0x209),null,'i');const _0x5c87aa=await genlogin[_0xe6295c(0x1f1)](_0x2223fb),_0x206c37=await http[_0xe6295c(0x248)](_0x2223fb,_0x2223fb,_0x1a085d[_0xe6295c(0x1f3)],_0x5c87aa[_0xe6295c(0x1d7)],'',_0xe6295c(0x1a7),_0xe6295c(0x1c2)),_0xa65a4c=_0x206c37['ID'],_0x4a0bf={'firstPage':_0x2d84a7,'bot':_0x1a085d,'profileNameId':_0x2223fb,'getAks':_0x3a25cb,'genlogin':genlogin,'http':http,'browser':_0x1e25c3,'dataId':_0x206c37['ID'],'taskIndex':taskInfo['taskIndex'],'screenDataBuffer2':screenDataBuffer1,'tasksDataBuffer2':tasksDataBuffer1};let _0x3f4496=null;log(_0x2223fb,'[checkTeleWebOpen]:\x20dataId:\x20'+json(_0xa65a4c),null,'i');if(timgame){await http[_0xe6295c(0x22a)](_0x2223fb,_0x2223fb,_0xa65a4c,'Tìm');const _0x4ea94d=await loadGame(_0xe6295c(0x252),_0x4a0bf,_0x3f4496,_0xa65a4c,_0x2223fb);if(_0x4ea94d['status']=='loop')return log(_0x2223fb,_0xe6295c(0x1bf)+_0x1a085d[_0xe6295c(0x1f3)]+'\x20loop',null,'i'),await http[_0xe6295c(0x22a)](_0x2223fb,_0x2223fb,_0xa65a4c,_0xe6295c(0x1c5)),_0xe6295c(0x1f6);else{if(!_0x4ea94d)return log(_0x2223fb,_0xe6295c(0x24b)+_0x1a085d[_0xe6295c(0x1f3)],null,![]),await http[_0xe6295c(0x22a)](_0x2223fb,_0x2223fb,_0xa65a4c,_0xe6295c(0x225),_0xe6295c(0x225)),null;}_0x4ea94d[_0xe6295c(0x201)]&&(_0x3f4496=_0x4ea94d[_0xe6295c(0x201)]);}await http[_0xe6295c(0x22a)](_0x2223fb,_0x2223fb,_0xa65a4c,_0xe6295c(0x1dc));const _0x304339=await loadGame(_0x1a085d['name'],_0x4a0bf,_0x3f4496,_0xa65a4c,_0x2223fb);if(!_0x304339[_0xe6295c(0x23d)])return log(_0x2223fb,_0xe6295c(0x1ae)+_0x1a085d[_0xe6295c(0x1f3)],null,![]),log(_0x2223fb,_0xe6295c(0x1f4)+json(_0x304339),null,![]),await http[_0xe6295c(0x22a)](_0x2223fb,_0x2223fb,_0xa65a4c,_0xe6295c(0x225),'Fail'),null;else{if(_0x304339[_0xe6295c(0x23d)]==_0xe6295c(0x1f6))return log(_0x2223fb,_0xe6295c(0x1bf)+_0x1a085d[_0xe6295c(0x1f3)]+_0xe6295c(0x1be),null,'i'),await http[_0xe6295c(0x22a)](_0x2223fb,_0x2223fb,_0xa65a4c,_0xe6295c(0x1f6)),_0xe6295c(0x1f6);}return await http[_0xe6295c(0x218)](_0x2223fb,_0x2223fb,_0x1a085d['id'],_0x304339['nextRun'],_0x304339[_0xe6295c(0x208)]),await http['updateData'](_0x2223fb,_0x2223fb,_0xa65a4c,'Ok',_0xe6295c(0x1cf),_0x304339[_0xe6295c(0x1f5)],_0x304339[_0xe6295c(0x20b)]),log(_0x2223fb,_0xe6295c(0x1e2)+_0x1a085d[_0xe6295c(0x1f3)]+_0xe6295c(0x1cd)),await delay(0x7d0),!![];}catch(_0x409aba){return log(_0x2223fb,_0xe6295c(0x20d)+_0x409aba,null,![]),await http[_0xe6295c(0x22a)](_0x2223fb,_0x2223fb,dataId,_0xe6295c(0x225),'Fail'),null;}}async function loadGame(_0x44200f,_0x2e7a01,_0x1e40d6,_0x569988,_0x195c9f){const _0x25d270=a0_0x4e259e;try{const _0x45ee1a=pathToFileURL(a0_0x23cd28[_0x25d270(0x216)](__dirname,'scripts',_0x44200f+'.js'))['href'];log(_0x195c9f,_0x25d270(0x1c0)+_0x45ee1a);const _0x458682=await import(_0x45ee1a);if(typeof _0x458682['default']==='function'){const _0x10dc72=await _0x458682[_0x25d270(0x227)](_0x2e7a01,_0x1e40d6);await delay(0x3e8);if(!_0x10dc72[_0x25d270(0x23d)])return log(_0x195c9f,_0x25d270(0x205)+_0x44200f+'\x20không\x20trả\x20về\x20status',null,![]),null;else return _0x10dc72[_0x25d270(0x23d)]===_0x25d270(0x1f6)?(log(_0x195c9f,'[loadGame]:\x20Chạy\x20'+_0x44200f+_0x25d270(0x1be),null,'i'),_0x10dc72):(log(_0x195c9f,'[loadGame]:\x20Chạy\x20'+_0x44200f+'\x20'+_0x10dc72[_0x25d270(0x23d)],null,'i'),_0x10dc72);}else return await delay(0x3e8),log(_0x195c9f,'[loadGame]:\x20Script\x20'+_0x44200f+_0x25d270(0x1ce),null,![]),null;}catch(_0x3b971f){return log(_0x195c9f,'[loadGame]:\x20Lỗi\x20khi\x20load\x20và\x20thực\x20thi\x20script\x20'+_0x44200f+':\x20'+_0x3b971f,null,![]),null;}}async function closeBrowser(_0x265748='',_0x29fdfc){const _0x3e986c=a0_0x4e259e;try{if(_0x29fdfc){if(_0x29fdfc[_0x3e986c(0x204)])return await _0x29fdfc[_0x3e986c(0x1e0)](),log(_0x265748,_0x3e986c(0x19d)+_0x265748+'\x20thành\x20công',null,'w'),!![];}else log(_0x265748,_0x3e986c(0x1a2),null,'i');return null;}catch(_0x3c288e){return log(_0x265748,_0x3e986c(0x1ec)+_0x265748+':\x20'+_0x3c288e,null,![]),null;}}async function procScreenArr(_0x4558ca,_0x5046b6,_0x2f94d8){const _0x12cf3f=a0_0x4e259e;try{await acquireLock(screenData);let _0x2d2ecc={};log(_0x2f94d8,_0x12cf3f(0x213)+_0x4558ca+_0x12cf3f(0x1f2)+json(_0x5046b6),null,'w','-');if(_0x4558ca==='open'){log(_0x2f94d8,_0x12cf3f(0x21b),null,'w'),_0x2d2ecc[_0x12cf3f(0x223)]=Atomics[_0x12cf3f(0x1c7)](screenData,0x1)/0xf4240,_0x2d2ecc[_0x12cf3f(0x1e8)]=Atomics[_0x12cf3f(0x1c7)](screenData,0x2),_0x2d2ecc['height']=Atomics[_0x12cf3f(0x1c7)](screenData,0x3);for(let _0x953b6c=0xa;_0x953b6c<screenData[_0x12cf3f(0x1f0)]-0x1;_0x953b6c=_0x953b6c+0x3){const _0x6a1141=Atomics[_0x12cf3f(0x1c7)](screenData,_0x953b6c);if(_0x6a1141===0x2)return Atomics['store'](screenData,_0x953b6c,0x1),_0x2d2ecc[_0x12cf3f(0x227)]=0x0,_0x2d2ecc['x']=Atomics['load'](screenData,_0x953b6c+0x1),_0x2d2ecc['y']=Atomics[_0x12cf3f(0x1c7)](screenData,_0x953b6c+0x2),log(_0x2f94d8,_0x12cf3f(0x233)+_0x953b6c+_0x12cf3f(0x1fb)+json(_0x2d2ecc),null,'w'),await releaseLock(screenData),_0x2d2ecc;if(_0x6a1141===0x0)return Atomics[_0x12cf3f(0x236)](screenData,_0x953b6c,0x1),_0x2d2ecc[_0x12cf3f(0x227)]=0x1,_0x2d2ecc['x']=0x0,_0x2d2ecc['y']=0x0,log(_0x2f94d8,_0x12cf3f(0x233)+_0x953b6c+'\x20set\x20open\x20default\x20pos:'+json(_0x2d2ecc),null,'w'),await releaseLock(screenData),_0x2d2ecc;}await releaseLock(screenData);throw new Error(_0x12cf3f(0x1e6));}else{if(_0x4558ca===_0x12cf3f(0x1e0)&&_0x5046b6['x']>=0x0&&_0x5046b6['y']>=0x0){log(_0x2f94d8,'[worker1.procScreenArr]vào\x20close',null,'w');if(_0x5046b6['default']===0x1)return log(_0x2f94d8,'[worker1.procScreenArr]vị\x20trí\x20default\x20không\x20cần\x20close',null,'w'),await releaseLock(screenData),!![];for(let _0x2c7742=0xa;_0x2c7742<screenData[_0x12cf3f(0x1f0)]-0x1;_0x2c7742+=0x3){const _0x3de11f=Atomics[_0x12cf3f(0x1c7)](screenData,_0x2c7742);if(_0x3de11f===0x1){const _0x572fa6=Atomics[_0x12cf3f(0x1c7)](screenData,_0x2c7742+0x1),_0x1908bc=Atomics[_0x12cf3f(0x1c7)](screenData,_0x2c7742+0x2);if(_0x572fa6===_0x5046b6['x']&&_0x1908bc===_0x5046b6['y'])return Atomics['store'](screenData,_0x2c7742,0x2),log(_0x2f94d8,_0x12cf3f(0x233)+_0x2c7742+_0x12cf3f(0x253),null,'w'),Atomics[_0x12cf3f(0x1ed)](screenData,_0x2c7742),await releaseLock(screenData),!![];}}await releaseLock(screenData);throw new Error('Không\x20thể\x20đóng\x20màn\x20hình:\x20vị\x20trí\x20không\x20hợp\x20lệ\x20action:\x20'+_0x4558ca+',\x20pos:\x20'+json(_0x5046b6));}else return log(_0x2f94d8,_0x12cf3f(0x1d5)+json(_0x5046b6)+_0x12cf3f(0x1a3)+_0x4558ca,null,'w'),await releaseLock(screenData),!![];}}catch(_0x426eb0){return log(_0x2f94d8,_0x12cf3f(0x229)+_0x426eb0+_0x12cf3f(0x22d)+_0x4558ca+_0x12cf3f(0x1f2)+json(_0x5046b6),null,![]),await releaseLock(screenData),![];}}async function acquireLock(_0x5cb4a0,_0x7e8089=0x7530){const _0x971f38=a0_0x4e259e,_0x2bf5b9=Date[_0x971f38(0x246)]();while(Atomics[_0x971f38(0x1e1)](_0x5cb4a0,0x8,0x0,0x1)!==0x0){if(Date[_0x971f38(0x246)]()-_0x2bf5b9>_0x7e8089)throw new Error(_0x971f38(0x245));Atomics['wait'](_0x5cb4a0,0x8,0x1,_0x7e8089);}}async function releaseLock(_0x5b1174){Atomics['store'](_0x5b1174,0x8,0x0),Atomics['notify'](_0x5b1174,0x8);}async function getPackageVersion(){const _0x455f24=a0_0x4e259e;try{const _0x3e2722=a0_0x23cd28[_0x455f24(0x216)](process[_0x455f24(0x1c4)](),_0x455f24(0x20f)),_0x2f7cba=await a0_0x3e83f5[_0x455f24(0x1a0)]['readFile'](_0x3e2722,_0x455f24(0x1c6)),_0x1018b6=JSON[_0x455f24(0x20c)](_0x2f7cba),_0x5502dc=_0x1018b6[_0x455f24(0x23a)];return log(_0x455f24(0x21c),'[getPackageVersion]Version:\x20'+_0x5502dc,null,'w','-'),_0x5502dc;}catch(_0x5ee4dd){return log('worker1','[getPackageVersion]Lỗi\x20khi\x20đọc\x20file\x20package.json:\x20'+_0x5ee4dd,null,![]),null;}}async function xoaTimeout(_0x726438){const _0xddd7b6=a0_0x4e259e;try{clearTimeout(_0x726438),log(_0xddd7b6(0x20a)+_0x726438,null,'i',_0xddd7b6(0x219));}catch(_0x469326){log(_0xddd7b6(0x1b5)+_0x469326,null,![]);}}async function xoaInterval(_0x10d45a){const _0x406e73=a0_0x4e259e;try{clearInterval(_0x10d45a),log(_0x406e73(0x1c9)+_0x10d45a,null,'i',_0x406e73(0x1f8));}catch(_0x4832d3){log(_0x406e73(0x1b5)+_0x4832d3,null,![]);}}function a0_0x2ac9(_0x2cee39,_0x391649){const _0x5a9e50=a0_0x5a9e();return a0_0x2ac9=function(_0x2ac997,_0x4ee5cb){_0x2ac997=_0x2ac997-0x199;let _0x586624=_0x5a9e50[_0x2ac997];return _0x586624;},a0_0x2ac9(_0x2cee39,_0x391649);}async function delay(_0x19cedf){return new Promise(async _0x17df8d=>{setTimeout(_0x17df8d,_0x19cedf);});}async function eTimeout(){const _0x3c6d9a=a0_0x4e259e;return log(_0x3c6d9a(0x1d1),null,'w'),Atomics[_0x3c6d9a(0x236)](tasksData,taskInfo[_0x3c6d9a(0x211)],0x1),!![];}async function cTimeout(){const _0xe1151a=a0_0x4e259e;if(Atomics[_0xe1151a(0x1c7)](tasksData,taskInfo[_0xe1151a(0x211)])===0x1)return!![];return null;}async function rstTimeout(){const _0x4594c5=a0_0x4e259e;return log('[eTimeout]worker1:\x20reset\x20timeout',null,'w'),Atomics['compareExchange'](tasksData,taskInfo[_0x4594c5(0x211)],0x1,0x2),!![];}
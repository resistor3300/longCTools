const a0_0x51aa4e=a0_0xb009;(function(_0x3af8fa,_0x5d3073){const _0x3aa3ab=a0_0xb009,_0x46465a=_0x3af8fa();while(!![]){try{const _0x55ae4e=parseInt(_0x3aa3ab(0x1c1))/0x1+parseInt(_0x3aa3ab(0x166))/0x2+parseInt(_0x3aa3ab(0x1c6))/0x3+parseInt(_0x3aa3ab(0x193))/0x4*(-parseInt(_0x3aa3ab(0x1e1))/0x5)+-parseInt(_0x3aa3ab(0x1a9))/0x6+parseInt(_0x3aa3ab(0x1d8))/0x7+-parseInt(_0x3aa3ab(0x17b))/0x8;if(_0x55ae4e===_0x5d3073)break;else _0x46465a['push'](_0x46465a['shift']());}catch(_0x1f8b8d){_0x46465a['push'](_0x46465a['shift']());}}}(a0_0x3b3f,0xe2526));function a0_0xb009(_0x3da3ec,_0x1162fa){const _0x3b3f30=a0_0x3b3f();return a0_0xb009=function(_0xb00992,_0x171d06){_0xb00992=_0xb00992-0x144;let _0x93fde1=_0x3b3f30[_0xb00992];return _0x93fde1;},a0_0xb009(_0x3da3ec,_0x1162fa);}import'dotenv/config';import a0_0x201b12 from'fs';import a0_0xf4a9b8 from'path';import{fileURLToPath,pathToFileURL}from'url';import{expose}from'threads/worker';import{log,json}from'./modules/logger.js';import a0_0x114090 from'./modules/Genlogin.js';import a0_0xacbba9 from'./modules/http.js';import a0_0x4ab1b3 from'p-queue';const __filename=fileURLToPath(import.meta[a0_0x51aa4e(0x165)]),__dirname=a0_0xf4a9b8['dirname'](__filename);let profileQueue,genlogin,profileNameId0,profileId,http,getAllProfiles,taskInfo,GenDataProfile,screenArrData,timgame;genlogin=new a0_0x114090('',!![]),http=new a0_0xacbba9(process[a0_0x51aa4e(0x1a8)][a0_0x51aa4e(0x1f3)],process['env'][a0_0x51aa4e(0x174)],!![]);let firstRun=!![],delayOpenProfile=0xbb8,profileTimeout=0x5265c0,botTimeout=0x5265c0,profileThreads=0x1,browserInfo={},version,screenData,tasksData,screenDataBuffer1,tasksDataBuffer1,teleId=null;const worker1=async _0x264c9b=>{const _0x1da0ab=a0_0x51aa4e,{version0:_0xcb14b1,tasksDataBuffer:_0xd874bd,screenDataBuffer:_0x4291fd,action:_0x3d9158,task:_0x1b7854,dataBrw:_0x394b4a,GenDataProfile0:_0x219423,timgame0:_0x4e875d,dataPayload:_0x37a70a,timeout:_0x90541c,tele_id:_0xef8c4}=_0x264c9b;taskInfo=_0x1b7854;_0xef8c4&&_0xef8c4[_0x1da0ab(0x181)]&&(teleId=_0xef8c4[_0x1da0ab(0x181)]);screenDataBuffer1=_0x4291fd,tasksDataBuffer1=_0xd874bd,screenData=new Int32Array(_0x4291fd),tasksData=new Int32Array(_0xd874bd);try{if(_0x90541c)return log('worker1',_0x1da0ab(0x14d),null,'w'),{'success':![],'error':_0x1da0ab(0x14d)};else{if(_0x1b7854!=='screenArr'){version=_0xcb14b1,getAllProfiles=_0x394b4a,log(_0x1da0ab(0x1ed),_0x1da0ab(0x1cc)+JSON[_0x1da0ab(0x162)](_0x264c9b['task']),null,'c'),log(_0x1da0ab(0x1ed),'getAllProfiles\x20'+JSON[_0x1da0ab(0x162)](getAllProfiles),null,'c'),GenDataProfile=_0x219423,timgame=_0x4e875d,log(_0x1da0ab(0x1ed),'['+_0x1b7854[_0x1da0ab(0x18c)]+_0x1da0ab(0x17a),null,'w');const _0xa6247e=await xuLyTask(_0x1b7854);return log(_0x1da0ab(0x1ed),''+JSON['stringify'](_0xa6247e),null,'w'),log(_0x1da0ab(0x1ed),'DONE',null,'w',_0x1da0ab(0x149)),_0xa6247e?{'success':!![],'result':_0xa6247e}:{'success':![],'result':_0xa6247e};}else return log(_0x1da0ab(0x1ed),_0x1da0ab(0x19d)+_0x1b7854,null,'w'),{'success':![],'error':_0x1da0ab(0x1ed)};}}catch(_0x4d0bc6){return log('worker1',_0x1da0ab(0x1db)+_0x4d0bc6,null,![]),{'success':![],'error':_0x1da0ab(0x1ed)};}};expose({'worker1':worker1});async function xuLyTask(_0x74277){const _0x1e7501=a0_0x51aa4e;try{log(_0x1e7501(0x1ed),'['+_0x74277[_0x1e7501(0x18c)]+'][xuLyTask]:\x20vào\x20xuLyTask',null,'i','-');const _0x9dd6c=await genlogin[_0x1e7501(0x1e6)]('worker1'),_0x28d308=_0x9dd6c[_0x1e7501(0x1b3)];if(_0x28d308<_0x74277[_0x1e7501(0x1fe)])return log('worker1','['+_0x74277[_0x1e7501(0x18c)]+_0x1e7501(0x1d4)+JSON['stringify'](_0x74277[_0x1e7501(0x18c)])+_0x1e7501(0x179),null,'i'),log(_0x1e7501(0x1ed),'['+_0x74277[_0x1e7501(0x18c)]+_0x1e7501(0x178)+JSON[_0x1e7501(0x162)](_0x9dd6c)+_0x1e7501(0x1c2)+JSON[_0x1e7501(0x162)](_0x74277[_0x1e7501(0x148)]),null,'w'),log(_0x1e7501(0x1ed),'['+_0x74277['name']+_0x1e7501(0x178)+JSON[_0x1e7501(0x162)](_0x28d308)+_0x1e7501(0x1c2)+JSON[_0x1e7501(0x162)](taskNextRunDateTime),null,'w'),log(_0x1e7501(0x1ed),'['+_0x74277[_0x1e7501(0x18c)]+_0x1e7501(0x14a),null,'i'),await delay(0x1388),null;let _0x447d07=await http[_0x1e7501(0x196)](_0x1e7501(0x1ed),_0x74277[_0x1e7501(0x18c)]);if(_0x447d07[_0x1e7501(0x1b4)][_0x1e7501(0x194)][_0x1e7501(0x17f)]<=0x0){log(_0x1e7501(0x1ed),'['+_0x74277[_0x1e7501(0x18c)]+_0x1e7501(0x1d6),null,![]);throw new Error('No\x20profile\x20found');}firstRun&&(profileThreads=parseInt(_0x74277[_0x1e7501(0x18b)]),profileQueue=new a0_0x4ab1b3({'concurrency':profileThreads}),log(_0x1e7501(0x1ed),'['+_0x74277[_0x1e7501(0x18c)]+'][xuLyTask]profileQueue:\x20concurrency:'+profileThreads,null,'w'),firstRun=![],delayOpenProfile=parseInt(_0x74277[_0x1e7501(0x1e4)])*0x3e8,profileTimeout=parseInt(_0x74277['profileTimeout'])*0x3e8,botTimeout=parseInt(_0x74277[_0x1e7501(0x1ec)])*0x3e8);const _0x33f737=await xuLyProfiles(_0x447d07[_0x1e7501(0x1b4)][_0x1e7501(0x194)],_0x74277[_0x1e7501(0x18c)]);if(!_0x33f737){log('worker1','['+_0x74277[_0x1e7501(0x18c)]+_0x1e7501(0x175)+json(_0x33f737),null,![]);throw new Error(_0x1e7501(0x1ab));}return log(_0x1e7501(0x1ed),'['+_0x74277[_0x1e7501(0x18c)]+_0x1e7501(0x16d)+_0x74277[_0x1e7501(0x18c)]+_0x1e7501(0x19e)),await delay(0x7d0),log(_0x1e7501(0x1ed),'['+_0x74277[_0x1e7501(0x18c)]+_0x1e7501(0x192)+JSON[_0x1e7501(0x162)](_0x74277['name'])),!![];}catch(_0x2e203b){return log(_0x1e7501(0x1ed),'['+_0x74277[_0x1e7501(0x18c)]+_0x1e7501(0x15f)+_0x2e203b,null,![]),null;}}async function xuLyProfiles(_0x491581,_0x2ff10a){const _0x4f7e6e=a0_0x51aa4e;try{const _0x5bb367=[];for(const [_0x2a9694,_0x134a16]of _0x491581[_0x4f7e6e(0x183)]()){const _0x385300=await GenDataProfile['findIndex'](_0x54a955=>_0x54a955[_0x4f7e6e(0x168)]===_0x134a16);if(_0x2a9694!==-0x1)log(_0x4f7e6e(0x1ed),'['+_0x2ff10a+_0x4f7e6e(0x154)+_0x385300);else{log(_0x4f7e6e(0x1ed),'['+_0x2ff10a+_0x4f7e6e(0x1ae));throw new Error(_0x4f7e6e(0x1b7));}log(_0x4f7e6e(0x1ed),'['+_0x2ff10a+'][xuLyProfiles]:\x20Thêm\x20profile\x20'+_0x134a16+_0x4f7e6e(0x1ac)+profileThreads,null,'i'),_0x5bb367[_0x4f7e6e(0x189)](profileQueue[_0x4f7e6e(0x171)](async()=>{const _0x29bc9a=_0x4f7e6e;try{delayOpenProfile>0x0?(log(_0x29bc9a(0x1ed),'['+_0x2ff10a+_0x29bc9a(0x151)+_0x134a16+_0x29bc9a(0x153)+delayOpenProfile+'ms',null,'w','-'),await delay(delayOpenProfile)):log(_0x29bc9a(0x1ed),'['+_0x2ff10a+_0x29bc9a(0x151)+_0x134a16,null,'w','-'),await xuLyTungProfile(_0x134a16,GenDataProfile[_0x385300]);}catch(_0x37cc8d){log(_0x29bc9a(0x1ed),'['+_0x2ff10a+_0x29bc9a(0x1fa)+_0x134a16+':\x20'+_0x37cc8d['message'],null,![]);throw _0x37cc8d;}})),log(_0x4f7e6e(0x1ed),'['+_0x2ff10a+'][xuLyProfiles]:\x20Đã\x20thêm\x20profile\x20'+_0x134a16+_0x4f7e6e(0x1c4));}const _0x2457f5=await Promise[_0x4f7e6e(0x1a3)](_0x5bb367),_0x236eef=_0x2457f5['filter'](_0x59d2f5=>_0x59d2f5[_0x4f7e6e(0x1ba)]===_0x4f7e6e(0x1b6));return _0x236eef['length']>0x0?log(_0x4f7e6e(0x1ed),'['+_0x2ff10a+_0x4f7e6e(0x1d2)+JSON[_0x4f7e6e(0x162)](_0x236eef),null,![]):log('worker1','['+_0x2ff10a+_0x4f7e6e(0x1e8)+json(_0x2457f5)),!![];}catch(_0x1b30d4){return log('worker1','['+_0x2ff10a+_0x4f7e6e(0x1b1)+_0x1b30d4,null,![]),null;}}async function xuLyTungProfile(_0x44d10d,_0x15c094){const _0x2be499=a0_0x51aa4e;let _0x4a048e,_0x297d8e;const _0x8b12a7=_0x44d10d;let _0x55c352;try{await delay(delayOpenProfile),log(_0x44d10d,_0x2be499(0x155),null,'i'),_0x4a048e=await genlogin['nowTime'](_0x44d10d),await http[_0x2be499(0x177)]('worker1',_0x44d10d,_0x2be499(0x184),_0x4a048e[_0x2be499(0x1b3)],'',_0x2be499(0x1b9)+version,_0x2be499(0x1fb));teleId&&await http['tele'](_0x44d10d,teleId,'['+_0x44d10d+_0x2be499(0x1bd));log(_0x44d10d,_0x2be499(0x1ad)+_0x44d10d,null,'w'),_0x55c352=await procScreenArr('open',null,_0x44d10d);if(_0x55c352['x']===undefined||_0x55c352['y']===undefined){log(_0x44d10d,'[xuLyTungProfile]:\x20Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng',null,![]);throw new Error(_0x2be499(0x160));}const _0x134fa9=await xuLyBrowser(_0x44d10d,_0x15c094,_0x55c352);await procScreenArr(_0x2be499(0x1a2),_0x55c352,_0x44d10d);const _0x2d4614=await genlogin[_0x2be499(0x1cb)](_0x4a048e[_0x2be499(0x188)]);return await http[_0x2be499(0x177)](_0x2be499(0x1ed),_0x44d10d,_0x2be499(0x1b2),'','',_0x2d4614,_0x2be499(0x158)),teleId&&await http[_0x2be499(0x1d5)](_0x44d10d,teleId,'['+_0x44d10d+_0x2be499(0x173)),_0x134fa9;}catch(_0x2a6d21){log(_0x44d10d,'[xuLyTungProfile]:\x20Lỗi:\x20'+_0x2a6d21,null,![]);if(_0x297d8e)await Thread[_0x2be499(0x14f)](_0x297d8e);await procScreenArr(_0x2be499(0x1a2),_0x55c352,_0x44d10d);const _0x4d2c13=await genlogin[_0x2be499(0x1cb)](_0x4a048e?.[_0x2be499(0x188)]||Date[_0x2be499(0x1c8)]());await http[_0x2be499(0x177)]('worker1',_0x44d10d,_0x2be499(0x1b2),'','',_0x4d2c13,'Stop');teleId&&await http[_0x2be499(0x1d5)](_0x44d10d,teleId,'['+_0x44d10d+_0x2be499(0x198));throw _0x2a6d21;}}async function xuLyBrowser(_0x3caf92,_0x1d3c53,_0x49b7d2){const _0xf349e3=a0_0x51aa4e;let _0x121032;try{const _0x58e8f8=_0x3caf92;if(!browserInfo[_0x3caf92])browserInfo[_0x3caf92]={};browserInfo[_0x3caf92][_0xf349e3(0x18a)]=0x0,log(_0x3caf92,_0xf349e3(0x182)+json(browserInfo),null,'w','w');if(browserInfo[_0x3caf92][_0xf349e3(0x18a)]==0x0){_0x121032=await OpenBrowser(_0x3caf92,_0x1d3c53,_0x49b7d2);if(!_0x121032){log(_0x3caf92,_0xf349e3(0x1c7)+_0x3caf92,null,![]);throw new Error('[xuLyBrowser]:\x20Không\x20mở\x20được\x20trình\x20duyệt\x20'+_0x3caf92);}browserInfo[_0x3caf92][_0xf349e3(0x18a)]=0x1;}if(!_0x121032[_0xf349e3(0x14c)])throw new Error(_0xf349e3(0x17c)+_0x3caf92);let _0xf7ae1f=0x0;const _0x53f63d=await http[_0xf349e3(0x16b)](_0xf349e3(0x1ed),_0x58e8f8);if(!_0x53f63d){log(_0x3caf92,'[xuLyBrowser]:\x20Bot\x20không\x20tìm\x20thấy',null,![]);throw new Error(_0xf349e3(0x16c));}if(_0x53f63d[_0xf349e3(0x17f)]<=0x0){log(_0x3caf92,_0xf349e3(0x147),null,![]);throw new Error(_0xf349e3(0x16c));}for(const _0x8e1743 of _0x53f63d){if(_0x8e1743){if(_0x8e1743[_0xf349e3(0x1da)]!='script')continue;if(_0x8e1743[_0xf349e3(0x1b4)]===_0xf349e3(0x167)){log(_0x3caf92,_0xf349e3(0x145),null,'i');break;}if(!_0x8e1743[_0xf349e3(0x1e9)]){log(_0x3caf92,_0xf349e3(0x1f7)+json(_0x8e1743)+_0xf349e3(0x1d7),null,![]);continue;}if(_0x8e1743[_0xf349e3(0x1f2)]==='0'){log(_0x3caf92,_0xf349e3(0x1f7)+json(_0x8e1743[_0xf349e3(0x18c)])+_0xf349e3(0x1c5),null,![]);continue;}const _0x10d8ae=await genlogin['nowTime'](_0x3caf92);if(_0x8e1743[_0xf349e3(0x164)]>_0x10d8ae[_0xf349e3(0x188)]){log(_0x3caf92,_0xf349e3(0x1f7)+json(_0x8e1743[_0xf349e3(0x18c)])+_0xf349e3(0x1f1),null,'w');continue;}switch(_0x8e1743[_0xf349e3(0x1e9)]){case'A':log(_0x3caf92,':\x20'+json(_0x8e1743['name'])+'\x20Tele\x20A\x20OK'),await xuLyGame(_0x8e1743,'A',_0x3caf92,_0x1d3c53,_0x49b7d2,_0x121032);break;case'K':log(_0x3caf92,':\x20'+json(_0x8e1743['name'])+_0xf349e3(0x1b5)),await xuLyGame(_0x8e1743,'K',_0x3caf92,_0x1d3c53,_0x49b7d2,_0x121032);break;case'W':log(_0x3caf92,':\x20'+json(_0x8e1743[_0xf349e3(0x18c)])+_0xf349e3(0x197)),await xuLyGame(_0x8e1743,'W',_0x3caf92,_0x1d3c53,_0x49b7d2,_0x121032);break;default:log(_0x3caf92,_0xf349e3(0x159)+json(_0x8e1743[_0xf349e3(0x1e9)]),null,![]);break;}log(_0x3caf92,_0xf349e3(0x1d9));}}return await closeBrowser(_0x3caf92,_0x121032),!![];}catch(_0x2ed2ce){return log(_0x3caf92,_0xf349e3(0x144)+_0x2ed2ce,null,![]),await closeBrowser(_0x3caf92,_0x121032),null;}}async function xuLyGame(_0x278f80,_0x5984bd,_0xd15b5d,_0xcd63f3,_0x294d5f,_0x39ddc8){const _0x176756=a0_0x51aa4e;try{const _0x1af92f=_0xd15b5d;if(_0x278f80[_0x176756(0x1da)]===_0x176756(0x1aa)){log(_0xd15b5d,_0x176756(0x1e7)+_0x278f80[_0x176756(0x18c)]+_0x176756(0x18f),null,'i');const _0x2bb7a2=await genlogin[_0x176756(0x1e6)](_0xd15b5d),_0x3397a9=await http['addData'](_0xd15b5d,_0x1af92f,_0x278f80[_0x176756(0x18c)],_0x2bb7a2[_0x176756(0x1b3)],'',_0x176756(0x1d0),_0x176756(0x1dd)),_0x7e74e9=_0x3397a9['ID'],_0x26ce0e={'bot':_0x278f80,'profileNameId':_0xd15b5d,'genlogin':genlogin,'http':http,'dataId':_0x7e74e9},_0x371ab2=await loadGameApi(_0x278f80[_0x176756(0x18c)],_0x26ce0e);if(!_0x371ab2['status'])return log(_0xd15b5d,_0x176756(0x1be)+_0x278f80[_0x176756(0x18c)]+_0x176756(0x157),null,![]),await http['updateData'](_0xd15b5d,_0x1af92f,_0x7e74e9,_0x176756(0x1df),_0x176756(0x1df)),null;if(_0x371ab2['status']==_0x176756(0x1bc))return log(_0xd15b5d,_0x176756(0x1be)+_0x278f80[_0x176756(0x18c)]+_0x176756(0x1ee),null,'i'),_0x176756(0x1bc);if(_0x371ab2[_0x176756(0x1ba)])return log(_0xd15b5d,_0x176756(0x1be)+_0x278f80[_0x176756(0x18c)]+_0x176756(0x1f9)),await http[_0x176756(0x1de)](_0xd15b5d,_0x1af92f,_0x278f80['id'],_0x371ab2[_0x176756(0x1ce)],_0x371ab2[_0x176756(0x164)]),await http['updateData'](_0xd15b5d,_0x1af92f,_0x7e74e9,'Ok',_0x176756(0x146),_0x371ab2[_0x176756(0x15a)],_0x371ab2['nextRun']),!![];}else{if(_0x5984bd=='A'||_0x5984bd=='K'){log(_0xd15b5d,_0x176756(0x1e7)+_0x278f80[_0x176756(0x18c)]+_0x176756(0x18d),null,'w','-');const _0x187e15=await http['getAks'](_0xd15b5d,_0x5984bd);if(_0x187e15){log(_0xd15b5d,_0x176756(0x15b));let _0x464248=0x0;while(_0x464248<0x2){const _0x35cc6d=await checkTeleWebOpen(_0x278f80,_0x187e15,_0xd15b5d,_0x294d5f,_0x39ddc8);if(_0x35cc6d===_0x176756(0x1bc))_0x464248++,log(_0xd15b5d,_0x176756(0x1a1)+_0x464248+'/2',null,'i'),await delay(0x3e8);else return _0x35cc6d?(log(_0xd15b5d,_0x176756(0x176)),!![]):(log(_0xd15b5d,_0x176756(0x1e3),null,![]),null);}return log(_0xd15b5d,'[xuLyGame]:Max\x20loop\x20rồi\x20bro',null,![]),null;}}else{if(_0x5984bd=='W'){log(_0xd15b5d,_0x176756(0x1e7)+_0x278f80[_0x176756(0x18c)]+'\x20Web\x20mode',null,'w','-');const _0x537c58=await checkTeleWebOpen(_0x278f80,_0x5984bd,_0xd15b5d,_0x294d5f,_0x39ddc8);return _0x537c58?(log(_0xd15b5d,_0x176756(0x176)),!![]):(log(_0xd15b5d,'[xuLyGame]:\x20checkTeleWebOpen\x20có\x20gì\x20đó\x20sai\x20sai\x20rồi\x20bro',null,![]),null);}else return log(_0xd15b5d,_0x176756(0x1e5)+_0x5984bd,null,![]),null;}}}catch(_0xb7e7a7){return log(_0xd15b5d,_0x176756(0x169)+_0xb7e7a7,null,![]),null;}}async function OpenBrowser(_0x4daaa0,_0xdc2d4c,_0x39ccec){const _0x25230e=a0_0x51aa4e;try{const _0x1089db=_0x4daaa0;log(_0x4daaa0,'[OpenBrowser]:\x20Processing\x20profile:\x20'+JSON[_0x25230e(0x162)](_0x4daaa0),null,'i');if(getAllProfiles[_0x25230e(0x161)]==='n'){const _0x29c31f=getAllProfiles[_0x25230e(0x1fc)][_0x25230e(0x200)]('x');parseInt(_0x29c31f[0x0])>=0x0&&parseInt(_0x29c31f[0x1])>=0x0?(_0x39ccec['x']=parseInt(_0x29c31f[0x0]),_0x39ccec['y']=parseInt(_0x29c31f[0x1])):(_0x39ccec['x']=0x0,_0x39ccec['y']=0x0),log(_0x4daaa0,'[OpenBrowser]:force\x20set\x20Position:\x20'+_0x39ccec['x']+'x'+_0x39ccec['y'],null,'w');}const _0xde13d4=await genlogin[_0x25230e(0x191)](_0x4daaa0,getAllProfiles,_0xdc2d4c,_0x39ccec);log(_0x4daaa0,_0x25230e(0x1ff)+JSON['stringify'](_0xde13d4),null,'i'),await delay(0x1388);if(_0xde13d4){let _0x66710d=0x0;const _0xfc6e8a=0xa;while(_0x66710d<_0xfc6e8a){_0x66710d++;const _0x19c0e4=await genlogin[_0x25230e(0x14e)](_0x4daaa0,_0xde13d4);if(_0x19c0e4<=0x1)return log(_0x4daaa0,_0x25230e(0x16f)+_0x19c0e4+'\x20tab\x20đang\x20mở',null,'i'),_0xde13d4;const _0x1f4fef=await genlogin[_0x25230e(0x1f0)](_0x4daaa0,_0xde13d4,_0x19c0e4-0x1,0xbb8);if(!_0x1f4fef){log(_0x4daaa0,_0x25230e(0x152),null,![]);continue;}log(_0x4daaa0,'[OpenBrowser]\x20Đóng\x20tab\x20mới\x20thành\x20công'),await delay(0xbb8);continue;}}return log(_0x4daaa0,_0x25230e(0x16e)+JSON['stringify'](_0x4daaa0)),null;}catch(_0x10b617){throw new Error(_0x25230e(0x1b0)+_0x10b617[_0x25230e(0x18e)]);}}async function checkTeleWebOpen(_0x549f6d,_0x437142,_0x1762f4,_0x1e403d,_0x57e473){const _0x1c7b3b=a0_0x51aa4e;let _0x230698;try{let _0x5bad12=await genlogin[_0x1c7b3b(0x1dc)](_0x1762f4,_0x57e473,0x0,getAllProfiles[_0x1c7b3b(0x1d1)],_0x1e403d[_0x1c7b3b(0x1eb)]);if(_0x437142!='W'){const _0x36b50c=await genlogin['elementExistsByXPath'](_0x1762f4,_0x5bad12,_0x437142[_0x1c7b3b(0x1a4)],0x7d0);!_0x36b50c&&(await genlogin[_0x1c7b3b(0x1cf)](_0x1762f4,_0x5bad12,_0x1c7b3b(0x1c0),0xea60),await delay(0x7d0),await genlogin[_0x1c7b3b(0x1cf)](_0x1762f4,_0x5bad12,_0x437142[_0x1c7b3b(0x1cd)],0xea60),await genlogin['setTitle'](_0x1762f4,_0x5bad12,_0x1762f4),await delay(0x1388));}else _0x437142='W',await genlogin['openUrl'](_0x1762f4,_0x5bad12,_0x1c7b3b(0x1c0),0xea60),await delay(0x7d0),await genlogin['openUrl'](_0x1762f4,_0x5bad12,_0x549f6d[_0x1c7b3b(0x172)],0xea60),await genlogin[_0x1c7b3b(0x1a6)](_0x1762f4,_0x5bad12,_0x1762f4),await delay(0x1388);log(_0x1762f4,'[checkTeleWebOpen]:\x20vào\x20loadGame',null,'i');const _0x24bb9c=await genlogin[_0x1c7b3b(0x1e6)](_0x1762f4),_0x77cfdc=await http[_0x1c7b3b(0x177)](_0x1762f4,_0x1762f4,_0x549f6d['name'],_0x24bb9c[_0x1c7b3b(0x1b3)],'',_0x1c7b3b(0x1fb),'running');_0x230698=_0x77cfdc['ID'];const _0x12775b={'firstPage':_0x5bad12,'bot':_0x549f6d,'profileNameId':_0x1762f4,'getAks':_0x437142,'genlogin':genlogin,'http':http,'browser':_0x57e473,'dataId':_0x77cfdc['ID'],'taskIndex':taskInfo[_0x1c7b3b(0x17d)],'screenDataBuffer2':screenDataBuffer1,'tasksDataBuffer2':tasksDataBuffer1};let _0x368364=null;log(_0x1762f4,_0x1c7b3b(0x19f)+json(_0x230698),null,'i');if(timgame&&_0x437142!='W'){await http['updateData'](_0x1762f4,_0x1762f4,_0x230698,_0x1c7b3b(0x15d));const _0x5ac718=await loadGame('timGame',_0x12775b,_0x368364,_0x230698,_0x1762f4);if(_0x5ac718[_0x1c7b3b(0x1ba)]=='loop')return log(_0x1762f4,_0x1c7b3b(0x1ca)+_0x549f6d[_0x1c7b3b(0x18c)]+_0x1c7b3b(0x1ee),null,'i'),await http[_0x1c7b3b(0x195)](_0x1762f4,_0x1762f4,_0x230698,_0x1c7b3b(0x1fd)),_0x1c7b3b(0x1bc);else{if(!_0x5ac718)return log(_0x1762f4,'[checkTeleWebOpen]:\x20Không\x20tìm\x20thấy\x20game\x20'+_0x549f6d[_0x1c7b3b(0x18c)],null,![]),await http[_0x1c7b3b(0x195)](_0x1762f4,_0x1762f4,_0x230698,_0x1c7b3b(0x1df),_0x1c7b3b(0x1df)),null;}_0x5ac718[_0x1c7b3b(0x1bb)]&&(_0x368364=_0x5ac718[_0x1c7b3b(0x1bb)]);}await http['updateData'](_0x1762f4,_0x1762f4,_0x230698,_0x1c7b3b(0x14b));const _0x14b5c8=await loadGame(_0x549f6d[_0x1c7b3b(0x18c)],_0x12775b,_0x368364,_0x230698,_0x1762f4);if(!_0x14b5c8[_0x1c7b3b(0x1ba)])return log(_0x1762f4,_0x1c7b3b(0x1f8)+_0x549f6d[_0x1c7b3b(0x18c)],null,![]),log(_0x1762f4,_0x1c7b3b(0x19c)+json(_0x14b5c8),null,![]),await http['updateData'](_0x1762f4,_0x1762f4,_0x230698,_0x1c7b3b(0x1df),_0x1c7b3b(0x1df)),null;else{if(_0x14b5c8[_0x1c7b3b(0x1ba)]==_0x1c7b3b(0x1bc))return log(_0x1762f4,_0x1c7b3b(0x1ca)+_0x549f6d[_0x1c7b3b(0x18c)]+_0x1c7b3b(0x1ee),null,'i'),await http[_0x1c7b3b(0x195)](_0x1762f4,_0x1762f4,_0x230698,'loop'),_0x1c7b3b(0x1bc);}return await http['nextRunTime'](_0x1762f4,_0x1762f4,_0x549f6d['id'],_0x14b5c8['nextRun'],_0x14b5c8[_0x1c7b3b(0x164)]),await http[_0x1c7b3b(0x195)](_0x1762f4,_0x1762f4,_0x230698,'Ok',_0x1c7b3b(0x146),_0x14b5c8[_0x1c7b3b(0x15a)],_0x14b5c8['nextRun']),log(_0x1762f4,_0x1c7b3b(0x201)+_0x549f6d[_0x1c7b3b(0x18c)]+_0x1c7b3b(0x187)),await delay(0x7d0),!![];}catch(_0x5e80c5){return log(_0x1762f4,_0x1c7b3b(0x1bf)+_0x5e80c5,null,![]),await http['updateData'](_0x1762f4,_0x1762f4,_0x230698,'Fail',_0x1c7b3b(0x1df)),null;}}async function loadGame(_0x29dbc8,_0x1af4d0,_0xc2d1c0,_0x31b136,_0x2461b9){const _0x481b4f=a0_0x51aa4e;try{const _0x4379e1=pathToFileURL(a0_0xf4a9b8[_0x481b4f(0x1f5)](__dirname,_0x481b4f(0x15c),_0x29dbc8+'.js'))[_0x481b4f(0x1a0)];log(_0x2461b9,_0x481b4f(0x1a5)+_0x4379e1);const _0x50f3d7=await import(_0x4379e1);if(typeof _0x50f3d7[_0x481b4f(0x1e2)]===_0x481b4f(0x16a)){const _0x2f1a50=await _0x50f3d7['default'](_0x1af4d0,_0xc2d1c0);await delay(0x3e8);if(!_0x2f1a50[_0x481b4f(0x1ba)])return log(_0x2461b9,_0x481b4f(0x1e0)+_0x29dbc8+_0x481b4f(0x1c9),null,![]),null;else return _0x2f1a50['status']===_0x481b4f(0x1bc)?(log(_0x2461b9,'[loadGame]:\x20Chạy\x20'+_0x29dbc8+_0x481b4f(0x1ee),null,'i'),_0x2f1a50):(log(_0x2461b9,'[loadGame]:\x20Chạy\x20'+_0x29dbc8+'\x20'+_0x2f1a50['status'],null,'i'),_0x2f1a50);}else return await delay(0x3e8),log(_0x2461b9,'[loadGame]:\x20Script\x20'+_0x29dbc8+'\x20không\x20phải\x20là\x20một\x20hàm\x20hợp\x20lệ',null,![]),null;}catch(_0x16a950){return log(_0x2461b9,_0x481b4f(0x163)+_0x29dbc8+':\x20'+_0x16a950,null,![]),teleId&&await http['tele'](_0x2461b9,teleId,'['+_0x2461b9+']['+_0x29dbc8+'][ERR]:\x20Lỗi\x20'+_0x16a950),null;}}async function closeBrowser(_0x1df36d='',_0x119978){const _0x2e0c07=a0_0x51aa4e;try{if(_0x119978){if(_0x119978['connected'])return await _0x119978[_0x2e0c07(0x1a2)](),log(_0x1df36d,_0x2e0c07(0x1ef)+_0x1df36d+_0x2e0c07(0x187),null,'w'),!![];}else log(_0x1df36d,'[closeBrowser]:\x20Không\x20có\x20trình\x20duyệt\x20để\x20đóng',null,'i');return null;}catch(_0xb87321){return log(_0x1df36d,_0x2e0c07(0x15e)+_0x1df36d+':\x20'+_0xb87321,null,![]),null;}}async function procScreenArr(_0x5a85d6,_0x30cca6,_0x394b5a){const _0x27fdf4=a0_0x51aa4e;try{await acquireLock(screenData);let _0xfcf6bd={};log(_0x394b5a,'[worker1.procScreenArr]action:\x20'+_0x5a85d6+_0x27fdf4(0x1ea)+json(_0x30cca6),null,'w','-');if(_0x5a85d6===_0x27fdf4(0x180)){log(_0x394b5a,_0x27fdf4(0x190),null,'w'),_0xfcf6bd[_0x27fdf4(0x1eb)]=Atomics[_0x27fdf4(0x17e)](screenData,0x1)/0xf4240,_0xfcf6bd['width']=Atomics[_0x27fdf4(0x17e)](screenData,0x2),_0xfcf6bd[_0x27fdf4(0x1f4)]=Atomics['load'](screenData,0x3);for(let _0xbb9f5e=0xa;_0xbb9f5e<screenData[_0x27fdf4(0x17f)]-0x1;_0xbb9f5e=_0xbb9f5e+0x3){const _0x576b38=Atomics[_0x27fdf4(0x17e)](screenData,_0xbb9f5e);if(_0x576b38===0x2)return Atomics['store'](screenData,_0xbb9f5e,0x1),_0xfcf6bd['default']=0x0,_0xfcf6bd['x']=Atomics[_0x27fdf4(0x17e)](screenData,_0xbb9f5e+0x1),_0xfcf6bd['y']=Atomics[_0x27fdf4(0x17e)](screenData,_0xbb9f5e+0x2),log(_0x394b5a,_0x27fdf4(0x186)+_0xbb9f5e+'\x20set\x20open\x20ok\x20pos:'+json(_0xfcf6bd),null,'w'),await releaseLock(screenData),_0xfcf6bd;if(_0x576b38===0x0)return Atomics[_0x27fdf4(0x1a7)](screenData,_0xbb9f5e,0x1),_0xfcf6bd[_0x27fdf4(0x1e2)]=0x1,_0xfcf6bd['x']=0x0,_0xfcf6bd['y']=0x0,log(_0x394b5a,'[worker1.procScreenArr]\x20index:'+_0xbb9f5e+'\x20set\x20open\x20default\x20pos:'+json(_0xfcf6bd),null,'w'),await releaseLock(screenData),_0xfcf6bd;}await releaseLock(screenData);throw new Error(_0x27fdf4(0x1b8));}else{if(_0x5a85d6==='close'&&_0x30cca6['x']>=0x0&&_0x30cca6['y']>=0x0){log(_0x394b5a,'[worker1.procScreenArr]vào\x20close',null,'w');if(_0x30cca6[_0x27fdf4(0x1e2)]===0x1)return log(_0x394b5a,'[worker1.procScreenArr]vị\x20trí\x20default\x20không\x20cần\x20close',null,'w'),await releaseLock(screenData),!![];for(let _0x4dd934=0xa;_0x4dd934<screenData[_0x27fdf4(0x17f)]-0x1;_0x4dd934+=0x3){const _0x654c4b=Atomics['load'](screenData,_0x4dd934);if(_0x654c4b===0x1){const _0x294690=Atomics[_0x27fdf4(0x17e)](screenData,_0x4dd934+0x1),_0x5ab2ef=Atomics[_0x27fdf4(0x17e)](screenData,_0x4dd934+0x2);if(_0x294690===_0x30cca6['x']&&_0x5ab2ef===_0x30cca6['y'])return Atomics[_0x27fdf4(0x1a7)](screenData,_0x4dd934,0x2),log(_0x394b5a,'[worker1.procScreenArr]\x20index:'+_0x4dd934+'\x20set\x20close\x20ok',null,'w'),Atomics['notify'](screenData,_0x4dd934),await releaseLock(screenData),!![];}}await releaseLock(screenData);throw new Error(_0x27fdf4(0x1d3)+_0x5a85d6+_0x27fdf4(0x1ea)+json(_0x30cca6));}else return log(_0x394b5a,'[worker1.procScreenArr]\x20posVal:'+json(_0x30cca6)+'\x20Action:'+_0x5a85d6,null,'w'),await releaseLock(screenData),!![];}}catch(_0x464347){return log(_0x394b5a,_0x27fdf4(0x185)+_0x464347+_0x27fdf4(0x1c3)+_0x5a85d6+',\x20pos:\x20'+json(_0x30cca6),null,![]),await releaseLock(screenData),![];}}async function acquireLock(_0x19ad9b,_0xea429f=0x7530){const _0x2c09aa=a0_0x51aa4e,_0x24a71d=Date[_0x2c09aa(0x1c8)]();while(Atomics[_0x2c09aa(0x150)](_0x19ad9b,0x8,0x0,0x1)!==0x0){if(Date[_0x2c09aa(0x1c8)]()-_0x24a71d>_0xea429f)throw new Error(_0x2c09aa(0x1f6));Atomics[_0x2c09aa(0x19a)](_0x19ad9b,0x8,0x1,_0xea429f);}}async function releaseLock(_0x39ce3b){const _0x6a0f55=a0_0x51aa4e;Atomics[_0x6a0f55(0x1a7)](_0x39ce3b,0x8,0x0),Atomics[_0x6a0f55(0x19b)](_0x39ce3b,0x8);}function a0_0x3b3f(){const _0x1b7caf=['START\x20SCRIPT','[worker1.procScreenArr]lỗi\x20','[worker1.procScreenArr]\x20index:','\x20thành\x20công','timestamp','push','fisrtOpenBrowser','profileThreads','name','\x20Script\x20mode','message','\x20Api\x20mode','[worker1.procScreenArr]vào\x20open','connect','][xuLyTask]:\x20Hoàn\x20thành\x20xử\x20lý\x20task:\x20','1400728AVDvEX','profiles','updateData','getTask','\x20Web\x20OK','][ERR]:\x20STOP\x20SCRIPT','[eTimeout]worker1:\x20timeout','wait','notify','[checkTeleWebOpen]:\x20','Lỗi\x20gì\x20đó\x20task\x20','\x20ok','[checkTeleWebOpen]:\x20dataId:\x20','href','[xuLyGame]:\x20Loop\x20lại\x20,\x20loop\x20lại\x20lần\x20','close','allSettled','InputSearch','[loadGame]:scriptPath\x20','setTitle','store','env','1737864BFcqZW','api','No\x20profile\x20found','\x20vào\x20hàng\x20đợi\x20max:','[xuLyTungProfile]0:\x20Kiểm\x20tra\x20màn\x20hình\x20','][xuLyProfiles]Không\x20tìm\x20thấy\x20indexGenP','[xoaTimeout]worker1:\x20Xóa\x20timeout:','Lỗi\x20xử\x20lý\x20profile:\x20','][xuLyProfiles]:\x20Lỗi\x20:\x20','STOP\x20SCRIPT','date','value','\x20Tele\x20K\x20OK','rejected','Không\x20tìm\x20thấy\x20indexGenP','Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng','Version:','status','HostName','loop',']:\x20START\x20SCRIPT','[xuLyGame]:\x20Thực\x20thi\x20','[checkTeleWebOpen]:\x20Lỗi\x20trong\x20quá\x20trình\x20mở\x20trang\x20:\x20','https://www.google.com','1134060wKOJrf','\x20|\x20nextrun:\x20','\x20action:\x20','\x20vào\x20hàng\x20đợi.','\x20OFF','4962462BVEVLf','[xuLyBrowser]:\x20Không\x20mở\x20được\x20trình\x20duyệt\x20','now','\x20không\x20trả\x20về\x20status','[checkTeleWebOpen]:\x20Thực\x20thi\x20','tinhThoiGian','[worker1data.task]:data.task\x20','FistUrl','nextRun','openUrl','StartApi','browserWidthHeight','][xuLyProfiles]:\x20Một\x20số\x20profiles\x20gặp\x20lỗi:\x20','Không\x20thể\x20đóng\x20màn\x20hình:\x20vị\x20trí\x20không\x20hợp\x20lệ\x20action:\x20','][xuLyTask]:\x20Task\x20','tele','][xuLyTask]:\x20không\x20lấy\x20được\x20profile','\x20ko\x20có\x20aks','10704442QifvAY','[xuLyBrowser]:\x20Bot\x20OK','type','Lỗi\x20','activateTab','running','nextRunTime','Fail','[loadGame]:\x20Script\x20','5MSLQPp','default','[xuLyGame]:\x20checkTeleWebOpen\x20có\x20gì\x20đó\x20sai\x20sai\x20rồi\x20bro','delayOpenProfile','[xuLyGame]:\x20Sai\x20aks\x20','nowTime','[xuLyGame]:\x20','][xuLyProfiles]:\x20Đã\x20xử\x20lý\x20tất\x20cả\x20profiles\x20thành\x20công\x20','aks',',\x20pos:\x20','scale','botTimeout','worker1','\x20loop','[closeBrowser]:\x20Đóng\x20trình\x20duyệt\x20','closeTab','\x20Chưa\x20tới\x20giờ\x20chạy','onOff','SERVER_HOST','height','join','Timeout\x20while\x20acquiring\x20lock',':\x20Bot\x20','[checkTeleWebOpen]:\x20Không\x20thực\x20thi\x20script\x20','\x20done','][xuLyProfiles]:\x20Lỗi\x20khi\x20xử\x20lý\x20profile\x20','Start','customBrowserPosition','loop\x20new\x20game','nextrunstamp','[OpenBrowser]:\x20GenLogin:\x20','split','[checkTeleWebOpen]:\x20Thực\x20thi\x20script\x20','[xuLyBrowser]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20browser:\x20',':\x20XONG\x201\x20LƯỢT','Done','[xuLyBrowser]:\x20không\x20lấy\x20được\x20bot','nextrun','done','][xuLyTask]:\x20Chờ\x205\x20giây\x20trước\x20khi\x20xử\x20lý\x20task\x20tiếp\x20theo...','Vào','connected','timeout','countOpenTabs','terminate','compareExchange','][xuLyProfiles]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile\x20','[OpenBrowser]\x20Lỗi\x20khi\x20đóng\x20tab\x20mới','\x20sau\x20','][xuLyProfiles]index:\x20','[xuLyTungProfile]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile','[xoaTimeout]worker1:\x20','\x20lỗi','Stop',':\x20Sai\x20aks\x20','coin','[xuLyGame]:\x20getAks\x20OK','scripts','Tìm','[closeBrowser]:\x20Lỗi\x20khi\x20đóng\x20trình\x20duyệt\x20','][xuLyTask]:\x20Lỗi\x20while:\x20','Không\x20tìm\x20thấy\x20giá\x20trị\x20status=0','autoSetBrowserPosition','stringify','[loadGame]:\x20Lỗi\x20khi\x20load\x20và\x20thực\x20thi\x20script\x20','nextRunStamp','url','760652JDjUaJ','end','pid','[xuLyGame]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20Game:\x20','function','getBotAll','No\x20bot\x20found','][xuLyTask]:\x20Tasks:\x20','[OpenBrowser]:\x20Lỗi\x20khi\x20mở\x20browser:\x20','[OpenBrowser]]Chỉ\x20có\x20','clrTimeout','add','ref','][OK]:\x20STOP\x20SCRIPT','APIKEY','][xuLyTask]:\x20Không\x20lấy\x20được\x20dữ\x20liệu\x20profiles\x20','[xuLyGame]:\x20checkTeleWebOpen\x20OK','addData','][xuLyTask]:\x20currentDateTime:\x20','\x20chưa\x20đến\x20thời\x20gian\x20chạy',']:\x20Script\x20Mode','25047248QcTfda','[xuLyBrowser]:\x20browser\x20disconnected\x20','taskIndex','load','length','open','tele_id','[xuLyBrowser]:browserInfo:\x20','entries'];a0_0x3b3f=function(){return _0x1b7caf;};return a0_0x3b3f();}async function xoaTimeout(_0x175108){const _0x4aba01=a0_0x51aa4e;try{clearTimeout(_0x175108),log(_0x4aba01(0x1af)+_0x175108,null,'i',_0x4aba01(0x170));}catch(_0x63085a){log('[xoaTimeout]worker1:\x20'+_0x63085a,null,![]);}}async function xoaInterval(_0x4e0e29){const _0x46663e=a0_0x51aa4e;try{clearInterval(_0x4e0e29),log('[xoaTimeout]worker1:\x20Xóa\x20Interval:'+_0x4e0e29,null,'i','clrInterval');}catch(_0x4f74e2){log(_0x46663e(0x156)+_0x4f74e2,null,![]);}}async function delay(_0x2003f2){return new Promise(async _0x51e30f=>{setTimeout(_0x51e30f,_0x2003f2);});}async function eTimeout(){const _0x363f6d=a0_0x51aa4e;return log(_0x363f6d(0x199),null,'w'),Atomics[_0x363f6d(0x1a7)](tasksData,taskInfo[_0x363f6d(0x17d)],0x1),!![];}async function cTimeout(){const _0x5cbc0d=a0_0x51aa4e;if(Atomics[_0x5cbc0d(0x17e)](tasksData,taskInfo[_0x5cbc0d(0x17d)])===0x1)return!![];return null;}async function rstTimeout(){return log('[eTimeout]worker1:\x20reset\x20timeout',null,'w'),Atomics['compareExchange'](tasksData,taskInfo['taskIndex'],0x1,0x2),!![];}
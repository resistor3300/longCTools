const a0_0x11c046=a0_0x45b4;(function(_0x54dd37,_0x203804){const _0x194441=a0_0x45b4,_0x81cc6=_0x54dd37();while(!![]){try{const _0x5a186a=parseInt(_0x194441(0x228))/0x1*(-parseInt(_0x194441(0x23b))/0x2)+parseInt(_0x194441(0x26e))/0x3+parseInt(_0x194441(0x255))/0x4+parseInt(_0x194441(0x1c2))/0x5*(-parseInt(_0x194441(0x23d))/0x6)+parseInt(_0x194441(0x1eb))/0x7*(-parseInt(_0x194441(0x21e))/0x8)+-parseInt(_0x194441(0x25a))/0x9+-parseInt(_0x194441(0x1b3))/0xa*(-parseInt(_0x194441(0x1e8))/0xb);if(_0x5a186a===_0x203804)break;else _0x81cc6['push'](_0x81cc6['shift']());}catch(_0x4d991f){_0x81cc6['push'](_0x81cc6['shift']());}}}(a0_0x3dc4,0xc42b6));import'dotenv/config';import a0_0x25f6fc from'fs';import a0_0x4ef37a from'path';import{fileURLToPath,pathToFileURL}from'url';import{expose}from'threads/worker';import{log,json}from'./modules/logger.js';import a0_0x393b94 from'./modules/Genlogin.js';function a0_0x45b4(_0x157a6c,_0x160c70){const _0x3dc4ef=a0_0x3dc4();return a0_0x45b4=function(_0x45b416,_0x473e22){_0x45b416=_0x45b416-0x1b1;let _0x64278b=_0x3dc4ef[_0x45b416];return _0x64278b;},a0_0x45b4(_0x157a6c,_0x160c70);}import a0_0x24c1c0 from'./modules/http.js';import a0_0x41f291 from'p-queue';const __filename=fileURLToPath(import.meta[a0_0x11c046(0x274)]),__dirname=a0_0x4ef37a[a0_0x11c046(0x23a)](__filename);let profileQueue,genlogin,http,getAllProfiles,taskInfo,GenDataProfile,timgame;genlogin=new a0_0x393b94('',!![]),http=new a0_0x24c1c0(process[a0_0x11c046(0x1c4)]['SERVER_HOST'],process['env'][a0_0x11c046(0x1d7)],!![]);let firstRun=!![],delayOpenProfile=0xbb8,profileTimeout=0x5265c0,botTimeout=0x5265c0,profileThreads=0x1,browserInfo={},version,screenData,tasksData,screenDataBuffer1,tasksDataBuffer1,teleId=null;const worker1=async _0x293666=>{const _0x52154e=a0_0x11c046,{version0:_0x45b15e,tasksDataBuffer:_0x1d189b,screenDataBuffer:_0x384a75,action:_0x3478c3,task:_0x183eac,dataBrw:_0x31c962,GenDataProfile0:_0x365abc,timgame0:_0x1ce008,timeout:_0x237a17,tele_id:_0x169fb9}=_0x293666;log('worker1','[dmdmdmdmdm]:\x20dataBrw:\x20'+JSON[_0x52154e(0x1c9)](_0x31c962),null,'w'),taskInfo=_0x183eac;_0x169fb9&&_0x169fb9[_0x52154e(0x217)]&&(teleId=_0x169fb9[_0x52154e(0x217)]);screenDataBuffer1=_0x384a75,tasksDataBuffer1=_0x1d189b,screenData=new Int32Array(_0x384a75),tasksData=new Int32Array(_0x1d189b);try{if(_0x237a17)return log('worker1',_0x52154e(0x204),null,'w'),await clearVar(),{'success':![],'error':_0x52154e(0x204)};else{if(_0x183eac!==_0x52154e(0x211)){version=_0x45b15e,getAllProfiles=_0x31c962,log(_0x52154e(0x1f6),_0x52154e(0x226)+JSON[_0x52154e(0x1c9)](_0x293666['task']),null,'c'),log('worker1','getAllProfiles\x20'+JSON['stringify'](getAllProfiles),null,'c'),GenDataProfile=_0x365abc,timgame=_0x1ce008,log(_0x52154e(0x1f6),'['+_0x183eac[_0x52154e(0x26b)]+_0x52154e(0x24c),null,'w');const _0xe36f0=await xuLyTask(_0x183eac,_0x31c962);return log(_0x52154e(0x1f6),''+JSON[_0x52154e(0x1c9)](_0xe36f0),null,'w'),log(_0x52154e(0x1f6),_0x52154e(0x242),null,'w','done'),await clearVar(),_0xe36f0?{'success':!![],'result':_0xe36f0}:{'success':![],'result':_0xe36f0};}else return log(_0x52154e(0x1f6),'Lỗi\x20gì\x20đó\x20task\x20'+_0x183eac,null,'w'),await clearVar(),{'success':![],'error':_0x52154e(0x1f6)};}}catch(_0x4da459){return log(_0x52154e(0x1f6),_0x52154e(0x20b)+_0x4da459,null,![]),await clearVar(),{'success':![],'error':'worker1'};}};expose({'worker1':worker1});async function clearVar(){return genlogin=null,http=null,!![];}async function xuLyTask(_0x34e754,_0xbc8d51){const _0x3c0e85=a0_0x11c046;try{log(_0x3c0e85(0x1f6),'['+_0x34e754['name']+_0x3c0e85(0x271),null,'i','-');const _0xad1511=await genlogin[_0x3c0e85(0x1f3)]('worker1'),_0x440649=_0xad1511[_0x3c0e85(0x1f1)];if(_0x440649<_0x34e754[_0x3c0e85(0x216)])return log(_0x3c0e85(0x1f6),'['+_0x34e754[_0x3c0e85(0x26b)]+'][xuLyTask]:\x20Task\x20'+JSON[_0x3c0e85(0x1c9)](_0x34e754[_0x3c0e85(0x26b)])+_0x3c0e85(0x25c),null,'i'),log('worker1','['+_0x34e754[_0x3c0e85(0x26b)]+'][xuLyTask]:\x20currentDateTime:\x20'+JSON[_0x3c0e85(0x1c9)](_0xad1511)+_0x3c0e85(0x234)+JSON[_0x3c0e85(0x1c9)](_0x34e754['nextrun']),null,'w'),log('worker1','['+_0x34e754[_0x3c0e85(0x26b)]+_0x3c0e85(0x1da)+JSON[_0x3c0e85(0x1c9)](_0x440649)+'\x20|\x20nextrun:\x20'+JSON['stringify'](taskNextRunDateTime),null,'w'),log('worker1','['+_0x34e754[_0x3c0e85(0x26b)]+_0x3c0e85(0x20a),null,'i'),await delay(0x1388),null;let _0x142721=await http[_0x3c0e85(0x236)](_0x3c0e85(0x1f6),_0x34e754[_0x3c0e85(0x26b)]);if(_0x142721[_0x3c0e85(0x254)]['profiles'][_0x3c0e85(0x1ec)]<=0x0){log('worker1','['+_0x34e754['name']+'][xuLyTask]:\x20không\x20lấy\x20được\x20profile',null,![]);throw new Error(_0x3c0e85(0x209));}firstRun&&(profileThreads=parseInt(_0x34e754[_0x3c0e85(0x24a)]),profileQueue=new a0_0x41f291({'concurrency':profileThreads}),log(_0x3c0e85(0x1f6),'['+_0x34e754[_0x3c0e85(0x26b)]+_0x3c0e85(0x21c)+profileThreads,null,'w'),firstRun=![],delayOpenProfile=parseInt(_0x34e754[_0x3c0e85(0x1ce)])*0x3e8,profileTimeout=parseInt(_0x34e754[_0x3c0e85(0x1e5)])*0x3e8,botTimeout=parseInt(_0x34e754[_0x3c0e85(0x1b1)])*0x3e8);const _0x1dbc1f=await xuLyProfiles(_0x142721[_0x3c0e85(0x254)][_0x3c0e85(0x1b7)],_0x34e754['name'],_0xbc8d51);if(!_0x1dbc1f){log('worker1','['+_0x34e754[_0x3c0e85(0x26b)]+_0x3c0e85(0x1db)+json(_0x1dbc1f),null,![]);throw new Error(_0x3c0e85(0x209));}return log(_0x3c0e85(0x1f6),'['+_0x34e754[_0x3c0e85(0x26b)]+_0x3c0e85(0x229)+_0x34e754['name']+_0x3c0e85(0x26a)),await delay(0x7d0),log(_0x3c0e85(0x1f6),'['+_0x34e754['name']+'][xuLyTask]:\x20Hoàn\x20thành\x20xử\x20lý\x20task:\x20'+JSON[_0x3c0e85(0x1c9)](_0x34e754['name'])),!![];}catch(_0x2a06eb){return log(_0x3c0e85(0x1f6),'['+_0x34e754[_0x3c0e85(0x26b)]+'][xuLyTask]:\x20Lỗi\x20while:\x20'+_0x2a06eb,null,![]),null;}}async function xuLyProfiles(_0x24aa43,_0x3053a8,_0x274be5){const _0x24ce11=a0_0x11c046;try{const _0x2b8c01=[];for(const [_0x373f20,_0x5ed57e]of _0x24aa43[_0x24ce11(0x245)]()){const _0x40a990=await GenDataProfile[_0x24ce11(0x215)](_0x2a58e5=>_0x2a58e5[_0x24ce11(0x25d)]===_0x5ed57e);if(_0x373f20!==-0x1)log(_0x24ce11(0x1f6),'['+_0x3053a8+'][xuLyProfiles]index:\x20'+_0x40a990);else{log(_0x24ce11(0x1f6),'['+_0x3053a8+_0x24ce11(0x20d));throw new Error(_0x24ce11(0x20c));}log(_0x24ce11(0x1f6),'['+_0x3053a8+'][xuLyProfiles]:\x20Thêm\x20profile\x20'+_0x5ed57e+_0x24ce11(0x1f0)+profileThreads,null,'i'),_0x2b8c01[_0x24ce11(0x1e2)](profileQueue[_0x24ce11(0x1fb)](async()=>{const _0x78fec8=_0x24ce11;try{delayOpenProfile>0x0?(log('worker1','['+_0x3053a8+'][xuLyProfiles]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile\x20'+_0x5ed57e+'\x20sau\x20'+delayOpenProfile+'ms',null,'w','-'),await delay(delayOpenProfile)):log(_0x78fec8(0x1f6),'['+_0x3053a8+_0x78fec8(0x1f7)+_0x5ed57e,null,'w','-'),await xuLyTungProfile(_0x5ed57e,GenDataProfile[_0x40a990],_0x274be5);}catch(_0x2ae68c){log('worker1','['+_0x3053a8+'][xuLyProfiles]:\x20Lỗi\x20khi\x20xử\x20lý\x20profile\x20'+_0x5ed57e+':\x20'+_0x2ae68c['message'],null,![]);throw _0x2ae68c;}})),log('worker1','['+_0x3053a8+'][xuLyProfiles]:\x20Đã\x20thêm\x20profile\x20'+_0x5ed57e+'\x20vào\x20hàng\x20đợi.');}const _0x19589e=await Promise[_0x24ce11(0x22c)](_0x2b8c01),_0x36f3c1=_0x19589e[_0x24ce11(0x213)](_0x253c77=>_0x253c77[_0x24ce11(0x219)]===_0x24ce11(0x202));return _0x36f3c1[_0x24ce11(0x1ec)]>0x0?log(_0x24ce11(0x1f6),'['+_0x3053a8+_0x24ce11(0x268)+JSON[_0x24ce11(0x1c9)](_0x36f3c1),null,![]):log(_0x24ce11(0x1f6),'['+_0x3053a8+_0x24ce11(0x1d6)+json(_0x19589e)),!![];}catch(_0x36ed83){return log(_0x24ce11(0x1f6),'['+_0x3053a8+_0x24ce11(0x23f)+_0x36ed83,null,![]),null;}}async function xuLyTungProfile(_0x384bd5,_0xdf4100,_0x11f28f){const _0x4d48d7=a0_0x11c046;let _0x3d0a90,_0x1ca868;const _0x454e4d=_0x384bd5;let _0x568fa5;try{await delay(delayOpenProfile),log(_0x384bd5,_0x4d48d7(0x231),null,'i'),_0x3d0a90=await genlogin[_0x4d48d7(0x1f3)](_0x384bd5),await http[_0x4d48d7(0x1cc)](_0x4d48d7(0x1f6),_0x384bd5,_0x4d48d7(0x1cd),_0x3d0a90['date'],'',_0x4d48d7(0x223)+version,_0x4d48d7(0x1fc));teleId&&await http[_0x4d48d7(0x1c6)](_0x384bd5,teleId,'['+_0x384bd5+_0x4d48d7(0x22e));log(_0x384bd5,_0x4d48d7(0x1e0)+_0x384bd5,null,'w'),_0x568fa5=await procScreenArr('open',null,_0x384bd5);if(_0x568fa5['x']===undefined||_0x568fa5['y']===undefined){log(_0x384bd5,_0x4d48d7(0x232),null,![]);throw new Error('Không\x20tìm\x20thấy\x20giá\x20trị\x20status=0');}const _0x40f348=await xuLyBrowser(_0x384bd5,_0xdf4100,_0x568fa5,_0x11f28f);await procScreenArr(_0x4d48d7(0x1d9),_0x568fa5,_0x384bd5);const _0x165758=await genlogin['tinhThoiGian'](_0x3d0a90[_0x4d48d7(0x1dc)]);return await http['addData'](_0x4d48d7(0x1f6),_0x384bd5,_0x4d48d7(0x1e9),'','',_0x165758,_0x4d48d7(0x208)),teleId&&await http[_0x4d48d7(0x1c6)](_0x384bd5,teleId,'['+_0x384bd5+_0x4d48d7(0x251)),_0x40f348;}catch(_0x1330b1){log(_0x384bd5,_0x4d48d7(0x270)+_0x1330b1,null,![]);if(_0x1ca868)await Thread['terminate'](_0x1ca868);await procScreenArr('close',_0x568fa5,_0x384bd5);const _0x3abcd8=await genlogin[_0x4d48d7(0x1d3)](_0x3d0a90?.['timestamp']||Date[_0x4d48d7(0x246)]());await http['addData'](_0x4d48d7(0x1f6),_0x384bd5,_0x4d48d7(0x1e9),'','',_0x3abcd8,_0x4d48d7(0x208));teleId&&await http[_0x4d48d7(0x1c6)](_0x384bd5,teleId,'['+_0x384bd5+_0x4d48d7(0x1bc));throw _0x1330b1;}}function a0_0x3dc4(){const _0x32367b=['[checkTeleWebOpen]:\x20Không\x20thực\x20thi\x20script\x20','1645662qSBnmO','load','[xuLyTungProfile]:\x20Lỗi:\x20','][xuLyTask]:\x20vào\x20xuLyTask','onOff','connect','url','botTimeout','\x20thành\x20công','371960gdZaNJ','[xuLyBrowser]:\x20Bot\x20không\x20tìm\x20thấy','[xuLyBrowser]:\x20browser\x20disconnected\x20','connected','profiles','type','Lỗi\x20xử\x20lý\x20profile:\x20','\x20OFF','href','][ERR]:\x20STOP\x20SCRIPT','\x20tab\x20đang\x20mở','[OpenBrowser]:\x20Processing\x20profile:\x20','\x20không\x20trả\x20về\x20status',':\x20XONG\x201\x20LƯỢT','[xuLyBrowser]:dataBrw:\x20','5SdNoSY','[xuLyBrowser]:\x20Bot\x20OK','env','compareExchange','tele','default','fisrtOpenBrowser','stringify','.js','clrTimeout','addData','START\x20SCRIPT','delayOpenProfile','Memory','\x20Web\x20OK','[xoaTimeout]worker1:\x20Xóa\x20timeout:','[loadGame]:scriptPath\x20','tinhThoiGian','[xuLyGame]:\x20getAks\x20OK','\x20ko\x20có\x20aks','][xuLyProfiles]:\x20Đã\x20xử\x20lý\x20tất\x20cả\x20profiles\x20thành\x20công\x20','APIKEY','[xuLyGame]:\x20','close','][xuLyTask]:\x20currentDateTime:\x20','][xuLyTask]:\x20Không\x20lấy\x20được\x20dữ\x20liệu\x20profiles\x20','timestamp','[loadGame]:\x20Chạy\x20','No\x20bot\x20found','[eTimeout]worker1:\x20timeout','[xuLyTungProfile]0:\x20Kiểm\x20tra\x20màn\x20hình\x20','Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng','push',',\x20pos:\x20','[worker1.procScreenArr]\x20index:','profileTimeout','[xuLyGame]:\x20Sai\x20aks\x20','updateData','814tpBuas','STOP\x20SCRIPT','[xuLyBrowser]:browserInfo:\x20','133406fCbEFA','length','scale','[xuLyBrowser]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20browser:\x20','[checkTeleWebOpen]:\x20Không\x20tìm\x20thấy\x20game\x20','\x20vào\x20hàng\x20đợi\x20max:','date','ref','nowTime','[eTimeout]worker1:\x20reset\x20timeout','\x20set\x20open\x20ok\x20pos:','worker1','][xuLyProfiles]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile\x20','[xuLyGame]:\x20checkTeleWebOpen\x20có\x20gì\x20đó\x20sai\x20sai\x20rồi\x20bro','open','\x20lỗi','add','Start','StartApi','[worker1.procScreenArr]action:\x20','\x20Tele\x20A\x20OK','notify','Không\x20thể\x20đóng\x20màn\x20hình:\x20vị\x20trí\x20không\x20hợp\x20lệ\x20action:\x20','rejected','wait','timeout','[loadGame]:\x20Script\x20','\x20không\x20phải\x20là\x20một\x20hàm\x20hợp\x20lệ','api','Stop','No\x20profile\x20found','][xuLyTask]:\x20Chờ\x205\x20giây\x20trước\x20khi\x20xử\x20lý\x20task\x20tiếp\x20theo...','Lỗi\x20','Không\x20tìm\x20thấy\x20indexGenP','][xuLyProfiles]Không\x20tìm\x20thấy\x20indexGenP','nextRunTime','\x20set\x20open\x20default\x20pos:','[OpenBrowser]\x20Lỗi\x20khi\x20đóng\x20tab\x20mới','screenArr','taskIndex','filter','[checkTeleWebOpen]:\x20Thực\x20thi\x20','findIndex','nextrunstamp','tele_id','[xuLyBrowser]:\x20không\x20lấy\x20được\x20bot','status','\x20loop','loop\x20new\x20game','][xuLyTask]profileQueue:\x20concurrency:','function','632OKWhWm','https://www.google.com','Garbage\x20Collector\x20đã\x20chạy!','Timeout\x20while\x20acquiring\x20lock','getBotAll','Version:','getAks','nextRun','[worker1data.task]:data.task\x20','autoSetBrowserPosition','14215CSocbM','][xuLyTask]:\x20Tasks:\x20','[xuLyGame]:\x20Thực\x20thi\x20','[xuLyGame]:Max\x20loop\x20rồi\x20bro','allSettled','[checkTeleWebOpen]:\x20Thực\x20thi\x20script\x20',']:\x20START\x20SCRIPT','join','setTitle','[xuLyTungProfile]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile','[xuLyTungProfile]:\x20Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng','\x20action:\x20','\x20|\x20nextrun:\x20','Tìm','getTask','HostName',':\x20Sai\x20aks\x20','[worker1.procScreenArr]\x20posVal:','dirname','122kqoNoc','message','2345028fNMlGp','[closeBrowser]:\x20Đóng\x20trình\x20duyệt\x20','][xuLyProfiles]:\x20Lỗi\x20:\x20','pages','[closeBrowser]:\x20Lỗi\x20khi\x20đóng\x20trình\x20duyệt\x20','DONE','scripts','end','entries','now','[xuLyBrowser]:\x20Không\x20mở\x20được\x20trình\x20duyệt\x20','[OpenBrowser]]Chỉ\x20có\x20','[xuLyGame]:\x20checkTeleWebOpen\x20OK','profileThreads','loop',']:\x20Script\x20Mode','Done','[xuLyGame]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20Game:\x20','\x20Script\x20mode','nextRunStamp','][OK]:\x20STOP\x20SCRIPT','height','aks','value','3876668BCjGNU','elementExistsByXPath','running','[checkTeleWebOpen]:\x20Lỗi\x20trong\x20quá\x20trình\x20mở\x20trang\x20:\x20',':\x20Bot\x20','6328620sQUWYk','clrInterval','\x20chưa\x20đến\x20thời\x20gian\x20chạy','pid','[OpenBrowser]:\x20Lỗi\x20khi\x20mở\x20browser:\x20','width','activateTab','coin','[xoaTimeout]worker1:\x20Xóa\x20Interval:','Fail','[xoaTimeout]worker1:\x20','\x20done','store','openUrl','][xuLyProfiles]:\x20Một\x20số\x20profiles\x20gặp\x20lỗi:\x20','Vào','\x20ok','name','split'];a0_0x3dc4=function(){return _0x32367b;};return a0_0x3dc4();}async function xuLyBrowser(_0x3caff8,_0x1b5886,_0xdf4042,_0x4bc89c){const _0x453751=a0_0x11c046;let _0x2607c2;try{const _0x971ccd=_0x3caff8;if(!browserInfo[_0x3caff8])browserInfo[_0x3caff8]={};browserInfo[_0x3caff8]['fisrtOpenBrowser']=0x0,log(_0x3caff8,_0x453751(0x1ea)+json(browserInfo),null,'w','w');if(browserInfo[_0x3caff8]['fisrtOpenBrowser']==0x0){_0x2607c2=await OpenBrowser(_0x3caff8,_0x1b5886,_0xdf4042,_0x4bc89c);if(!_0x2607c2){log(_0x3caff8,'[xuLyBrowser]:\x20Không\x20mở\x20được\x20trình\x20duyệt\x20'+_0x3caff8,null,![]);throw new Error(_0x453751(0x247)+_0x3caff8);}browserInfo[_0x3caff8][_0x453751(0x1c8)]=0x1;}if(!_0x2607c2[_0x453751(0x1b6)])throw new Error(_0x453751(0x1b5)+_0x3caff8);let _0x14e286=0x0;const _0x795119=await http[_0x453751(0x222)](_0x453751(0x1f6),_0x971ccd);if(!_0x795119){log(_0x3caff8,_0x453751(0x1b4),null,![]);throw new Error('No\x20bot\x20found');}if(_0x795119['length']<=0x0){log(_0x3caff8,_0x453751(0x218),null,![]);throw new Error(_0x453751(0x1de));}for(const _0x729646 of _0x795119){if(_0x729646){if(_0x729646['type']!='script')continue;if(_0x729646['value']===_0x453751(0x244)){log(_0x3caff8,_0x453751(0x1c0),null,'i');break;}if(!_0x729646[_0x453751(0x253)]){log(_0x3caff8,_0x453751(0x259)+json(_0x729646)+_0x453751(0x1d5),null,![]);continue;}if(_0x729646[_0x453751(0x272)]==='0'){log(_0x3caff8,':\x20Bot\x20'+json(_0x729646[_0x453751(0x26b)])+_0x453751(0x1ba),null,![]);continue;}const _0x91743a=await genlogin[_0x453751(0x1f3)](_0x3caff8);if(_0x729646['nextRunStamp']>_0x91743a[_0x453751(0x1dc)]){log(_0x3caff8,':\x20Bot\x20'+json(_0x729646[_0x453751(0x26b)])+'\x20Chưa\x20tới\x20giờ\x20chạy',null,'w');continue;}switch(_0x729646[_0x453751(0x253)]){case'A':log(_0x3caff8,':\x20'+json(_0x729646['name'])+_0x453751(0x1ff)),await xuLyGame(_0x729646,'A',_0x3caff8,_0x1b5886,_0xdf4042,_0x2607c2,_0x4bc89c);break;case'K':log(_0x3caff8,':\x20'+json(_0x729646[_0x453751(0x26b)])+'\x20Tele\x20K\x20OK'),await xuLyGame(_0x729646,'K',_0x3caff8,_0x1b5886,_0xdf4042,_0x2607c2,_0x4bc89c);break;case'W':log(_0x3caff8,':\x20'+json(_0x729646[_0x453751(0x26b)])+_0x453751(0x1d0)),await xuLyGame(_0x729646,'W',_0x3caff8,_0x1b5886,_0xdf4042,_0x2607c2,_0x4bc89c);break;default:log(_0x3caff8,_0x453751(0x238)+json(_0x729646[_0x453751(0x253)]),null,![]);break;}log(_0x3caff8,_0x453751(0x1c3));}}return await closeBrowser(_0x3caff8,_0x2607c2),!![];}catch(_0x3ba6ed){return log(_0x3caff8,_0x453751(0x1ee)+_0x3ba6ed,null,![]),log(_0x3caff8,_0x453751(0x1c1)+json(_0x4bc89c),null,'w','w'),await closeBrowser(_0x3caff8,_0x2607c2),null;}}async function xuLyGame(_0x390415,_0x5a3352,_0x486a0f,_0x46eb96,_0x5dec4f,_0x2248e5,_0x155627){const _0x45243c=a0_0x11c046;try{const _0x43dccf=_0x486a0f;if(_0x390415[_0x45243c(0x1b8)]===_0x45243c(0x207)){log(_0x486a0f,_0x45243c(0x1d8)+_0x390415[_0x45243c(0x26b)]+'\x20Api\x20mode',null,'i');const _0x15d9b7=await genlogin[_0x45243c(0x1f3)](_0x486a0f),_0x2ebf24=await http[_0x45243c(0x1cc)](_0x486a0f,_0x43dccf,_0x390415[_0x45243c(0x26b)],_0x15d9b7['date'],'',_0x45243c(0x1fd),_0x45243c(0x257)),_0x370cd5=_0x2ebf24['ID'],_0x31de5f={'bot':_0x390415,'profileNameId':_0x486a0f,'genlogin':genlogin,'http':http,'dataId':_0x370cd5},_0x3943a7=await loadGameApi(_0x390415[_0x45243c(0x26b)],_0x31de5f);if(!_0x3943a7[_0x45243c(0x219)])return log(_0x486a0f,_0x45243c(0x22a)+_0x390415[_0x45243c(0x26b)]+_0x45243c(0x1fa),null,![]),await http[_0x45243c(0x1e7)](_0x486a0f,_0x43dccf,_0x370cd5,_0x45243c(0x263),'Fail'),null;if(_0x3943a7[_0x45243c(0x219)]=='loop')return log(_0x486a0f,'[xuLyGame]:\x20Thực\x20thi\x20'+_0x390415[_0x45243c(0x26b)]+_0x45243c(0x21a),null,'i'),'loop';if(_0x3943a7[_0x45243c(0x219)])return log(_0x486a0f,_0x45243c(0x22a)+_0x390415['name']+_0x45243c(0x265)),await http[_0x45243c(0x20e)](_0x486a0f,_0x43dccf,_0x390415['id'],_0x3943a7[_0x45243c(0x225)],_0x3943a7[_0x45243c(0x250)]),await http[_0x45243c(0x1e7)](_0x486a0f,_0x43dccf,_0x370cd5,'Ok',_0x45243c(0x24d),_0x3943a7[_0x45243c(0x261)],_0x3943a7['nextRun']),!![];}else{if(_0x5a3352=='A'||_0x5a3352=='K'){log(_0x486a0f,'[xuLyGame]:\x20'+_0x390415[_0x45243c(0x26b)]+_0x45243c(0x24f),null,'w','-');const _0x12ee6c=await http[_0x45243c(0x224)](_0x486a0f,_0x5a3352);if(_0x12ee6c){log(_0x486a0f,_0x45243c(0x1d4));let _0x328506=0x0;while(_0x328506<0x2){const _0x190e7f=await checkTeleWebOpen(_0x390415,_0x12ee6c,_0x486a0f,_0x5dec4f,_0x2248e5,_0x155627);if(_0x190e7f===_0x45243c(0x24b))_0x328506++,log(_0x486a0f,'[xuLyGame]:\x20Loop\x20lại\x20,\x20loop\x20lại\x20lần\x20'+_0x328506+'/2',null,'i'),await delay(0x3e8);else return _0x190e7f?(log(_0x486a0f,_0x45243c(0x249)),!![]):(log(_0x486a0f,_0x45243c(0x1f8),null,![]),null);}return log(_0x486a0f,_0x45243c(0x22b),null,![]),null;}}else{if(_0x5a3352=='W'){log(_0x486a0f,'[xuLyGame]:\x20'+_0x390415[_0x45243c(0x26b)]+'\x20Web\x20mode',null,'w','-');const _0x6d67f7=await checkTeleWebOpen(_0x390415,_0x5a3352,_0x486a0f,_0x5dec4f,_0x2248e5,_0x155627);return _0x6d67f7?(log(_0x486a0f,_0x45243c(0x249)),!![]):(log(_0x486a0f,_0x45243c(0x1f8),null,![]),null);}else return log(_0x486a0f,_0x45243c(0x1e6)+_0x5a3352,null,![]),null;}}}catch(_0x456c5b){return log(_0x486a0f,_0x45243c(0x24e)+_0x456c5b,null,![]),null;}}async function OpenBrowser(_0x5cb172,_0x5629eb,_0x374d3a,_0x2a1b6e){const _0x2b32a0=a0_0x11c046;try{const _0x4b5fe8=_0x5cb172;log(_0x5cb172,_0x2b32a0(0x1be)+JSON[_0x2b32a0(0x1c9)](_0x5cb172),null,'i');if(_0x2a1b6e[_0x2b32a0(0x227)]&&_0x2a1b6e[_0x2b32a0(0x227)]==='n'){const _0x2d1a30=_0x2a1b6e['customBrowserPosition'][_0x2b32a0(0x26c)]('x');parseInt(_0x2d1a30[0x0])>=0x0&&parseInt(_0x2d1a30[0x1])>=0x0?(_0x374d3a['x']=parseInt(_0x2d1a30[0x0]),_0x374d3a['y']=parseInt(_0x2d1a30[0x1])):(_0x374d3a['x']=0x0,_0x374d3a['y']=0x0),log(_0x5cb172,'[OpenBrowser]:force\x20set\x20Position:\x20'+_0x374d3a['x']+'x'+_0x374d3a['y'],null,'w');}const _0x5f1132=await genlogin[_0x2b32a0(0x273)](_0x5cb172,_0x2a1b6e,_0x5629eb,_0x374d3a);log(_0x5cb172,'[OpenBrowser]:\x20GenLogin:\x20'+JSON[_0x2b32a0(0x1c9)](_0x5f1132),null,'i'),await delay(0x1388);if(_0x5f1132){let _0x1126a5=0x0;const _0x2967a7=0xa;while(_0x1126a5<_0x2967a7){_0x1126a5++;const _0x1a4e06=await genlogin['countOpenTabs'](_0x5cb172,_0x5f1132);if(_0x1a4e06<=0x1)return log(_0x5cb172,_0x2b32a0(0x248)+_0x1a4e06+_0x2b32a0(0x1bd),null,'i'),_0x5f1132;const _0x3e1a97=await genlogin['closeTab'](_0x5cb172,_0x5f1132,_0x1a4e06-0x1,0xbb8);if(!_0x3e1a97){log(_0x5cb172,_0x2b32a0(0x210),null,![]);continue;}log(_0x5cb172,'[OpenBrowser]\x20Đóng\x20tab\x20mới\x20thành\x20công'),await delay(0xbb8);continue;}}return log(_0x5cb172,_0x2b32a0(0x25e)+JSON[_0x2b32a0(0x1c9)](_0x5cb172)),null;}catch(_0x3f540c){throw new Error(_0x2b32a0(0x1b9)+_0x3f540c[_0x2b32a0(0x23c)]);}}async function checkTeleWebOpen(_0x2adabb,_0x59f915,_0x48cba1,_0x4b10ba,_0x3aa708,_0x422207){const _0x1edc43=a0_0x11c046;let _0x52a0ec,_0x3e10c1;try{_0x3e10c1=await genlogin[_0x1edc43(0x260)](_0x48cba1,_0x3aa708,0x0,_0x422207['browserWidthHeight'],_0x4b10ba[_0x1edc43(0x1ed)]);if(_0x59f915!='W'){const _0x1d82da=await genlogin[_0x1edc43(0x256)](_0x48cba1,_0x3e10c1,_0x59f915['InputSearch'],0x7d0);!_0x1d82da&&(await genlogin[_0x1edc43(0x267)](_0x48cba1,_0x3e10c1,'https://www.google.com',0xea60),await delay(0x7d0),await genlogin[_0x1edc43(0x267)](_0x48cba1,_0x3e10c1,_0x59f915['FistUrl'],0xea60),await genlogin[_0x1edc43(0x230)](_0x48cba1,_0x3e10c1,_0x48cba1),await delay(0x1388));}else _0x59f915='W',await genlogin[_0x1edc43(0x267)](_0x48cba1,_0x3e10c1,_0x1edc43(0x21f),0xea60),await delay(0x7d0),await genlogin[_0x1edc43(0x267)](_0x48cba1,_0x3e10c1,_0x2adabb[_0x1edc43(0x1f2)],0xea60),await genlogin[_0x1edc43(0x230)](_0x48cba1,_0x3e10c1,_0x48cba1),await delay(0x1388);log(_0x48cba1,'[checkTeleWebOpen]:\x20vào\x20loadGame',null,'i');const _0x43772b=await genlogin[_0x1edc43(0x1f3)](_0x48cba1),_0x39f8e7=await http['addData'](_0x48cba1,_0x48cba1,_0x2adabb[_0x1edc43(0x26b)],_0x43772b['date'],'','Start',_0x1edc43(0x257));_0x52a0ec=_0x39f8e7['ID'];const _0x43792e={'firstPage':_0x3e10c1,'bot':_0x2adabb,'profileNameId':_0x48cba1,'getAks':_0x59f915,'genlogin':genlogin,'http':http,'browser':_0x3aa708,'dataId':_0x39f8e7['ID'],'taskIndex':taskInfo[_0x1edc43(0x212)],'screenDataBuffer2':screenDataBuffer1,'tasksDataBuffer2':tasksDataBuffer1};let _0x3d30ef=null;log(_0x48cba1,'[checkTeleWebOpen]:\x20dataId:\x20'+json(_0x52a0ec),null,'i');if(timgame&&_0x59f915!='W'){await http[_0x1edc43(0x1e7)](_0x48cba1,_0x48cba1,_0x52a0ec,_0x1edc43(0x235));const _0x16ce18=await loadGame('timGame',_0x43792e,_0x3d30ef,_0x52a0ec,_0x48cba1);if(_0x16ce18[_0x1edc43(0x219)]=='loop')return log(_0x48cba1,_0x1edc43(0x214)+_0x2adabb[_0x1edc43(0x26b)]+'\x20loop',null,'i'),await http[_0x1edc43(0x1e7)](_0x48cba1,_0x48cba1,_0x52a0ec,_0x1edc43(0x21b)),'loop';else{if(!_0x16ce18)return log(_0x48cba1,_0x1edc43(0x1ef)+_0x2adabb[_0x1edc43(0x26b)],null,![]),await http[_0x1edc43(0x1e7)](_0x48cba1,_0x48cba1,_0x52a0ec,_0x1edc43(0x263),_0x1edc43(0x263)),null;}_0x16ce18[_0x1edc43(0x237)]&&(_0x3d30ef=_0x16ce18[_0x1edc43(0x237)]);}await http[_0x1edc43(0x1e7)](_0x48cba1,_0x48cba1,_0x52a0ec,_0x1edc43(0x269));const _0x364c62=await loadGame(_0x2adabb[_0x1edc43(0x26b)],_0x43792e,_0x3d30ef,_0x52a0ec,_0x48cba1);if(!_0x364c62[_0x1edc43(0x219)])return log(_0x48cba1,_0x1edc43(0x26d)+_0x2adabb[_0x1edc43(0x26b)],null,![]),log(_0x48cba1,'[checkTeleWebOpen]:\x20'+json(_0x364c62),null,![]),await http[_0x1edc43(0x1e7)](_0x48cba1,_0x48cba1,_0x52a0ec,_0x1edc43(0x263),'Fail'),null;else{if(_0x364c62['status']==_0x1edc43(0x24b))return log(_0x48cba1,_0x1edc43(0x214)+_0x2adabb[_0x1edc43(0x26b)]+_0x1edc43(0x21a),null,'i'),await http[_0x1edc43(0x1e7)](_0x48cba1,_0x48cba1,_0x52a0ec,_0x1edc43(0x24b)),'loop';}return await http[_0x1edc43(0x20e)](_0x48cba1,_0x48cba1,_0x2adabb['id'],_0x364c62['nextRun'],_0x364c62[_0x1edc43(0x250)]),await http['updateData'](_0x48cba1,_0x48cba1,_0x52a0ec,'Ok',_0x1edc43(0x24d),_0x364c62[_0x1edc43(0x261)],_0x364c62['nextRun']),log(_0x48cba1,_0x1edc43(0x22d)+_0x2adabb[_0x1edc43(0x26b)]+_0x1edc43(0x1b2)),await delay(0x7d0),_0x52a0ec=null,_0x3e10c1=null,!![];}catch(_0x41b2cd){return log(_0x48cba1,_0x1edc43(0x258)+_0x41b2cd,null,![]),await http[_0x1edc43(0x1e7)](_0x48cba1,_0x48cba1,_0x52a0ec,_0x1edc43(0x263),_0x1edc43(0x263)),_0x52a0ec=null,_0x3e10c1=null,null;}}async function loadGame(_0x458d6c,_0x54be00,_0x369b09,_0x4adc04,_0x16895c){const _0x2cb258=a0_0x11c046;try{const _0x3eba48=pathToFileURL(a0_0x4ef37a[_0x2cb258(0x22f)](__dirname,_0x2cb258(0x243),_0x458d6c+_0x2cb258(0x1ca)))[_0x2cb258(0x1bb)];log(_0x16895c,_0x2cb258(0x1d2)+_0x3eba48);const _0x1883d0=await import(_0x3eba48);if(typeof _0x1883d0[_0x2cb258(0x1c7)]===_0x2cb258(0x21d)){const _0x3dd631=await _0x1883d0[_0x2cb258(0x1c7)](_0x54be00,_0x369b09);await delay(0x3e8);if(!_0x3dd631['status'])return log(_0x16895c,_0x2cb258(0x205)+_0x458d6c+_0x2cb258(0x1bf),null,![]),null;else return _0x3dd631[_0x2cb258(0x219)]===_0x2cb258(0x24b)?(log(_0x16895c,_0x2cb258(0x1dd)+_0x458d6c+_0x2cb258(0x21a),null,'i'),_0x3dd631):(log(_0x16895c,_0x2cb258(0x1dd)+_0x458d6c+'\x20'+_0x3dd631[_0x2cb258(0x219)],null,'i'),_0x3dd631);}else return await delay(0x3e8),log(_0x16895c,'[loadGame]:\x20Script\x20'+_0x458d6c+_0x2cb258(0x206),null,![]),null;}catch(_0x4af394){return log(_0x16895c,'[loadGame]:\x20Lỗi\x20khi\x20load\x20và\x20thực\x20thi\x20script\x20'+_0x458d6c+':\x20'+_0x4af394,null,![]),teleId&&await http[_0x2cb258(0x1c6)](_0x16895c,teleId,'['+_0x16895c+']['+_0x458d6c+'][ERR]:\x20Lỗi\x20'+_0x4af394),null;}}async function closeBrowser(_0x4c440c='',_0x25b7b6){const _0x433bf8=a0_0x11c046;try{if(_0x25b7b6){if(_0x25b7b6[_0x433bf8(0x1b6)]){for(const _0x5d522d of await _0x25b7b6[_0x433bf8(0x240)]()){await _0x5d522d[_0x433bf8(0x1d9)]();}return await _0x25b7b6[_0x433bf8(0x1d9)](),_0x25b7b6=null,global['gc']&&(global['gc'](),log(_0x433bf8(0x1cf),_0x433bf8(0x220),null,'i','+')),log(_0x4c440c,_0x433bf8(0x23e)+_0x4c440c+_0x433bf8(0x1b2),null,'w'),!![];}}else log(_0x4c440c,'[closeBrowser]:\x20Không\x20có\x20trình\x20duyệt\x20để\x20đóng',null,'i');return null;}catch(_0x3c2c9f){return log(_0x4c440c,_0x433bf8(0x241)+_0x4c440c+':\x20'+_0x3c2c9f,null,![]),null;}}async function procScreenArr(_0x1f55e8,_0x11f951,_0x247b43){const _0x4d3650=a0_0x11c046;try{await acquireLock(screenData);let _0x3b5130={};log(_0x247b43,_0x4d3650(0x1fe)+_0x1f55e8+_0x4d3650(0x1e3)+json(_0x11f951),null,'w','-');if(_0x1f55e8===_0x4d3650(0x1f9)){log(_0x247b43,'[worker1.procScreenArr]vào\x20open',null,'w'),_0x3b5130[_0x4d3650(0x1ed)]=Atomics['load'](screenData,0x1)/0xf4240,_0x3b5130[_0x4d3650(0x25f)]=Atomics[_0x4d3650(0x26f)](screenData,0x2),_0x3b5130[_0x4d3650(0x252)]=Atomics[_0x4d3650(0x26f)](screenData,0x3);for(let _0x5efc77=0xa;_0x5efc77<screenData[_0x4d3650(0x1ec)]-0x1;_0x5efc77=_0x5efc77+0x3){const _0x20bc8e=Atomics['load'](screenData,_0x5efc77);if(_0x20bc8e===0x2)return Atomics[_0x4d3650(0x266)](screenData,_0x5efc77,0x1),_0x3b5130['default']=0x0,_0x3b5130['x']=Atomics[_0x4d3650(0x26f)](screenData,_0x5efc77+0x1),_0x3b5130['y']=Atomics[_0x4d3650(0x26f)](screenData,_0x5efc77+0x2),log(_0x247b43,_0x4d3650(0x1e4)+_0x5efc77+_0x4d3650(0x1f5)+json(_0x3b5130),null,'w'),await releaseLock(screenData),_0x3b5130;if(_0x20bc8e===0x0)return Atomics[_0x4d3650(0x266)](screenData,_0x5efc77,0x1),_0x3b5130['default']=0x1,_0x3b5130['x']=0x0,_0x3b5130['y']=0x0,log(_0x247b43,'[worker1.procScreenArr]\x20index:'+_0x5efc77+_0x4d3650(0x20f)+json(_0x3b5130),null,'w'),await releaseLock(screenData),_0x3b5130;}await releaseLock(screenData);throw new Error(_0x4d3650(0x1e1));}else{if(_0x1f55e8==='close'&&_0x11f951['x']>=0x0&&_0x11f951['y']>=0x0){log(_0x247b43,'[worker1.procScreenArr]vào\x20close',null,'w');if(_0x11f951[_0x4d3650(0x1c7)]===0x1)return log(_0x247b43,'[worker1.procScreenArr]vị\x20trí\x20default\x20không\x20cần\x20close',null,'w'),await releaseLock(screenData),!![];for(let _0xb2b323=0xa;_0xb2b323<screenData[_0x4d3650(0x1ec)]-0x1;_0xb2b323+=0x3){const _0x120963=Atomics[_0x4d3650(0x26f)](screenData,_0xb2b323);if(_0x120963===0x1){const _0x4767c1=Atomics['load'](screenData,_0xb2b323+0x1),_0x367fa8=Atomics[_0x4d3650(0x26f)](screenData,_0xb2b323+0x2);if(_0x4767c1===_0x11f951['x']&&_0x367fa8===_0x11f951['y'])return Atomics[_0x4d3650(0x266)](screenData,_0xb2b323,0x2),log(_0x247b43,_0x4d3650(0x1e4)+_0xb2b323+'\x20set\x20close\x20ok',null,'w'),Atomics[_0x4d3650(0x200)](screenData,_0xb2b323),await releaseLock(screenData),!![];}}await releaseLock(screenData);throw new Error(_0x4d3650(0x201)+_0x1f55e8+',\x20pos:\x20'+json(_0x11f951));}else return log(_0x247b43,_0x4d3650(0x239)+json(_0x11f951)+'\x20Action:'+_0x1f55e8,null,'w'),await releaseLock(screenData),!![];}}catch(_0x144675){return log(_0x247b43,'[worker1.procScreenArr]lỗi\x20'+_0x144675+_0x4d3650(0x233)+_0x1f55e8+_0x4d3650(0x1e3)+json(_0x11f951),null,![]),await releaseLock(screenData),![];}}async function acquireLock(_0x3ad77c,_0x560bf8=0x7530){const _0x288908=a0_0x11c046,_0x7c4c83=Date[_0x288908(0x246)]();while(Atomics[_0x288908(0x1c5)](_0x3ad77c,0x8,0x0,0x1)!==0x0){if(Date[_0x288908(0x246)]()-_0x7c4c83>_0x560bf8)throw new Error(_0x288908(0x221));Atomics[_0x288908(0x203)](_0x3ad77c,0x8,0x1,_0x560bf8);}}async function releaseLock(_0x572a92){const _0x4c37af=a0_0x11c046;Atomics[_0x4c37af(0x266)](_0x572a92,0x8,0x0),Atomics[_0x4c37af(0x200)](_0x572a92,0x8);}async function xoaTimeout(_0x20d1a4){const _0x40878f=a0_0x11c046;try{clearTimeout(_0x20d1a4),log(_0x40878f(0x1d1)+_0x20d1a4,null,'i',_0x40878f(0x1cb));}catch(_0x4c2905){log(_0x40878f(0x264)+_0x4c2905,null,![]);}}async function xoaInterval(_0x2fc9bb){const _0x510833=a0_0x11c046;try{clearInterval(_0x2fc9bb),log(_0x510833(0x262)+_0x2fc9bb,null,'i',_0x510833(0x25b));}catch(_0x172d44){log('[xoaTimeout]worker1:\x20'+_0x172d44,null,![]);}}async function delay(_0x5c6ced){return new Promise(async _0x12f62b=>{setTimeout(_0x12f62b,_0x5c6ced);});}async function eTimeout(){const _0xea67b1=a0_0x11c046;return log(_0xea67b1(0x1df),null,'w'),Atomics[_0xea67b1(0x266)](tasksData,taskInfo[_0xea67b1(0x212)],0x1),!![];}async function cTimeout(){const _0x197d9e=a0_0x11c046;if(Atomics['load'](tasksData,taskInfo[_0x197d9e(0x212)])===0x1)return!![];return null;}async function rstTimeout(){const _0xee812d=a0_0x11c046;return log(_0xee812d(0x1f4),null,'w'),Atomics[_0xee812d(0x1c5)](tasksData,taskInfo[_0xee812d(0x212)],0x1,0x2),!![];}
const a0_0x2eb2fe=a0_0x5cea;(function(_0x524a41,_0x17126c){const _0x1e7f01=a0_0x5cea,_0x173f53=_0x524a41();while(!![]){try{const _0x505745=parseInt(_0x1e7f01(0x12f))/0x1+-parseInt(_0x1e7f01(0x132))/0x2+-parseInt(_0x1e7f01(0x139))/0x3+-parseInt(_0x1e7f01(0xeb))/0x4*(-parseInt(_0x1e7f01(0x119))/0x5)+-parseInt(_0x1e7f01(0xf4))/0x6+parseInt(_0x1e7f01(0x121))/0x7*(-parseInt(_0x1e7f01(0x118))/0x8)+parseInt(_0x1e7f01(0xf6))/0x9;if(_0x505745===_0x17126c)break;else _0x173f53['push'](_0x173f53['shift']());}catch(_0x19812f){_0x173f53['push'](_0x173f53['shift']());}}}(a0_0x9b73,0x32445));import'dotenv/config';import a0_0x3d9b06 from'fs';import a0_0x22bbb9 from'path';import{fileURLToPath,pathToFileURL}from'url';import{expose}from'threads/worker';import{log,json}from'./modules/logger.js';import a0_0x597a7b from'./modules/Genlogin.js';import a0_0x9ea7d from'./modules/http.js';import a0_0x378575 from'p-queue';const __filename=fileURLToPath(import.meta[a0_0x2eb2fe(0xec)]),__dirname=a0_0x22bbb9['dirname'](__filename);let profileQueue,genlogin,http,getAllProfiles,taskInfo,GenDataProfile,timgame;genlogin=new a0_0x597a7b('',!![]),http=new a0_0x9ea7d(process[a0_0x2eb2fe(0x95)][a0_0x2eb2fe(0x97)],process['env'][a0_0x2eb2fe(0xaf)],!![]);let firstRun=!![],delayOpenProfile=0xbb8,profileTimeout=0x5265c0,botTimeout=0x5265c0,profileThreads=0x1,browserInfo={},version,screenData,tasksData,screenDataBuffer1,tasksDataBuffer1,teleId=null;const worker1=async _0x2f48b8=>{const _0x82d871=a0_0x2eb2fe,{version0:_0x2550f4,tasksDataBuffer:_0x58d8bb,screenDataBuffer:_0x3dc87d,action:_0x3a4e7a,task:_0x279cf1,dataBrw:_0x2f76d3,GenDataProfile0:_0x10d749,timgame0:_0x3e3058,timeout:_0x3b9dd2,tele_id:_0x1117b2}=_0x2f48b8;taskInfo=_0x279cf1;_0x1117b2&&_0x1117b2[_0x82d871(0xe5)]&&(teleId=_0x1117b2[_0x82d871(0xe5)]);screenDataBuffer1=_0x3dc87d,tasksDataBuffer1=_0x58d8bb,screenData=new Int32Array(_0x3dc87d),tasksData=new Int32Array(_0x58d8bb);try{if(_0x3b9dd2)return log(_0x82d871(0x107),_0x82d871(0x141),null,'w'),await clearVar(),{'success':![],'error':_0x82d871(0x141)};else{if(_0x279cf1!==_0x82d871(0x122)){version=_0x2550f4,getAllProfiles=_0x2f76d3,log(_0x82d871(0x107),_0x82d871(0x14f)+JSON[_0x82d871(0x147)](_0x2f48b8[_0x82d871(0x108)]),null,'c'),log(_0x82d871(0x107),_0x82d871(0xd4)+JSON[_0x82d871(0x147)](getAllProfiles),null,'c'),GenDataProfile=_0x10d749,timgame=_0x3e3058,log('worker1','['+_0x279cf1[_0x82d871(0xa6)]+_0x82d871(0xc3),null,'w');const _0x365328=await xuLyTask(_0x279cf1);return log(_0x82d871(0x107),''+JSON[_0x82d871(0x147)](_0x365328),null,'w'),log(_0x82d871(0x107),'DONE',null,'w',_0x82d871(0xb2)),await clearVar(),_0x365328?{'success':!![],'result':_0x365328}:{'success':![],'result':_0x365328};}else return log('worker1',_0x82d871(0xee)+_0x279cf1,null,'w'),await clearVar(),{'success':![],'error':'worker1'};}}catch(_0x20451c){return log(_0x82d871(0x107),_0x82d871(0xfd)+_0x20451c,null,![]),await clearVar(),{'success':![],'error':_0x82d871(0x107)};}};expose({'worker1':worker1});async function clearVar(){return genlogin=null,http=null,!![];}async function xuLyTask(_0x5d68ba){const _0x42f712=a0_0x2eb2fe;try{log('worker1','['+_0x5d68ba[_0x42f712(0xa6)]+_0x42f712(0xd8),null,'i','-');const _0x51074e=await genlogin[_0x42f712(0x143)](_0x42f712(0x107)),_0x107708=_0x51074e['date'];if(_0x107708<_0x5d68ba['nextrunstamp'])return log(_0x42f712(0x107),'['+_0x5d68ba['name']+_0x42f712(0xe8)+JSON[_0x42f712(0x147)](_0x5d68ba[_0x42f712(0xa6)])+'\x20chưa\x20đến\x20thời\x20gian\x20chạy',null,'i'),log(_0x42f712(0x107),'['+_0x5d68ba['name']+_0x42f712(0x149)+JSON['stringify'](_0x51074e)+_0x42f712(0xf3)+JSON['stringify'](_0x5d68ba[_0x42f712(0x14b)]),null,'w'),log(_0x42f712(0x107),'['+_0x5d68ba['name']+_0x42f712(0x149)+JSON['stringify'](_0x107708)+_0x42f712(0xf3)+JSON[_0x42f712(0x147)](taskNextRunDateTime),null,'w'),log(_0x42f712(0x107),'['+_0x5d68ba['name']+'][xuLyTask]:\x20Chờ\x205\x20giây\x20trước\x20khi\x20xử\x20lý\x20task\x20tiếp\x20theo...',null,'i'),await delay(0x1388),null;let _0x5cab19=await http['getTask'](_0x42f712(0x107),_0x5d68ba[_0x42f712(0xa6)]);if(_0x5cab19[_0x42f712(0x9d)][_0x42f712(0x13f)]['length']<=0x0){log('worker1','['+_0x5d68ba[_0x42f712(0xa6)]+_0x42f712(0xa0),null,![]);throw new Error(_0x42f712(0xf2));}firstRun&&(profileThreads=parseInt(_0x5d68ba[_0x42f712(0xdc)]),profileQueue=new a0_0x378575({'concurrency':profileThreads}),log(_0x42f712(0x107),'['+_0x5d68ba[_0x42f712(0xa6)]+_0x42f712(0x10f)+profileThreads,null,'w'),firstRun=![],delayOpenProfile=parseInt(_0x5d68ba['delayOpenProfile'])*0x3e8,profileTimeout=parseInt(_0x5d68ba[_0x42f712(0xc6)])*0x3e8,botTimeout=parseInt(_0x5d68ba[_0x42f712(0xfc)])*0x3e8);const _0x18070a=await xuLyProfiles(_0x5cab19['value'][_0x42f712(0x13f)],_0x5d68ba['name']);if(!_0x18070a){log(_0x42f712(0x107),'['+_0x5d68ba[_0x42f712(0xa6)]+'][xuLyTask]:\x20Không\x20lấy\x20được\x20dữ\x20liệu\x20profiles\x20'+json(_0x18070a),null,![]);throw new Error(_0x42f712(0xf2));}return log('worker1','['+_0x5d68ba[_0x42f712(0xa6)]+_0x42f712(0x114)+_0x5d68ba['name']+_0x42f712(0xb3)),await delay(0x7d0),log(_0x42f712(0x107),'['+_0x5d68ba[_0x42f712(0xa6)]+_0x42f712(0xcb)+JSON['stringify'](_0x5d68ba[_0x42f712(0xa6)])),!![];}catch(_0x2e2be3){return log(_0x42f712(0x107),'['+_0x5d68ba[_0x42f712(0xa6)]+_0x42f712(0xe6)+_0x2e2be3,null,![]),null;}}async function xuLyProfiles(_0x431f11,_0x3027ca){const _0x19283d=a0_0x2eb2fe;try{const _0x14ff4d=[];for(const [_0x33ae2c,_0x3c245d]of _0x431f11['entries']()){const _0x4ce0be=await GenDataProfile['findIndex'](_0x535d75=>_0x535d75['pid']===_0x3c245d);if(_0x33ae2c!==-0x1)log('worker1','['+_0x3027ca+_0x19283d(0xcc)+_0x4ce0be);else{log(_0x19283d(0x107),'['+_0x3027ca+_0x19283d(0x10d));throw new Error('Không\x20tìm\x20thấy\x20indexGenP');}log(_0x19283d(0x107),'['+_0x3027ca+'][xuLyProfiles]:\x20Thêm\x20profile\x20'+_0x3c245d+_0x19283d(0x9b)+profileThreads,null,'i'),_0x14ff4d[_0x19283d(0xaa)](profileQueue[_0x19283d(0xdb)](async()=>{const _0xe97033=_0x19283d;try{delayOpenProfile>0x0?(log('worker1','['+_0x3027ca+_0xe97033(0x11c)+_0x3c245d+'\x20sau\x20'+delayOpenProfile+'ms',null,'w','-'),await delay(delayOpenProfile)):log(_0xe97033(0x107),'['+_0x3027ca+_0xe97033(0x11c)+_0x3c245d,null,'w','-'),await xuLyTungProfile(_0x3c245d,GenDataProfile[_0x4ce0be]);}catch(_0x498e5b){log(_0xe97033(0x107),'['+_0x3027ca+_0xe97033(0x9a)+_0x3c245d+':\x20'+_0x498e5b[_0xe97033(0xc1)],null,![]);throw _0x498e5b;}})),log(_0x19283d(0x107),'['+_0x3027ca+_0x19283d(0x123)+_0x3c245d+_0x19283d(0xdf));}const _0xf04ca0=await Promise[_0x19283d(0xbb)](_0x14ff4d),_0x2e4c02=_0xf04ca0[_0x19283d(0x150)](_0x25042b=>_0x25042b['status']===_0x19283d(0xcd));return _0x2e4c02[_0x19283d(0xda)]>0x0?log(_0x19283d(0x107),'['+_0x3027ca+_0x19283d(0xa3)+JSON[_0x19283d(0x147)](_0x2e4c02),null,![]):log(_0x19283d(0x107),'['+_0x3027ca+'][xuLyProfiles]:\x20Đã\x20xử\x20lý\x20tất\x20cả\x20profiles\x20thành\x20công\x20'+json(_0xf04ca0)),!![];}catch(_0x2e02d4){return log(_0x19283d(0x107),'['+_0x3027ca+_0x19283d(0xbf)+_0x2e02d4,null,![]),null;}}async function xuLyTungProfile(_0x41fe49,_0x248e6b){const _0x273c08=a0_0x2eb2fe;let _0x18c522,_0x66362a;const _0x2bc58d=_0x41fe49;let _0x45c379;try{await delay(delayOpenProfile),log(_0x41fe49,'[xuLyTungProfile]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile',null,'i'),_0x18c522=await genlogin[_0x273c08(0x143)](_0x41fe49),await http[_0x273c08(0xa1)](_0x273c08(0x107),_0x41fe49,_0x273c08(0xba),_0x18c522[_0x273c08(0xcf)],'',_0x273c08(0x134)+version,'Start');teleId&&await http[_0x273c08(0x98)](_0x41fe49,teleId,'['+_0x41fe49+_0x273c08(0xd0));log(_0x41fe49,_0x273c08(0x9e)+_0x41fe49,null,'w'),_0x45c379=await procScreenArr(_0x273c08(0x151),null,_0x41fe49);if(_0x45c379['x']===undefined||_0x45c379['y']===undefined){log(_0x41fe49,_0x273c08(0xb4),null,![]);throw new Error(_0x273c08(0xca));}const _0x344187=await xuLyBrowser(_0x41fe49,_0x248e6b,_0x45c379);await procScreenArr(_0x273c08(0x133),_0x45c379,_0x41fe49);const _0x30b10b=await genlogin[_0x273c08(0xe4)](_0x18c522[_0x273c08(0xff)]);return await http[_0x273c08(0xa1)](_0x273c08(0x107),_0x41fe49,'STOP\x20SCRIPT','','',_0x30b10b,'Stop'),teleId&&await http[_0x273c08(0x98)](_0x41fe49,teleId,'['+_0x41fe49+'][OK]:\x20STOP\x20SCRIPT'),_0x344187;}catch(_0x36a223){log(_0x41fe49,_0x273c08(0xa5)+_0x36a223,null,![]);if(_0x66362a)await Thread['terminate'](_0x66362a);await procScreenArr(_0x273c08(0x133),_0x45c379,_0x41fe49);const _0x27adfa=await genlogin[_0x273c08(0xe4)](_0x18c522?.[_0x273c08(0xff)]||Date[_0x273c08(0x145)]());await http[_0x273c08(0xa1)](_0x273c08(0x107),_0x41fe49,'STOP\x20SCRIPT','','',_0x27adfa,_0x273c08(0x116));teleId&&await http[_0x273c08(0x98)](_0x41fe49,teleId,'['+_0x41fe49+_0x273c08(0x120));throw _0x36a223;}}async function xuLyBrowser(_0x3427e9,_0x16690e,_0x474447){const _0x2e0ec=a0_0x2eb2fe;let _0x4868c1;try{const _0x31d7a2=_0x3427e9;if(!browserInfo[_0x3427e9])browserInfo[_0x3427e9]={};browserInfo[_0x3427e9]['fisrtOpenBrowser']=0x0,log(_0x3427e9,_0x2e0ec(0xe3)+json(browserInfo),null,'w','w');if(browserInfo[_0x3427e9]['fisrtOpenBrowser']==0x0){_0x4868c1=await OpenBrowser(_0x3427e9,_0x16690e,_0x474447);if(!_0x4868c1){log(_0x3427e9,_0x2e0ec(0x10a)+_0x3427e9,null,![]);throw new Error(_0x2e0ec(0x10a)+_0x3427e9);}browserInfo[_0x3427e9][_0x2e0ec(0x124)]=0x1;}if(!_0x4868c1[_0x2e0ec(0x117)])throw new Error('[xuLyBrowser]:\x20browser\x20disconnected\x20'+_0x3427e9);let _0x52f7f0=0x0;const _0x465613=await http['getBotAll']('worker1',_0x31d7a2);if(!_0x465613){log(_0x3427e9,_0x2e0ec(0xb8),null,![]);throw new Error(_0x2e0ec(0xe7));}if(_0x465613[_0x2e0ec(0xda)]<=0x0){log(_0x3427e9,_0x2e0ec(0xc4),null,![]);throw new Error('No\x20bot\x20found');}for(const _0xe96d21 of _0x465613){if(_0xe96d21){if(_0xe96d21[_0x2e0ec(0x128)]!='script')continue;if(_0xe96d21[_0x2e0ec(0x9d)]==='end'){log(_0x3427e9,_0x2e0ec(0x127),null,'i');break;}if(!_0xe96d21[_0x2e0ec(0xe2)]){log(_0x3427e9,_0x2e0ec(0xb1)+json(_0xe96d21)+_0x2e0ec(0xb0),null,![]);continue;}if(_0xe96d21['onOff']==='0'){log(_0x3427e9,_0x2e0ec(0xb1)+json(_0xe96d21[_0x2e0ec(0xa6)])+_0x2e0ec(0xc9),null,![]);continue;}const _0x10f603=await genlogin[_0x2e0ec(0x143)](_0x3427e9);if(_0xe96d21[_0x2e0ec(0xfb)]>_0x10f603[_0x2e0ec(0xff)]){log(_0x3427e9,_0x2e0ec(0xb1)+json(_0xe96d21[_0x2e0ec(0xa6)])+_0x2e0ec(0xea),null,'w');continue;}switch(_0xe96d21[_0x2e0ec(0xe2)]){case'A':log(_0x3427e9,':\x20'+json(_0xe96d21[_0x2e0ec(0xa6)])+_0x2e0ec(0x11d)),await xuLyGame(_0xe96d21,'A',_0x3427e9,_0x16690e,_0x474447,_0x4868c1);break;case'K':log(_0x3427e9,':\x20'+json(_0xe96d21[_0x2e0ec(0xa6)])+'\x20Tele\x20K\x20OK'),await xuLyGame(_0xe96d21,'K',_0x3427e9,_0x16690e,_0x474447,_0x4868c1);break;case'W':log(_0x3427e9,':\x20'+json(_0xe96d21[_0x2e0ec(0xa6)])+'\x20Web\x20OK'),await xuLyGame(_0xe96d21,'W',_0x3427e9,_0x16690e,_0x474447,_0x4868c1);break;default:log(_0x3427e9,_0x2e0ec(0xa8)+json(_0xe96d21[_0x2e0ec(0xe2)]),null,![]);break;}log(_0x3427e9,_0x2e0ec(0xd1));}}return await closeBrowser(_0x3427e9,_0x4868c1),!![];}catch(_0x120884){return log(_0x3427e9,_0x2e0ec(0xd7)+_0x120884,null,![]),await closeBrowser(_0x3427e9,_0x4868c1),null;}}async function xuLyGame(_0x55079b,_0x39e6e0,_0x4427f8,_0x2a6cc6,_0x263a9e,_0x8a5da2){const _0x2df8d2=a0_0x2eb2fe;try{const _0x59f1c1=_0x4427f8;if(_0x55079b['type']==='api'){log(_0x4427f8,_0x2df8d2(0x14c)+_0x55079b[_0x2df8d2(0xa6)]+_0x2df8d2(0x9c),null,'i');const _0x70087d=await genlogin['nowTime'](_0x4427f8),_0x16fb35=await http[_0x2df8d2(0xa1)](_0x4427f8,_0x59f1c1,_0x55079b['name'],_0x70087d[_0x2df8d2(0xcf)],'',_0x2df8d2(0x129),_0x2df8d2(0x130)),_0x9d6ae6=_0x16fb35['ID'],_0x4e134e={'bot':_0x55079b,'profileNameId':_0x4427f8,'genlogin':genlogin,'http':http,'dataId':_0x9d6ae6},_0x302f41=await loadGameApi(_0x55079b[_0x2df8d2(0xa6)],_0x4e134e);if(!_0x302f41[_0x2df8d2(0xc7)])return log(_0x4427f8,_0x2df8d2(0x135)+_0x55079b[_0x2df8d2(0xa6)]+'\x20lỗi',null,![]),await http[_0x2df8d2(0x105)](_0x4427f8,_0x59f1c1,_0x9d6ae6,_0x2df8d2(0x113),_0x2df8d2(0x113)),null;if(_0x302f41['status']==_0x2df8d2(0x10b))return log(_0x4427f8,_0x2df8d2(0x135)+_0x55079b[_0x2df8d2(0xa6)]+_0x2df8d2(0xdd),null,'i'),_0x2df8d2(0x10b);if(_0x302f41[_0x2df8d2(0xc7)])return log(_0x4427f8,'[xuLyGame]:\x20Thực\x20thi\x20'+_0x55079b[_0x2df8d2(0xa6)]+_0x2df8d2(0x101)),await http[_0x2df8d2(0x142)](_0x4427f8,_0x59f1c1,_0x55079b['id'],_0x302f41[_0x2df8d2(0x131)],_0x302f41[_0x2df8d2(0xfb)]),await http[_0x2df8d2(0x105)](_0x4427f8,_0x59f1c1,_0x9d6ae6,'Ok',_0x2df8d2(0x103),_0x302f41[_0x2df8d2(0x10e)],_0x302f41[_0x2df8d2(0x131)]),!![];}else{if(_0x39e6e0=='A'||_0x39e6e0=='K'){log(_0x4427f8,'[xuLyGame]:\x20'+_0x55079b['name']+'\x20Script\x20mode',null,'w','-');const _0x2efb89=await http[_0x2df8d2(0x136)](_0x4427f8,_0x39e6e0);if(_0x2efb89){log(_0x4427f8,_0x2df8d2(0x110));let _0x2c60a3=0x0;while(_0x2c60a3<0x2){const _0x17bf5e=await checkTeleWebOpen(_0x55079b,_0x2efb89,_0x4427f8,_0x263a9e,_0x8a5da2);if(_0x17bf5e===_0x2df8d2(0x10b))_0x2c60a3++,log(_0x4427f8,'[xuLyGame]:\x20Loop\x20lại\x20,\x20loop\x20lại\x20lần\x20'+_0x2c60a3+'/2',null,'i'),await delay(0x3e8);else return _0x17bf5e?(log(_0x4427f8,'[xuLyGame]:\x20checkTeleWebOpen\x20OK'),!![]):(log(_0x4427f8,_0x2df8d2(0xf8),null,![]),null);}return log(_0x4427f8,_0x2df8d2(0x144),null,![]),null;}}else{if(_0x39e6e0=='W'){log(_0x4427f8,_0x2df8d2(0x14c)+_0x55079b[_0x2df8d2(0xa6)]+_0x2df8d2(0x12d),null,'w','-');const _0x118e06=await checkTeleWebOpen(_0x55079b,_0x39e6e0,_0x4427f8,_0x263a9e,_0x8a5da2);return _0x118e06?(log(_0x4427f8,_0x2df8d2(0xc2)),!![]):(log(_0x4427f8,'[xuLyGame]:\x20checkTeleWebOpen\x20có\x20gì\x20đó\x20sai\x20sai\x20rồi\x20bro',null,![]),null);}else return log(_0x4427f8,'[xuLyGame]:\x20Sai\x20aks\x20'+_0x39e6e0,null,![]),null;}}}catch(_0x5d4160){return log(_0x4427f8,_0x2df8d2(0xf0)+_0x5d4160,null,![]),null;}}async function OpenBrowser(_0x3ff0af,_0x55886a,_0xbb69dd){const _0x197206=a0_0x2eb2fe;try{const _0x367e28=_0x3ff0af;log(_0x3ff0af,_0x197206(0x13d)+JSON[_0x197206(0x147)](_0x3ff0af),null,'i');if(getAllProfiles[_0x197206(0xe1)]==='n'){const _0x8aa949=getAllProfiles['customBrowserPosition'][_0x197206(0x12a)]('x');parseInt(_0x8aa949[0x0])>=0x0&&parseInt(_0x8aa949[0x1])>=0x0?(_0xbb69dd['x']=parseInt(_0x8aa949[0x0]),_0xbb69dd['y']=parseInt(_0x8aa949[0x1])):(_0xbb69dd['x']=0x0,_0xbb69dd['y']=0x0),log(_0x3ff0af,_0x197206(0xd9)+_0xbb69dd['x']+'x'+_0xbb69dd['y'],null,'w');}const _0x5321f2=await genlogin[_0x197206(0x11e)](_0x3ff0af,getAllProfiles,_0x55886a,_0xbb69dd);log(_0x3ff0af,_0x197206(0xa4)+JSON['stringify'](_0x5321f2),null,'i'),await delay(0x1388);if(_0x5321f2){let _0x99a211=0x0;const _0x2ef133=0xa;while(_0x99a211<_0x2ef133){_0x99a211++;const _0x5b480f=await genlogin['countOpenTabs'](_0x3ff0af,_0x5321f2);if(_0x5b480f<=0x1)return log(_0x3ff0af,_0x197206(0x94)+_0x5b480f+_0x197206(0xb9),null,'i'),_0x5321f2;const _0x47820c=await genlogin[_0x197206(0xae)](_0x3ff0af,_0x5321f2,_0x5b480f-0x1,0xbb8);if(!_0x47820c){log(_0x3ff0af,_0x197206(0xce),null,![]);continue;}log(_0x3ff0af,_0x197206(0xb6)),await delay(0xbb8);continue;}}return log(_0x3ff0af,_0x197206(0xb5)+JSON[_0x197206(0x147)](_0x3ff0af)),null;}catch(_0x1c423b){throw new Error(_0x197206(0xd3)+_0x1c423b[_0x197206(0xc1)]);}}async function checkTeleWebOpen(_0x25aa04,_0x2b607d,_0x242e7d,_0x50777e,_0x416f65){const _0x254e0f=a0_0x2eb2fe;let _0x2b5eee,_0x54ebc9;try{_0x54ebc9=await genlogin[_0x254e0f(0x12e)](_0x242e7d,_0x416f65,0x0,getAllProfiles[_0x254e0f(0xad)],_0x50777e[_0x254e0f(0xa2)]);if(_0x2b607d!='W'){const _0x398c41=await genlogin[_0x254e0f(0xef)](_0x242e7d,_0x54ebc9,_0x2b607d['InputSearch'],0x7d0);!_0x398c41&&(await genlogin[_0x254e0f(0x11f)](_0x242e7d,_0x54ebc9,'https://www.google.com',0xea60),await delay(0x7d0),await genlogin[_0x254e0f(0x11f)](_0x242e7d,_0x54ebc9,_0x2b607d[_0x254e0f(0xb7)],0xea60),await genlogin[_0x254e0f(0x11a)](_0x242e7d,_0x54ebc9,_0x242e7d),await delay(0x1388));}else _0x2b607d='W',await genlogin[_0x254e0f(0x11f)](_0x242e7d,_0x54ebc9,'https://www.google.com',0xea60),await delay(0x7d0),await genlogin[_0x254e0f(0x11f)](_0x242e7d,_0x54ebc9,_0x25aa04[_0x254e0f(0x11b)],0xea60),await genlogin['setTitle'](_0x242e7d,_0x54ebc9,_0x242e7d),await delay(0x1388);log(_0x242e7d,_0x254e0f(0x96),null,'i');const _0x54e608=await genlogin['nowTime'](_0x242e7d),_0x282670=await http[_0x254e0f(0xa1)](_0x242e7d,_0x242e7d,_0x25aa04[_0x254e0f(0xa6)],_0x54e608[_0x254e0f(0xcf)],'',_0x254e0f(0x14d),_0x254e0f(0x130));_0x2b5eee=_0x282670['ID'];const _0x56a4ca={'firstPage':_0x54ebc9,'bot':_0x25aa04,'profileNameId':_0x242e7d,'getAks':_0x2b607d,'genlogin':genlogin,'http':http,'browser':_0x416f65,'dataId':_0x282670['ID'],'taskIndex':taskInfo[_0x254e0f(0xde)],'screenDataBuffer2':screenDataBuffer1,'tasksDataBuffer2':tasksDataBuffer1};let _0x5cfcb7=null;log(_0x242e7d,_0x254e0f(0xfa)+json(_0x2b5eee),null,'i');if(timgame&&_0x2b607d!='W'){await http['updateData'](_0x242e7d,_0x242e7d,_0x2b5eee,_0x254e0f(0x138));const _0x42db23=await loadGame(_0x254e0f(0x148),_0x56a4ca,_0x5cfcb7,_0x2b5eee,_0x242e7d);if(_0x42db23[_0x254e0f(0xc7)]=='loop')return log(_0x242e7d,_0x254e0f(0x12c)+_0x25aa04[_0x254e0f(0xa6)]+_0x254e0f(0xdd),null,'i'),await http[_0x254e0f(0x105)](_0x242e7d,_0x242e7d,_0x2b5eee,'loop\x20new\x20game'),_0x254e0f(0x10b);else{if(!_0x42db23)return log(_0x242e7d,_0x254e0f(0x13b)+_0x25aa04[_0x254e0f(0xa6)],null,![]),await http['updateData'](_0x242e7d,_0x242e7d,_0x2b5eee,'Fail',_0x254e0f(0x113)),null;}_0x42db23[_0x254e0f(0xbc)]&&(_0x5cfcb7=_0x42db23[_0x254e0f(0xbc)]);}await http['updateData'](_0x242e7d,_0x242e7d,_0x2b5eee,_0x254e0f(0xbd));const _0x2d7035=await loadGame(_0x25aa04[_0x254e0f(0xa6)],_0x56a4ca,_0x5cfcb7,_0x2b5eee,_0x242e7d);if(!_0x2d7035['status'])return log(_0x242e7d,_0x254e0f(0x109)+_0x25aa04[_0x254e0f(0xa6)],null,![]),log(_0x242e7d,_0x254e0f(0xac)+json(_0x2d7035),null,![]),await http[_0x254e0f(0x105)](_0x242e7d,_0x242e7d,_0x2b5eee,_0x254e0f(0x113),_0x254e0f(0x113)),null;else{if(_0x2d7035[_0x254e0f(0xc7)]==_0x254e0f(0x10b))return log(_0x242e7d,_0x254e0f(0x12c)+_0x25aa04[_0x254e0f(0xa6)]+'\x20loop',null,'i'),await http[_0x254e0f(0x105)](_0x242e7d,_0x242e7d,_0x2b5eee,_0x254e0f(0x10b)),_0x254e0f(0x10b);}return await http[_0x254e0f(0x142)](_0x242e7d,_0x242e7d,_0x25aa04['id'],_0x2d7035[_0x254e0f(0x131)],_0x2d7035['nextRunStamp']),await http[_0x254e0f(0x105)](_0x242e7d,_0x242e7d,_0x2b5eee,'Ok',_0x254e0f(0x103),_0x2d7035[_0x254e0f(0x10e)],_0x2d7035['nextRun']),log(_0x242e7d,'[checkTeleWebOpen]:\x20Thực\x20thi\x20script\x20'+_0x25aa04[_0x254e0f(0xa6)]+_0x254e0f(0xbe)),await delay(0x7d0),_0x2b5eee=null,_0x54ebc9=null,!![];}catch(_0x1cbc9e){return log(_0x242e7d,'[checkTeleWebOpen]:\x20Lỗi\x20trong\x20quá\x20trình\x20mở\x20trang\x20:\x20'+_0x1cbc9e,null,![]),await http[_0x254e0f(0x105)](_0x242e7d,_0x242e7d,_0x2b5eee,_0x254e0f(0x113),_0x254e0f(0x113)),_0x2b5eee=null,_0x54ebc9=null,null;}}async function loadGame(_0x1e69f6,_0x3b3880,_0x343a77,_0x537604,_0x532707){const _0x34e5df=a0_0x2eb2fe;try{const _0x577246=pathToFileURL(a0_0x22bbb9[_0x34e5df(0x126)](__dirname,_0x34e5df(0x115),_0x1e69f6+_0x34e5df(0xf1)))['href'];log(_0x532707,'[loadGame]:scriptPath\x20'+_0x577246);const _0x2fcf4e=await import(_0x577246);if(typeof _0x2fcf4e['default']===_0x34e5df(0xa7)){const _0x366647=await _0x2fcf4e[_0x34e5df(0x13e)](_0x3b3880,_0x343a77);await delay(0x3e8);if(!_0x366647[_0x34e5df(0xc7)])return log(_0x532707,'[loadGame]:\x20Script\x20'+_0x1e69f6+_0x34e5df(0xfe),null,![]),null;else return _0x366647['status']==='loop'?(log(_0x532707,'[loadGame]:\x20Chạy\x20'+_0x1e69f6+_0x34e5df(0xdd),null,'i'),_0x366647):(log(_0x532707,_0x34e5df(0x14e)+_0x1e69f6+'\x20'+_0x366647['status'],null,'i'),_0x366647);}else return await delay(0x3e8),log(_0x532707,_0x34e5df(0x112)+_0x1e69f6+_0x34e5df(0xe0),null,![]),null;}catch(_0x252b3a){return log(_0x532707,_0x34e5df(0xa9)+_0x1e69f6+':\x20'+_0x252b3a,null,![]),teleId&&await http[_0x34e5df(0x98)](_0x532707,teleId,'['+_0x532707+']['+_0x1e69f6+'][ERR]:\x20Lỗi\x20'+_0x252b3a),null;}}async function closeBrowser(_0x997da6='',_0x4ce4b7){const _0x5ccf98=a0_0x2eb2fe;try{if(_0x4ce4b7){if(_0x4ce4b7[_0x5ccf98(0x117)]){for(const _0x35b174 of await _0x4ce4b7['pages']()){await _0x35b174[_0x5ccf98(0x133)]();}return await _0x4ce4b7[_0x5ccf98(0x133)](),_0x4ce4b7=null,global['gc']&&(global['gc'](),log(_0x5ccf98(0x111),_0x5ccf98(0xf7),null,'i','+')),log(_0x997da6,_0x5ccf98(0xd5)+_0x997da6+_0x5ccf98(0xbe),null,'w'),!![];}}else log(_0x997da6,_0x5ccf98(0xc8),null,'i');return null;}catch(_0x3aa665){return log(_0x997da6,_0x5ccf98(0x9f)+_0x997da6+':\x20'+_0x3aa665,null,![]),null;}}async function procScreenArr(_0x4adbc2,_0x18745b,_0xc24823){const _0x55d39b=a0_0x2eb2fe;try{await acquireLock(screenData);let _0x5b5a87={};log(_0xc24823,_0x55d39b(0xed)+_0x4adbc2+_0x55d39b(0x13a)+json(_0x18745b),null,'w','-');if(_0x4adbc2==='open'){log(_0xc24823,_0x55d39b(0xab),null,'w'),_0x5b5a87['scale']=Atomics[_0x55d39b(0x100)](screenData,0x1)/0xf4240,_0x5b5a87[_0x55d39b(0x104)]=Atomics[_0x55d39b(0x100)](screenData,0x2),_0x5b5a87['height']=Atomics[_0x55d39b(0x100)](screenData,0x3);for(let _0x575ea9=0xa;_0x575ea9<screenData[_0x55d39b(0xda)]-0x1;_0x575ea9=_0x575ea9+0x3){const _0x37550d=Atomics['load'](screenData,_0x575ea9);if(_0x37550d===0x2)return Atomics[_0x55d39b(0xc5)](screenData,_0x575ea9,0x1),_0x5b5a87[_0x55d39b(0x13e)]=0x0,_0x5b5a87['x']=Atomics['load'](screenData,_0x575ea9+0x1),_0x5b5a87['y']=Atomics[_0x55d39b(0x100)](screenData,_0x575ea9+0x2),log(_0xc24823,_0x55d39b(0xd2)+_0x575ea9+'\x20set\x20open\x20ok\x20pos:'+json(_0x5b5a87),null,'w'),await releaseLock(screenData),_0x5b5a87;if(_0x37550d===0x0)return Atomics[_0x55d39b(0xc5)](screenData,_0x575ea9,0x1),_0x5b5a87[_0x55d39b(0x13e)]=0x1,_0x5b5a87['x']=0x0,_0x5b5a87['y']=0x0,log(_0xc24823,_0x55d39b(0xd2)+_0x575ea9+'\x20set\x20open\x20default\x20pos:'+json(_0x5b5a87),null,'w'),await releaseLock(screenData),_0x5b5a87;}await releaseLock(screenData);throw new Error(_0x55d39b(0xd6));}else{if(_0x4adbc2===_0x55d39b(0x133)&&_0x18745b['x']>=0x0&&_0x18745b['y']>=0x0){log(_0xc24823,_0x55d39b(0x14a),null,'w');if(_0x18745b['default']===0x1)return log(_0xc24823,'[worker1.procScreenArr]vị\x20trí\x20default\x20không\x20cần\x20close',null,'w'),await releaseLock(screenData),!![];for(let _0x420d3a=0xa;_0x420d3a<screenData['length']-0x1;_0x420d3a+=0x3){const _0x2053ca=Atomics[_0x55d39b(0x100)](screenData,_0x420d3a);if(_0x2053ca===0x1){const _0x4880ad=Atomics[_0x55d39b(0x100)](screenData,_0x420d3a+0x1),_0x372249=Atomics[_0x55d39b(0x100)](screenData,_0x420d3a+0x2);if(_0x4880ad===_0x18745b['x']&&_0x372249===_0x18745b['y'])return Atomics['store'](screenData,_0x420d3a,0x2),log(_0xc24823,_0x55d39b(0xd2)+_0x420d3a+'\x20set\x20close\x20ok',null,'w'),Atomics[_0x55d39b(0xc0)](screenData,_0x420d3a),await releaseLock(screenData),!![];}}await releaseLock(screenData);throw new Error(_0x55d39b(0x146)+_0x4adbc2+_0x55d39b(0x13a)+json(_0x18745b));}else return log(_0xc24823,_0x55d39b(0x125)+json(_0x18745b)+_0x55d39b(0x12b)+_0x4adbc2,null,'w'),await releaseLock(screenData),!![];}}catch(_0x556995){return log(_0xc24823,_0x55d39b(0x137)+_0x556995+_0x55d39b(0x102)+_0x4adbc2+',\x20pos:\x20'+json(_0x18745b),null,![]),await releaseLock(screenData),![];}}async function acquireLock(_0x19a122,_0x2bbc35=0x7530){const _0x5710c7=a0_0x2eb2fe,_0x58aca0=Date[_0x5710c7(0x145)]();while(Atomics[_0x5710c7(0x140)](_0x19a122,0x8,0x0,0x1)!==0x0){if(Date[_0x5710c7(0x145)]()-_0x58aca0>_0x2bbc35)throw new Error(_0x5710c7(0xf5));Atomics[_0x5710c7(0x10c)](_0x19a122,0x8,0x1,_0x2bbc35);}}function a0_0x5cea(_0x3596be,_0x208610){const _0x9b7332=a0_0x9b73();return a0_0x5cea=function(_0x5cea84,_0x2187c5){_0x5cea84=_0x5cea84-0x94;let _0x58e2a3=_0x9b7332[_0x5cea84];return _0x58e2a3;},a0_0x5cea(_0x3596be,_0x208610);}async function releaseLock(_0x576c77){const _0x33e23d=a0_0x2eb2fe;Atomics[_0x33e23d(0xc5)](_0x576c77,0x8,0x0),Atomics[_0x33e23d(0xc0)](_0x576c77,0x8);}async function xoaTimeout(_0xdc8108){const _0x195b93=a0_0x2eb2fe;try{clearTimeout(_0xdc8108),log('[xoaTimeout]worker1:\x20Xóa\x20timeout:'+_0xdc8108,null,'i',_0x195b93(0x13c));}catch(_0x2f7ada){log(_0x195b93(0xe9)+_0x2f7ada,null,![]);}}async function xoaInterval(_0x2b3f62){const _0x1aaa98=a0_0x2eb2fe;try{clearInterval(_0x2b3f62),log('[xoaTimeout]worker1:\x20Xóa\x20Interval:'+_0x2b3f62,null,'i',_0x1aaa98(0xf9));}catch(_0x5b6416){log(_0x1aaa98(0xe9)+_0x5b6416,null,![]);}}function a0_0x9b73(){const _0xddd085=['[xuLyGame]:\x20getAks\x20OK','Memory','[loadGame]:\x20Script\x20','Fail','][xuLyTask]:\x20Tasks:\x20','scripts','Stop','connected','8sPnMvU','5OFcFTq','setTitle','ref','][xuLyProfiles]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile\x20','\x20Tele\x20A\x20OK','connect','openUrl','][ERR]:\x20STOP\x20SCRIPT','202405gbJCjr','screenArr','][xuLyProfiles]:\x20Đã\x20thêm\x20profile\x20','fisrtOpenBrowser','[worker1.procScreenArr]\x20posVal:','join',':\x20XONG\x201\x20LƯỢT','type','StartApi','split','\x20Action:','[checkTeleWebOpen]:\x20Thực\x20thi\x20','\x20Web\x20mode','activateTab','135042bFKpOG','running','nextRun','706924qKCzrj','close','Version:','[xuLyGame]:\x20Thực\x20thi\x20','getAks','[worker1.procScreenArr]lỗi\x20','Tìm','872517swAjar',',\x20pos:\x20','[checkTeleWebOpen]:\x20Không\x20tìm\x20thấy\x20game\x20','clrTimeout','[OpenBrowser]:\x20Processing\x20profile:\x20','default','profiles','compareExchange','timeout','nextRunTime','nowTime','[xuLyGame]:Max\x20loop\x20rồi\x20bro','now','Không\x20thể\x20đóng\x20màn\x20hình:\x20vị\x20trí\x20không\x20hợp\x20lệ\x20action:\x20','stringify','timGame','][xuLyTask]:\x20currentDateTime:\x20','[worker1.procScreenArr]vào\x20close','nextrun','[xuLyGame]:\x20','Start','[loadGame]:\x20Chạy\x20','[worker1data.task]:data.task\x20','filter','open','[OpenBrowser]]Chỉ\x20có\x20','env','[checkTeleWebOpen]:\x20vào\x20loadGame','SERVER_HOST','tele','[eTimeout]worker1:\x20reset\x20timeout','][xuLyProfiles]:\x20Lỗi\x20khi\x20xử\x20lý\x20profile\x20','\x20vào\x20hàng\x20đợi\x20max:','\x20Api\x20mode','value','[xuLyTungProfile]0:\x20Kiểm\x20tra\x20màn\x20hình\x20','[closeBrowser]:\x20Lỗi\x20khi\x20đóng\x20trình\x20duyệt\x20','][xuLyTask]:\x20không\x20lấy\x20được\x20profile','addData','scale','][xuLyProfiles]:\x20Một\x20số\x20profiles\x20gặp\x20lỗi:\x20','[OpenBrowser]:\x20GenLogin:\x20','[xuLyTungProfile]:\x20Lỗi:\x20','name','function',':\x20Sai\x20aks\x20','[loadGame]:\x20Lỗi\x20khi\x20load\x20và\x20thực\x20thi\x20script\x20','push','[worker1.procScreenArr]vào\x20open','[checkTeleWebOpen]:\x20','browserWidthHeight','closeTab','APIKEY','\x20ko\x20có\x20aks',':\x20Bot\x20','done','\x20ok','[xuLyTungProfile]:\x20Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng','[OpenBrowser]:\x20Lỗi\x20khi\x20mở\x20browser:\x20','[OpenBrowser]\x20Đóng\x20tab\x20mới\x20thành\x20công','FistUrl','[xuLyBrowser]:\x20Bot\x20không\x20tìm\x20thấy','\x20tab\x20đang\x20mở','START\x20SCRIPT','allSettled','HostName','Vào','\x20thành\x20công','][xuLyProfiles]:\x20Lỗi\x20:\x20','notify','message','[xuLyGame]:\x20checkTeleWebOpen\x20OK',']:\x20Script\x20Mode','[xuLyBrowser]:\x20không\x20lấy\x20được\x20bot','store','profileTimeout','status','[closeBrowser]:\x20Không\x20có\x20trình\x20duyệt\x20để\x20đóng','\x20OFF','Không\x20tìm\x20thấy\x20giá\x20trị\x20status=0','][xuLyTask]:\x20Hoàn\x20thành\x20xử\x20lý\x20task:\x20','][xuLyProfiles]index:\x20','rejected','[OpenBrowser]\x20Lỗi\x20khi\x20đóng\x20tab\x20mới','date',']:\x20START\x20SCRIPT','[xuLyBrowser]:\x20Bot\x20OK','[worker1.procScreenArr]\x20index:','Lỗi\x20xử\x20lý\x20profile:\x20','getAllProfiles\x20','[closeBrowser]:\x20Đóng\x20trình\x20duyệt\x20','Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng','[xuLyBrowser]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20browser:\x20','][xuLyTask]:\x20vào\x20xuLyTask','[OpenBrowser]:force\x20set\x20Position:\x20','length','add','profileThreads','\x20loop','taskIndex','\x20vào\x20hàng\x20đợi.','\x20không\x20phải\x20là\x20một\x20hàm\x20hợp\x20lệ','autoSetBrowserPosition','aks','[xuLyBrowser]:browserInfo:\x20','tinhThoiGian','tele_id','][xuLyTask]:\x20Lỗi\x20while:\x20','No\x20bot\x20found','][xuLyTask]:\x20Task\x20','[xoaTimeout]worker1:\x20','\x20Chưa\x20tới\x20giờ\x20chạy','691112DkwqSA','url','[worker1.procScreenArr]action:\x20','Lỗi\x20gì\x20đó\x20task\x20','elementExistsByXPath','[xuLyGame]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20Game:\x20','.js','No\x20profile\x20found','\x20|\x20nextrun:\x20','526086szhZze','Timeout\x20while\x20acquiring\x20lock','5930730IcpTEI','Garbage\x20Collector\x20đã\x20chạy!','[xuLyGame]:\x20checkTeleWebOpen\x20có\x20gì\x20đó\x20sai\x20sai\x20rồi\x20bro','clrInterval','[checkTeleWebOpen]:\x20dataId:\x20','nextRunStamp','botTimeout','Lỗi\x20','\x20không\x20trả\x20về\x20status','timestamp','load','\x20done','\x20action:\x20','Done','width','updateData','[eTimeout]worker1:\x20timeout','worker1','task','[checkTeleWebOpen]:\x20Không\x20thực\x20thi\x20script\x20','[xuLyBrowser]:\x20Không\x20mở\x20được\x20trình\x20duyệt\x20','loop','wait','][xuLyProfiles]Không\x20tìm\x20thấy\x20indexGenP','coin','][xuLyTask]profileQueue:\x20concurrency:'];a0_0x9b73=function(){return _0xddd085;};return a0_0x9b73();}async function delay(_0x46e6bc){return new Promise(async _0xe8eb9d=>{setTimeout(_0xe8eb9d,_0x46e6bc);});}async function eTimeout(){const _0x43bbdc=a0_0x2eb2fe;return log(_0x43bbdc(0x106),null,'w'),Atomics['store'](tasksData,taskInfo[_0x43bbdc(0xde)],0x1),!![];}async function cTimeout(){const _0x1a366e=a0_0x2eb2fe;if(Atomics['load'](tasksData,taskInfo[_0x1a366e(0xde)])===0x1)return!![];return null;}async function rstTimeout(){const _0x2e5bc3=a0_0x2eb2fe;return log(_0x2e5bc3(0x99),null,'w'),Atomics['compareExchange'](tasksData,taskInfo[_0x2e5bc3(0xde)],0x1,0x2),!![];}
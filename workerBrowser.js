const a0_0x494fad=a0_0x3865;(function(_0x69a228,_0x5ecb9f){const _0x58f10a=a0_0x3865,_0x38f276=_0x69a228();while(!![]){try{const _0x13ac81=parseInt(_0x58f10a(0x282))/0x1*(parseInt(_0x58f10a(0x24e))/0x2)+-parseInt(_0x58f10a(0x25d))/0x3*(-parseInt(_0x58f10a(0x1e0))/0x4)+-parseInt(_0x58f10a(0x1ea))/0x5*(-parseInt(_0x58f10a(0x1e8))/0x6)+-parseInt(_0x58f10a(0x280))/0x7*(parseInt(_0x58f10a(0x23e))/0x8)+-parseInt(_0x58f10a(0x1ff))/0x9+parseInt(_0x58f10a(0x249))/0xa*(-parseInt(_0x58f10a(0x1d8))/0xb)+parseInt(_0x58f10a(0x27e))/0xc*(-parseInt(_0x58f10a(0x207))/0xd);if(_0x13ac81===_0x5ecb9f)break;else _0x38f276['push'](_0x38f276['shift']());}catch(_0x2b53eb){_0x38f276['push'](_0x38f276['shift']());}}}(a0_0x3d23,0xbe7e7));import'dotenv/config';import a0_0x47dec9 from'fs';import a0_0x31daf0 from'path';import{fileURLToPath,pathToFileURL}from'url';import{expose}from'threads/worker';import{log,json}from'./modules/logger.js';function a0_0x3d23(){const _0x1dfdf1=['notify','tele','No\x20bot\x20found','\x20không\x20phải\x20là\x20một\x20hàm\x20hợp\x20lệ','][xuLyProfiles]:\x20Đã\x20thêm\x20profile\x20','[OpenBrowser]\x20Lỗi\x20khi\x20đóng\x20tab\x20mới','nextRunTime','SERVER_HOST','findIndex',']:\x20Script\x20Mode','nextRun','[xuLyBrowser]:\x20Bot\x20OK','timGame','api','[xuLyBrowser]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20browser:\x20','][xuLyProfiles]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile\x20','value','[xuLyGame]:\x20getAks\x20OK','[worker1.procScreenArr]vị\x20trí\x20default\x20không\x20cần\x20close','href','[xuLyTungProfile]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile','\x20Chưa\x20tới\x20giờ\x20chạy','getAks','clrTimeout','profileTimeout','[worker1data.task]:data.task\x20','\x20set\x20open\x20default\x20pos:','][xuLyProfiles]:\x20Lỗi\x20:\x20','][OK]:\x20STOP\x20SCRIPT','aks','profiles','][xuLyTask]:\x20Không\x20lấy\x20được\x20dữ\x20liệu\x20profiles\x20','script','open','close','loop','length',',\x20pos:\x20','tele_id','join','[xuLyGame]:\x20checkTeleWebOpen\x20OK','[xuLyGame]:\x20Loop\x20lại\x20,\x20loop\x20lại\x20lần\x20','worker1','[checkTeleWebOpen]:\x20Không\x20tìm\x20thấy\x20game\x20','\x20set\x20open\x20ok\x20pos:','][ERR]:\x20STOP\x20SCRIPT','nextRunStamp','updateData',':\x20Sai\x20aks\x20','date','[loadGame]:\x20Script\x20','Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng','[xuLyBrowser]:\x20browser\x20disconnected\x20','24IUXpVg','[xuLyTungProfile]:\x20Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng','Không\x20tìm\x20thấy\x20giá\x20trị\x20status=0','[xuLyBrowser]:browserInfo:\x20','][xuLyProfiles]index:\x20','taskIndex',':\x20Bot\x20','[xoaTimeout]worker1:\x20','stringify','[checkTeleWebOpen]:\x20Thực\x20thi\x20script\x20','botTimeout','871030yUDlGK','[OpenBrowser]\x20Đóng\x20tab\x20mới\x20thành\x20công','task','[worker1.procScreenArr]\x20index:','[closeBrowser]:\x20Không\x20có\x20trình\x20duyệt\x20để\x20đóng','338TRgqYW','\x20ko\x20có\x20aks','[xoaTimeout]worker1:\x20Xóa\x20Interval:','timeout','terminate','compareExchange','rejected','][xuLyTask]:\x20currentDateTime:\x20','][xuLyTask]:\x20vào\x20xuLyTask','\x20|\x20nextrun:\x20','Tìm','[xuLyBrowser]:\x20Không\x20mở\x20được\x20trình\x20duyệt\x20','getAllProfiles\x20','[xuLyBrowser]:\x20Bot\x20không\x20tìm\x20thấy','fisrtOpenBrowser','39XnTDIu','HostName','connect','Lỗi\x20','store','getBotAll','[checkTeleWebOpen]:\x20dataId:\x20','end','nowTime','[OpenBrowser]:\x20Processing\x20profile:\x20','wait','name','push','.js','][xuLyProfiles]:\x20Lỗi\x20khi\x20xử\x20lý\x20profile\x20','clrInterval','height','scale','countOpenTabs','\x20Action:','[xuLyGame]:\x20Thực\x20thi\x20','openUrl','[checkTeleWebOpen]:\x20vào\x20loadGame','\x20action:\x20','Không\x20tìm\x20thấy\x20indexGenP','[xuLyGame]:\x20checkTeleWebOpen\x20có\x20gì\x20đó\x20sai\x20sai\x20rồi\x20bro','connected','][xuLyProfiles]:\x20Đã\x20xử\x20lý\x20tất\x20cả\x20profiles\x20thành\x20công\x20','[checkTeleWebOpen]:\x20Không\x20thực\x20thi\x20script\x20','\x20set\x20close\x20ok','status','START\x20SCRIPT','Timeout\x20while\x20acquiring\x20lock','4926972kPXdin','https://www.google.com','2135728NKIFdu','STOP\x20SCRIPT','6038mhyGdZ','env','][xuLyProfiles]:\x20Một\x20số\x20profiles\x20gặp\x20lỗi:\x20','[checkTeleWebOpen]:\x20Lỗi\x20trong\x20quá\x20trình\x20mở\x20trang\x20:\x20','dirname','screenArr','Vào','][ERR]:\x20Lỗi\x20','][xuLyTask]profileQueue:\x20concurrency:','[xuLyTungProfile]0:\x20Kiểm\x20tra\x20màn\x20hình\x20','activateTab','default','now','\x20done','type','Fail','\x20OFF','Stop','APIKEY','\x20tab\x20đang\x20mở','\x20loop','22eHDXHG','allSettled','[worker1.procScreenArr]vào\x20close','[loadGame]:\x20Chạy\x20','[xuLyGame]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20Game:\x20','timestamp','\x20thành\x20công','load','346116JFMxSR','\x20lỗi','\x20Tele\x20K\x20OK',']:\x20START\x20SCRIPT','][xuLyProfiles]:\x20Thêm\x20profile\x20','loop\x20new\x20game','[worker1.procScreenArr]\x20posVal:','Done','6CBZyvD','setTitle','7261145hHuyeJ','[worker1.procScreenArr]action:\x20','Start','coin','[closeBrowser]:\x20Đóng\x20trình\x20duyệt\x20','[closeBrowser]:\x20Lỗi\x20khi\x20đóng\x20trình\x20duyệt\x20','[checkTeleWebOpen]:\x20Thực\x20thi\x20',':\x20XONG\x201\x20LƯỢT','pid','[checkTeleWebOpen]:\x20','\x20Api\x20mode','[OpenBrowser]]Chỉ\x20có\x20','[OpenBrowser]:\x20Lỗi\x20khi\x20mở\x20browser:\x20','addData','FistUrl','running','[eTimeout]worker1:\x20timeout','filter','message','profileThreads','nextrun','4464036hoUlqK','[eTimeout]worker1:\x20reset\x20timeout','elementExistsByXPath','url','][xuLyTask]:\x20Lỗi\x20while:\x20','browserWidthHeight','\x20không\x20trả\x20về\x20status','done','39aOfdFd','\x20Web\x20OK'];a0_0x3d23=function(){return _0x1dfdf1;};return a0_0x3d23();}import a0_0x4cb643 from'./modules/Genlogin.js';import a0_0x2a0b35 from'./modules/http.js';function a0_0x3865(_0x3582f0,_0xd3bc53){const _0x3d2363=a0_0x3d23();return a0_0x3865=function(_0x386552,_0x8df50c){_0x386552=_0x386552-0x1d6;let _0x203ae3=_0x3d2363[_0x386552];return _0x203ae3;},a0_0x3865(_0x3582f0,_0xd3bc53);}import a0_0x11ad1f from'p-queue';const __filename=fileURLToPath(import.meta[a0_0x494fad(0x202)]),__dirname=a0_0x31daf0[a0_0x494fad(0x286)](__filename);let profileQueue,genlogin,profileNameId0,profileId,http,getAllProfiles,taskInfo,GenDataProfile,screenArrData,timgame;genlogin=new a0_0x4cb643('',!![]),http=new a0_0x2a0b35(process[a0_0x494fad(0x283)][a0_0x494fad(0x210)],process['env'][a0_0x494fad(0x294)],!![]);let firstRun=!![],delayOpenProfile=0xbb8,profileTimeout=0x5265c0,botTimeout=0x5265c0,profileThreads=0x1,browserInfo={},version,screenData,tasksData,screenDataBuffer1,tasksDataBuffer1,teleId=null;const worker1=async _0x54e069=>{const _0x5f3b57=a0_0x494fad,{version0:_0x3c3204,tasksDataBuffer:_0x29d4ee,screenDataBuffer:_0x2b4a88,action:_0x38534b,task:_0x1a4ded,dataBrw:_0x5826f4,GenDataProfile0:_0x421f82,timgame0:_0x3d8df7,dataPayload:_0x4706d5,timeout:_0x3c3bd8,tele_id:_0x23a32a}=_0x54e069;taskInfo=_0x1a4ded;_0x23a32a&&_0x23a32a['tele_id']&&(teleId=_0x23a32a[_0x5f3b57(0x22f)]);screenDataBuffer1=_0x2b4a88,tasksDataBuffer1=_0x29d4ee,screenData=new Int32Array(_0x2b4a88),tasksData=new Int32Array(_0x29d4ee);try{if(_0x3c3bd8)return log(_0x5f3b57(0x233),'timeout',null,'w'),{'success':![],'error':_0x5f3b57(0x251)};else{if(_0x1a4ded!==_0x5f3b57(0x287)){version=_0x3c3204,getAllProfiles=_0x5826f4,log('worker1',_0x5f3b57(0x222)+JSON['stringify'](_0x54e069[_0x5f3b57(0x24b)]),null,'c'),log('worker1',_0x5f3b57(0x25a)+JSON[_0x5f3b57(0x246)](getAllProfiles),null,'c'),GenDataProfile=_0x421f82,timgame=_0x3d8df7,log(_0x5f3b57(0x233),'['+_0x1a4ded['name']+_0x5f3b57(0x212),null,'w');const _0x42a9ca=await xuLyTask(_0x1a4ded);return log('worker1',''+JSON[_0x5f3b57(0x246)](_0x42a9ca),null,'w'),log(_0x5f3b57(0x233),'DONE',null,'w',_0x5f3b57(0x206)),_0x42a9ca?{'success':!![],'result':_0x42a9ca}:{'success':![],'result':_0x42a9ca};}else return log(_0x5f3b57(0x233),'Lỗi\x20gì\x20đó\x20task\x20'+_0x1a4ded,null,'w'),{'success':![],'error':_0x5f3b57(0x233)};}}catch(_0x1206ee){return log('worker1',_0x5f3b57(0x260)+_0x1206ee,null,![]),{'success':![],'error':_0x5f3b57(0x233)};}};expose({'worker1':worker1});async function xuLyTask(_0x12824e){const _0x549221=a0_0x494fad;try{log('worker1','['+_0x12824e[_0x549221(0x268)]+_0x549221(0x256),null,'i','-');const _0x1146b7=await genlogin[_0x549221(0x265)](_0x549221(0x233)),_0x10f814=_0x1146b7[_0x549221(0x23a)];if(_0x10f814<_0x12824e['nextrunstamp'])return log('worker1','['+_0x12824e[_0x549221(0x268)]+'][xuLyTask]:\x20Task\x20'+JSON['stringify'](_0x12824e['name'])+'\x20chưa\x20đến\x20thời\x20gian\x20chạy',null,'i'),log(_0x549221(0x233),'['+_0x12824e[_0x549221(0x268)]+_0x549221(0x255)+JSON[_0x549221(0x246)](_0x1146b7)+_0x549221(0x257)+JSON[_0x549221(0x246)](_0x12824e[_0x549221(0x1fe)]),null,'w'),log(_0x549221(0x233),'['+_0x12824e[_0x549221(0x268)]+'][xuLyTask]:\x20currentDateTime:\x20'+JSON['stringify'](_0x10f814)+_0x549221(0x257)+JSON[_0x549221(0x246)](taskNextRunDateTime),null,'w'),log(_0x549221(0x233),'['+_0x12824e['name']+'][xuLyTask]:\x20Chờ\x205\x20giây\x20trước\x20khi\x20xử\x20lý\x20task\x20tiếp\x20theo...',null,'i'),await delay(0x1388),null;let _0x3c81f8=await http['getTask']('worker1',_0x12824e[_0x549221(0x268)]);if(_0x3c81f8[_0x549221(0x219)][_0x549221(0x227)][_0x549221(0x22d)]<=0x0){log(_0x549221(0x233),'['+_0x12824e[_0x549221(0x268)]+'][xuLyTask]:\x20không\x20lấy\x20được\x20profile',null,![]);throw new Error('No\x20profile\x20found');}firstRun&&(profileThreads=parseInt(_0x12824e[_0x549221(0x1fd)]),profileQueue=new a0_0x11ad1f({'concurrency':profileThreads}),log(_0x549221(0x233),'['+_0x12824e[_0x549221(0x268)]+_0x549221(0x28a)+profileThreads,null,'w'),firstRun=![],delayOpenProfile=parseInt(_0x12824e['delayOpenProfile'])*0x3e8,profileTimeout=parseInt(_0x12824e[_0x549221(0x221)])*0x3e8,botTimeout=parseInt(_0x12824e[_0x549221(0x248)])*0x3e8);const _0x257edb=await xuLyProfiles(_0x3c81f8[_0x549221(0x219)][_0x549221(0x227)],_0x12824e[_0x549221(0x268)]);if(!_0x257edb){log('worker1','['+_0x12824e[_0x549221(0x268)]+_0x549221(0x228)+json(_0x257edb),null,![]);throw new Error('No\x20profile\x20found');}return log(_0x549221(0x233),'['+_0x12824e[_0x549221(0x268)]+'][xuLyTask]:\x20Tasks:\x20'+_0x12824e[_0x549221(0x268)]+'\x20ok'),await delay(0x7d0),log(_0x549221(0x233),'['+_0x12824e['name']+'][xuLyTask]:\x20Hoàn\x20thành\x20xử\x20lý\x20task:\x20'+JSON[_0x549221(0x246)](_0x12824e[_0x549221(0x268)])),!![];}catch(_0x1e8a70){return log(_0x549221(0x233),'['+_0x12824e[_0x549221(0x268)]+_0x549221(0x203)+_0x1e8a70,null,![]),null;}}async function xuLyProfiles(_0x417819,_0x3eff37){const _0x1fa3e7=a0_0x494fad;try{const _0x145c83=[];for(const [_0x9564cf,_0x5e32e9]of _0x417819['entries']()){const _0x4969b0=await GenDataProfile[_0x1fa3e7(0x211)](_0xfb7162=>_0xfb7162[_0x1fa3e7(0x1f2)]===_0x5e32e9);if(_0x9564cf!==-0x1)log('worker1','['+_0x3eff37+_0x1fa3e7(0x242)+_0x4969b0);else{log(_0x1fa3e7(0x233),'['+_0x3eff37+'][xuLyProfiles]Không\x20tìm\x20thấy\x20indexGenP');throw new Error(_0x1fa3e7(0x275));}log('worker1','['+_0x3eff37+_0x1fa3e7(0x1e4)+_0x5e32e9+'\x20vào\x20hàng\x20đợi\x20max:'+profileThreads,null,'i'),_0x145c83[_0x1fa3e7(0x269)](profileQueue['add'](async()=>{const _0x3360fe=_0x1fa3e7;try{delayOpenProfile>0x0?(log('worker1','['+_0x3eff37+_0x3360fe(0x218)+_0x5e32e9+'\x20sau\x20'+delayOpenProfile+'ms',null,'w','-'),await delay(delayOpenProfile)):log(_0x3360fe(0x233),'['+_0x3eff37+_0x3360fe(0x218)+_0x5e32e9,null,'w','-'),await xuLyTungProfile(_0x5e32e9,GenDataProfile[_0x4969b0]);}catch(_0xae91d){log('worker1','['+_0x3eff37+_0x3360fe(0x26b)+_0x5e32e9+':\x20'+_0xae91d[_0x3360fe(0x1fc)],null,![]);throw _0xae91d;}})),log('worker1','['+_0x3eff37+_0x1fa3e7(0x20d)+_0x5e32e9+'\x20vào\x20hàng\x20đợi.');}const _0x3770be=await Promise[_0x1fa3e7(0x1d9)](_0x145c83),_0x510d81=_0x3770be[_0x1fa3e7(0x1fb)](_0x157c86=>_0x157c86[_0x1fa3e7(0x27b)]===_0x1fa3e7(0x254));return _0x510d81[_0x1fa3e7(0x22d)]>0x0?log(_0x1fa3e7(0x233),'['+_0x3eff37+_0x1fa3e7(0x284)+JSON[_0x1fa3e7(0x246)](_0x510d81),null,![]):log(_0x1fa3e7(0x233),'['+_0x3eff37+_0x1fa3e7(0x278)+json(_0x3770be)),!![];}catch(_0x361360){return log('worker1','['+_0x3eff37+_0x1fa3e7(0x224)+_0x361360,null,![]),null;}}async function xuLyTungProfile(_0xa567ba,_0x34a0c8){const _0x298fc9=a0_0x494fad;let _0x5421f6,_0x555266;const _0x18c6e4=_0xa567ba;let _0x555991;try{await delay(delayOpenProfile),log(_0xa567ba,_0x298fc9(0x21d),null,'i'),_0x5421f6=await genlogin[_0x298fc9(0x265)](_0xa567ba),await http[_0x298fc9(0x1f7)](_0x298fc9(0x233),_0xa567ba,_0x298fc9(0x27c),_0x5421f6[_0x298fc9(0x23a)],'','Version:'+version,_0x298fc9(0x1ec));teleId&&await http['tele'](_0xa567ba,teleId,'['+_0xa567ba+_0x298fc9(0x1e3));log(_0xa567ba,_0x298fc9(0x28b)+_0xa567ba,null,'w'),_0x555991=await procScreenArr('open',null,_0xa567ba);if(_0x555991['x']===undefined||_0x555991['y']===undefined){log(_0xa567ba,_0x298fc9(0x23f),null,![]);throw new Error(_0x298fc9(0x240));}const _0xcfd05a=await xuLyBrowser(_0xa567ba,_0x34a0c8,_0x555991);await procScreenArr(_0x298fc9(0x22b),_0x555991,_0xa567ba);const _0x4c4db9=await genlogin['tinhThoiGian'](_0x5421f6['timestamp']);return await http[_0x298fc9(0x1f7)](_0x298fc9(0x233),_0xa567ba,_0x298fc9(0x281),'','',_0x4c4db9,_0x298fc9(0x293)),teleId&&await http[_0x298fc9(0x20a)](_0xa567ba,teleId,'['+_0xa567ba+_0x298fc9(0x225)),_0xcfd05a;}catch(_0x5efc45){log(_0xa567ba,'[xuLyTungProfile]:\x20Lỗi:\x20'+_0x5efc45,null,![]);if(_0x555266)await Thread[_0x298fc9(0x252)](_0x555266);await procScreenArr('close',_0x555991,_0xa567ba);const _0x2ea706=await genlogin['tinhThoiGian'](_0x5421f6?.[_0x298fc9(0x1dd)]||Date[_0x298fc9(0x28e)]());await http['addData']('worker1',_0xa567ba,_0x298fc9(0x281),'','',_0x2ea706,_0x298fc9(0x293));teleId&&await http[_0x298fc9(0x20a)](_0xa567ba,teleId,'['+_0xa567ba+_0x298fc9(0x236));throw _0x5efc45;}}async function xuLyBrowser(_0xed99cb,_0x441735,_0x225732){const _0xce4b56=a0_0x494fad;let _0x123745;try{const _0x35fca5=_0xed99cb;if(!browserInfo[_0xed99cb])browserInfo[_0xed99cb]={};browserInfo[_0xed99cb][_0xce4b56(0x25c)]=0x0,log(_0xed99cb,_0xce4b56(0x241)+json(browserInfo),null,'w','w');if(browserInfo[_0xed99cb][_0xce4b56(0x25c)]==0x0){_0x123745=await OpenBrowser(_0xed99cb,_0x441735,_0x225732);if(!_0x123745){log(_0xed99cb,_0xce4b56(0x259)+_0xed99cb,null,![]);throw new Error(_0xce4b56(0x259)+_0xed99cb);}browserInfo[_0xed99cb]['fisrtOpenBrowser']=0x1;}if(!_0x123745[_0xce4b56(0x277)])throw new Error(_0xce4b56(0x23d)+_0xed99cb);let _0x2f162c=0x0;const _0x1f4836=await http[_0xce4b56(0x262)](_0xce4b56(0x233),_0x35fca5);if(!_0x1f4836){log(_0xed99cb,_0xce4b56(0x25b),null,![]);throw new Error('No\x20bot\x20found');}if(_0x1f4836[_0xce4b56(0x22d)]<=0x0){log(_0xed99cb,'[xuLyBrowser]:\x20không\x20lấy\x20được\x20bot',null,![]);throw new Error(_0xce4b56(0x20b));}for(const _0x2c983c of _0x1f4836){if(_0x2c983c){if(_0x2c983c['type']!=_0xce4b56(0x229))continue;if(_0x2c983c['value']===_0xce4b56(0x264)){log(_0xed99cb,_0xce4b56(0x1f1),null,'i');break;}if(!_0x2c983c[_0xce4b56(0x226)]){log(_0xed99cb,_0xce4b56(0x244)+json(_0x2c983c)+_0xce4b56(0x24f),null,![]);continue;}if(_0x2c983c['onOff']==='0'){log(_0xed99cb,_0xce4b56(0x244)+json(_0x2c983c[_0xce4b56(0x268)])+_0xce4b56(0x292),null,![]);continue;}const _0x299a39=await genlogin[_0xce4b56(0x265)](_0xed99cb);if(_0x2c983c[_0xce4b56(0x237)]>_0x299a39['timestamp']){log(_0xed99cb,_0xce4b56(0x244)+json(_0x2c983c[_0xce4b56(0x268)])+_0xce4b56(0x21e),null,'w');continue;}switch(_0x2c983c[_0xce4b56(0x226)]){case'A':log(_0xed99cb,':\x20'+json(_0x2c983c[_0xce4b56(0x268)])+'\x20Tele\x20A\x20OK'),await xuLyGame(_0x2c983c,'A',_0xed99cb,_0x441735,_0x225732,_0x123745);break;case'K':log(_0xed99cb,':\x20'+json(_0x2c983c[_0xce4b56(0x268)])+_0xce4b56(0x1e2)),await xuLyGame(_0x2c983c,'K',_0xed99cb,_0x441735,_0x225732,_0x123745);break;case'W':log(_0xed99cb,':\x20'+json(_0x2c983c[_0xce4b56(0x268)])+_0xce4b56(0x208)),await xuLyGame(_0x2c983c,'W',_0xed99cb,_0x441735,_0x225732,_0x123745);break;default:log(_0xed99cb,_0xce4b56(0x239)+json(_0x2c983c[_0xce4b56(0x226)]),null,![]);break;}log(_0xed99cb,_0xce4b56(0x214));}}return await closeBrowser(_0xed99cb,_0x123745),!![];}catch(_0x320a8e){return log(_0xed99cb,_0xce4b56(0x217)+_0x320a8e,null,![]),await closeBrowser(_0xed99cb,_0x123745),null;}}async function xuLyGame(_0x5a705e,_0x24a616,_0x16c4d8,_0x4b823b,_0x4d7983,_0x40281e){const _0x4307d8=a0_0x494fad;try{const _0x5da29a=_0x16c4d8;if(_0x5a705e[_0x4307d8(0x290)]===_0x4307d8(0x216)){log(_0x16c4d8,'[xuLyGame]:\x20'+_0x5a705e[_0x4307d8(0x268)]+_0x4307d8(0x1f4),null,'i');const _0x102a03=await genlogin[_0x4307d8(0x265)](_0x16c4d8),_0x13f87e=await http['addData'](_0x16c4d8,_0x5da29a,_0x5a705e[_0x4307d8(0x268)],_0x102a03['date'],'','StartApi',_0x4307d8(0x1f9)),_0x213cb6=_0x13f87e['ID'],_0xbfddf6={'bot':_0x5a705e,'profileNameId':_0x16c4d8,'genlogin':genlogin,'http':http,'dataId':_0x213cb6},_0xa0ffb7=await loadGameApi(_0x5a705e[_0x4307d8(0x268)],_0xbfddf6);if(!_0xa0ffb7[_0x4307d8(0x27b)])return log(_0x16c4d8,_0x4307d8(0x271)+_0x5a705e['name']+_0x4307d8(0x1e1),null,![]),await http[_0x4307d8(0x238)](_0x16c4d8,_0x5da29a,_0x213cb6,_0x4307d8(0x291),_0x4307d8(0x291)),null;if(_0xa0ffb7[_0x4307d8(0x27b)]==_0x4307d8(0x22c))return log(_0x16c4d8,_0x4307d8(0x271)+_0x5a705e[_0x4307d8(0x268)]+_0x4307d8(0x1d7),null,'i'),_0x4307d8(0x22c);if(_0xa0ffb7[_0x4307d8(0x27b)])return log(_0x16c4d8,_0x4307d8(0x271)+_0x5a705e[_0x4307d8(0x268)]+_0x4307d8(0x28f)),await http[_0x4307d8(0x20f)](_0x16c4d8,_0x5da29a,_0x5a705e['id'],_0xa0ffb7[_0x4307d8(0x213)],_0xa0ffb7[_0x4307d8(0x237)]),await http[_0x4307d8(0x238)](_0x16c4d8,_0x5da29a,_0x213cb6,'Ok',_0x4307d8(0x1e7),_0xa0ffb7[_0x4307d8(0x1ed)],_0xa0ffb7[_0x4307d8(0x213)]),!![];}else{log(_0x16c4d8,'[xuLyGame]:\x20'+_0x5a705e['name']+'\x20Script\x20mode',null,'i');const _0x4e5db3=await http[_0x4307d8(0x21f)](_0x16c4d8,_0x24a616);if(_0x4e5db3){log(_0x16c4d8,_0x4307d8(0x21a));let _0x27c5c1=0x0;while(_0x27c5c1<0x2){const _0x590f24=await checkTeleWebOpen(_0x5a705e,_0x4e5db3,_0x16c4d8,_0x4d7983,_0x40281e);if(_0x590f24==='loop')_0x27c5c1++,log(_0x16c4d8,_0x4307d8(0x232)+_0x27c5c1+'/2',null,'i'),await delay(0x3e8);else return _0x590f24?(log(_0x16c4d8,_0x4307d8(0x231)),!![]):(log(_0x16c4d8,_0x4307d8(0x276),null,![]),null);}return log(_0x16c4d8,'[xuLyGame]:Max\x20loop\x20rồi\x20bro',null,![]),null;}}}catch(_0x4201a2){return log(_0x16c4d8,_0x4307d8(0x1dc)+_0x4201a2,null,![]),null;}}async function OpenBrowser(_0x64fbeb,_0x5983b4,_0x578030){const _0x41e615=a0_0x494fad;try{const _0x3045ae=_0x64fbeb;log(_0x64fbeb,_0x41e615(0x266)+JSON[_0x41e615(0x246)](_0x64fbeb),null,'i');if(getAllProfiles['autoSetBrowserPosition']==='n'){const _0x2db1ef=getAllProfiles['customBrowserPosition']['split']('x');parseInt(_0x2db1ef[0x0])>=0x0&&parseInt(_0x2db1ef[0x1])>=0x0?(_0x578030['x']=parseInt(_0x2db1ef[0x0]),_0x578030['y']=parseInt(_0x2db1ef[0x1])):(_0x578030['x']=0x0,_0x578030['y']=0x0),log(_0x64fbeb,'[OpenBrowser]:force\x20set\x20Position:\x20'+_0x578030['x']+'x'+_0x578030['y'],null,'w');}const _0x27930c=await genlogin[_0x41e615(0x25f)](_0x64fbeb,getAllProfiles,_0x5983b4,_0x578030);log(_0x64fbeb,'[OpenBrowser]:\x20GenLogin:\x20'+JSON[_0x41e615(0x246)](_0x27930c),null,'i'),await delay(0x1388);if(_0x27930c){let _0x466ba2=0x0;const _0x53721a=0xa;while(_0x466ba2<_0x53721a){_0x466ba2++;const _0x40731c=await genlogin[_0x41e615(0x26f)](_0x64fbeb,_0x27930c);if(_0x40731c<=0x1)return log(_0x64fbeb,_0x41e615(0x1f5)+_0x40731c+_0x41e615(0x1d6),null,'i'),_0x27930c;const _0x137716=await genlogin['closeTab'](_0x64fbeb,_0x27930c,_0x40731c-0x1,0xbb8);if(!_0x137716){log(_0x64fbeb,_0x41e615(0x20e),null,![]);continue;}log(_0x64fbeb,_0x41e615(0x24a)),await delay(0xbb8);continue;}}return log(_0x64fbeb,_0x41e615(0x1f6)+JSON['stringify'](_0x64fbeb)),null;}catch(_0x8d7a9b){throw new Error('Lỗi\x20xử\x20lý\x20profile:\x20'+_0x8d7a9b[_0x41e615(0x1fc)]);}}async function checkTeleWebOpen(_0x1893bc,_0x501f79,_0x239428,_0x57dcfc,_0x16603b){const _0x4b8f73=a0_0x494fad;let _0x547124;try{let _0x5ebe57=await genlogin[_0x4b8f73(0x28c)](_0x239428,_0x16603b,0x0,getAllProfiles[_0x4b8f73(0x204)],_0x57dcfc['scale']);const _0xeaa558=await genlogin[_0x4b8f73(0x201)](_0x239428,_0x5ebe57,_0x501f79['InputSearch'],0x7d0);!_0xeaa558&&(await genlogin[_0x4b8f73(0x272)](_0x239428,_0x5ebe57,_0x4b8f73(0x27f),0xea60),await delay(0x7d0),await genlogin[_0x4b8f73(0x272)](_0x239428,_0x5ebe57,_0x501f79[_0x4b8f73(0x1f8)],0xea60),await genlogin[_0x4b8f73(0x1e9)](_0x239428,_0x5ebe57,_0x239428),await delay(0x1388));log(_0x239428,_0x4b8f73(0x273),null,'i');const _0x4c13e2=await genlogin[_0x4b8f73(0x265)](_0x239428),_0x5c2499=await http[_0x4b8f73(0x1f7)](_0x239428,_0x239428,_0x1893bc[_0x4b8f73(0x268)],_0x4c13e2['date'],'',_0x4b8f73(0x1ec),_0x4b8f73(0x1f9));_0x547124=_0x5c2499['ID'];const _0x3666da={'firstPage':_0x5ebe57,'bot':_0x1893bc,'profileNameId':_0x239428,'getAks':_0x501f79,'genlogin':genlogin,'http':http,'browser':_0x16603b,'dataId':_0x5c2499['ID'],'taskIndex':taskInfo[_0x4b8f73(0x243)],'screenDataBuffer2':screenDataBuffer1,'tasksDataBuffer2':tasksDataBuffer1};let _0x2cc4de=null;log(_0x239428,_0x4b8f73(0x263)+json(_0x547124),null,'i');if(timgame){await http[_0x4b8f73(0x238)](_0x239428,_0x239428,_0x547124,_0x4b8f73(0x258));const _0x673b0b=await loadGame(_0x4b8f73(0x215),_0x3666da,_0x2cc4de,_0x547124,_0x239428);if(_0x673b0b[_0x4b8f73(0x27b)]=='loop')return log(_0x239428,_0x4b8f73(0x1f0)+_0x1893bc[_0x4b8f73(0x268)]+_0x4b8f73(0x1d7),null,'i'),await http[_0x4b8f73(0x238)](_0x239428,_0x239428,_0x547124,_0x4b8f73(0x1e5)),'loop';else{if(!_0x673b0b)return log(_0x239428,_0x4b8f73(0x234)+_0x1893bc[_0x4b8f73(0x268)],null,![]),await http[_0x4b8f73(0x238)](_0x239428,_0x239428,_0x547124,_0x4b8f73(0x291),'Fail'),null;}_0x673b0b[_0x4b8f73(0x25e)]&&(_0x2cc4de=_0x673b0b[_0x4b8f73(0x25e)]);}await http[_0x4b8f73(0x238)](_0x239428,_0x239428,_0x547124,_0x4b8f73(0x288));const _0x3c22b4=await loadGame(_0x1893bc['name'],_0x3666da,_0x2cc4de,_0x547124,_0x239428);if(!_0x3c22b4[_0x4b8f73(0x27b)])return log(_0x239428,_0x4b8f73(0x279)+_0x1893bc[_0x4b8f73(0x268)],null,![]),log(_0x239428,_0x4b8f73(0x1f3)+json(_0x3c22b4),null,![]),await http['updateData'](_0x239428,_0x239428,_0x547124,_0x4b8f73(0x291),_0x4b8f73(0x291)),null;else{if(_0x3c22b4['status']==_0x4b8f73(0x22c))return log(_0x239428,'[checkTeleWebOpen]:\x20Thực\x20thi\x20'+_0x1893bc[_0x4b8f73(0x268)]+_0x4b8f73(0x1d7),null,'i'),await http[_0x4b8f73(0x238)](_0x239428,_0x239428,_0x547124,_0x4b8f73(0x22c)),_0x4b8f73(0x22c);}return await http[_0x4b8f73(0x20f)](_0x239428,_0x239428,_0x1893bc['id'],_0x3c22b4[_0x4b8f73(0x213)],_0x3c22b4[_0x4b8f73(0x237)]),await http['updateData'](_0x239428,_0x239428,_0x547124,'Ok','Done',_0x3c22b4[_0x4b8f73(0x1ed)],_0x3c22b4[_0x4b8f73(0x213)]),log(_0x239428,_0x4b8f73(0x247)+_0x1893bc[_0x4b8f73(0x268)]+_0x4b8f73(0x1de)),await delay(0x7d0),!![];}catch(_0x5aaf06){return log(_0x239428,_0x4b8f73(0x285)+_0x5aaf06,null,![]),await http['updateData'](_0x239428,_0x239428,_0x547124,_0x4b8f73(0x291),_0x4b8f73(0x291)),null;}}async function loadGame(_0x4dc8e5,_0x52380b,_0x367382,_0x297451,_0x134442){const _0x3f7ea4=a0_0x494fad;try{const _0x52f81d=pathToFileURL(a0_0x31daf0[_0x3f7ea4(0x230)](__dirname,'scripts',_0x4dc8e5+_0x3f7ea4(0x26a)))[_0x3f7ea4(0x21c)];log(_0x134442,'[loadGame]:scriptPath\x20'+_0x52f81d);const _0x20017d=await import(_0x52f81d);if(typeof _0x20017d[_0x3f7ea4(0x28d)]==='function'){const _0x2efca6=await _0x20017d['default'](_0x52380b,_0x367382);await delay(0x3e8);if(!_0x2efca6['status'])return log(_0x134442,_0x3f7ea4(0x23b)+_0x4dc8e5+_0x3f7ea4(0x205),null,![]),null;else return _0x2efca6[_0x3f7ea4(0x27b)]===_0x3f7ea4(0x22c)?(log(_0x134442,_0x3f7ea4(0x1db)+_0x4dc8e5+_0x3f7ea4(0x1d7),null,'i'),_0x2efca6):(log(_0x134442,_0x3f7ea4(0x1db)+_0x4dc8e5+'\x20'+_0x2efca6[_0x3f7ea4(0x27b)],null,'i'),_0x2efca6);}else return await delay(0x3e8),log(_0x134442,_0x3f7ea4(0x23b)+_0x4dc8e5+_0x3f7ea4(0x20c),null,![]),null;}catch(_0x1cc006){return log(_0x134442,'[loadGame]:\x20Lỗi\x20khi\x20load\x20và\x20thực\x20thi\x20script\x20'+_0x4dc8e5+':\x20'+_0x1cc006,null,![]),teleId&&await http[_0x3f7ea4(0x20a)](_0x134442,teleId,'['+_0x134442+']['+_0x4dc8e5+_0x3f7ea4(0x289)+_0x1cc006),null;}}async function closeBrowser(_0x231046='',_0x18b4be){const _0xfe48e4=a0_0x494fad;try{if(_0x18b4be){if(_0x18b4be[_0xfe48e4(0x277)])return await _0x18b4be[_0xfe48e4(0x22b)](),log(_0x231046,_0xfe48e4(0x1ee)+_0x231046+'\x20thành\x20công',null,'w'),!![];}else log(_0x231046,_0xfe48e4(0x24d),null,'i');return null;}catch(_0x49e2ce){return log(_0x231046,_0xfe48e4(0x1ef)+_0x231046+':\x20'+_0x49e2ce,null,![]),null;}}async function procScreenArr(_0x155c6a,_0x26c741,_0xde95bc){const _0x43f4f0=a0_0x494fad;try{await acquireLock(screenData);let _0x3d63df={};log(_0xde95bc,_0x43f4f0(0x1eb)+_0x155c6a+',\x20pos:\x20'+json(_0x26c741),null,'w','-');if(_0x155c6a===_0x43f4f0(0x22a)){log(_0xde95bc,'[worker1.procScreenArr]vào\x20open',null,'w'),_0x3d63df[_0x43f4f0(0x26e)]=Atomics[_0x43f4f0(0x1df)](screenData,0x1)/0xf4240,_0x3d63df['width']=Atomics[_0x43f4f0(0x1df)](screenData,0x2),_0x3d63df[_0x43f4f0(0x26d)]=Atomics[_0x43f4f0(0x1df)](screenData,0x3);for(let _0x3535d1=0xa;_0x3535d1<screenData[_0x43f4f0(0x22d)]-0x1;_0x3535d1=_0x3535d1+0x3){const _0x2f7030=Atomics[_0x43f4f0(0x1df)](screenData,_0x3535d1);if(_0x2f7030===0x2)return Atomics[_0x43f4f0(0x261)](screenData,_0x3535d1,0x1),_0x3d63df[_0x43f4f0(0x28d)]=0x0,_0x3d63df['x']=Atomics[_0x43f4f0(0x1df)](screenData,_0x3535d1+0x1),_0x3d63df['y']=Atomics[_0x43f4f0(0x1df)](screenData,_0x3535d1+0x2),log(_0xde95bc,'[worker1.procScreenArr]\x20index:'+_0x3535d1+_0x43f4f0(0x235)+json(_0x3d63df),null,'w'),await releaseLock(screenData),_0x3d63df;if(_0x2f7030===0x0)return Atomics[_0x43f4f0(0x261)](screenData,_0x3535d1,0x1),_0x3d63df[_0x43f4f0(0x28d)]=0x1,_0x3d63df['x']=0x0,_0x3d63df['y']=0x0,log(_0xde95bc,'[worker1.procScreenArr]\x20index:'+_0x3535d1+_0x43f4f0(0x223)+json(_0x3d63df),null,'w'),await releaseLock(screenData),_0x3d63df;}await releaseLock(screenData);throw new Error(_0x43f4f0(0x23c));}else{if(_0x155c6a===_0x43f4f0(0x22b)&&_0x26c741['x']>=0x0&&_0x26c741['y']>=0x0){log(_0xde95bc,_0x43f4f0(0x1da),null,'w');if(_0x26c741['default']===0x1)return log(_0xde95bc,_0x43f4f0(0x21b),null,'w'),await releaseLock(screenData),!![];for(let _0x25f3b2=0xa;_0x25f3b2<screenData[_0x43f4f0(0x22d)]-0x1;_0x25f3b2+=0x3){const _0x5020ae=Atomics[_0x43f4f0(0x1df)](screenData,_0x25f3b2);if(_0x5020ae===0x1){const _0x74b7a5=Atomics[_0x43f4f0(0x1df)](screenData,_0x25f3b2+0x1),_0x6207f7=Atomics['load'](screenData,_0x25f3b2+0x2);if(_0x74b7a5===_0x26c741['x']&&_0x6207f7===_0x26c741['y'])return Atomics[_0x43f4f0(0x261)](screenData,_0x25f3b2,0x2),log(_0xde95bc,_0x43f4f0(0x24c)+_0x25f3b2+_0x43f4f0(0x27a),null,'w'),Atomics[_0x43f4f0(0x209)](screenData,_0x25f3b2),await releaseLock(screenData),!![];}}await releaseLock(screenData);throw new Error('Không\x20thể\x20đóng\x20màn\x20hình:\x20vị\x20trí\x20không\x20hợp\x20lệ\x20action:\x20'+_0x155c6a+_0x43f4f0(0x22e)+json(_0x26c741));}else return log(_0xde95bc,_0x43f4f0(0x1e6)+json(_0x26c741)+_0x43f4f0(0x270)+_0x155c6a,null,'w'),await releaseLock(screenData),!![];}}catch(_0x11768e){return log(_0xde95bc,'[worker1.procScreenArr]lỗi\x20'+_0x11768e+_0x43f4f0(0x274)+_0x155c6a+',\x20pos:\x20'+json(_0x26c741),null,![]),await releaseLock(screenData),![];}}async function acquireLock(_0x5398d6,_0xf04f0c=0x7530){const _0x1ad18c=a0_0x494fad,_0x3bb028=Date[_0x1ad18c(0x28e)]();while(Atomics[_0x1ad18c(0x253)](_0x5398d6,0x8,0x0,0x1)!==0x0){if(Date['now']()-_0x3bb028>_0xf04f0c)throw new Error(_0x1ad18c(0x27d));Atomics[_0x1ad18c(0x267)](_0x5398d6,0x8,0x1,_0xf04f0c);}}async function releaseLock(_0x2fce48){const _0x514e37=a0_0x494fad;Atomics[_0x514e37(0x261)](_0x2fce48,0x8,0x0),Atomics[_0x514e37(0x209)](_0x2fce48,0x8);}async function xoaTimeout(_0x46557f){const _0x428c13=a0_0x494fad;try{clearTimeout(_0x46557f),log('[xoaTimeout]worker1:\x20Xóa\x20timeout:'+_0x46557f,null,'i',_0x428c13(0x220));}catch(_0x5ded08){log(_0x428c13(0x245)+_0x5ded08,null,![]);}}async function xoaInterval(_0x54b896){const _0xc6c780=a0_0x494fad;try{clearInterval(_0x54b896),log(_0xc6c780(0x250)+_0x54b896,null,'i',_0xc6c780(0x26c));}catch(_0x553750){log('[xoaTimeout]worker1:\x20'+_0x553750,null,![]);}}async function delay(_0x5a0677){return new Promise(async _0x2f39ed=>{setTimeout(_0x2f39ed,_0x5a0677);});}async function eTimeout(){const _0x2b4415=a0_0x494fad;return log(_0x2b4415(0x1fa),null,'w'),Atomics[_0x2b4415(0x261)](tasksData,taskInfo[_0x2b4415(0x243)],0x1),!![];}async function cTimeout(){const _0x1187e8=a0_0x494fad;if(Atomics[_0x1187e8(0x1df)](tasksData,taskInfo[_0x1187e8(0x243)])===0x1)return!![];return null;}async function rstTimeout(){const _0x98a34e=a0_0x494fad;return log(_0x98a34e(0x200),null,'w'),Atomics['compareExchange'](tasksData,taskInfo[_0x98a34e(0x243)],0x1,0x2),!![];}
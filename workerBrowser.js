const a0_0x3d3ec3=a0_0x3c3d;(function(_0x811491,_0x59df7d){const _0x33626f=a0_0x3c3d,_0x2763cd=_0x811491();while(!![]){try{const _0x5f019f=-parseInt(_0x33626f(0xfd))/0x1*(-parseInt(_0x33626f(0xb4))/0x2)+parseInt(_0x33626f(0x136))/0x3*(-parseInt(_0x33626f(0x98))/0x4)+-parseInt(_0x33626f(0x110))/0x5+parseInt(_0x33626f(0x148))/0x6*(-parseInt(_0x33626f(0x155))/0x7)+parseInt(_0x33626f(0x137))/0x8+parseInt(_0x33626f(0x122))/0x9*(-parseInt(_0x33626f(0x132))/0xa)+parseInt(_0x33626f(0xb6))/0xb;if(_0x5f019f===_0x59df7d)break;else _0x2763cd['push'](_0x2763cd['shift']());}catch(_0x1608b6){_0x2763cd['push'](_0x2763cd['shift']());}}}(a0_0xb97a,0x3f66f));import'dotenv/config';import a0_0x4d4ae0 from'fs';import a0_0xf43d58 from'path';import{fileURLToPath,pathToFileURL}from'url';import{expose}from'threads/worker';import{log,json}from'./modules/logger.js';import a0_0x8320da from'./modules/Genlogin.js';import a0_0x5a29ec from'./modules/http.js';import a0_0x378195 from'p-queue';const __filename=fileURLToPath(import.meta[a0_0x3d3ec3(0x12e)]),__dirname=a0_0xf43d58[a0_0x3d3ec3(0xf4)](__filename);let profileQueue,genlogin,http,getAllProfiles,taskInfo,GenDataProfile,timgame;genlogin=new a0_0x8320da('',!![]),http=new a0_0x5a29ec(process[a0_0x3d3ec3(0x92)][a0_0x3d3ec3(0x11d)],process[a0_0x3d3ec3(0x92)][a0_0x3d3ec3(0x100)],!![]);let firstRun=!![],delayOpenProfile=0xbb8,profileTimeout=0x5265c0,botTimeout=0x5265c0,profileThreads=0x1,browserInfo={},version,screenData,tasksData,screenDataBuffer1,tasksDataBuffer1,teleId=null;const worker1=async _0x2a8282=>{const _0x2b84d3=a0_0x3d3ec3,{version0:_0x758b59,tasksDataBuffer:_0x206b0c,screenDataBuffer:_0xed24d6,action:_0x30ba03,task:_0x5e58da,dataBrw:_0x36a9b1,GenDataProfile0:_0x10e21a,timgame0:_0x288d8f,timeout:_0x2223ee,tele_id:_0x7a75a7}=_0x2a8282;taskInfo=_0x5e58da;_0x7a75a7&&_0x7a75a7[_0x2b84d3(0xa9)]&&(teleId=_0x7a75a7[_0x2b84d3(0xa9)]);screenDataBuffer1=_0xed24d6,tasksDataBuffer1=_0x206b0c,screenData=new Int32Array(_0xed24d6),tasksData=new Int32Array(_0x206b0c);try{if(_0x2223ee)return log('worker1','timeout',null,'w'),await clearVar(),{'success':![],'error':_0x2b84d3(0x121)};else{if(_0x5e58da!==_0x2b84d3(0x141)){version=_0x758b59,getAllProfiles=_0x36a9b1,log(_0x2b84d3(0x131),_0x2b84d3(0xbf)+JSON[_0x2b84d3(0x105)](_0x2a8282[_0x2b84d3(0x104)]),null,'c'),log(_0x2b84d3(0x131),_0x2b84d3(0xf8)+JSON[_0x2b84d3(0x105)](getAllProfiles),null,'c'),GenDataProfile=_0x10e21a,timgame=_0x288d8f,log(_0x2b84d3(0x131),'['+_0x5e58da[_0x2b84d3(0x11f)]+']:\x20Script\x20Mode',null,'w');const _0xf57f05=await xuLyTask(_0x5e58da,_0x36a9b1);return log(_0x2b84d3(0x131),''+JSON[_0x2b84d3(0x105)](_0xf57f05),null,'w'),log(_0x2b84d3(0x131),'DONE',null,'w',_0x2b84d3(0xca)),await clearVar(),_0xf57f05?{'success':!![],'result':_0xf57f05}:{'success':![],'result':_0xf57f05};}else return log('worker1',_0x2b84d3(0x14b)+_0x5e58da,null,'w'),await clearVar(),{'success':![],'error':_0x2b84d3(0x131)};}}catch(_0x562ba2){return log('worker1',_0x2b84d3(0x151)+_0x562ba2,null,![]),await clearVar(),{'success':![],'error':_0x2b84d3(0x131)};}};expose({'worker1':worker1});async function clearVar(){return genlogin=null,http=null,!![];}async function xuLyTask(_0x33105c,_0x5d4418){const _0x330f7e=a0_0x3d3ec3;try{log(_0x330f7e(0x131),'['+_0x33105c['name']+_0x330f7e(0xa8),null,'i','-');const _0x552db2=await genlogin[_0x330f7e(0xdf)](_0x330f7e(0x131)),_0x42737c=_0x552db2[_0x330f7e(0xb7)];if(_0x42737c<_0x33105c[_0x330f7e(0x99)])return log(_0x330f7e(0x131),'['+_0x33105c[_0x330f7e(0x11f)]+_0x330f7e(0xed)+JSON[_0x330f7e(0x105)](_0x33105c[_0x330f7e(0x11f)])+_0x330f7e(0x101),null,'i'),log(_0x330f7e(0x131),'['+_0x33105c[_0x330f7e(0x11f)]+'][xuLyTask]:\x20currentDateTime:\x20'+JSON[_0x330f7e(0x105)](_0x552db2)+_0x330f7e(0xdc)+JSON['stringify'](_0x33105c[_0x330f7e(0xd4)]),null,'w'),log(_0x330f7e(0x131),'['+_0x33105c[_0x330f7e(0x11f)]+_0x330f7e(0x149)+JSON[_0x330f7e(0x105)](_0x42737c)+_0x330f7e(0xdc)+JSON[_0x330f7e(0x105)](taskNextRunDateTime),null,'w'),log(_0x330f7e(0x131),'['+_0x33105c[_0x330f7e(0x11f)]+_0x330f7e(0xd8),null,'i'),await delay(0x1388),null;let _0x4a8263=await http[_0x330f7e(0x106)](_0x330f7e(0x131),_0x33105c['name']);if(_0x4a8263[_0x330f7e(0xc9)]['profiles'][_0x330f7e(0xee)]<=0x0){log('worker1','['+_0x33105c['name']+'][xuLyTask]:\x20không\x20lấy\x20được\x20profile',null,![]);throw new Error('No\x20profile\x20found');}firstRun&&(profileThreads=parseInt(_0x33105c[_0x330f7e(0x159)]),profileQueue=new a0_0x378195({'concurrency':profileThreads}),log(_0x330f7e(0x131),'['+_0x33105c['name']+_0x330f7e(0xb0)+profileThreads,null,'w'),firstRun=![],delayOpenProfile=parseInt(_0x33105c[_0x330f7e(0x144)])*0x3e8,profileTimeout=parseInt(_0x33105c[_0x330f7e(0xde)])*0x3e8,botTimeout=parseInt(_0x33105c[_0x330f7e(0x10b)])*0x3e8);const _0x4fe1a6=await xuLyProfiles(_0x4a8263[_0x330f7e(0xc9)][_0x330f7e(0xd1)],_0x33105c[_0x330f7e(0x11f)],_0x5d4418);if(!_0x4fe1a6){log(_0x330f7e(0x131),'['+_0x33105c[_0x330f7e(0x11f)]+_0x330f7e(0xc1)+json(_0x4fe1a6),null,![]);throw new Error(_0x330f7e(0x97));}return log(_0x330f7e(0x131),'['+_0x33105c['name']+'][xuLyTask]:\x20Tasks:\x20'+_0x33105c[_0x330f7e(0x11f)]+_0x330f7e(0xec)),await delay(0x7d0),log('worker1','['+_0x33105c['name']+'][xuLyTask]:\x20Hoàn\x20thành\x20xử\x20lý\x20task:\x20'+JSON[_0x330f7e(0x105)](_0x33105c['name'])),!![];}catch(_0x52a824){return log(_0x330f7e(0x131),'['+_0x33105c[_0x330f7e(0x11f)]+_0x330f7e(0xa2)+_0x52a824,null,![]),null;}}async function xuLyProfiles(_0x3ac18b,_0x5ae83a,_0x419fb2){const _0xd39584=a0_0x3d3ec3;try{const _0xde41fa=[];for(const [_0x1229ff,_0x3dae13]of _0x3ac18b[_0xd39584(0x127)]()){const _0x1c785a=await GenDataProfile[_0xd39584(0x112)](_0x286b1b=>_0x286b1b['pid']===_0x3dae13);if(_0x1229ff!==-0x1)log(_0xd39584(0x131),'['+_0x5ae83a+'][xuLyProfiles]index:\x20'+_0x1c785a);else{log('worker1','['+_0x5ae83a+_0xd39584(0xf0));throw new Error(_0xd39584(0x129));}log('worker1','['+_0x5ae83a+_0xd39584(0xad)+_0x3dae13+_0xd39584(0x120)+profileThreads,null,'i'),_0xde41fa[_0xd39584(0x154)](profileQueue['add'](async()=>{const _0x2ff00b=_0xd39584;try{delayOpenProfile>0x0?(log('worker1','['+_0x5ae83a+_0x2ff00b(0xe0)+_0x3dae13+'\x20sau\x20'+delayOpenProfile+'ms',null,'w','-'),await delay(delayOpenProfile)):log(_0x2ff00b(0x131),'['+_0x5ae83a+_0x2ff00b(0xe0)+_0x3dae13,null,'w','-'),await xuLyTungProfile(_0x3dae13,GenDataProfile[_0x1c785a],_0x419fb2);}catch(_0x1faa67){log(_0x2ff00b(0x131),'['+_0x5ae83a+'][xuLyProfiles]:\x20Lỗi\x20khi\x20xử\x20lý\x20profile\x20'+_0x3dae13+':\x20'+_0x1faa67[_0x2ff00b(0x11e)],null,![]);throw _0x1faa67;}})),log(_0xd39584(0x131),'['+_0x5ae83a+_0xd39584(0xfb)+_0x3dae13+'\x20vào\x20hàng\x20đợi.');}const _0x7a9566=await Promise[_0xd39584(0xd9)](_0xde41fa),_0x549206=_0x7a9566[_0xd39584(0xf1)](_0x33d1a2=>_0x33d1a2[_0xd39584(0x126)]==='rejected');return _0x549206[_0xd39584(0xee)]>0x0?log(_0xd39584(0x131),'['+_0x5ae83a+_0xd39584(0xe1)+JSON[_0xd39584(0x105)](_0x549206),null,![]):log(_0xd39584(0x131),'['+_0x5ae83a+_0xd39584(0xa5)+json(_0x7a9566)),!![];}catch(_0x2146a0){return log('worker1','['+_0x5ae83a+_0xd39584(0xcd)+_0x2146a0,null,![]),null;}}async function xuLyTungProfile(_0x4b7135,_0x3c3362,_0x46fada){const _0x283a95=a0_0x3d3ec3;let _0x38e448,_0x51bea6;const _0x3fdcf7=_0x4b7135;let _0x543d34;try{await delay(delayOpenProfile),log(_0x4b7135,_0x283a95(0xc5),null,'i'),_0x38e448=await genlogin[_0x283a95(0xdf)](_0x4b7135),await http[_0x283a95(0xdd)](_0x283a95(0x131),_0x4b7135,_0x283a95(0xfe),_0x38e448[_0x283a95(0xb7)],'',_0x283a95(0xd0)+version,_0x283a95(0x10e));teleId&&await http[_0x283a95(0x139)](_0x4b7135,teleId,'['+_0x4b7135+_0x283a95(0xbd));log(_0x4b7135,'[xuLyTungProfile]0:\x20Kiểm\x20tra\x20màn\x20hình\x20'+_0x4b7135,null,'w'),_0x543d34=await procScreenArr(_0x283a95(0x8c),null,_0x4b7135);if(_0x543d34['x']===undefined||_0x543d34['y']===undefined){log(_0x4b7135,_0x283a95(0xae),null,![]);throw new Error(_0x283a95(0xd7));}const _0x56e2c9=await xuLyBrowser(_0x4b7135,_0x3c3362,_0x543d34,_0x46fada);await procScreenArr(_0x283a95(0x8d),_0x543d34,_0x4b7135);const _0x1e7696=await genlogin[_0x283a95(0xce)](_0x38e448['timestamp']);return await http['addData']('worker1',_0x4b7135,_0x283a95(0x10d),'','',_0x1e7696,_0x283a95(0x8f)),teleId&&await http[_0x283a95(0x139)](_0x4b7135,teleId,'['+_0x4b7135+'][OK]:\x20STOP\x20SCRIPT'),_0x56e2c9;}catch(_0x3b52f0){log(_0x4b7135,_0x283a95(0x102)+_0x3b52f0,null,![]);if(_0x51bea6)await Thread[_0x283a95(0x150)](_0x51bea6);await procScreenArr(_0x283a95(0x8d),_0x543d34,_0x4b7135);const _0x3f9c73=await genlogin['tinhThoiGian'](_0x38e448?.[_0x283a95(0x12b)]||Date[_0x283a95(0x108)]());await http[_0x283a95(0xdd)](_0x283a95(0x131),_0x4b7135,_0x283a95(0x10d),'','',_0x3f9c73,'Stop');teleId&&await http[_0x283a95(0x139)](_0x4b7135,teleId,'['+_0x4b7135+_0x283a95(0x9e));throw _0x3b52f0;}}async function xuLyBrowser(_0x3fe6d9,_0x59d26a,_0x47d567,_0x44f9df){const _0x207d61=a0_0x3d3ec3;let _0x147e7a;try{const _0x281d74=_0x3fe6d9;if(!browserInfo[_0x3fe6d9])browserInfo[_0x3fe6d9]={};browserInfo[_0x3fe6d9][_0x207d61(0xe7)]=0x0,log(_0x3fe6d9,_0x207d61(0x146)+json(browserInfo),null,'w','w');if(browserInfo[_0x3fe6d9][_0x207d61(0xe7)]==0x0){_0x147e7a=await OpenBrowser(_0x3fe6d9,_0x59d26a,_0x47d567,_0x44f9df);if(!_0x147e7a){log(_0x3fe6d9,_0x207d61(0x13d)+_0x3fe6d9,null,![]);throw new Error(_0x207d61(0x13d)+_0x3fe6d9);}browserInfo[_0x3fe6d9][_0x207d61(0xe7)]=0x1;}if(!_0x147e7a[_0x207d61(0xa0)])throw new Error(_0x207d61(0x11c)+_0x3fe6d9);let _0x3fcc20=0x0;const _0x586051=await http[_0x207d61(0x125)](_0x207d61(0x131),_0x281d74);if(!_0x586051){log(_0x3fe6d9,_0x207d61(0x12a),null,![]);throw new Error(_0x207d61(0x90));}if(_0x586051['length']<=0x0){log(_0x3fe6d9,_0x207d61(0x9f),null,![]);throw new Error(_0x207d61(0x90));}for(const _0x136a55 of _0x586051){if(_0x136a55){if(_0x136a55[_0x207d61(0x11a)]!=_0x207d61(0xb8))continue;if(_0x136a55[_0x207d61(0xc9)]===_0x207d61(0x9a)){log(_0x3fe6d9,_0x207d61(0x117),null,'i');break;}if(!_0x136a55[_0x207d61(0x14a)]){log(_0x3fe6d9,_0x207d61(0x158)+json(_0x136a55)+_0x207d61(0xb9),null,![]);continue;}if(_0x136a55[_0x207d61(0xa4)]==='0'){log(_0x3fe6d9,_0x207d61(0x158)+json(_0x136a55['name'])+'\x20OFF',null,![]);continue;}const _0x31aad1=await genlogin[_0x207d61(0xdf)](_0x3fe6d9);if(_0x136a55[_0x207d61(0x14d)]>_0x31aad1[_0x207d61(0x12b)]){log(_0x3fe6d9,_0x207d61(0x158)+json(_0x136a55[_0x207d61(0x11f)])+_0x207d61(0x153),null,'w');continue;}switch(_0x136a55['aks']){case'A':log(_0x3fe6d9,':\x20'+json(_0x136a55['name'])+_0x207d61(0xd3)),await xuLyGame(_0x136a55,'A',_0x3fe6d9,_0x59d26a,_0x47d567,_0x147e7a,_0x44f9df);break;case'K':log(_0x3fe6d9,':\x20'+json(_0x136a55[_0x207d61(0x11f)])+_0x207d61(0xf5)),await xuLyGame(_0x136a55,'K',_0x3fe6d9,_0x59d26a,_0x47d567,_0x147e7a,_0x44f9df);break;case'W':log(_0x3fe6d9,':\x20'+json(_0x136a55[_0x207d61(0x11f)])+_0x207d61(0xf2)),await xuLyGame(_0x136a55,'W',_0x3fe6d9,_0x59d26a,_0x47d567,_0x147e7a,_0x44f9df);break;default:log(_0x3fe6d9,_0x207d61(0x157)+json(_0x136a55['aks']),null,![]);break;}log(_0x3fe6d9,_0x207d61(0xcf));}}return await closeBrowser(_0x3fe6d9,_0x147e7a),!![];}catch(_0x513edf){return log(_0x3fe6d9,'[xuLyBrowser]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20browser:\x20'+_0x513edf,null,![]),log(_0x3fe6d9,_0x207d61(0xe6)+json(_0x44f9df),null,'w','w'),await closeBrowser(_0x3fe6d9,_0x147e7a),null;}}async function xuLyGame(_0x366421,_0x15020c,_0x2ecf57,_0x3e591e,_0x45aecf,_0x3ae4be,_0x124ef2){const _0x5efa70=a0_0x3d3ec3;try{const _0x3c433a=_0x2ecf57;if(_0x366421['type']===_0x5efa70(0xbc)){log(_0x2ecf57,_0x5efa70(0x95)+_0x366421[_0x5efa70(0x11f)]+_0x5efa70(0xc0),null,'i');const _0x595f00=await genlogin[_0x5efa70(0xdf)](_0x2ecf57),_0x6d2711=await http['addData'](_0x2ecf57,_0x3c433a,_0x366421[_0x5efa70(0x11f)],_0x595f00[_0x5efa70(0xb7)],'',_0x5efa70(0xa6),_0x5efa70(0xc2)),_0x550551=_0x6d2711['ID'],_0x590458={'bot':_0x366421,'profileNameId':_0x2ecf57,'genlogin':genlogin,'http':http,'dataId':_0x550551},_0xa05cd4=await loadGameApi(_0x366421['name'],_0x590458);if(!_0xa05cd4['status'])return log(_0x2ecf57,_0x5efa70(0xeb)+_0x366421['name']+_0x5efa70(0xbe),null,![]),await http[_0x5efa70(0x119)](_0x2ecf57,_0x3c433a,_0x550551,'Fail','Fail'),null;if(_0xa05cd4[_0x5efa70(0x126)]==_0x5efa70(0xba))return log(_0x2ecf57,_0x5efa70(0xeb)+_0x366421[_0x5efa70(0x11f)]+_0x5efa70(0x114),null,'i'),_0x5efa70(0xba);if(_0xa05cd4[_0x5efa70(0x126)])return log(_0x2ecf57,'[xuLyGame]:\x20Thực\x20thi\x20'+_0x366421['name']+_0x5efa70(0x118)),await http['nextRunTime'](_0x2ecf57,_0x3c433a,_0x366421['id'],_0xa05cd4['nextRun'],_0xa05cd4[_0x5efa70(0x14d)]),await http[_0x5efa70(0x119)](_0x2ecf57,_0x3c433a,_0x550551,'Ok',_0x5efa70(0xaf),_0xa05cd4[_0x5efa70(0x91)],_0xa05cd4['nextRun']),!![];}else{if(_0x15020c=='A'||_0x15020c=='K'){log(_0x2ecf57,_0x5efa70(0x95)+_0x366421['name']+_0x5efa70(0xe8),null,'w','-');const _0x11d801=await http['getAks'](_0x2ecf57,_0x15020c);if(_0x11d801){log(_0x2ecf57,_0x5efa70(0x115));let _0x3f1ed3=0x0;while(_0x3f1ed3<0x2){const _0x1a085b=await checkTeleWebOpen(_0x366421,_0x11d801,_0x2ecf57,_0x45aecf,_0x3ae4be,_0x124ef2);if(_0x1a085b==='loop')_0x3f1ed3++,log(_0x2ecf57,'[xuLyGame]:\x20Loop\x20lại\x20,\x20loop\x20lại\x20lần\x20'+_0x3f1ed3+'/2',null,'i'),await delay(0x3e8);else return _0x1a085b?(log(_0x2ecf57,_0x5efa70(0x111)),!![]):(log(_0x2ecf57,_0x5efa70(0x109),null,![]),null);}return log(_0x2ecf57,'[xuLyGame]:Max\x20loop\x20rồi\x20bro',null,![]),null;}}else{if(_0x15020c=='W'){log(_0x2ecf57,'[xuLyGame]:\x20'+_0x366421[_0x5efa70(0x11f)]+_0x5efa70(0xb2),null,'w','-');const _0x673a32=await checkTeleWebOpen(_0x366421,_0x15020c,_0x2ecf57,_0x45aecf,_0x3ae4be,_0x124ef2);return _0x673a32?(log(_0x2ecf57,'[xuLyGame]:\x20checkTeleWebOpen\x20OK'),!![]):(log(_0x2ecf57,_0x5efa70(0x109),null,![]),null);}else return log(_0x2ecf57,_0x5efa70(0xf6)+_0x15020c,null,![]),null;}}}catch(_0x4e3ee9){return log(_0x2ecf57,_0x5efa70(0x13f)+_0x4e3ee9,null,![]),null;}}function a0_0xb97a(){const _0x472268=['allSettled','nextRun','Tìm','\x20|\x20nextrun:\x20','addData','profileTimeout','nowTime','][xuLyProfiles]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile\x20','][xuLyProfiles]:\x20Một\x20số\x20profiles\x20gặp\x20lỗi:\x20','[worker1.procScreenArr]vào\x20close','[checkTeleWebOpen]:\x20vào\x20loadGame','[OpenBrowser]\x20Lỗi\x20khi\x20đóng\x20tab\x20mới','notify','[xuLyBrowser]:dataBrw:\x20','fisrtOpenBrowser','\x20Script\x20mode','\x20không\x20trả\x20về\x20status','[loadGame]:\x20Script\x20','[xuLyGame]:\x20Thực\x20thi\x20','\x20ok','][xuLyTask]:\x20Task\x20','length','HostName','][xuLyProfiles]Không\x20tìm\x20thấy\x20indexGenP','filter','\x20Web\x20OK','activateTab','dirname','\x20Tele\x20K\x20OK','[xuLyGame]:\x20Sai\x20aks\x20','Garbage\x20Collector\x20đã\x20chạy!','getAllProfiles\x20','.js','split','][xuLyProfiles]:\x20Đã\x20thêm\x20profile\x20','setTitle','175mkRIql','START\x20SCRIPT','timGame','APIKEY','\x20chưa\x20đến\x20thời\x20gian\x20chạy','[xuLyTungProfile]:\x20Lỗi:\x20','scripts','task','stringify','getTask','[OpenBrowser]\x20Đóng\x20tab\x20mới\x20thành\x20công','now','[xuLyGame]:\x20checkTeleWebOpen\x20có\x20gì\x20đó\x20sai\x20sai\x20rồi\x20bro','store','botTimeout','\x20set\x20open\x20default\x20pos:','STOP\x20SCRIPT','Start','autoSetBrowserPosition','1324300FAuGRe','[xuLyGame]:\x20checkTeleWebOpen\x20OK','findIndex','[xoaTimeout]worker1:\x20Xóa\x20Interval:','\x20loop','[xuLyGame]:\x20getAks\x20OK','wait',':\x20XONG\x201\x20LƯỢT','\x20done','updateData','type','[closeBrowser]:\x20Lỗi\x20khi\x20đóng\x20trình\x20duyệt\x20','[xuLyBrowser]:\x20browser\x20disconnected\x20','SERVER_HOST','message','name','\x20vào\x20hàng\x20đợi\x20max:','timeout','1107558dwkPKX','[checkTeleWebOpen]:\x20Lỗi\x20trong\x20quá\x20trình\x20mở\x20trang\x20:\x20','default','getBotAll','status','entries','Memory','Không\x20tìm\x20thấy\x20indexGenP','[xuLyBrowser]:\x20Bot\x20không\x20tìm\x20thấy','timestamp','Không\x20thể\x20đóng\x20màn\x20hình:\x20vị\x20trí\x20không\x20hợp\x20lệ\x20action:\x20','[worker1.procScreenArr]lỗi\x20','url','function','[checkTeleWebOpen]:\x20Thực\x20thi\x20script\x20','worker1','10IHtUeQ','InputSearch','Fail','FistUrl','536538frVeXI','538176yldMhg','Lỗi\x20xử\x20lý\x20profile:\x20','tele','\x20set\x20close\x20ok','https://www.google.com','ref','[xuLyBrowser]:\x20Không\x20mở\x20được\x20trình\x20duyệt\x20','[worker1.procScreenArr]vào\x20open','[xuLyGame]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20Game:\x20','\x20thành\x20công','screenArr','Timeout\x20while\x20acquiring\x20lock','[xoaTimeout]worker1:\x20','delayOpenProfile','[eTimeout]worker1:\x20timeout','[xuLyBrowser]:browserInfo:\x20','connect','659208ghjqtl','][xuLyTask]:\x20currentDateTime:\x20','aks','Lỗi\x20gì\x20đó\x20task\x20','[checkTeleWebOpen]:\x20dataId:\x20','nextRunStamp','[OpenBrowser]:\x20Processing\x20profile:\x20','\x20set\x20open\x20ok\x20pos:','terminate','Lỗi\x20','pages','\x20Chưa\x20tới\x20giờ\x20chạy','push','21hYFPBQ','countOpenTabs',':\x20Sai\x20aks\x20',':\x20Bot\x20','profileThreads','[loadGame]:scriptPath\x20','[OpenBrowser]:\x20Lỗi\x20khi\x20mở\x20browser:\x20','open','close','taskIndex','Stop','No\x20bot\x20found','coin','env','[worker1.procScreenArr]\x20index:','join','[xuLyGame]:\x20','[checkTeleWebOpen]:\x20','No\x20profile\x20found','8GnsYGJ','nextrunstamp','end','clrInterval','compareExchange','load','][ERR]:\x20STOP\x20SCRIPT','[xuLyBrowser]:\x20không\x20lấy\x20được\x20bot','connected','[loadGame]:\x20Lỗi\x20khi\x20load\x20và\x20thực\x20thi\x20script\x20','][xuLyTask]:\x20Lỗi\x20while:\x20','height','onOff','][xuLyProfiles]:\x20Đã\x20xử\x20lý\x20tất\x20cả\x20profiles\x20thành\x20công\x20','StartApi','scale','][xuLyTask]:\x20vào\x20xuLyTask','tele_id','[xoaTimeout]worker1:\x20Xóa\x20timeout:',',\x20pos:\x20','[checkTeleWebOpen]:\x20Thực\x20thi\x20','][xuLyProfiles]:\x20Thêm\x20profile\x20','[xuLyTungProfile]:\x20Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng','Done','][xuLyTask]profileQueue:\x20concurrency:','Vào','\x20Web\x20mode','nextRunTime','1424EvAlnI','[checkTeleWebOpen]:\x20Không\x20thực\x20thi\x20script\x20','12573451mfpYku','date','script','\x20ko\x20có\x20aks','loop','[checkTeleWebOpen]:\x20Không\x20tìm\x20thấy\x20game\x20','api',']:\x20START\x20SCRIPT','\x20lỗi','[worker1data.task]:data.task\x20','\x20Api\x20mode','][xuLyTask]:\x20Không\x20lấy\x20được\x20dữ\x20liệu\x20profiles\x20','running','browserWidthHeight','clrTimeout','[xuLyTungProfile]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile','openUrl','width','Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng','value','done','[OpenBrowser]:force\x20set\x20Position:\x20','[eTimeout]worker1:\x20reset\x20timeout','][xuLyProfiles]:\x20Lỗi\x20:\x20','tinhThoiGian','[xuLyBrowser]:\x20Bot\x20OK','Version:','profiles','closeTab','\x20Tele\x20A\x20OK','nextrun','href','\x20không\x20phải\x20là\x20một\x20hàm\x20hợp\x20lệ','Không\x20tìm\x20thấy\x20giá\x20trị\x20status=0','][xuLyTask]:\x20Chờ\x205\x20giây\x20trước\x20khi\x20xử\x20lý\x20task\x20tiếp\x20theo...'];a0_0xb97a=function(){return _0x472268;};return a0_0xb97a();}async function OpenBrowser(_0x2dd5a0,_0x4fc00c,_0x53e467,_0x31af5d){const _0x76e1db=a0_0x3d3ec3;try{const _0x52f7b2=_0x2dd5a0;log(_0x2dd5a0,_0x76e1db(0x14e)+JSON[_0x76e1db(0x105)](_0x2dd5a0),null,'i');if(_0x31af5d['autoSetBrowserPosition']&&_0x31af5d[_0x76e1db(0x10f)]==='n'){const _0x51d2ce=_0x31af5d['customBrowserPosition'][_0x76e1db(0xfa)]('x');parseInt(_0x51d2ce[0x0])>=0x0&&parseInt(_0x51d2ce[0x1])>=0x0?(_0x53e467['x']=parseInt(_0x51d2ce[0x0]),_0x53e467['y']=parseInt(_0x51d2ce[0x1])):(_0x53e467['x']=0x0,_0x53e467['y']=0x0),log(_0x2dd5a0,_0x76e1db(0xcb)+_0x53e467['x']+'x'+_0x53e467['y'],null,'w');}const _0x2561b1=await genlogin[_0x76e1db(0x147)](_0x2dd5a0,_0x31af5d,_0x4fc00c,_0x53e467);log(_0x2dd5a0,'[OpenBrowser]:\x20GenLogin:\x20'+JSON[_0x76e1db(0x105)](_0x2561b1),null,'i'),await delay(0x1388);if(_0x2561b1){let _0x531a8b=0x0;const _0x2aabbb=0xa;while(_0x531a8b<_0x2aabbb){_0x531a8b++;const _0x186b44=await genlogin[_0x76e1db(0x156)](_0x2dd5a0,_0x2561b1);if(_0x186b44<=0x1)return log(_0x2dd5a0,'[OpenBrowser]]Chỉ\x20có\x20'+_0x186b44+'\x20tab\x20đang\x20mở',null,'i'),_0x2561b1;const _0xa1126d=await genlogin[_0x76e1db(0xd2)](_0x2dd5a0,_0x2561b1,_0x186b44-0x1,0xbb8);if(!_0xa1126d){log(_0x2dd5a0,_0x76e1db(0xe4),null,![]);continue;}log(_0x2dd5a0,_0x76e1db(0x107)),await delay(0xbb8);continue;}}return log(_0x2dd5a0,_0x76e1db(0x8b)+JSON['stringify'](_0x2dd5a0)),null;}catch(_0x21f285){throw new Error(_0x76e1db(0x138)+_0x21f285[_0x76e1db(0x11e)]);}}async function checkTeleWebOpen(_0x1a4186,_0x125468,_0x581164,_0x1103cb,_0x4edafd,_0x4ca3ad){const _0x2d0241=a0_0x3d3ec3;let _0x4fdc9b,_0x5be793;try{_0x5be793=await genlogin[_0x2d0241(0xf3)](_0x581164,_0x4edafd,0x0,_0x4ca3ad[_0x2d0241(0xc3)],_0x1103cb['scale']);if(_0x125468!='W'){const _0x246183=await genlogin['elementExistsByXPath'](_0x581164,_0x5be793,_0x125468[_0x2d0241(0x133)],0x7d0);!_0x246183&&(await genlogin[_0x2d0241(0xc6)](_0x581164,_0x5be793,'https://www.google.com',0xea60),await delay(0x7d0),await genlogin['openUrl'](_0x581164,_0x5be793,_0x125468[_0x2d0241(0x135)],0xea60),await genlogin[_0x2d0241(0xfc)](_0x581164,_0x5be793,_0x581164),await delay(0x1388));}else _0x125468='W',await genlogin[_0x2d0241(0xc6)](_0x581164,_0x5be793,_0x2d0241(0x13b),0xea60),await delay(0x7d0),await genlogin[_0x2d0241(0xc6)](_0x581164,_0x5be793,_0x1a4186[_0x2d0241(0x13c)],0xea60),await genlogin[_0x2d0241(0xfc)](_0x581164,_0x5be793,_0x581164),await delay(0x1388);log(_0x581164,_0x2d0241(0xe3),null,'i');const _0x38d3da=await genlogin[_0x2d0241(0xdf)](_0x581164),_0x5e86d0=await http[_0x2d0241(0xdd)](_0x581164,_0x581164,_0x1a4186[_0x2d0241(0x11f)],_0x38d3da['date'],'',_0x2d0241(0x10e),_0x2d0241(0xc2));_0x4fdc9b=_0x5e86d0['ID'];const _0x409872={'firstPage':_0x5be793,'bot':_0x1a4186,'profileNameId':_0x581164,'getAks':_0x125468,'genlogin':genlogin,'http':http,'browser':_0x4edafd,'dataId':_0x5e86d0['ID'],'taskIndex':taskInfo[_0x2d0241(0x8e)],'screenDataBuffer2':screenDataBuffer1,'tasksDataBuffer2':tasksDataBuffer1};let _0xe233a2=null;log(_0x581164,_0x2d0241(0x14c)+json(_0x4fdc9b),null,'i');if(timgame&&_0x125468!='W'){await http[_0x2d0241(0x119)](_0x581164,_0x581164,_0x4fdc9b,_0x2d0241(0xdb));const _0x3a8112=await loadGame(_0x2d0241(0xff),_0x409872,_0xe233a2,_0x4fdc9b,_0x581164);if(_0x3a8112[_0x2d0241(0x126)]==_0x2d0241(0xba))return log(_0x581164,_0x2d0241(0xac)+_0x1a4186[_0x2d0241(0x11f)]+_0x2d0241(0x114),null,'i'),await http[_0x2d0241(0x119)](_0x581164,_0x581164,_0x4fdc9b,'loop\x20new\x20game'),_0x2d0241(0xba);else{if(!_0x3a8112)return log(_0x581164,_0x2d0241(0xbb)+_0x1a4186['name'],null,![]),await http[_0x2d0241(0x119)](_0x581164,_0x581164,_0x4fdc9b,'Fail',_0x2d0241(0x134)),null;}_0x3a8112[_0x2d0241(0xef)]&&(_0xe233a2=_0x3a8112[_0x2d0241(0xef)]);}await http[_0x2d0241(0x119)](_0x581164,_0x581164,_0x4fdc9b,_0x2d0241(0xb1));const _0x2115c1=await loadGame(_0x1a4186[_0x2d0241(0x11f)],_0x409872,_0xe233a2,_0x4fdc9b,_0x581164);if(!_0x2115c1[_0x2d0241(0x126)])return log(_0x581164,_0x2d0241(0xb5)+_0x1a4186[_0x2d0241(0x11f)],null,![]),log(_0x581164,_0x2d0241(0x96)+json(_0x2115c1),null,![]),await http['updateData'](_0x581164,_0x581164,_0x4fdc9b,_0x2d0241(0x134),_0x2d0241(0x134)),null;else{if(_0x2115c1[_0x2d0241(0x126)]=='loop')return log(_0x581164,_0x2d0241(0xac)+_0x1a4186[_0x2d0241(0x11f)]+_0x2d0241(0x114),null,'i'),await http[_0x2d0241(0x119)](_0x581164,_0x581164,_0x4fdc9b,_0x2d0241(0xba)),_0x2d0241(0xba);}return await http[_0x2d0241(0xb3)](_0x581164,_0x581164,_0x1a4186['id'],_0x2115c1[_0x2d0241(0xda)],_0x2115c1['nextRunStamp']),await http['updateData'](_0x581164,_0x581164,_0x4fdc9b,'Ok',_0x2d0241(0xaf),_0x2115c1['coin'],_0x2115c1[_0x2d0241(0xda)]),log(_0x581164,_0x2d0241(0x130)+_0x1a4186[_0x2d0241(0x11f)]+'\x20thành\x20công'),await delay(0x7d0),_0x4fdc9b=null,_0x5be793=null,!![];}catch(_0x5b2a71){return log(_0x581164,_0x2d0241(0x123)+_0x5b2a71,null,![]),await http[_0x2d0241(0x119)](_0x581164,_0x581164,_0x4fdc9b,_0x2d0241(0x134),_0x2d0241(0x134)),_0x4fdc9b=null,_0x5be793=null,null;}}async function loadGame(_0x182a1c,_0x19d115,_0x56ea1f,_0x23a349,_0x489db4){const _0x228151=a0_0x3d3ec3;try{const _0x4e445e=pathToFileURL(a0_0xf43d58[_0x228151(0x94)](__dirname,_0x228151(0x103),_0x182a1c+_0x228151(0xf9)))[_0x228151(0xd5)];log(_0x489db4,_0x228151(0x15a)+_0x4e445e);const _0x4c0832=await import(_0x4e445e);if(typeof _0x4c0832['default']===_0x228151(0x12f)){const _0x5e4af0=await _0x4c0832[_0x228151(0x124)](_0x19d115,_0x56ea1f);await delay(0x3e8);if(!_0x5e4af0[_0x228151(0x126)])return log(_0x489db4,_0x228151(0xea)+_0x182a1c+_0x228151(0xe9),null,![]),null;else return _0x5e4af0[_0x228151(0x126)]===_0x228151(0xba)?(log(_0x489db4,'[loadGame]:\x20Chạy\x20'+_0x182a1c+_0x228151(0x114),null,'i'),_0x5e4af0):(log(_0x489db4,'[loadGame]:\x20Chạy\x20'+_0x182a1c+'\x20'+_0x5e4af0[_0x228151(0x126)],null,'i'),_0x5e4af0);}else return await delay(0x3e8),log(_0x489db4,_0x228151(0xea)+_0x182a1c+_0x228151(0xd6),null,![]),null;}catch(_0x1e59b1){return log(_0x489db4,_0x228151(0xa1)+_0x182a1c+':\x20'+_0x1e59b1,null,![]),teleId&&await http[_0x228151(0x139)](_0x489db4,teleId,'['+_0x489db4+']['+_0x182a1c+'][ERR]:\x20Lỗi\x20'+_0x1e59b1),null;}}function a0_0x3c3d(_0x609522,_0x48316a){const _0xb97a30=a0_0xb97a();return a0_0x3c3d=function(_0x3c3df,_0x20390e){_0x3c3df=_0x3c3df-0x8b;let _0x20746f=_0xb97a30[_0x3c3df];return _0x20746f;},a0_0x3c3d(_0x609522,_0x48316a);}async function closeBrowser(_0x4e8982='',_0xcdd8ad){const _0x45b74e=a0_0x3d3ec3;try{if(_0xcdd8ad){if(_0xcdd8ad[_0x45b74e(0xa0)]){for(const _0x3e4af4 of await _0xcdd8ad[_0x45b74e(0x152)]()){await _0x3e4af4['close']();}return await _0xcdd8ad[_0x45b74e(0x8d)](),_0xcdd8ad=null,global['gc']&&(global['gc'](),log(_0x45b74e(0x128),_0x45b74e(0xf7),null,'i','+')),log(_0x4e8982,'[closeBrowser]:\x20Đóng\x20trình\x20duyệt\x20'+_0x4e8982+_0x45b74e(0x140),null,'w'),!![];}}else log(_0x4e8982,'[closeBrowser]:\x20Không\x20có\x20trình\x20duyệt\x20để\x20đóng',null,'i');return null;}catch(_0x5d79e7){return log(_0x4e8982,_0x45b74e(0x11b)+_0x4e8982+':\x20'+_0x5d79e7,null,![]),null;}}async function procScreenArr(_0x3c8c51,_0x5daac5,_0x231008){const _0x2941eb=a0_0x3d3ec3;try{await acquireLock(screenData);let _0x5c902f={};log(_0x231008,'[worker1.procScreenArr]action:\x20'+_0x3c8c51+_0x2941eb(0xab)+json(_0x5daac5),null,'w','-');if(_0x3c8c51===_0x2941eb(0x8c)){log(_0x231008,_0x2941eb(0x13e),null,'w'),_0x5c902f[_0x2941eb(0xa7)]=Atomics[_0x2941eb(0x9d)](screenData,0x1)/0xf4240,_0x5c902f[_0x2941eb(0xc7)]=Atomics[_0x2941eb(0x9d)](screenData,0x2),_0x5c902f[_0x2941eb(0xa3)]=Atomics['load'](screenData,0x3);for(let _0x4cbda8=0xa;_0x4cbda8<screenData[_0x2941eb(0xee)]-0x1;_0x4cbda8=_0x4cbda8+0x3){const _0x543a1d=Atomics['load'](screenData,_0x4cbda8);if(_0x543a1d===0x2)return Atomics[_0x2941eb(0x10a)](screenData,_0x4cbda8,0x1),_0x5c902f['default']=0x0,_0x5c902f['x']=Atomics[_0x2941eb(0x9d)](screenData,_0x4cbda8+0x1),_0x5c902f['y']=Atomics['load'](screenData,_0x4cbda8+0x2),log(_0x231008,_0x2941eb(0x93)+_0x4cbda8+_0x2941eb(0x14f)+json(_0x5c902f),null,'w'),await releaseLock(screenData),_0x5c902f;if(_0x543a1d===0x0)return Atomics[_0x2941eb(0x10a)](screenData,_0x4cbda8,0x1),_0x5c902f[_0x2941eb(0x124)]=0x1,_0x5c902f['x']=0x0,_0x5c902f['y']=0x0,log(_0x231008,_0x2941eb(0x93)+_0x4cbda8+_0x2941eb(0x10c)+json(_0x5c902f),null,'w'),await releaseLock(screenData),_0x5c902f;}await releaseLock(screenData);throw new Error(_0x2941eb(0xc8));}else{if(_0x3c8c51===_0x2941eb(0x8d)&&_0x5daac5['x']>=0x0&&_0x5daac5['y']>=0x0){log(_0x231008,_0x2941eb(0xe2),null,'w');if(_0x5daac5[_0x2941eb(0x124)]===0x1)return log(_0x231008,'[worker1.procScreenArr]vị\x20trí\x20default\x20không\x20cần\x20close',null,'w'),await releaseLock(screenData),!![];for(let _0x4cb7d5=0xa;_0x4cb7d5<screenData[_0x2941eb(0xee)]-0x1;_0x4cb7d5+=0x3){const _0x20c567=Atomics[_0x2941eb(0x9d)](screenData,_0x4cb7d5);if(_0x20c567===0x1){const _0x50149d=Atomics['load'](screenData,_0x4cb7d5+0x1),_0x4781ac=Atomics[_0x2941eb(0x9d)](screenData,_0x4cb7d5+0x2);if(_0x50149d===_0x5daac5['x']&&_0x4781ac===_0x5daac5['y'])return Atomics[_0x2941eb(0x10a)](screenData,_0x4cb7d5,0x2),log(_0x231008,_0x2941eb(0x93)+_0x4cb7d5+_0x2941eb(0x13a),null,'w'),Atomics[_0x2941eb(0xe5)](screenData,_0x4cb7d5),await releaseLock(screenData),!![];}}await releaseLock(screenData);throw new Error(_0x2941eb(0x12c)+_0x3c8c51+_0x2941eb(0xab)+json(_0x5daac5));}else return log(_0x231008,'[worker1.procScreenArr]\x20posVal:'+json(_0x5daac5)+'\x20Action:'+_0x3c8c51,null,'w'),await releaseLock(screenData),!![];}}catch(_0x4cca37){return log(_0x231008,_0x2941eb(0x12d)+_0x4cca37+'\x20action:\x20'+_0x3c8c51+',\x20pos:\x20'+json(_0x5daac5),null,![]),await releaseLock(screenData),![];}}async function acquireLock(_0x20ceb2,_0x466076=0x7530){const _0x46e0d4=a0_0x3d3ec3,_0x4358d1=Date[_0x46e0d4(0x108)]();while(Atomics['compareExchange'](_0x20ceb2,0x8,0x0,0x1)!==0x0){if(Date[_0x46e0d4(0x108)]()-_0x4358d1>_0x466076)throw new Error(_0x46e0d4(0x142));Atomics[_0x46e0d4(0x116)](_0x20ceb2,0x8,0x1,_0x466076);}}async function releaseLock(_0x2a2403){const _0x413093=a0_0x3d3ec3;Atomics[_0x413093(0x10a)](_0x2a2403,0x8,0x0),Atomics[_0x413093(0xe5)](_0x2a2403,0x8);}async function xoaTimeout(_0x131bd0){const _0x34a949=a0_0x3d3ec3;try{clearTimeout(_0x131bd0),log(_0x34a949(0xaa)+_0x131bd0,null,'i',_0x34a949(0xc4));}catch(_0x3eec03){log(_0x34a949(0x143)+_0x3eec03,null,![]);}}async function xoaInterval(_0x41dbbe){const _0x583948=a0_0x3d3ec3;try{clearInterval(_0x41dbbe),log(_0x583948(0x113)+_0x41dbbe,null,'i',_0x583948(0x9b));}catch(_0x3f0317){log('[xoaTimeout]worker1:\x20'+_0x3f0317,null,![]);}}async function delay(_0x117355){return new Promise(async _0x1ed714=>{setTimeout(_0x1ed714,_0x117355);});}async function eTimeout(){const _0x25794e=a0_0x3d3ec3;return log(_0x25794e(0x145),null,'w'),Atomics[_0x25794e(0x10a)](tasksData,taskInfo[_0x25794e(0x8e)],0x1),!![];}async function cTimeout(){const _0x32fe96=a0_0x3d3ec3;if(Atomics[_0x32fe96(0x9d)](tasksData,taskInfo[_0x32fe96(0x8e)])===0x1)return!![];return null;}async function rstTimeout(){const _0x4b6e5d=a0_0x3d3ec3;return log(_0x4b6e5d(0xcc),null,'w'),Atomics[_0x4b6e5d(0x9c)](tasksData,taskInfo['taskIndex'],0x1,0x2),!![];}
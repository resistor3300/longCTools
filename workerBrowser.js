const a0_0x595d67=a0_0x348a;(function(_0x5445c3,_0x4b3659){const _0x518326=a0_0x348a,_0x313135=_0x5445c3();while(!![]){try{const _0x39dbcb=parseInt(_0x518326(0x284))/0x1*(-parseInt(_0x518326(0x207))/0x2)+parseInt(_0x518326(0x1e8))/0x3+-parseInt(_0x518326(0x204))/0x4+-parseInt(_0x518326(0x281))/0x5*(-parseInt(_0x518326(0x25f))/0x6)+-parseInt(_0x518326(0x29e))/0x7*(parseInt(_0x518326(0x210))/0x8)+parseInt(_0x518326(0x277))/0x9+parseInt(_0x518326(0x258))/0xa;if(_0x39dbcb===_0x4b3659)break;else _0x313135['push'](_0x313135['shift']());}catch(_0x592510){_0x313135['push'](_0x313135['shift']());}}}(a0_0x4120,0xc8913));import'dotenv/config';import a0_0x4b7963 from'fs';import a0_0x2d5495 from'path';import{fileURLToPath,pathToFileURL}from'url';import{expose}from'threads/worker';import{log,json}from'./modules/logger.js';import a0_0x18b4c9 from'./modules/Genlogin.js';import a0_0x273b41 from'./modules/http.js';import a0_0x1e53b7 from'p-queue';const __filename=fileURLToPath(import.meta[a0_0x595d67(0x262)]),__dirname=a0_0x2d5495['dirname'](__filename);let profileQueue,genlogin,http,getAllProfiles,taskInfo,GenDataProfile,timgame;genlogin=new a0_0x18b4c9('',!![]),http=new a0_0x273b41(process[a0_0x595d67(0x288)]['SERVER_HOST'],process[a0_0x595d67(0x288)][a0_0x595d67(0x255)],!![]);let firstRun=!![],delayOpenProfile=0xbb8,profileTimeout=0x5265c0,botTimeout=0x5265c0,profileThreads=0x1,browserInfo={},version,screenData,tasksData,screenDataBuffer1,tasksDataBuffer1,teleId=null;const worker1=async _0x1d1d3d=>{const _0x44a4b4=a0_0x595d67,{version0:_0x2db5c2,tasksDataBuffer:_0x4613cf,screenDataBuffer:_0x2da873,action:_0x129810,task:_0x484bea,dataBrw:_0x30336b,GenDataProfile0:_0x7142d3,timgame0:_0x54f445,timeout:_0x511d5a,tele_id:_0xd258c5}=_0x1d1d3d;taskInfo=_0x484bea;_0xd258c5&&_0xd258c5['tele_id']&&(teleId=_0xd258c5[_0x44a4b4(0x275)]);screenDataBuffer1=_0x2da873,tasksDataBuffer1=_0x4613cf,screenData=new Int32Array(_0x2da873),tasksData=new Int32Array(_0x4613cf);try{if(_0x511d5a)return log(_0x44a4b4(0x29c),_0x44a4b4(0x23d),null,'w'),await clearVar(),{'success':![],'error':'timeout'};else{if(_0x484bea!==_0x44a4b4(0x24b)){version=_0x2db5c2,getAllProfiles=_0x30336b,log(_0x44a4b4(0x29c),_0x44a4b4(0x220)+JSON['stringify'](_0x1d1d3d['task']),null,'c'),log(_0x44a4b4(0x29c),_0x44a4b4(0x273)+JSON[_0x44a4b4(0x21e)](getAllProfiles),null,'c'),GenDataProfile=_0x7142d3,timgame=_0x54f445,log(_0x44a4b4(0x29c),'['+_0x484bea[_0x44a4b4(0x265)]+_0x44a4b4(0x1eb),null,'w');const _0x5e6eea=await xuLyTask(_0x484bea);return log(_0x44a4b4(0x29c),''+JSON[_0x44a4b4(0x21e)](_0x5e6eea),null,'w'),log('worker1',_0x44a4b4(0x276),null,'w',_0x44a4b4(0x1fc)),await clearVar(),_0x5e6eea?{'success':!![],'result':_0x5e6eea}:{'success':![],'result':_0x5e6eea};}else return log('worker1',_0x44a4b4(0x26c)+_0x484bea,null,'w'),await clearVar(),{'success':![],'error':_0x44a4b4(0x29c)};}}catch(_0x2e4e58){return log(_0x44a4b4(0x29c),'Lỗi\x20'+_0x2e4e58,null,![]),await clearVar(),{'success':![],'error':_0x44a4b4(0x29c)};}};expose({'worker1':worker1});async function clearVar(){return genlogin=null,http=null,!![];}async function xuLyTask(_0x225d2a){const _0x4ab330=a0_0x595d67;try{log(_0x4ab330(0x29c),'['+_0x225d2a[_0x4ab330(0x265)]+_0x4ab330(0x202),null,'i','-');const _0x5c8239=await genlogin['nowTime']('worker1'),_0x4f5093=_0x5c8239[_0x4ab330(0x23b)];if(_0x4f5093<_0x225d2a[_0x4ab330(0x274)])return log(_0x4ab330(0x29c),'['+_0x225d2a[_0x4ab330(0x265)]+_0x4ab330(0x29d)+JSON[_0x4ab330(0x21e)](_0x225d2a[_0x4ab330(0x265)])+_0x4ab330(0x26b),null,'i'),log('worker1','['+_0x225d2a['name']+_0x4ab330(0x286)+JSON[_0x4ab330(0x21e)](_0x5c8239)+'\x20|\x20nextrun:\x20'+JSON[_0x4ab330(0x21e)](_0x225d2a[_0x4ab330(0x2aa)]),null,'w'),log(_0x4ab330(0x29c),'['+_0x225d2a[_0x4ab330(0x265)]+_0x4ab330(0x286)+JSON[_0x4ab330(0x21e)](_0x4f5093)+_0x4ab330(0x227)+JSON[_0x4ab330(0x21e)](taskNextRunDateTime),null,'w'),log('worker1','['+_0x225d2a[_0x4ab330(0x265)]+_0x4ab330(0x25a),null,'i'),await delay(0x1388),null;let _0x2e856d=await http[_0x4ab330(0x1e9)](_0x4ab330(0x29c),_0x225d2a['name']);if(_0x2e856d[_0x4ab330(0x21a)][_0x4ab330(0x243)][_0x4ab330(0x209)]<=0x0){log(_0x4ab330(0x29c),'['+_0x225d2a[_0x4ab330(0x265)]+_0x4ab330(0x28b),null,![]);throw new Error(_0x4ab330(0x246));}firstRun&&(profileThreads=parseInt(_0x225d2a[_0x4ab330(0x1f2)]),profileQueue=new a0_0x1e53b7({'concurrency':profileThreads}),log(_0x4ab330(0x29c),'['+_0x225d2a[_0x4ab330(0x265)]+_0x4ab330(0x22f)+profileThreads,null,'w'),firstRun=![],delayOpenProfile=parseInt(_0x225d2a[_0x4ab330(0x237)])*0x3e8,profileTimeout=parseInt(_0x225d2a[_0x4ab330(0x256)])*0x3e8,botTimeout=parseInt(_0x225d2a[_0x4ab330(0x1e7)])*0x3e8);const _0xef6de1=await xuLyProfiles(_0x2e856d[_0x4ab330(0x21a)][_0x4ab330(0x243)],_0x225d2a[_0x4ab330(0x265)]);if(!_0xef6de1){log(_0x4ab330(0x29c),'['+_0x225d2a['name']+_0x4ab330(0x247)+json(_0xef6de1),null,![]);throw new Error(_0x4ab330(0x246));}return log(_0x4ab330(0x29c),'['+_0x225d2a[_0x4ab330(0x265)]+'][xuLyTask]:\x20Tasks:\x20'+_0x225d2a[_0x4ab330(0x265)]+_0x4ab330(0x1f4)),await delay(0x7d0),log('worker1','['+_0x225d2a[_0x4ab330(0x265)]+_0x4ab330(0x235)+JSON[_0x4ab330(0x21e)](_0x225d2a['name'])),!![];}catch(_0x337c5e){return log(_0x4ab330(0x29c),'['+_0x225d2a['name']+'][xuLyTask]:\x20Lỗi\x20while:\x20'+_0x337c5e,null,![]),null;}}async function xuLyProfiles(_0x426f0f,_0x3e7c1d){const _0x393891=a0_0x595d67;try{const _0x5d6215=[];for(const [_0x585b1a,_0x58bdbb]of _0x426f0f['entries']()){const _0x1bad5f=await GenDataProfile[_0x393891(0x2a1)](_0x213b63=>_0x213b63[_0x393891(0x21f)]===_0x58bdbb);if(_0x585b1a!==-0x1)log(_0x393891(0x29c),'['+_0x3e7c1d+_0x393891(0x20a)+_0x1bad5f);else{log(_0x393891(0x29c),'['+_0x3e7c1d+'][xuLyProfiles]Không\x20tìm\x20thấy\x20indexGenP');throw new Error(_0x393891(0x2b1));}log(_0x393891(0x29c),'['+_0x3e7c1d+_0x393891(0x264)+_0x58bdbb+'\x20vào\x20hàng\x20đợi\x20max:'+profileThreads,null,'i'),_0x5d6215[_0x393891(0x285)](profileQueue[_0x393891(0x223)](async()=>{const _0x3edadf=_0x393891;try{delayOpenProfile>0x0?(log(_0x3edadf(0x29c),'['+_0x3e7c1d+'][xuLyProfiles]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile\x20'+_0x58bdbb+'\x20sau\x20'+delayOpenProfile+'ms',null,'w','-'),await delay(delayOpenProfile)):log(_0x3edadf(0x29c),'['+_0x3e7c1d+_0x3edadf(0x205)+_0x58bdbb,null,'w','-'),await xuLyTungProfile(_0x58bdbb,GenDataProfile[_0x1bad5f]);}catch(_0xba797a){log('worker1','['+_0x3e7c1d+'][xuLyProfiles]:\x20Lỗi\x20khi\x20xử\x20lý\x20profile\x20'+_0x58bdbb+':\x20'+_0xba797a[_0x3edadf(0x226)],null,![]);throw _0xba797a;}})),log('worker1','['+_0x3e7c1d+_0x393891(0x230)+_0x58bdbb+'\x20vào\x20hàng\x20đợi.');}const _0x5cb236=await Promise[_0x393891(0x20c)](_0x5d6215),_0x27c908=_0x5cb236['filter'](_0x548a1e=>_0x548a1e[_0x393891(0x25c)]===_0x393891(0x293));return _0x27c908[_0x393891(0x209)]>0x0?log(_0x393891(0x29c),'['+_0x3e7c1d+_0x393891(0x22c)+JSON['stringify'](_0x27c908),null,![]):log(_0x393891(0x29c),'['+_0x3e7c1d+_0x393891(0x26d)+json(_0x5cb236)),!![];}catch(_0x25ffcf){return log(_0x393891(0x29c),'['+_0x3e7c1d+_0x393891(0x208)+_0x25ffcf,null,![]),null;}}async function xuLyTungProfile(_0x23838c,_0x520344){const _0x3f21d7=a0_0x595d67;let _0xca2a6b,_0xdeb071;const _0x310616=_0x23838c;let _0x24278d;try{await delay(delayOpenProfile),log(_0x23838c,_0x3f21d7(0x25b),null,'i'),_0xca2a6b=await genlogin[_0x3f21d7(0x2ab)](_0x23838c),await http[_0x3f21d7(0x1ea)]('worker1',_0x23838c,_0x3f21d7(0x249),_0xca2a6b[_0x3f21d7(0x23b)],'',_0x3f21d7(0x289)+version,_0x3f21d7(0x24c));teleId&&await http[_0x3f21d7(0x271)](_0x23838c,teleId,'['+_0x23838c+_0x3f21d7(0x299));log(_0x23838c,'[xuLyTungProfile]0:\x20Kiểm\x20tra\x20màn\x20hình\x20'+_0x23838c,null,'w'),_0x24278d=await procScreenArr(_0x3f21d7(0x1fe),null,_0x23838c);if(_0x24278d['x']===undefined||_0x24278d['y']===undefined){log(_0x23838c,_0x3f21d7(0x26f),null,![]);throw new Error(_0x3f21d7(0x216));}const _0x90ceb1=await xuLyBrowser(_0x23838c,_0x520344,_0x24278d);await procScreenArr('close',_0x24278d,_0x23838c);const _0x203690=await genlogin['tinhThoiGian'](_0xca2a6b[_0x3f21d7(0x214)]);return await http[_0x3f21d7(0x1ea)](_0x3f21d7(0x29c),_0x23838c,_0x3f21d7(0x21b),'','',_0x203690,_0x3f21d7(0x252)),teleId&&await http[_0x3f21d7(0x271)](_0x23838c,teleId,'['+_0x23838c+_0x3f21d7(0x206)),_0x90ceb1;}catch(_0x1978c9){log(_0x23838c,_0x3f21d7(0x221)+_0x1978c9,null,![]);if(_0xdeb071)await Thread[_0x3f21d7(0x2b3)](_0xdeb071);await procScreenArr(_0x3f21d7(0x20f),_0x24278d,_0x23838c);const _0x270e1d=await genlogin[_0x3f21d7(0x217)](_0xca2a6b?.[_0x3f21d7(0x214)]||Date[_0x3f21d7(0x23e)]());await http[_0x3f21d7(0x1ea)](_0x3f21d7(0x29c),_0x23838c,_0x3f21d7(0x21b),'','',_0x270e1d,'Stop');teleId&&await http[_0x3f21d7(0x271)](_0x23838c,teleId,'['+_0x23838c+'][ERR]:\x20STOP\x20SCRIPT');throw _0x1978c9;}}async function xuLyBrowser(_0x33c291,_0x504fa9,_0xd8207f){const _0x2a394c=a0_0x595d67;let _0x549b3a;try{const _0xb91ab1=_0x33c291;if(!browserInfo[_0x33c291])browserInfo[_0x33c291]={};browserInfo[_0x33c291][_0x2a394c(0x228)]=0x0,log(_0x33c291,'[xuLyBrowser]:browserInfo:\x20'+json(browserInfo),null,'w','w');if(browserInfo[_0x33c291][_0x2a394c(0x228)]==0x0){_0x549b3a=await OpenBrowser(_0x33c291,_0x504fa9,_0xd8207f);if(!_0x549b3a){log(_0x33c291,_0x2a394c(0x24d)+_0x33c291,null,![]);throw new Error(_0x2a394c(0x24d)+_0x33c291);}browserInfo[_0x33c291][_0x2a394c(0x228)]=0x1;}if(!_0x549b3a[_0x2a394c(0x278)])throw new Error(_0x2a394c(0x251)+_0x33c291);let _0x11f7fc=0x0;const _0x242260=await http[_0x2a394c(0x29b)](_0x2a394c(0x29c),_0xb91ab1);if(!_0x242260){log(_0x33c291,_0x2a394c(0x283),null,![]);throw new Error('No\x20bot\x20found');}if(_0x242260[_0x2a394c(0x209)]<=0x0){log(_0x33c291,_0x2a394c(0x211),null,![]);throw new Error(_0x2a394c(0x2a0));}for(const _0x38557a of _0x242260){if(_0x38557a){if(_0x38557a[_0x2a394c(0x291)]!=_0x2a394c(0x25d))continue;if(_0x38557a['value']===_0x2a394c(0x2ad)){log(_0x33c291,_0x2a394c(0x260),null,'i');break;}if(!_0x38557a['aks']){log(_0x33c291,':\x20Bot\x20'+json(_0x38557a)+'\x20ko\x20có\x20aks',null,![]);continue;}if(_0x38557a[_0x2a394c(0x21c)]==='0'){log(_0x33c291,_0x2a394c(0x229)+json(_0x38557a['name'])+_0x2a394c(0x231),null,![]);continue;}const _0xdcc2c2=await genlogin[_0x2a394c(0x2ab)](_0x33c291);if(_0x38557a[_0x2a394c(0x28a)]>_0xdcc2c2[_0x2a394c(0x214)]){log(_0x33c291,_0x2a394c(0x229)+json(_0x38557a['name'])+_0x2a394c(0x233),null,'w');continue;}switch(_0x38557a[_0x2a394c(0x25e)]){case'A':log(_0x33c291,':\x20'+json(_0x38557a[_0x2a394c(0x265)])+_0x2a394c(0x24a)),await xuLyGame(_0x38557a,'A',_0x33c291,_0x504fa9,_0xd8207f,_0x549b3a);break;case'K':log(_0x33c291,':\x20'+json(_0x38557a[_0x2a394c(0x265)])+_0x2a394c(0x215)),await xuLyGame(_0x38557a,'K',_0x33c291,_0x504fa9,_0xd8207f,_0x549b3a);break;case'W':log(_0x33c291,':\x20'+json(_0x38557a[_0x2a394c(0x265)])+_0x2a394c(0x27f)),await xuLyGame(_0x38557a,'W',_0x33c291,_0x504fa9,_0xd8207f,_0x549b3a);break;default:log(_0x33c291,_0x2a394c(0x20e)+json(_0x38557a['aks']),null,![]);break;}log(_0x33c291,_0x2a394c(0x26e));}}return await closeBrowser(_0x33c291,_0x549b3a),!![];}catch(_0x358543){return log(_0x33c291,_0x2a394c(0x24e)+_0x358543,null,![]),log(_0x33c291,_0x2a394c(0x1ee)+json(getAllProfiles),null,'w','w'),await closeBrowser(_0x33c291,_0x549b3a),null;}}async function xuLyGame(_0x505af1,_0x254339,_0x398448,_0x5f3aba,_0x39a4eb,_0x2ad71e){const _0x1c81cd=a0_0x595d67;try{const _0x2c293=_0x398448;if(_0x505af1['type']==='api'){log(_0x398448,_0x1c81cd(0x295)+_0x505af1['name']+_0x1c81cd(0x29f),null,'i');const _0x1d8ef8=await genlogin['nowTime'](_0x398448),_0xc46fe3=await http['addData'](_0x398448,_0x2c293,_0x505af1[_0x1c81cd(0x265)],_0x1d8ef8['date'],'',_0x1c81cd(0x1f0),_0x1c81cd(0x225)),_0x58f1b3=_0xc46fe3['ID'],_0x861a08={'bot':_0x505af1,'profileNameId':_0x398448,'genlogin':genlogin,'http':http,'dataId':_0x58f1b3},_0x1b8fe5=await loadGameApi(_0x505af1['name'],_0x861a08);if(!_0x1b8fe5[_0x1c81cd(0x25c)])return log(_0x398448,_0x1c81cd(0x2a5)+_0x505af1[_0x1c81cd(0x265)]+_0x1c81cd(0x272),null,![]),await http[_0x1c81cd(0x22e)](_0x398448,_0x2c293,_0x58f1b3,'Fail','Fail'),null;if(_0x1b8fe5[_0x1c81cd(0x25c)]=='loop')return log(_0x398448,_0x1c81cd(0x2a5)+_0x505af1[_0x1c81cd(0x265)]+_0x1c81cd(0x23f),null,'i'),_0x1c81cd(0x267);if(_0x1b8fe5[_0x1c81cd(0x25c)])return log(_0x398448,_0x1c81cd(0x2a5)+_0x505af1[_0x1c81cd(0x265)]+'\x20done'),await http[_0x1c81cd(0x269)](_0x398448,_0x2c293,_0x505af1['id'],_0x1b8fe5[_0x1c81cd(0x270)],_0x1b8fe5[_0x1c81cd(0x28a)]),await http[_0x1c81cd(0x22e)](_0x398448,_0x2c293,_0x58f1b3,'Ok',_0x1c81cd(0x201),_0x1b8fe5['coin'],_0x1b8fe5['nextRun']),!![];}else{if(_0x254339=='A'||_0x254339=='K'){log(_0x398448,'[xuLyGame]:\x20'+_0x505af1[_0x1c81cd(0x265)]+_0x1c81cd(0x218),null,'w','-');const _0x199b70=await http[_0x1c81cd(0x27d)](_0x398448,_0x254339);if(_0x199b70){log(_0x398448,_0x1c81cd(0x1fa));let _0x1e038c=0x0;while(_0x1e038c<0x2){const _0x18bf8d=await checkTeleWebOpen(_0x505af1,_0x199b70,_0x398448,_0x39a4eb,_0x2ad71e);if(_0x18bf8d===_0x1c81cd(0x267))_0x1e038c++,log(_0x398448,_0x1c81cd(0x242)+_0x1e038c+'/2',null,'i'),await delay(0x3e8);else return _0x18bf8d?(log(_0x398448,_0x1c81cd(0x22b)),!![]):(log(_0x398448,_0x1c81cd(0x24f),null,![]),null);}return log(_0x398448,_0x1c81cd(0x259),null,![]),null;}}else{if(_0x254339=='W'){log(_0x398448,'[xuLyGame]:\x20'+_0x505af1['name']+_0x1c81cd(0x219),null,'w','-');const _0x217f78=await checkTeleWebOpen(_0x505af1,_0x254339,_0x398448,_0x39a4eb,_0x2ad71e);return _0x217f78?(log(_0x398448,_0x1c81cd(0x22b)),!![]):(log(_0x398448,_0x1c81cd(0x24f),null,![]),null);}else return log(_0x398448,_0x1c81cd(0x20b)+_0x254339,null,![]),null;}}}catch(_0x9dd5f6){return log(_0x398448,_0x1c81cd(0x244)+_0x9dd5f6,null,![]),null;}}async function OpenBrowser(_0x58b529,_0x41b4a0,_0x23c3c5){const _0x23cddf=a0_0x595d67;try{const _0x87793a=_0x58b529;log(_0x58b529,_0x23cddf(0x1f6)+JSON['stringify'](_0x58b529),null,'i');if(getAllProfiles['autoSetBrowserPosition']&&getAllProfiles[_0x23cddf(0x240)]==='n'){const _0x18cd11=getAllProfiles['customBrowserPosition']['split']('x');parseInt(_0x18cd11[0x0])>=0x0&&parseInt(_0x18cd11[0x1])>=0x0?(_0x23c3c5['x']=parseInt(_0x18cd11[0x0]),_0x23c3c5['y']=parseInt(_0x18cd11[0x1])):(_0x23c3c5['x']=0x0,_0x23c3c5['y']=0x0),log(_0x58b529,_0x23cddf(0x280)+_0x23c3c5['x']+'x'+_0x23c3c5['y'],null,'w');}const _0x41b722=await genlogin['connect'](_0x58b529,getAllProfiles,_0x41b4a0,_0x23c3c5);log(_0x58b529,_0x23cddf(0x224)+JSON[_0x23cddf(0x21e)](_0x41b722),null,'i'),await delay(0x1388);if(_0x41b722){let _0x51dad0=0x0;const _0x2b643e=0xa;while(_0x51dad0<_0x2b643e){_0x51dad0++;const _0xeb0835=await genlogin[_0x23cddf(0x2b2)](_0x58b529,_0x41b722);if(_0xeb0835<=0x1)return log(_0x58b529,_0x23cddf(0x22d)+_0xeb0835+_0x23cddf(0x236),null,'i'),_0x41b722;const _0x2157d0=await genlogin[_0x23cddf(0x253)](_0x58b529,_0x41b722,_0xeb0835-0x1,0xbb8);if(!_0x2157d0){log(_0x58b529,_0x23cddf(0x279),null,![]);continue;}log(_0x58b529,_0x23cddf(0x28f)),await delay(0xbb8);continue;}}return log(_0x58b529,'[OpenBrowser]:\x20Lỗi\x20khi\x20mở\x20browser:\x20'+JSON[_0x23cddf(0x21e)](_0x58b529)),null;}catch(_0x1106a6){throw new Error(_0x23cddf(0x1f1)+_0x1106a6[_0x23cddf(0x226)]);}}async function checkTeleWebOpen(_0x278e42,_0x9b85ba,_0x54ee5b,_0x4c0995,_0x5ad326){const _0x1becf2=a0_0x595d67;let _0x1719fe,_0x2d9342;try{_0x2d9342=await genlogin[_0x1becf2(0x213)](_0x54ee5b,_0x5ad326,0x0,getAllProfiles[_0x1becf2(0x222)],_0x4c0995[_0x1becf2(0x29a)]);if(_0x9b85ba!='W'){const _0x764b41=await genlogin['elementExistsByXPath'](_0x54ee5b,_0x2d9342,_0x9b85ba[_0x1becf2(0x203)],0x7d0);!_0x764b41&&(await genlogin[_0x1becf2(0x1ec)](_0x54ee5b,_0x2d9342,_0x1becf2(0x27e),0xea60),await delay(0x7d0),await genlogin[_0x1becf2(0x1ec)](_0x54ee5b,_0x2d9342,_0x9b85ba[_0x1becf2(0x28c)],0xea60),await genlogin['setTitle'](_0x54ee5b,_0x2d9342,_0x54ee5b),await delay(0x1388));}else _0x9b85ba='W',await genlogin[_0x1becf2(0x1ec)](_0x54ee5b,_0x2d9342,_0x1becf2(0x27e),0xea60),await delay(0x7d0),await genlogin[_0x1becf2(0x1ec)](_0x54ee5b,_0x2d9342,_0x278e42[_0x1becf2(0x282)],0xea60),await genlogin['setTitle'](_0x54ee5b,_0x2d9342,_0x54ee5b),await delay(0x1388);log(_0x54ee5b,_0x1becf2(0x2b5),null,'i');const _0x37ea5c=await genlogin[_0x1becf2(0x2ab)](_0x54ee5b),_0x3cabaf=await http[_0x1becf2(0x1ea)](_0x54ee5b,_0x54ee5b,_0x278e42[_0x1becf2(0x265)],_0x37ea5c[_0x1becf2(0x23b)],'',_0x1becf2(0x24c),_0x1becf2(0x225));_0x1719fe=_0x3cabaf['ID'];const _0x17e13b={'firstPage':_0x2d9342,'bot':_0x278e42,'profileNameId':_0x54ee5b,'getAks':_0x9b85ba,'genlogin':genlogin,'http':http,'browser':_0x5ad326,'dataId':_0x3cabaf['ID'],'taskIndex':taskInfo[_0x1becf2(0x1ed)],'screenDataBuffer2':screenDataBuffer1,'tasksDataBuffer2':tasksDataBuffer1};let _0x16a016=null;log(_0x54ee5b,_0x1becf2(0x26a)+json(_0x1719fe),null,'i');if(timgame&&_0x9b85ba!='W'){await http['updateData'](_0x54ee5b,_0x54ee5b,_0x1719fe,_0x1becf2(0x298));const _0x57c10c=await loadGame(_0x1becf2(0x2b6),_0x17e13b,_0x16a016,_0x1719fe,_0x54ee5b);if(_0x57c10c[_0x1becf2(0x25c)]==_0x1becf2(0x267))return log(_0x54ee5b,_0x1becf2(0x261)+_0x278e42[_0x1becf2(0x265)]+_0x1becf2(0x23f),null,'i'),await http[_0x1becf2(0x22e)](_0x54ee5b,_0x54ee5b,_0x1719fe,_0x1becf2(0x238)),_0x1becf2(0x267);else{if(!_0x57c10c)return log(_0x54ee5b,_0x1becf2(0x2b4)+_0x278e42[_0x1becf2(0x265)],null,![]),await http[_0x1becf2(0x22e)](_0x54ee5b,_0x54ee5b,_0x1719fe,_0x1becf2(0x245),'Fail'),null;}_0x57c10c['HostName']&&(_0x16a016=_0x57c10c[_0x1becf2(0x2ae)]);}await http[_0x1becf2(0x22e)](_0x54ee5b,_0x54ee5b,_0x1719fe,_0x1becf2(0x23a));const _0x4b5da0=await loadGame(_0x278e42[_0x1becf2(0x265)],_0x17e13b,_0x16a016,_0x1719fe,_0x54ee5b);if(!_0x4b5da0[_0x1becf2(0x25c)])return log(_0x54ee5b,_0x1becf2(0x28d)+_0x278e42[_0x1becf2(0x265)],null,![]),log(_0x54ee5b,_0x1becf2(0x241)+json(_0x4b5da0),null,![]),await http[_0x1becf2(0x22e)](_0x54ee5b,_0x54ee5b,_0x1719fe,_0x1becf2(0x245),_0x1becf2(0x245)),null;else{if(_0x4b5da0[_0x1becf2(0x25c)]==_0x1becf2(0x267))return log(_0x54ee5b,_0x1becf2(0x261)+_0x278e42['name']+_0x1becf2(0x23f),null,'i'),await http['updateData'](_0x54ee5b,_0x54ee5b,_0x1719fe,_0x1becf2(0x267)),_0x1becf2(0x267);}return await http['nextRunTime'](_0x54ee5b,_0x54ee5b,_0x278e42['id'],_0x4b5da0[_0x1becf2(0x270)],_0x4b5da0['nextRunStamp']),await http[_0x1becf2(0x22e)](_0x54ee5b,_0x54ee5b,_0x1719fe,'Ok',_0x1becf2(0x201),_0x4b5da0[_0x1becf2(0x254)],_0x4b5da0['nextRun']),log(_0x54ee5b,_0x1becf2(0x263)+_0x278e42[_0x1becf2(0x265)]+'\x20thành\x20công'),await delay(0x7d0),_0x1719fe=null,_0x2d9342=null,!![];}catch(_0x3dda33){return log(_0x54ee5b,_0x1becf2(0x2a8)+_0x3dda33,null,![]),await http['updateData'](_0x54ee5b,_0x54ee5b,_0x1719fe,_0x1becf2(0x245),_0x1becf2(0x245)),_0x1719fe=null,_0x2d9342=null,null;}}async function loadGame(_0xc13d3e,_0x4d1ae5,_0x197ea9,_0x52351b,_0x400188){const _0x2d098f=a0_0x595d67;try{const _0x4249dc=pathToFileURL(a0_0x2d5495[_0x2d098f(0x1f5)](__dirname,_0x2d098f(0x2a3),_0xc13d3e+'.js'))[_0x2d098f(0x212)];log(_0x400188,_0x2d098f(0x294)+_0x4249dc);const _0x58af3f=await import(_0x4249dc);if(typeof _0x58af3f[_0x2d098f(0x2a6)]===_0x2d098f(0x2b0)){const _0x3a9f94=await _0x58af3f[_0x2d098f(0x2a6)](_0x4d1ae5,_0x197ea9);await delay(0x3e8);if(!_0x3a9f94[_0x2d098f(0x25c)])return log(_0x400188,_0x2d098f(0x1f7)+_0xc13d3e+_0x2d098f(0x1ef),null,![]),null;else return _0x3a9f94['status']===_0x2d098f(0x267)?(log(_0x400188,'[loadGame]:\x20Chạy\x20'+_0xc13d3e+_0x2d098f(0x23f),null,'i'),_0x3a9f94):(log(_0x400188,_0x2d098f(0x266)+_0xc13d3e+'\x20'+_0x3a9f94[_0x2d098f(0x25c)],null,'i'),_0x3a9f94);}else return await delay(0x3e8),log(_0x400188,_0x2d098f(0x1f7)+_0xc13d3e+_0x2d098f(0x22a),null,![]),null;}catch(_0x3fbf97){return log(_0x400188,_0x2d098f(0x1fd)+_0xc13d3e+':\x20'+_0x3fbf97,null,![]),teleId&&await http[_0x2d098f(0x271)](_0x400188,teleId,'['+_0x400188+']['+_0xc13d3e+_0x2d098f(0x290)+_0x3fbf97),null;}}async function closeBrowser(_0x5edd4d='',_0x206c9a){const _0x3d2ef1=a0_0x595d67;try{if(_0x206c9a){if(_0x206c9a['connected']){for(const _0x54dfca of await _0x206c9a[_0x3d2ef1(0x20d)]()){await _0x54dfca[_0x3d2ef1(0x20f)]();}return await _0x206c9a[_0x3d2ef1(0x20f)](),_0x206c9a=null,global['gc']&&(global['gc'](),log(_0x3d2ef1(0x292),'Garbage\x20Collector\x20đã\x20chạy!',null,'i','+')),log(_0x5edd4d,_0x3d2ef1(0x27b)+_0x5edd4d+'\x20thành\x20công',null,'w'),!![];}}else log(_0x5edd4d,_0x3d2ef1(0x257),null,'i');return null;}catch(_0x44af7b){return log(_0x5edd4d,_0x3d2ef1(0x239)+_0x5edd4d+':\x20'+_0x44af7b,null,![]),null;}}function a0_0x4120(){const _0x23d383=['Tìm',']:\x20START\x20SCRIPT','scale','getBotAll','worker1','][xuLyTask]:\x20Task\x20','7jNlMpA','\x20Api\x20mode','No\x20bot\x20found','findIndex','width','scripts','[worker1.procScreenArr]action:\x20','[xuLyGame]:\x20Thực\x20thi\x20','default','height','[checkTeleWebOpen]:\x20Lỗi\x20trong\x20quá\x20trình\x20mở\x20trang\x20:\x20','load','nextrun','nowTime','store','end','HostName','[worker1.procScreenArr]\x20posVal:','function','Không\x20tìm\x20thấy\x20indexGenP','countOpenTabs','terminate','[checkTeleWebOpen]:\x20Không\x20tìm\x20thấy\x20game\x20','[checkTeleWebOpen]:\x20vào\x20loadGame','timGame','Timeout\x20while\x20acquiring\x20lock','botTimeout','3788817GEpLMg','getTask','addData',']:\x20Script\x20Mode','openUrl','taskIndex','[xuLyBrowser]:getAllProfiles:\x20','\x20không\x20trả\x20về\x20status','StartApi','Lỗi\x20xử\x20lý\x20profile:\x20','profileThreads','clrInterval','\x20ok','join','[OpenBrowser]:\x20Processing\x20profile:\x20','[loadGame]:\x20Script\x20','[worker1.procScreenArr]vào\x20open','Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng','[xuLyGame]:\x20getAks\x20OK','Không\x20thể\x20đóng\x20màn\x20hình:\x20vị\x20trí\x20không\x20hợp\x20lệ\x20action:\x20','done','[loadGame]:\x20Lỗi\x20khi\x20load\x20và\x20thực\x20thi\x20script\x20','open','[xoaTimeout]worker1:\x20Xóa\x20Interval:','clrTimeout','Done','][xuLyTask]:\x20vào\x20xuLyTask','InputSearch','5053116KBRsxL','][xuLyProfiles]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile\x20','][OK]:\x20STOP\x20SCRIPT','6300CbvJYW','][xuLyProfiles]:\x20Lỗi\x20:\x20','length','][xuLyProfiles]index:\x20','[xuLyGame]:\x20Sai\x20aks\x20','allSettled','pages',':\x20Sai\x20aks\x20','close','8472296SdGJfZ','[xuLyBrowser]:\x20không\x20lấy\x20được\x20bot','href','activateTab','timestamp','\x20Tele\x20K\x20OK','Không\x20tìm\x20thấy\x20giá\x20trị\x20status=0','tinhThoiGian','\x20Script\x20mode','\x20Web\x20mode','value','STOP\x20SCRIPT','onOff','[worker1.procScreenArr]vào\x20close','stringify','pid','[worker1data.task]:data.task\x20','[xuLyTungProfile]:\x20Lỗi:\x20','browserWidthHeight','add','[OpenBrowser]:\x20GenLogin:\x20','running','message','\x20|\x20nextrun:\x20','fisrtOpenBrowser',':\x20Bot\x20','\x20không\x20phải\x20là\x20một\x20hàm\x20hợp\x20lệ','[xuLyGame]:\x20checkTeleWebOpen\x20OK','][xuLyProfiles]:\x20Một\x20số\x20profiles\x20gặp\x20lỗi:\x20','[OpenBrowser]]Chỉ\x20có\x20','updateData','][xuLyTask]profileQueue:\x20concurrency:','][xuLyProfiles]:\x20Đã\x20thêm\x20profile\x20','\x20OFF','\x20Action:','\x20Chưa\x20tới\x20giờ\x20chạy','[eTimeout]worker1:\x20reset\x20timeout','][xuLyTask]:\x20Hoàn\x20thành\x20xử\x20lý\x20task:\x20','\x20tab\x20đang\x20mở','delayOpenProfile','loop\x20new\x20game','[closeBrowser]:\x20Lỗi\x20khi\x20đóng\x20trình\x20duyệt\x20','Vào','date','\x20set\x20open\x20default\x20pos:','timeout','now','\x20loop','autoSetBrowserPosition','[checkTeleWebOpen]:\x20','[xuLyGame]:\x20Loop\x20lại\x20,\x20loop\x20lại\x20lần\x20','profiles','[xuLyGame]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20Game:\x20','Fail','No\x20profile\x20found','][xuLyTask]:\x20Không\x20lấy\x20được\x20dữ\x20liệu\x20profiles\x20','wait','START\x20SCRIPT','\x20Tele\x20A\x20OK','screenArr','Start','[xuLyBrowser]:\x20Không\x20mở\x20được\x20trình\x20duyệt\x20','[xuLyBrowser]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20browser:\x20','[xuLyGame]:\x20checkTeleWebOpen\x20có\x20gì\x20đó\x20sai\x20sai\x20rồi\x20bro','[worker1.procScreenArr]vị\x20trí\x20default\x20không\x20cần\x20close','[xuLyBrowser]:\x20browser\x20disconnected\x20','Stop','closeTab','coin','APIKEY','profileTimeout','[closeBrowser]:\x20Không\x20có\x20trình\x20duyệt\x20để\x20đóng','14559700zpUdKQ','[xuLyGame]:Max\x20loop\x20rồi\x20bro','][xuLyTask]:\x20Chờ\x205\x20giây\x20trước\x20khi\x20xử\x20lý\x20task\x20tiếp\x20theo...','[xuLyTungProfile]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile','status','script','aks','17238zJiVeu',':\x20XONG\x201\x20LƯỢT','[checkTeleWebOpen]:\x20Thực\x20thi\x20','url','[checkTeleWebOpen]:\x20Thực\x20thi\x20script\x20','][xuLyProfiles]:\x20Thêm\x20profile\x20','name','[loadGame]:\x20Chạy\x20','loop','[worker1.procScreenArr]\x20index:','nextRunTime','[checkTeleWebOpen]:\x20dataId:\x20','\x20chưa\x20đến\x20thời\x20gian\x20chạy','Lỗi\x20gì\x20đó\x20task\x20','][xuLyProfiles]:\x20Đã\x20xử\x20lý\x20tất\x20cả\x20profiles\x20thành\x20công\x20','[xuLyBrowser]:\x20Bot\x20OK','[xuLyTungProfile]:\x20Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng','nextRun','tele','\x20lỗi','getAllProfiles\x20','nextrunstamp','tele_id','DONE','6397506ZcjqOO','connected','[OpenBrowser]\x20Lỗi\x20khi\x20đóng\x20tab\x20mới','[worker1.procScreenArr]lỗi\x20','[closeBrowser]:\x20Đóng\x20trình\x20duyệt\x20','notify','getAks','https://www.google.com','\x20Web\x20OK','[OpenBrowser]:force\x20set\x20Position:\x20','1010TAtDOJ','ref','[xuLyBrowser]:\x20Bot\x20không\x20tìm\x20thấy','275QXByKP','push','][xuLyTask]:\x20currentDateTime:\x20','compareExchange','env','Version:','nextRunStamp','][xuLyTask]:\x20không\x20lấy\x20được\x20profile','FistUrl','[checkTeleWebOpen]:\x20Không\x20thực\x20thi\x20script\x20','\x20action:\x20','[OpenBrowser]\x20Đóng\x20tab\x20mới\x20thành\x20công','][ERR]:\x20Lỗi\x20','type','Memory','rejected','[loadGame]:scriptPath\x20','[xuLyGame]:\x20','\x20set\x20close\x20ok',',\x20pos:\x20'];a0_0x4120=function(){return _0x23d383;};return a0_0x4120();}async function procScreenArr(_0x4ef3f2,_0x651441,_0x1414ac){const _0x4a4f13=a0_0x595d67;try{await acquireLock(screenData);let _0x5e3e5e={};log(_0x1414ac,_0x4a4f13(0x2a4)+_0x4ef3f2+_0x4a4f13(0x297)+json(_0x651441),null,'w','-');if(_0x4ef3f2===_0x4a4f13(0x1fe)){log(_0x1414ac,_0x4a4f13(0x1f8),null,'w'),_0x5e3e5e[_0x4a4f13(0x29a)]=Atomics[_0x4a4f13(0x2a9)](screenData,0x1)/0xf4240,_0x5e3e5e[_0x4a4f13(0x2a2)]=Atomics['load'](screenData,0x2),_0x5e3e5e[_0x4a4f13(0x2a7)]=Atomics[_0x4a4f13(0x2a9)](screenData,0x3);for(let _0x2bcaee=0xa;_0x2bcaee<screenData['length']-0x1;_0x2bcaee=_0x2bcaee+0x3){const _0x512e8c=Atomics[_0x4a4f13(0x2a9)](screenData,_0x2bcaee);if(_0x512e8c===0x2)return Atomics['store'](screenData,_0x2bcaee,0x1),_0x5e3e5e['default']=0x0,_0x5e3e5e['x']=Atomics[_0x4a4f13(0x2a9)](screenData,_0x2bcaee+0x1),_0x5e3e5e['y']=Atomics[_0x4a4f13(0x2a9)](screenData,_0x2bcaee+0x2),log(_0x1414ac,_0x4a4f13(0x268)+_0x2bcaee+'\x20set\x20open\x20ok\x20pos:'+json(_0x5e3e5e),null,'w'),await releaseLock(screenData),_0x5e3e5e;if(_0x512e8c===0x0)return Atomics['store'](screenData,_0x2bcaee,0x1),_0x5e3e5e['default']=0x1,_0x5e3e5e['x']=0x0,_0x5e3e5e['y']=0x0,log(_0x1414ac,_0x4a4f13(0x268)+_0x2bcaee+_0x4a4f13(0x23c)+json(_0x5e3e5e),null,'w'),await releaseLock(screenData),_0x5e3e5e;}await releaseLock(screenData);throw new Error(_0x4a4f13(0x1f9));}else{if(_0x4ef3f2===_0x4a4f13(0x20f)&&_0x651441['x']>=0x0&&_0x651441['y']>=0x0){log(_0x1414ac,_0x4a4f13(0x21d),null,'w');if(_0x651441[_0x4a4f13(0x2a6)]===0x1)return log(_0x1414ac,_0x4a4f13(0x250),null,'w'),await releaseLock(screenData),!![];for(let _0x31696f=0xa;_0x31696f<screenData[_0x4a4f13(0x209)]-0x1;_0x31696f+=0x3){const _0x1f1003=Atomics[_0x4a4f13(0x2a9)](screenData,_0x31696f);if(_0x1f1003===0x1){const _0x1963ac=Atomics[_0x4a4f13(0x2a9)](screenData,_0x31696f+0x1),_0x552de0=Atomics[_0x4a4f13(0x2a9)](screenData,_0x31696f+0x2);if(_0x1963ac===_0x651441['x']&&_0x552de0===_0x651441['y'])return Atomics[_0x4a4f13(0x2ac)](screenData,_0x31696f,0x2),log(_0x1414ac,'[worker1.procScreenArr]\x20index:'+_0x31696f+_0x4a4f13(0x296),null,'w'),Atomics[_0x4a4f13(0x27c)](screenData,_0x31696f),await releaseLock(screenData),!![];}}await releaseLock(screenData);throw new Error(_0x4a4f13(0x1fb)+_0x4ef3f2+_0x4a4f13(0x297)+json(_0x651441));}else return log(_0x1414ac,_0x4a4f13(0x2af)+json(_0x651441)+_0x4a4f13(0x232)+_0x4ef3f2,null,'w'),await releaseLock(screenData),!![];}}catch(_0x301bae){return log(_0x1414ac,_0x4a4f13(0x27a)+_0x301bae+_0x4a4f13(0x28e)+_0x4ef3f2+_0x4a4f13(0x297)+json(_0x651441),null,![]),await releaseLock(screenData),![];}}function a0_0x348a(_0x193eff,_0x5da866){const _0x4120ac=a0_0x4120();return a0_0x348a=function(_0x348a88,_0x40d4ae){_0x348a88=_0x348a88-0x1e6;let _0x33e7a5=_0x4120ac[_0x348a88];return _0x33e7a5;},a0_0x348a(_0x193eff,_0x5da866);}async function acquireLock(_0xf82cd1,_0x229082=0x7530){const _0x17936d=a0_0x595d67,_0x56c25c=Date[_0x17936d(0x23e)]();while(Atomics[_0x17936d(0x287)](_0xf82cd1,0x8,0x0,0x1)!==0x0){if(Date[_0x17936d(0x23e)]()-_0x56c25c>_0x229082)throw new Error(_0x17936d(0x1e6));Atomics[_0x17936d(0x248)](_0xf82cd1,0x8,0x1,_0x229082);}}async function releaseLock(_0xf70e2d){const _0x18e2c0=a0_0x595d67;Atomics[_0x18e2c0(0x2ac)](_0xf70e2d,0x8,0x0),Atomics['notify'](_0xf70e2d,0x8);}async function xoaTimeout(_0x2ca7fa){const _0x117081=a0_0x595d67;try{clearTimeout(_0x2ca7fa),log('[xoaTimeout]worker1:\x20Xóa\x20timeout:'+_0x2ca7fa,null,'i',_0x117081(0x200));}catch(_0x1e3de5){log('[xoaTimeout]worker1:\x20'+_0x1e3de5,null,![]);}}async function xoaInterval(_0x538e55){const _0x258e60=a0_0x595d67;try{clearInterval(_0x538e55),log(_0x258e60(0x1ff)+_0x538e55,null,'i',_0x258e60(0x1f3));}catch(_0x1bf9f2){log('[xoaTimeout]worker1:\x20'+_0x1bf9f2,null,![]);}}async function delay(_0x15a72b){return new Promise(async _0x17c505=>{setTimeout(_0x17c505,_0x15a72b);});}async function eTimeout(){const _0x34d66d=a0_0x595d67;return log('[eTimeout]worker1:\x20timeout',null,'w'),Atomics['store'](tasksData,taskInfo[_0x34d66d(0x1ed)],0x1),!![];}async function cTimeout(){const _0x471705=a0_0x595d67;if(Atomics[_0x471705(0x2a9)](tasksData,taskInfo[_0x471705(0x1ed)])===0x1)return!![];return null;}async function rstTimeout(){const _0x313b3e=a0_0x595d67;return log(_0x313b3e(0x234),null,'w'),Atomics[_0x313b3e(0x287)](tasksData,taskInfo['taskIndex'],0x1,0x2),!![];}
const a0_0x1d6b4f=a0_0x2f16;(function(_0x156d4e,_0x1e48ac){const _0x39009d=a0_0x2f16,_0x2c7fa7=_0x156d4e();while(!![]){try{const _0x469e13=parseInt(_0x39009d(0x24e))/0x1+-parseInt(_0x39009d(0x24a))/0x2+-parseInt(_0x39009d(0x1fa))/0x3*(-parseInt(_0x39009d(0x27c))/0x4)+parseInt(_0x39009d(0x2a8))/0x5*(parseInt(_0x39009d(0x28e))/0x6)+-parseInt(_0x39009d(0x22b))/0x7*(parseInt(_0x39009d(0x231))/0x8)+parseInt(_0x39009d(0x26d))/0x9+parseInt(_0x39009d(0x285))/0xa*(parseInt(_0x39009d(0x20e))/0xb);if(_0x469e13===_0x1e48ac)break;else _0x2c7fa7['push'](_0x2c7fa7['shift']());}catch(_0x330ca1){_0x2c7fa7['push'](_0x2c7fa7['shift']());}}}(a0_0x3075,0x90faf));import'dotenv/config';import a0_0x5304c1 from'fs';import a0_0x349233 from'path';import{fileURLToPath,pathToFileURL}from'url';import{expose}from'threads/worker';import{log,json}from'./modules/logger.js';import a0_0x5f3e79 from'./modules/Genlogin.js';import a0_0x1f7007 from'./modules/http.js';import a0_0x33b63d from'p-queue';const __filename=fileURLToPath(import.meta[a0_0x1d6b4f(0x2ad)]),__dirname=a0_0x349233[a0_0x1d6b4f(0x25d)](__filename);let profileQueue,genlogin,profileNameId0,profileId,http,getAllProfiles,taskInfo,GenDataProfile,screenArrData,timgame;genlogin=new a0_0x5f3e79('',!![]),http=new a0_0x1f7007(process[a0_0x1d6b4f(0x260)]['SERVER_HOST'],process['env'][a0_0x1d6b4f(0x1fc)],!![]);let firstRun=!![],delayOpenProfile=0xbb8,profileTimeout=0x5265c0,botTimeout=0x5265c0,profileThreads=0x1,browserInfo={},version,pos0,screenData,tasksData,screenDataBuffer1,tasksDataBuffer1,teleId=null;const worker1=async _0x270efd=>{const _0x2c03c3=a0_0x1d6b4f,{tasksDataBuffer:_0x109cea,screenDataBuffer:_0x410936,action:_0xe6d0e3,task:_0x59016d,dataBrw:_0x254560,GenDataProfile0:_0x48cffc,timgame0:_0x2ac9cc,dataPayload:_0x461961,timeout:_0x1a77d2,tele_id:_0x26665c}=_0x270efd;taskInfo=_0x59016d;_0x26665c&&_0x26665c[_0x2c03c3(0x261)]&&(teleId=_0x26665c[_0x2c03c3(0x261)]);screenDataBuffer1=_0x410936,tasksDataBuffer1=_0x109cea,screenData=new Int32Array(_0x410936),tasksData=new Int32Array(_0x109cea);try{if(_0x1a77d2)return log(_0x2c03c3(0x2a1),_0x2c03c3(0x267),null,'w'),{'success':![],'error':_0x2c03c3(0x267)};else{if(_0x59016d!=='screenArr'){getAllProfiles=_0x254560,log(_0x2c03c3(0x2a1),'[worker1data.task]:data.task\x20'+JSON[_0x2c03c3(0x27a)](_0x270efd[_0x2c03c3(0x259)]),null,'c'),log(_0x2c03c3(0x2a1),_0x2c03c3(0x2aa)+JSON[_0x2c03c3(0x27a)](getAllProfiles),null,'c'),GenDataProfile=_0x48cffc,timgame=_0x2ac9cc,log(_0x2c03c3(0x2a1),'['+_0x59016d[_0x2c03c3(0x220)]+_0x2c03c3(0x25a),null,'w');const _0x28eb4f=await xuLyTask(_0x59016d);return log(_0x2c03c3(0x2a1),''+JSON[_0x2c03c3(0x27a)](_0x28eb4f),null,'w'),log(_0x2c03c3(0x2a1),'DONE',null,'w','done'),_0x28eb4f?{'success':!![],'result':_0x28eb4f}:{'success':![],'result':_0x28eb4f};}else return log(_0x2c03c3(0x2a1),_0x2c03c3(0x2af)+_0x59016d,null,'w'),{'success':![],'error':_0x2c03c3(0x2a1)};}}catch(_0x2aebac){return log(_0x2c03c3(0x2a1),_0x2c03c3(0x24d)+_0x2aebac,null,![]),{'success':![],'error':_0x2c03c3(0x2a1)};}};expose({'worker1':worker1});async function xuLyTask(_0x2d2dd7){const _0x45fe6f=a0_0x1d6b4f;try{log(_0x45fe6f(0x2a1),'['+_0x2d2dd7['name']+_0x45fe6f(0x2a6),null,'i','-');const _0x2a03a4=await genlogin['nowTime'](_0x45fe6f(0x2a1)),_0x200417=_0x2a03a4[_0x45fe6f(0x24c)];if(_0x200417<_0x2d2dd7[_0x45fe6f(0x287)])return log(_0x45fe6f(0x2a1),'['+_0x2d2dd7['name']+_0x45fe6f(0x292)+JSON[_0x45fe6f(0x27a)](_0x2d2dd7[_0x45fe6f(0x220)])+_0x45fe6f(0x28c),null,'i'),log(_0x45fe6f(0x2a1),'['+_0x2d2dd7[_0x45fe6f(0x220)]+_0x45fe6f(0x294)+JSON[_0x45fe6f(0x27a)](_0x2a03a4)+_0x45fe6f(0x225)+JSON['stringify'](_0x2d2dd7[_0x45fe6f(0x275)]),null,'w'),log(_0x45fe6f(0x2a1),'['+_0x2d2dd7[_0x45fe6f(0x220)]+_0x45fe6f(0x294)+JSON[_0x45fe6f(0x27a)](_0x200417)+_0x45fe6f(0x225)+JSON[_0x45fe6f(0x27a)](taskNextRunDateTime),null,'w'),log(_0x45fe6f(0x2a1),'['+_0x2d2dd7['name']+_0x45fe6f(0x246),null,'i'),await delay(0x1388),null;let _0x6faf1e=await http[_0x45fe6f(0x241)]('worker1',_0x2d2dd7['name']);if(_0x6faf1e[_0x45fe6f(0x266)]['profiles']['length']<=0x0){log('worker1','['+_0x2d2dd7['name']+_0x45fe6f(0x268),null,![]);throw new Error(_0x45fe6f(0x271));}firstRun&&(profileThreads=parseInt(_0x2d2dd7[_0x45fe6f(0x298)]),profileQueue=new a0_0x33b63d({'concurrency':profileThreads}),log('worker1','['+_0x2d2dd7[_0x45fe6f(0x220)]+_0x45fe6f(0x249)+profileThreads,null,'w'),firstRun=![],delayOpenProfile=parseInt(_0x2d2dd7['delayOpenProfile'])*0x3e8,profileTimeout=parseInt(_0x2d2dd7['profileTimeout'])*0x3e8,botTimeout=parseInt(_0x2d2dd7['botTimeout'])*0x3e8,version=await getPackageVersion());const _0x4a0d92=await xuLyProfiles(_0x6faf1e['value']['profiles'],_0x2d2dd7[_0x45fe6f(0x220)]);if(!_0x4a0d92){log('worker1','['+_0x2d2dd7['name']+_0x45fe6f(0x24b)+json(_0x4a0d92),null,![]);throw new Error(_0x45fe6f(0x271));}return log(_0x45fe6f(0x2a1),'['+_0x2d2dd7[_0x45fe6f(0x220)]+_0x45fe6f(0x29c)+_0x2d2dd7[_0x45fe6f(0x220)]+_0x45fe6f(0x23b)),await delay(0x7d0),log(_0x45fe6f(0x2a1),'['+_0x2d2dd7[_0x45fe6f(0x220)]+_0x45fe6f(0x276)+JSON['stringify'](_0x2d2dd7[_0x45fe6f(0x220)])),!![];}catch(_0x3c6199){return log(_0x45fe6f(0x2a1),'['+_0x2d2dd7['name']+'][xuLyTask]:\x20Lỗi\x20while:\x20'+_0x3c6199,null,![]),null;}}async function xuLyProfiles(_0x374386,_0xe697e7){const _0x4338c1=a0_0x1d6b4f;try{const _0x4ba63a=[];for(const [_0x33686b,_0x1afb03]of _0x374386['entries']()){const _0xc24625=await GenDataProfile[_0x4338c1(0x22e)](_0x521d54=>_0x521d54['pid']===_0x1afb03);if(_0x33686b!==-0x1)log('worker1','['+_0xe697e7+_0x4338c1(0x29d)+_0xc24625);else{log(_0x4338c1(0x2a1),'['+_0xe697e7+_0x4338c1(0x238));throw new Error(_0x4338c1(0x247));}log(_0x4338c1(0x2a1),'['+_0xe697e7+_0x4338c1(0x22a)+_0x1afb03+_0x4338c1(0x208)+profileThreads,null,'i'),_0x4ba63a['push'](profileQueue[_0x4338c1(0x21f)](async()=>{const _0x1fdefd=_0x4338c1;try{delayOpenProfile>0x0?(log('worker1','['+_0xe697e7+_0x1fdefd(0x27f)+_0x1afb03+_0x1fdefd(0x27e)+delayOpenProfile+'ms',null,'w','-'),await delay(delayOpenProfile)):log(_0x1fdefd(0x2a1),'['+_0xe697e7+_0x1fdefd(0x27f)+_0x1afb03,null,'w','-'),await xuLyTungProfile(_0x1afb03,GenDataProfile[_0xc24625]);}catch(_0x4b1b3e){log('worker1','['+_0xe697e7+_0x1fdefd(0x251)+_0x1afb03+':\x20'+_0x4b1b3e[_0x1fdefd(0x239)],null,![]);throw _0x4b1b3e;}})),log(_0x4338c1(0x2a1),'['+_0xe697e7+'][xuLyProfiles]:\x20Đã\x20thêm\x20profile\x20'+_0x1afb03+'\x20vào\x20hàng\x20đợi.');}const _0x40fee7=await Promise[_0x4338c1(0x216)](_0x4ba63a),_0x468f43=_0x40fee7[_0x4338c1(0x215)](_0x5e8a09=>_0x5e8a09[_0x4338c1(0x243)]===_0x4338c1(0x1f1));return _0x468f43[_0x4338c1(0x283)]>0x0?log(_0x4338c1(0x2a1),'['+_0xe697e7+_0x4338c1(0x2a2)+JSON['stringify'](_0x468f43),null,![]):log(_0x4338c1(0x2a1),'['+_0xe697e7+_0x4338c1(0x1f8)+json(_0x40fee7)),!![];}catch(_0x354969){return log('worker1','['+_0xe697e7+_0x4338c1(0x1f9)+_0x354969,null,![]),null;}}async function xuLyTungProfile(_0x5bb180,_0x241254){const _0xdd2967=a0_0x1d6b4f;let _0x9b21d3,_0x276a71;const _0x391fb8=_0x5bb180;let _0x184b41;try{await delay(delayOpenProfile),log(_0x5bb180,_0xdd2967(0x23c),null,'i'),_0x9b21d3=await genlogin['nowTime'](_0x5bb180),await http['addData'](_0xdd2967(0x2a1),_0x5bb180,_0xdd2967(0x25f),_0x9b21d3[_0xdd2967(0x24c)],'',_0xdd2967(0x299)+version,_0xdd2967(0x20c)),log(_0x5bb180,_0xdd2967(0x206)+_0x5bb180,null,'w'),_0x184b41=await procScreenArr(_0xdd2967(0x217),null,_0x5bb180);if(_0x184b41['x']===undefined||_0x184b41['y']===undefined){log(_0x5bb180,_0xdd2967(0x284),null,![]);throw new Error('Không\x20tìm\x20thấy\x20giá\x20trị\x20status=0');}const _0x4aa819=await xuLyBrowser(_0x5bb180,_0x241254,_0x184b41);await procScreenArr('close',_0x184b41,_0x5bb180);const _0x3ea0fb=await genlogin[_0xdd2967(0x21b)](_0x9b21d3[_0xdd2967(0x232)]);return await http[_0xdd2967(0x23f)](_0xdd2967(0x2a1),_0x5bb180,'STOP\x20SCRIPT','','',_0x3ea0fb,_0xdd2967(0x1ee)),_0x4aa819;}catch(_0x579531){log(_0x5bb180,_0xdd2967(0x277)+_0x579531,null,![]);if(_0x276a71)await Thread[_0xdd2967(0x2ac)](_0x276a71);await procScreenArr(_0xdd2967(0x219),_0x184b41,_0x5bb180);const _0x4db786=await genlogin[_0xdd2967(0x21b)](_0x9b21d3?.[_0xdd2967(0x232)]||Date[_0xdd2967(0x265)]());await http[_0xdd2967(0x23f)]('worker1',_0x5bb180,_0xdd2967(0x210),'','',_0x4db786,_0xdd2967(0x1ee));throw _0x579531;}}async function xuLyBrowser(_0x28ae3d,_0x58f7a2,_0x19ea26){const _0x373006=a0_0x1d6b4f;let _0x214c81;try{const _0x4165b9=_0x28ae3d;if(!browserInfo[_0x28ae3d])browserInfo[_0x28ae3d]={};browserInfo[_0x28ae3d][_0x373006(0x29e)]=0x0,log(_0x28ae3d,_0x373006(0x262)+json(browserInfo),null,'w','w');if(browserInfo[_0x28ae3d][_0x373006(0x29e)]==0x0){_0x214c81=await OpenBrowser(_0x28ae3d,_0x58f7a2,_0x19ea26);if(!_0x214c81){log(_0x28ae3d,_0x373006(0x21d)+_0x28ae3d,null,![]);throw new Error('[xuLyBrowser]:\x20Không\x20mở\x20được\x20trình\x20duyệt\x20'+_0x28ae3d);}browserInfo[_0x28ae3d]['fisrtOpenBrowser']=0x1;}if(!_0x214c81[_0x373006(0x200)])throw new Error('[xuLyBrowser]:\x20browser\x20disconnected\x20'+_0x28ae3d);let _0x31863e=0x0;const _0x400916=await http[_0x373006(0x25e)](_0x373006(0x2a1),_0x4165b9);if(!_0x400916){log(_0x28ae3d,_0x373006(0x20f),null,![]);throw new Error(_0x373006(0x233));}if(_0x400916[_0x373006(0x283)]<=0x0){log(_0x28ae3d,_0x373006(0x1fe),null,![]);throw new Error(_0x373006(0x233));}for(const _0xcfd9a2 of _0x400916){if(_0xcfd9a2){if(_0xcfd9a2['type']!='script')continue;if(_0xcfd9a2[_0x373006(0x266)]==='end'){log(_0x28ae3d,':\x20XONG\x201\x20LƯỢT',null,'i');break;}if(!_0xcfd9a2['aks']){log(_0x28ae3d,_0x373006(0x255)+json(_0xcfd9a2)+_0x373006(0x281),null,![]);continue;}if(_0xcfd9a2['onOff']==='0'){log(_0x28ae3d,':\x20Bot\x20'+json(_0xcfd9a2[_0x373006(0x220)])+_0x373006(0x1f5),null,![]);continue;}const _0x431d30=await genlogin['nowTime'](_0x28ae3d);if(_0xcfd9a2['nextRunStamp']>_0x431d30[_0x373006(0x232)]){log(_0x28ae3d,_0x373006(0x255)+json(_0xcfd9a2['name'])+_0x373006(0x2b2),null,'w');continue;}switch(_0xcfd9a2['aks']){case'A':log(_0x28ae3d,':\x20'+json(_0xcfd9a2[_0x373006(0x220)])+_0x373006(0x2b4)),await xuLyGame(_0xcfd9a2,'A',_0x28ae3d,_0x58f7a2,_0x19ea26,_0x214c81);break;case'K':log(_0x28ae3d,':\x20'+json(_0xcfd9a2[_0x373006(0x220)])+'\x20Tele\x20K\x20OK'),await xuLyGame(_0xcfd9a2,'K',_0x28ae3d,_0x58f7a2,_0x19ea26,_0x214c81);break;case'W':log(_0x28ae3d,':\x20'+json(_0xcfd9a2['name'])+_0x373006(0x26c)),await xuLyGame(_0xcfd9a2,'W',_0x28ae3d,_0x58f7a2,_0x19ea26,_0x214c81);break;default:log(_0x28ae3d,_0x373006(0x245)+json(_0xcfd9a2[_0x373006(0x28f)]),null,![]);break;}log(_0x28ae3d,_0x373006(0x2b0));}}return await closeBrowser(_0x28ae3d,_0x214c81),!![];}catch(_0x1d0d18){return log(_0x28ae3d,_0x373006(0x28a)+_0x1d0d18,null,![]),await closeBrowser(_0x28ae3d,_0x214c81),null;}}async function xuLyGame(_0x4df051,_0x458a57,_0x23f3b0,_0x561fdf,_0xbccf53,_0x8d4de8){const _0x1dcdac=a0_0x1d6b4f;try{const _0x37f4ec=_0x23f3b0;if(_0x4df051[_0x1dcdac(0x2b5)]==='api'){log(_0x23f3b0,_0x1dcdac(0x1f3)+_0x4df051[_0x1dcdac(0x220)]+_0x1dcdac(0x29b),null,'i');const _0x526f88=await genlogin[_0x1dcdac(0x240)](_0x23f3b0),_0x44c2a8=await http[_0x1dcdac(0x23f)](_0x23f3b0,_0x37f4ec,_0x4df051['name'],_0x526f88[_0x1dcdac(0x24c)],'','StartApi','running'),_0x14292b=_0x44c2a8['ID'],_0x353842={'bot':_0x4df051,'profileNameId':_0x23f3b0,'genlogin':genlogin,'http':http,'dataId':_0x14292b},_0x4f5848=await loadGameApi(_0x4df051[_0x1dcdac(0x220)],_0x353842);if(!_0x4f5848[_0x1dcdac(0x243)])return log(_0x23f3b0,'[xuLyGame]:\x20Thực\x20thi\x20'+_0x4df051[_0x1dcdac(0x220)]+_0x1dcdac(0x235),null,![]),await http['updateData'](_0x23f3b0,_0x37f4ec,_0x14292b,_0x1dcdac(0x258),_0x1dcdac(0x258)),null;if(_0x4f5848[_0x1dcdac(0x243)]=='loop')return log(_0x23f3b0,'[xuLyGame]:\x20Thực\x20thi\x20'+_0x4df051[_0x1dcdac(0x220)]+'\x20loop',null,'i'),_0x1dcdac(0x288);if(_0x4f5848[_0x1dcdac(0x243)])return log(_0x23f3b0,'[xuLyGame]:\x20Thực\x20thi\x20'+_0x4df051[_0x1dcdac(0x220)]+_0x1dcdac(0x290)),await http[_0x1dcdac(0x205)](_0x23f3b0,_0x37f4ec,_0x4df051['id'],_0x4f5848['nextRun'],_0x4f5848[_0x1dcdac(0x257)]),await http[_0x1dcdac(0x203)](_0x23f3b0,_0x37f4ec,_0x14292b,'Ok',_0x1dcdac(0x26f),_0x4f5848[_0x1dcdac(0x27d)],_0x4f5848[_0x1dcdac(0x272)]),!![];}else{log(_0x23f3b0,_0x1dcdac(0x1f3)+_0x4df051[_0x1dcdac(0x220)]+_0x1dcdac(0x293),null,'i');const _0x10afbe=await http['getAks'](_0x23f3b0,_0x458a57);if(_0x10afbe){log(_0x23f3b0,_0x1dcdac(0x296));let _0x61388f=0x0;while(_0x61388f<0x2){const _0x1007be=await checkTeleWebOpen(_0x4df051,_0x10afbe,_0x23f3b0,_0xbccf53,_0x8d4de8);if(_0x1007be===_0x1dcdac(0x288))_0x61388f++,log(_0x23f3b0,_0x1dcdac(0x2b3)+_0x61388f+'/2',null,'i'),await delay(0x3e8);else return _0x1007be?(log(_0x23f3b0,'[xuLyGame]:\x20checkTeleWebOpen\x20OK'),!![]):(log(_0x23f3b0,_0x1dcdac(0x27b),null,![]),null);}return log(_0x23f3b0,_0x1dcdac(0x289),null,![]),null;}}}catch(_0x1cfab6){return log(_0x23f3b0,_0x1dcdac(0x2a7)+_0x1cfab6,null,![]),null;}}async function OpenBrowser(_0x6c360e,_0x4f6be7,_0x3351ea){const _0x390504=a0_0x1d6b4f;try{const _0x499374=_0x6c360e;log(_0x6c360e,'[OpenBrowser]:\x20Processing\x20profile:\x20'+JSON[_0x390504(0x27a)](_0x6c360e),null,'i');if(getAllProfiles[_0x390504(0x263)]==='n'){const _0x4c4fee=getAllProfiles[_0x390504(0x22d)]['split']('x');parseInt(_0x4c4fee[0x0])>=0x0&&parseInt(_0x4c4fee[0x1])>=0x0?(_0x3351ea['x']=parseInt(_0x4c4fee[0x0]),_0x3351ea['y']=parseInt(_0x4c4fee[0x1])):(_0x3351ea['x']=0x0,_0x3351ea['y']=0x0),log(_0x6c360e,_0x390504(0x1ec)+_0x3351ea['x']+'x'+_0x3351ea['y'],null,'w');}const _0x43557e=await genlogin[_0x390504(0x211)](_0x6c360e,getAllProfiles,_0x4f6be7,_0x3351ea);log(_0x6c360e,_0x390504(0x223)+JSON['stringify'](_0x43557e),null,'i'),await delay(0x1388);if(_0x43557e){let _0x478b43=0x0;const _0xcdf06=0xa;while(_0x478b43<_0xcdf06){_0x478b43++;const _0x3e43af=await genlogin[_0x390504(0x209)](_0x6c360e,_0x43557e);if(_0x3e43af<=0x1)return log(_0x6c360e,'[OpenBrowser]]Chỉ\x20có\x20'+_0x3e43af+_0x390504(0x20a),null,'i'),_0x43557e;const _0x2f9134=await genlogin[_0x390504(0x214)](_0x6c360e,_0x43557e,_0x3e43af-0x1,0xbb8);if(!_0x2f9134){log(_0x6c360e,_0x390504(0x250),null,![]);continue;}log(_0x6c360e,_0x390504(0x229)),await delay(0xbb8);continue;}}return log(_0x6c360e,_0x390504(0x25b)+JSON[_0x390504(0x27a)](_0x6c360e)),null;}catch(_0x567138){throw new Error(_0x390504(0x236)+_0x567138[_0x390504(0x239)]);}}async function checkTeleWebOpen(_0x3887ba,_0x1000d4,_0x2790d3,_0x31b509,_0x3e778c){const _0x169a4c=a0_0x1d6b4f;let _0x1a0fad;try{let _0x3631a8=await genlogin[_0x169a4c(0x28d)](_0x2790d3,_0x3e778c,0x0,getAllProfiles[_0x169a4c(0x2a5)],_0x31b509['scale']);const _0x5b5cd5=await genlogin[_0x169a4c(0x207)](_0x2790d3,_0x3631a8,_0x1000d4[_0x169a4c(0x22f)],0x7d0);!_0x5b5cd5&&(await genlogin[_0x169a4c(0x204)](_0x2790d3,_0x3631a8,_0x169a4c(0x269),0xea60),await delay(0x7d0),await genlogin['openUrl'](_0x2790d3,_0x3631a8,_0x1000d4[_0x169a4c(0x252)],0xea60),await genlogin['setTitle'](_0x2790d3,_0x3631a8,_0x2790d3),await delay(0x1388));log(_0x2790d3,_0x169a4c(0x264),null,'i');const _0x3344a4=await genlogin[_0x169a4c(0x240)](_0x2790d3),_0x42acd8=await http[_0x169a4c(0x23f)](_0x2790d3,_0x2790d3,_0x3887ba[_0x169a4c(0x220)],_0x3344a4[_0x169a4c(0x24c)],'',_0x169a4c(0x20c),_0x169a4c(0x2a4));_0x1a0fad=_0x42acd8['ID'];const _0x16a544={'firstPage':_0x3631a8,'bot':_0x3887ba,'profileNameId':_0x2790d3,'getAks':_0x1000d4,'genlogin':genlogin,'http':http,'browser':_0x3e778c,'dataId':_0x42acd8['ID'],'taskIndex':taskInfo[_0x169a4c(0x25c)],'screenDataBuffer2':screenDataBuffer1,'tasksDataBuffer2':tasksDataBuffer1};let _0x278509=null;log(_0x2790d3,_0x169a4c(0x228)+json(_0x1a0fad),null,'i');if(timgame){await http[_0x169a4c(0x203)](_0x2790d3,_0x2790d3,_0x1a0fad,_0x169a4c(0x253));const _0x31b619=await loadGame(_0x169a4c(0x21e),_0x16a544,_0x278509,_0x1a0fad,_0x2790d3);if(_0x31b619[_0x169a4c(0x243)]==_0x169a4c(0x288))return log(_0x2790d3,_0x169a4c(0x212)+_0x3887ba[_0x169a4c(0x220)]+_0x169a4c(0x1f7),null,'i'),await http['updateData'](_0x2790d3,_0x2790d3,_0x1a0fad,'loop\x20new\x20game'),_0x169a4c(0x288);else{if(!_0x31b619)return log(_0x2790d3,'[checkTeleWebOpen]:\x20Không\x20tìm\x20thấy\x20game\x20'+_0x3887ba[_0x169a4c(0x220)],null,![]),await http[_0x169a4c(0x203)](_0x2790d3,_0x2790d3,_0x1a0fad,_0x169a4c(0x258),_0x169a4c(0x258)),teleId&&await http[_0x169a4c(0x286)](_0x2790d3,teleId,'['+_0x2790d3+']['+_0x3887ba[_0x169a4c(0x220)]+_0x169a4c(0x218)),null;}_0x31b619[_0x169a4c(0x213)]&&(_0x278509=_0x31b619[_0x169a4c(0x213)]);}await http[_0x169a4c(0x203)](_0x2790d3,_0x2790d3,_0x1a0fad,_0x169a4c(0x2ae));const _0x4d8a7a=await loadGame(_0x3887ba[_0x169a4c(0x220)],_0x16a544,_0x278509,_0x1a0fad,_0x2790d3);if(!_0x4d8a7a[_0x169a4c(0x243)])return log(_0x2790d3,_0x169a4c(0x1fd)+_0x3887ba[_0x169a4c(0x220)],null,![]),log(_0x2790d3,_0x169a4c(0x226)+json(_0x4d8a7a),null,![]),await http[_0x169a4c(0x203)](_0x2790d3,_0x2790d3,_0x1a0fad,_0x169a4c(0x258),_0x169a4c(0x258)),teleId&&await http[_0x169a4c(0x286)](_0x2790d3,teleId,'['+_0x2790d3+']['+_0x3887ba['name']+_0x169a4c(0x218)),null;else{if(_0x4d8a7a[_0x169a4c(0x243)]==_0x169a4c(0x288))return log(_0x2790d3,_0x169a4c(0x212)+_0x3887ba[_0x169a4c(0x220)]+_0x169a4c(0x1f7),null,'i'),await http['updateData'](_0x2790d3,_0x2790d3,_0x1a0fad,_0x169a4c(0x288)),'loop';}return await http[_0x169a4c(0x205)](_0x2790d3,_0x2790d3,_0x3887ba['id'],_0x4d8a7a['nextRun'],_0x4d8a7a[_0x169a4c(0x257)]),await http[_0x169a4c(0x203)](_0x2790d3,_0x2790d3,_0x1a0fad,'Ok',_0x169a4c(0x26f),_0x4d8a7a[_0x169a4c(0x27d)],_0x4d8a7a['nextRun']),teleId&&await http[_0x169a4c(0x286)](_0x2790d3,teleId,'['+_0x2790d3+']['+_0x3887ba[_0x169a4c(0x220)]+_0x169a4c(0x218)),log(_0x2790d3,_0x169a4c(0x248)+_0x3887ba[_0x169a4c(0x220)]+_0x169a4c(0x26a)),await delay(0x7d0),!![];}catch(_0x22c4b8){return log(_0x2790d3,_0x169a4c(0x1f6)+_0x22c4b8,null,![]),await http[_0x169a4c(0x203)](_0x2790d3,_0x2790d3,_0x1a0fad,_0x169a4c(0x258),_0x169a4c(0x258)),teleId&&await http[_0x169a4c(0x286)](_0x2790d3,teleId,'['+_0x2790d3+']['+_0x3887ba[_0x169a4c(0x220)]+_0x169a4c(0x218)),null;}}async function loadGame(_0x5bfd90,_0x2fb448,_0x5e8df0,_0x28e607,_0xe2250e){const _0x2f9048=a0_0x1d6b4f;try{const _0x42d08b=pathToFileURL(a0_0x349233[_0x2f9048(0x2a3)](__dirname,_0x2f9048(0x202),_0x5bfd90+_0x2f9048(0x2b1)))[_0x2f9048(0x23d)];log(_0xe2250e,_0x2f9048(0x278)+_0x42d08b);const _0x4669b2=await import(_0x42d08b);if(typeof _0x4669b2['default']===_0x2f9048(0x26e)){const _0x43c3e4=await _0x4669b2[_0x2f9048(0x21a)](_0x2fb448,_0x5e8df0);await delay(0x3e8);if(!_0x43c3e4[_0x2f9048(0x243)])return log(_0xe2250e,_0x2f9048(0x227)+_0x5bfd90+_0x2f9048(0x273),null,![]),null;else return _0x43c3e4['status']===_0x2f9048(0x288)?(log(_0xe2250e,_0x2f9048(0x2ab)+_0x5bfd90+'\x20loop',null,'i'),_0x43c3e4):(log(_0xe2250e,_0x2f9048(0x2ab)+_0x5bfd90+'\x20'+_0x43c3e4[_0x2f9048(0x243)],null,'i'),_0x43c3e4);}else return await delay(0x3e8),log(_0xe2250e,_0x2f9048(0x227)+_0x5bfd90+_0x2f9048(0x274),null,![]),null;}catch(_0x414fc5){return log(_0xe2250e,_0x2f9048(0x244)+_0x5bfd90+':\x20'+_0x414fc5,null,![]),null;}}async function closeBrowser(_0x1bf0e3='',_0x23b91f){const _0x596c23=a0_0x1d6b4f;try{if(_0x23b91f){if(_0x23b91f[_0x596c23(0x200)])return await _0x23b91f[_0x596c23(0x219)](),log(_0x1bf0e3,_0x596c23(0x242)+_0x1bf0e3+_0x596c23(0x26a),null,'w'),!![];}else log(_0x1bf0e3,_0x596c23(0x291),null,'i');return null;}catch(_0x13f246){return log(_0x1bf0e3,_0x596c23(0x234)+_0x1bf0e3+':\x20'+_0x13f246,null,![]),null;}}async function procScreenArr(_0x4d442a,_0x43f5d1,_0x1f1535){const _0x46bf04=a0_0x1d6b4f;try{await acquireLock(screenData);let _0x1f726d={};log(_0x1f1535,'[worker1.procScreenArr]action:\x20'+_0x4d442a+',\x20pos:\x20'+json(_0x43f5d1),null,'w','-');if(_0x4d442a===_0x46bf04(0x217)){log(_0x1f1535,'[worker1.procScreenArr]vào\x20open',null,'w'),_0x1f726d[_0x46bf04(0x282)]=Atomics['load'](screenData,0x1)/0xf4240,_0x1f726d[_0x46bf04(0x26b)]=Atomics[_0x46bf04(0x21c)](screenData,0x2),_0x1f726d[_0x46bf04(0x22c)]=Atomics[_0x46bf04(0x21c)](screenData,0x3);for(let _0x2e0a43=0xa;_0x2e0a43<screenData[_0x46bf04(0x283)]-0x1;_0x2e0a43=_0x2e0a43+0x3){const _0x4e47a9=Atomics[_0x46bf04(0x21c)](screenData,_0x2e0a43);if(_0x4e47a9===0x2)return Atomics[_0x46bf04(0x1ef)](screenData,_0x2e0a43,0x1),_0x1f726d[_0x46bf04(0x21a)]=0x0,_0x1f726d['x']=Atomics[_0x46bf04(0x21c)](screenData,_0x2e0a43+0x1),_0x1f726d['y']=Atomics[_0x46bf04(0x21c)](screenData,_0x2e0a43+0x2),log(_0x1f1535,_0x46bf04(0x20d)+_0x2e0a43+_0x46bf04(0x1ed)+json(_0x1f726d),null,'w'),await releaseLock(screenData),_0x1f726d;if(_0x4e47a9===0x0)return Atomics[_0x46bf04(0x1ef)](screenData,_0x2e0a43,0x1),_0x1f726d[_0x46bf04(0x21a)]=0x1,_0x1f726d['x']=0x0,_0x1f726d['y']=0x0,log(_0x1f1535,'[worker1.procScreenArr]\x20index:'+_0x2e0a43+_0x46bf04(0x221)+json(_0x1f726d),null,'w'),await releaseLock(screenData),_0x1f726d;}await releaseLock(screenData);throw new Error(_0x46bf04(0x1ff));}else{if(_0x4d442a===_0x46bf04(0x219)&&_0x43f5d1['x']>=0x0&&_0x43f5d1['y']>=0x0){log(_0x1f1535,_0x46bf04(0x2a0),null,'w');if(_0x43f5d1[_0x46bf04(0x21a)]===0x1)return log(_0x1f1535,_0x46bf04(0x237),null,'w'),await releaseLock(screenData),!![];for(let _0x5bc5cb=0xa;_0x5bc5cb<screenData['length']-0x1;_0x5bc5cb+=0x3){const _0x7845e=Atomics[_0x46bf04(0x21c)](screenData,_0x5bc5cb);if(_0x7845e===0x1){const _0x220929=Atomics[_0x46bf04(0x21c)](screenData,_0x5bc5cb+0x1),_0x1c0448=Atomics[_0x46bf04(0x21c)](screenData,_0x5bc5cb+0x2);if(_0x220929===_0x43f5d1['x']&&_0x1c0448===_0x43f5d1['y'])return Atomics['store'](screenData,_0x5bc5cb,0x2),log(_0x1f1535,_0x46bf04(0x20d)+_0x5bc5cb+_0x46bf04(0x201),null,'w'),Atomics[_0x46bf04(0x279)](screenData,_0x5bc5cb),await releaseLock(screenData),!![];}}await releaseLock(screenData);throw new Error('Không\x20thể\x20đóng\x20màn\x20hình:\x20vị\x20trí\x20không\x20hợp\x20lệ\x20action:\x20'+_0x4d442a+_0x46bf04(0x1f0)+json(_0x43f5d1));}else return log(_0x1f1535,_0x46bf04(0x1f2)+json(_0x43f5d1)+_0x46bf04(0x1fb)+_0x4d442a,null,'w'),await releaseLock(screenData),!![];}}catch(_0x39b27e){return log(_0x1f1535,_0x46bf04(0x256)+_0x39b27e+_0x46bf04(0x295)+_0x4d442a+_0x46bf04(0x1f0)+json(_0x43f5d1),null,![]),await releaseLock(screenData),![];}}async function acquireLock(_0x138b61,_0x4a985d=0x7530){const _0x6019e3=a0_0x1d6b4f,_0x97c60=Date[_0x6019e3(0x265)]();while(Atomics[_0x6019e3(0x270)](_0x138b61,0x8,0x0,0x1)!==0x0){if(Date[_0x6019e3(0x265)]()-_0x97c60>_0x4a985d)throw new Error(_0x6019e3(0x24f));Atomics[_0x6019e3(0x20b)](_0x138b61,0x8,0x1,_0x4a985d);}}function a0_0x2f16(_0x1e722e,_0x3dd4e4){const _0x30751b=a0_0x3075();return a0_0x2f16=function(_0x2f16d8,_0x25187c){_0x2f16d8=_0x2f16d8-0x1ec;let _0x5b6a00=_0x30751b[_0x2f16d8];return _0x5b6a00;},a0_0x2f16(_0x1e722e,_0x3dd4e4);}async function releaseLock(_0x213c97){const _0x35eb70=a0_0x1d6b4f;Atomics[_0x35eb70(0x1ef)](_0x213c97,0x8,0x0),Atomics[_0x35eb70(0x279)](_0x213c97,0x8);}function a0_0x3075(){const _0x2459ff=['width','\x20Web\x20OK','419004zvekYb','function','Done','compareExchange','No\x20profile\x20found','nextRun','\x20không\x20trả\x20về\x20status','\x20không\x20phải\x20là\x20một\x20hàm\x20hợp\x20lệ','nextrun','][xuLyTask]:\x20Hoàn\x20thành\x20xử\x20lý\x20task:\x20','[xuLyTungProfile]:\x20Lỗi:\x20','[loadGame]:scriptPath\x20','notify','stringify','[xuLyGame]:\x20checkTeleWebOpen\x20có\x20gì\x20đó\x20sai\x20sai\x20rồi\x20bro','4548wEFzux','coin','\x20sau\x20','][xuLyProfiles]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile\x20','package.json','\x20ko\x20có\x20aks','scale','length','[xuLyTungProfile]:\x20Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng','11190BgFXjn','tele','nextrunstamp','loop','[xuLyGame]:Max\x20loop\x20rồi\x20bro','[xuLyBrowser]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20browser:\x20','[xoaTimeout]worker1:\x20Xóa\x20Interval:','\x20chưa\x20đến\x20thời\x20gian\x20chạy','activateTab','186clIjoI','aks','\x20done','[closeBrowser]:\x20Không\x20có\x20trình\x20duyệt\x20để\x20đóng','][xuLyTask]:\x20Task\x20','\x20Script\x20mode','][xuLyTask]:\x20currentDateTime:\x20','\x20action:\x20','[xuLyGame]:\x20getAks\x20OK','[xoaTimeout]worker1:\x20','profileThreads','Version:','parse','\x20Api\x20mode','][xuLyTask]:\x20Tasks:\x20','][xuLyProfiles]index:\x20','fisrtOpenBrowser','promises','[worker1.procScreenArr]vào\x20close','worker1','][xuLyProfiles]:\x20Một\x20số\x20profiles\x20gặp\x20lỗi:\x20','join','running','browserWidthHeight','][xuLyTask]:\x20vào\x20xuLyTask','[xuLyGame]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20Game:\x20','180515lWFXGF','[eTimeout]worker1:\x20timeout','getAllProfiles\x20','[loadGame]:\x20Chạy\x20','terminate','url','Vào','Lỗi\x20gì\x20đó\x20task\x20','[xuLyBrowser]:\x20Bot\x20OK','.js','\x20Chưa\x20tới\x20giờ\x20chạy','[xuLyGame]:\x20Loop\x20lại\x20,\x20loop\x20lại\x20lần\x20','\x20Tele\x20A\x20OK','type','[OpenBrowser]:force\x20set\x20Position:\x20','\x20set\x20open\x20ok\x20pos:','Stop','store',',\x20pos:\x20','rejected','[worker1.procScreenArr]\x20posVal:','[xuLyGame]:\x20','clrInterval','\x20OFF','[checkTeleWebOpen]:\x20Lỗi\x20trong\x20quá\x20trình\x20mở\x20trang\x20:\x20','\x20loop','][xuLyProfiles]:\x20Đã\x20xử\x20lý\x20tất\x20cả\x20profiles\x20thành\x20công\x20','][xuLyProfiles]:\x20Lỗi\x20:\x20','246QxXcun','\x20Action:','APIKEY','[checkTeleWebOpen]:\x20Không\x20thực\x20thi\x20script\x20','[xuLyBrowser]:\x20không\x20lấy\x20được\x20bot','Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng','connected','\x20set\x20close\x20ok','scripts','updateData','openUrl','nextRunTime','[xuLyTungProfile]0:\x20Kiểm\x20tra\x20màn\x20hình\x20','elementExistsByXPath','\x20vào\x20hàng\x20đợi\x20max:','countOpenTabs','\x20tab\x20đang\x20mở','wait','Start','[worker1.procScreenArr]\x20index:','2750OxKQin','[xuLyBrowser]:\x20Bot\x20không\x20tìm\x20thấy','STOP\x20SCRIPT','connect','[checkTeleWebOpen]:\x20Thực\x20thi\x20','HostName','closeTab','filter','allSettled','open',']:\x20Fail','close','default','tinhThoiGian','load','[xuLyBrowser]:\x20Không\x20mở\x20được\x20trình\x20duyệt\x20','timGame','add','name','\x20set\x20open\x20default\x20pos:','utf-8','[OpenBrowser]:\x20GenLogin:\x20','readFile','\x20|\x20nextrun:\x20','[checkTeleWebOpen]:\x20','[loadGame]:\x20Script\x20','[checkTeleWebOpen]:\x20dataId:\x20','[OpenBrowser]\x20Đóng\x20tab\x20mới\x20thành\x20công','][xuLyProfiles]:\x20Thêm\x20profile\x20','49FklQrf','height','customBrowserPosition','findIndex','InputSearch','[eTimeout]worker1:\x20reset\x20timeout','1079320MOwfPT','timestamp','No\x20bot\x20found','[closeBrowser]:\x20Lỗi\x20khi\x20đóng\x20trình\x20duyệt\x20','\x20lỗi','Lỗi\x20xử\x20lý\x20profile:\x20','[worker1.procScreenArr]vị\x20trí\x20default\x20không\x20cần\x20close','][xuLyProfiles]Không\x20tìm\x20thấy\x20indexGenP','message','[getPackageVersion]Lỗi\x20khi\x20đọc\x20file\x20package.json:\x20','\x20ok','[xuLyTungProfile]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile','href','cwd','addData','nowTime','getTask','[closeBrowser]:\x20Đóng\x20trình\x20duyệt\x20','status','[loadGame]:\x20Lỗi\x20khi\x20load\x20và\x20thực\x20thi\x20script\x20',':\x20Sai\x20aks\x20','][xuLyTask]:\x20Chờ\x205\x20giây\x20trước\x20khi\x20xử\x20lý\x20task\x20tiếp\x20theo...','Không\x20tìm\x20thấy\x20indexGenP','[checkTeleWebOpen]:\x20Thực\x20thi\x20script\x20','][xuLyTask]profileQueue:\x20concurrency:','375494KnGwrk','][xuLyTask]:\x20Không\x20lấy\x20được\x20dữ\x20liệu\x20profiles\x20','date','Lỗi\x20','187258mpCaWi','Timeout\x20while\x20acquiring\x20lock','[OpenBrowser]\x20Lỗi\x20khi\x20đóng\x20tab\x20mới','][xuLyProfiles]:\x20Lỗi\x20khi\x20xử\x20lý\x20profile\x20','FistUrl','Tìm','version',':\x20Bot\x20','[worker1.procScreenArr]lỗi\x20','nextRunStamp','Fail','task',']:\x20Script\x20Mode','[OpenBrowser]:\x20Lỗi\x20khi\x20mở\x20browser:\x20','taskIndex','dirname','getBotAll','START\x20SCRIPT','env','tele_id','[xuLyBrowser]:browserInfo:\x20','autoSetBrowserPosition','[checkTeleWebOpen]:\x20vào\x20loadGame','now','value','timeout','][xuLyTask]:\x20không\x20lấy\x20được\x20profile','https://www.google.com','\x20thành\x20công'];a0_0x3075=function(){return _0x2459ff;};return a0_0x3075();}async function getPackageVersion(){const _0x59db87=a0_0x1d6b4f;try{const _0x25b07a=a0_0x349233[_0x59db87(0x2a3)](process[_0x59db87(0x23e)](),_0x59db87(0x280)),_0xd44e35=await a0_0x5304c1[_0x59db87(0x29f)][_0x59db87(0x224)](_0x25b07a,_0x59db87(0x222)),_0x1632de=JSON[_0x59db87(0x29a)](_0xd44e35),_0xc30d05=_0x1632de[_0x59db87(0x254)];return log(_0x59db87(0x2a1),'[getPackageVersion]Version:\x20'+_0xc30d05,null,'w','-'),_0xc30d05;}catch(_0x423b2c){return log('worker1',_0x59db87(0x23a)+_0x423b2c,null,![]),null;}}async function xoaTimeout(_0x18d47b){const _0x2dc572=a0_0x1d6b4f;try{clearTimeout(_0x18d47b),log('[xoaTimeout]worker1:\x20Xóa\x20timeout:'+_0x18d47b,null,'i','clrTimeout');}catch(_0x8b360c){log(_0x2dc572(0x297)+_0x8b360c,null,![]);}}async function xoaInterval(_0xf462b3){const _0x5c8627=a0_0x1d6b4f;try{clearInterval(_0xf462b3),log(_0x5c8627(0x28b)+_0xf462b3,null,'i',_0x5c8627(0x1f4));}catch(_0x5a2203){log(_0x5c8627(0x297)+_0x5a2203,null,![]);}}async function delay(_0x25f589){return new Promise(async _0x41c254=>{setTimeout(_0x41c254,_0x25f589);});}async function eTimeout(){const _0x20ba35=a0_0x1d6b4f;return log(_0x20ba35(0x2a9),null,'w'),Atomics[_0x20ba35(0x1ef)](tasksData,taskInfo['taskIndex'],0x1),!![];}async function cTimeout(){const _0x2eb005=a0_0x1d6b4f;if(Atomics[_0x2eb005(0x21c)](tasksData,taskInfo[_0x2eb005(0x25c)])===0x1)return!![];return null;}async function rstTimeout(){const _0x563580=a0_0x1d6b4f;return log(_0x563580(0x230),null,'w'),Atomics[_0x563580(0x270)](tasksData,taskInfo[_0x563580(0x25c)],0x1,0x2),!![];}
const a0_0x5caf4e=a0_0x3554;(function(_0x2d6699,_0x10ab81){const _0x3ddc78=a0_0x3554,_0x1589b5=_0x2d6699();while(!![]){try{const _0x56cebf=-parseInt(_0x3ddc78(0x26e))/0x1+parseInt(_0x3ddc78(0x200))/0x2*(parseInt(_0x3ddc78(0x1f8))/0x3)+-parseInt(_0x3ddc78(0x23f))/0x4+-parseInt(_0x3ddc78(0x1ad))/0x5*(parseInt(_0x3ddc78(0x261))/0x6)+-parseInt(_0x3ddc78(0x213))/0x7*(-parseInt(_0x3ddc78(0x218))/0x8)+-parseInt(_0x3ddc78(0x1c1))/0x9*(-parseInt(_0x3ddc78(0x1d2))/0xa)+parseInt(_0x3ddc78(0x1d0))/0xb*(parseInt(_0x3ddc78(0x24c))/0xc);if(_0x56cebf===_0x10ab81)break;else _0x1589b5['push'](_0x1589b5['shift']());}catch(_0x171fa5){_0x1589b5['push'](_0x1589b5['shift']());}}}(a0_0x179a,0xbc384));import'dotenv/config';function a0_0x179a(){const _0x5a66e7=['function','timeout','1275669psejge','APIKEY','[eTimeout]worker1:\x20reset\x20timeout','join','getAllProfiles\x20','[xuLyBrowser]:\x20Bot\x20không\x20tìm\x20thấy','[OpenBrowser]:\x20Processing\x20profile:\x20','\x20Chưa\x20tới\x20giờ\x20chạy','message','][xuLyProfiles]:\x20Đã\x20thêm\x20profile\x20','[worker1data.task]:data.task\x20','[checkTeleWebOpen]:\x20','][ERR]:\x20STOP\x20SCRIPT','][xuLyProfiles]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile\x20','5VMDZmV','][xuLyProfiles]Không\x20tìm\x20thấy\x20indexGenP','Không\x20tìm\x20thấy\x20indexGenP','store','\x20tab\x20đang\x20mở','[loadGame]:scriptPath\x20','allSettled','countOpenTabs','split','tinhThoiGian','\x20OFF','status','connect','Done','filter','add','loop\x20new\x20game','task','timGame','\x20vào\x20hàng\x20đợi\x20max:','54lOeFFI','][xuLyTask]:\x20không\x20lấy\x20được\x20profile','\x20ok','browserWidthHeight','setTitle','nextRunTime','loop','Không\x20tìm\x20thấy\x20giá\x20trị\x20status=0','FistUrl','[OpenBrowser]\x20Lỗi\x20khi\x20đóng\x20tab\x20mới','[worker1.procScreenArr]lỗi\x20','wait','Memory','done','load','220EmvCfw','updateData','55010XRgFvw','\x20Web\x20mode',':\x20Bot\x20','[xuLyGame]:\x20Sai\x20aks\x20','Start','getTask','rejected','][xuLyProfiles]index:\x20','default','No\x20profile\x20found','[OpenBrowser]]Chỉ\x20có\x20','aks','clrTimeout','STOP\x20SCRIPT','open','entries','api','SERVER_HOST','now','scale','nowTime','\x20set\x20open\x20default\x20pos:','pid','\x20vào\x20hàng\x20đợi.','[worker1.procScreenArr]vào\x20close','getAks','[xuLyTungProfile]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile','[checkTeleWebOpen]:\x20Thực\x20thi\x20script\x20','env','botTimeout','[xuLyBrowser]:\x20Bot\x20OK','.js','taskIndex','script','[xoaTimeout]worker1:\x20','[xuLyGame]:Max\x20loop\x20rồi\x20bro','running','customBrowserPosition','555fManqS',']:\x20START\x20SCRIPT','coin','[xuLyGame]:\x20Thực\x20thi\x20','url','][xuLyTask]:\x20Không\x20lấy\x20được\x20dữ\x20liệu\x20profiles\x20','\x20lỗi','[worker1.procScreenArr]vào\x20open','2698aMEldf','][xuLyTask]:\x20Hoàn\x20thành\x20xử\x20lý\x20task:\x20','[loadGame]:\x20Lỗi\x20khi\x20load\x20và\x20thực\x20thi\x20script\x20','[worker1.procScreenArr]action:\x20','\x20action:\x20','findIndex','nextrun','\x20sau\x20','START\x20SCRIPT',']:\x20Script\x20Mode','length','\x20thành\x20công','openUrl','][ERR]:\x20Lỗi\x20','[closeBrowser]:\x20Lỗi\x20khi\x20đóng\x20trình\x20duyệt\x20','][xuLyTask]:\x20Lỗi\x20while:\x20','profiles','[xoaTimeout]worker1:\x20Xóa\x20timeout:','[xuLyBrowser]:\x20Không\x20mở\x20được\x20trình\x20duyệt\x20','28980VKDIHw','tele','\x20|\x20nextrun:\x20','https://www.google.com','][xuLyTask]:\x20currentDateTime:\x20','2712sBuNiw','Garbage\x20Collector\x20đã\x20chạy!','\x20Script\x20mode','\x20Tele\x20A\x20OK','\x20set\x20open\x20ok\x20pos:','[closeBrowser]:\x20Không\x20có\x20trình\x20duyệt\x20để\x20đóng','[xuLyGame]:\x20getAks\x20OK',':\x20Sai\x20aks\x20','timestamp','closeTab','end','\x20chưa\x20đến\x20thời\x20gian\x20chạy','[xuLyTungProfile]:\x20Lỗi:\x20','[checkTeleWebOpen]:\x20Thực\x20thi\x20','connected','date','[checkTeleWebOpen]:\x20vào\x20loadGame','activateTab','][xuLyProfiles]:\x20Lỗi\x20:\x20','Version:','][xuLyProfiles]:\x20Lỗi\x20khi\x20xử\x20lý\x20profile\x20','\x20Api\x20mode','tele_id','addData','[OpenBrowser]:force\x20set\x20Position:\x20','][xuLyProfiles]:\x20Một\x20số\x20profiles\x20gặp\x20lỗi:\x20','\x20Action:','[OpenBrowser]:\x20GenLogin:\x20','nextRunStamp','delayOpenProfile','worker1','[worker1.procScreenArr]vị\x20trí\x20default\x20không\x20cần\x20close','notify','type','\x20không\x20trả\x20về\x20status','\x20done','fisrtOpenBrowser','stringify','[checkTeleWebOpen]:\x20Không\x20tìm\x20thấy\x20game\x20','3328652CEHnlE','[xuLyGame]:\x20','ref','[loadGame]:\x20Chạy\x20','scripts','pages','profileThreads','DONE','][xuLyProfiles]:\x20Thêm\x20profile\x20','width','autoSetBrowserPosition','Fail','[xuLyGame]:\x20Loop\x20lại\x20,\x20loop\x20lại\x20lần\x20','1636836KPOKue','[loadGame]:\x20Script\x20','Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng','[eTimeout]worker1:\x20timeout','[xuLyTungProfile]0:\x20Kiểm\x20tra\x20màn\x20hình\x20','Lỗi\x20','Stop','\x20ko\x20có\x20aks','\x20set\x20close\x20ok','[checkTeleWebOpen]:\x20Không\x20thực\x20thi\x20script\x20','[xuLyGame]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20Game:\x20','[xuLyGame]:\x20checkTeleWebOpen\x20có\x20gì\x20đó\x20sai\x20sai\x20rồi\x20bro','Lỗi\x20xử\x20lý\x20profile:\x20','\x20loop','nextRun','onOff','close',',\x20pos:\x20','[xuLyBrowser]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20browser:\x20','[OpenBrowser]\x20Đóng\x20tab\x20mới\x20thành\x20công','No\x20bot\x20found','9211866fjxmTE','dirname','HostName','[xuLyBrowser]:\x20browser\x20disconnected\x20','[worker1.procScreenArr]\x20index:','name','terminate','compareExchange','StartApi','[xoaTimeout]worker1:\x20Xóa\x20Interval:','value'];a0_0x179a=function(){return _0x5a66e7;};return a0_0x179a();}import a0_0x12646b from'fs';import a0_0x43a755 from'path';import{fileURLToPath,pathToFileURL}from'url';import{expose}from'threads/worker';import{log,json}from'./modules/logger.js';import a0_0x50d68f from'./modules/Genlogin.js';import a0_0x16a57e from'./modules/http.js';import a0_0x358d6b from'p-queue';const __filename=fileURLToPath(import.meta[a0_0x5caf4e(0x1fc)]),__dirname=a0_0x43a755[a0_0x5caf4e(0x262)](__filename);let profileQueue,genlogin,http,getAllProfiles,taskInfo,GenDataProfile,timgame;genlogin=new a0_0x50d68f('',!![]),http=new a0_0x16a57e(process[a0_0x5caf4e(0x1ee)][a0_0x5caf4e(0x1e3)],process[a0_0x5caf4e(0x1ee)][a0_0x5caf4e(0x26f)],!![]);let firstRun=!![],delayOpenProfile=0xbb8,profileTimeout=0x5265c0,botTimeout=0x5265c0,profileThreads=0x1,browserInfo={},version,screenData,tasksData,screenDataBuffer1,tasksDataBuffer1,teleId=null;const worker1=async _0x29f437=>{const _0x57800c=a0_0x5caf4e,{version0:_0x561bf1,tasksDataBuffer:_0x31f258,screenDataBuffer:_0x13465e,action:_0x24daac,task:_0x2b4ade,dataBrw:_0xb1f1e4,GenDataProfile0:_0x1a4e8c,timgame0:_0xcf977a,timeout:_0x4f9a3e,tele_id:_0x2d3d53}=_0x29f437;taskInfo=_0x2b4ade;_0x2d3d53&&_0x2d3d53[_0x57800c(0x22e)]&&(teleId=_0x2d3d53[_0x57800c(0x22e)]);screenDataBuffer1=_0x13465e,tasksDataBuffer1=_0x31f258,screenData=new Int32Array(_0x13465e),tasksData=new Int32Array(_0x31f258);try{if(_0x4f9a3e)return log(_0x57800c(0x236),_0x57800c(0x26d),null,'w'),await clearVar(),{'success':![],'error':_0x57800c(0x26d)};else{if(_0x2b4ade!=='screenArr'){version=_0x561bf1,getAllProfiles=_0xb1f1e4,log(_0x57800c(0x236),_0x57800c(0x278)+JSON[_0x57800c(0x23d)](_0x29f437[_0x57800c(0x1be)]),null,'c'),log(_0x57800c(0x236),_0x57800c(0x272)+JSON[_0x57800c(0x23d)](getAllProfiles),null,'c'),GenDataProfile=_0x1a4e8c,timgame=_0xcf977a,log(_0x57800c(0x236),'['+_0x2b4ade[_0x57800c(0x266)]+_0x57800c(0x209),null,'w');const _0x427881=await xuLyTask(_0x2b4ade);return log(_0x57800c(0x236),''+JSON[_0x57800c(0x23d)](_0x427881),null,'w'),log(_0x57800c(0x236),_0x57800c(0x246),null,'w',_0x57800c(0x1ce)),await clearVar(),_0x427881?{'success':!![],'result':_0x427881}:{'success':![],'result':_0x427881};}else return log('worker1','Lỗi\x20gì\x20đó\x20task\x20'+_0x2b4ade,null,'w'),await clearVar(),{'success':![],'error':_0x57800c(0x236)};}}catch(_0x27d30d){return log(_0x57800c(0x236),_0x57800c(0x251)+_0x27d30d,null,![]),await clearVar(),{'success':![],'error':_0x57800c(0x236)};}};expose({'worker1':worker1});async function clearVar(){return genlogin=null,http=null,!![];}async function xuLyTask(_0x59e401){const _0x57a251=a0_0x5caf4e;try{log(_0x57a251(0x236),'['+_0x59e401[_0x57a251(0x266)]+'][xuLyTask]:\x20vào\x20xuLyTask',null,'i','-');const _0x48a338=await genlogin['nowTime'](_0x57a251(0x236)),_0x4b7844=_0x48a338[_0x57a251(0x227)];if(_0x4b7844<_0x59e401['nextrunstamp'])return log(_0x57a251(0x236),'['+_0x59e401[_0x57a251(0x266)]+'][xuLyTask]:\x20Task\x20'+JSON[_0x57a251(0x23d)](_0x59e401[_0x57a251(0x266)])+_0x57a251(0x223),null,'i'),log(_0x57a251(0x236),'['+_0x59e401[_0x57a251(0x266)]+_0x57a251(0x217)+JSON[_0x57a251(0x23d)](_0x48a338)+_0x57a251(0x215)+JSON['stringify'](_0x59e401[_0x57a251(0x206)]),null,'w'),log(_0x57a251(0x236),'['+_0x59e401[_0x57a251(0x266)]+'][xuLyTask]:\x20currentDateTime:\x20'+JSON['stringify'](_0x4b7844)+_0x57a251(0x215)+JSON[_0x57a251(0x23d)](taskNextRunDateTime),null,'w'),log(_0x57a251(0x236),'['+_0x59e401[_0x57a251(0x266)]+'][xuLyTask]:\x20Chờ\x205\x20giây\x20trước\x20khi\x20xử\x20lý\x20task\x20tiếp\x20theo...',null,'i'),await delay(0x1388),null;let _0x9a073=await http[_0x57a251(0x1d7)](_0x57a251(0x236),_0x59e401[_0x57a251(0x266)]);if(_0x9a073['value'][_0x57a251(0x210)][_0x57a251(0x20a)]<=0x0){log('worker1','['+_0x59e401[_0x57a251(0x266)]+_0x57a251(0x1c2),null,![]);throw new Error(_0x57a251(0x1db));}firstRun&&(profileThreads=parseInt(_0x59e401[_0x57a251(0x245)]),profileQueue=new a0_0x358d6b({'concurrency':profileThreads}),log(_0x57a251(0x236),'['+_0x59e401[_0x57a251(0x266)]+'][xuLyTask]profileQueue:\x20concurrency:'+profileThreads,null,'w'),firstRun=![],delayOpenProfile=parseInt(_0x59e401[_0x57a251(0x235)])*0x3e8,profileTimeout=parseInt(_0x59e401['profileTimeout'])*0x3e8,botTimeout=parseInt(_0x59e401[_0x57a251(0x1ef)])*0x3e8);const _0x36c999=await xuLyProfiles(_0x9a073['value'][_0x57a251(0x210)],_0x59e401['name']);if(!_0x36c999){log('worker1','['+_0x59e401[_0x57a251(0x266)]+_0x57a251(0x1fd)+json(_0x36c999),null,![]);throw new Error(_0x57a251(0x1db));}return log('worker1','['+_0x59e401[_0x57a251(0x266)]+'][xuLyTask]:\x20Tasks:\x20'+_0x59e401[_0x57a251(0x266)]+_0x57a251(0x1c3)),await delay(0x7d0),log('worker1','['+_0x59e401[_0x57a251(0x266)]+_0x57a251(0x201)+JSON['stringify'](_0x59e401[_0x57a251(0x266)])),!![];}catch(_0x48cd63){return log(_0x57a251(0x236),'['+_0x59e401[_0x57a251(0x266)]+_0x57a251(0x20f)+_0x48cd63,null,![]),null;}}async function xuLyProfiles(_0x1bcadb,_0x40c1d0){const _0x44437f=a0_0x5caf4e;try{const _0x281694=[];for(const [_0x2b9691,_0x164f4d]of _0x1bcadb[_0x44437f(0x1e1)]()){const _0x403559=await GenDataProfile[_0x44437f(0x205)](_0x1c5f52=>_0x1c5f52[_0x44437f(0x1e8)]===_0x164f4d);if(_0x2b9691!==-0x1)log('worker1','['+_0x40c1d0+_0x44437f(0x1d9)+_0x403559);else{log('worker1','['+_0x40c1d0+_0x44437f(0x1ae));throw new Error(_0x44437f(0x1af));}log(_0x44437f(0x236),'['+_0x40c1d0+_0x44437f(0x247)+_0x164f4d+_0x44437f(0x1c0)+profileThreads,null,'i'),_0x281694['push'](profileQueue[_0x44437f(0x1bc)](async()=>{const _0xac3bdc=_0x44437f;try{delayOpenProfile>0x0?(log(_0xac3bdc(0x236),'['+_0x40c1d0+_0xac3bdc(0x1ac)+_0x164f4d+_0xac3bdc(0x207)+delayOpenProfile+'ms',null,'w','-'),await delay(delayOpenProfile)):log(_0xac3bdc(0x236),'['+_0x40c1d0+_0xac3bdc(0x1ac)+_0x164f4d,null,'w','-'),await xuLyTungProfile(_0x164f4d,GenDataProfile[_0x403559]);}catch(_0xe5666d){log('worker1','['+_0x40c1d0+_0xac3bdc(0x22c)+_0x164f4d+':\x20'+_0xe5666d[_0xac3bdc(0x276)],null,![]);throw _0xe5666d;}})),log(_0x44437f(0x236),'['+_0x40c1d0+_0x44437f(0x277)+_0x164f4d+_0x44437f(0x1e9));}const _0x443139=await Promise[_0x44437f(0x1b3)](_0x281694),_0xbe64e=_0x443139[_0x44437f(0x1bb)](_0x1e4aab=>_0x1e4aab[_0x44437f(0x1b8)]===_0x44437f(0x1d8));return _0xbe64e['length']>0x0?log(_0x44437f(0x236),'['+_0x40c1d0+_0x44437f(0x231)+JSON[_0x44437f(0x23d)](_0xbe64e),null,![]):log(_0x44437f(0x236),'['+_0x40c1d0+'][xuLyProfiles]:\x20Đã\x20xử\x20lý\x20tất\x20cả\x20profiles\x20thành\x20công\x20'+json(_0x443139)),!![];}catch(_0x16f5c0){return log(_0x44437f(0x236),'['+_0x40c1d0+_0x44437f(0x22a)+_0x16f5c0,null,![]),null;}}async function xuLyTungProfile(_0x56b291,_0x359185){const _0x5bbda8=a0_0x5caf4e;let _0x254a42,_0x2ba119;const _0x4cc35f=_0x56b291;let _0x9a2a4e;try{await delay(delayOpenProfile),log(_0x56b291,_0x5bbda8(0x1ec),null,'i'),_0x254a42=await genlogin['nowTime'](_0x56b291),await http[_0x5bbda8(0x22f)]('worker1',_0x56b291,_0x5bbda8(0x208),_0x254a42[_0x5bbda8(0x227)],'',_0x5bbda8(0x22b)+version,'Start');teleId&&await http[_0x5bbda8(0x214)](_0x56b291,teleId,'['+_0x56b291+_0x5bbda8(0x1f9));log(_0x56b291,_0x5bbda8(0x250)+_0x56b291,null,'w'),_0x9a2a4e=await procScreenArr(_0x5bbda8(0x1e0),null,_0x56b291);if(_0x9a2a4e['x']===undefined||_0x9a2a4e['y']===undefined){log(_0x56b291,'[xuLyTungProfile]:\x20Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng',null,![]);throw new Error(_0x5bbda8(0x1c8));}const _0x46a630=await xuLyBrowser(_0x56b291,_0x359185,_0x9a2a4e);await procScreenArr(_0x5bbda8(0x25c),_0x9a2a4e,_0x56b291);const _0x1f06aa=await genlogin[_0x5bbda8(0x1b6)](_0x254a42[_0x5bbda8(0x220)]);return await http[_0x5bbda8(0x22f)](_0x5bbda8(0x236),_0x56b291,'STOP\x20SCRIPT','','',_0x1f06aa,_0x5bbda8(0x252)),teleId&&await http[_0x5bbda8(0x214)](_0x56b291,teleId,'['+_0x56b291+'][OK]:\x20STOP\x20SCRIPT'),_0x46a630;}catch(_0x405958){log(_0x56b291,_0x5bbda8(0x224)+_0x405958,null,![]);if(_0x2ba119)await Thread[_0x5bbda8(0x267)](_0x2ba119);await procScreenArr(_0x5bbda8(0x25c),_0x9a2a4e,_0x56b291);const _0x45aab8=await genlogin[_0x5bbda8(0x1b6)](_0x254a42?.[_0x5bbda8(0x220)]||Date[_0x5bbda8(0x1e4)]());await http[_0x5bbda8(0x22f)](_0x5bbda8(0x236),_0x56b291,_0x5bbda8(0x1df),'','',_0x45aab8,_0x5bbda8(0x252));teleId&&await http[_0x5bbda8(0x214)](_0x56b291,teleId,'['+_0x56b291+_0x5bbda8(0x1ab));throw _0x405958;}}async function xuLyBrowser(_0x542691,_0x41e77f,_0x27898c){const _0x5e6265=a0_0x5caf4e;let _0x1405ef;try{const _0xeeeb1c=_0x542691;if(!browserInfo[_0x542691])browserInfo[_0x542691]={};browserInfo[_0x542691][_0x5e6265(0x23c)]=0x0,log(_0x542691,'[xuLyBrowser]:browserInfo:\x20'+json(browserInfo),null,'w','w');if(browserInfo[_0x542691][_0x5e6265(0x23c)]==0x0){_0x1405ef=await OpenBrowser(_0x542691,_0x41e77f,_0x27898c);if(!_0x1405ef){log(_0x542691,_0x5e6265(0x212)+_0x542691,null,![]);throw new Error('[xuLyBrowser]:\x20Không\x20mở\x20được\x20trình\x20duyệt\x20'+_0x542691);}browserInfo[_0x542691][_0x5e6265(0x23c)]=0x1;}if(!_0x1405ef[_0x5e6265(0x226)])throw new Error(_0x5e6265(0x264)+_0x542691);let _0x298277=0x0;const _0x139429=await http['getBotAll'](_0x5e6265(0x236),_0xeeeb1c);if(!_0x139429){log(_0x542691,_0x5e6265(0x273),null,![]);throw new Error(_0x5e6265(0x260));}if(_0x139429[_0x5e6265(0x20a)]<=0x0){log(_0x542691,'[xuLyBrowser]:\x20không\x20lấy\x20được\x20bot',null,![]);throw new Error(_0x5e6265(0x260));}for(const _0xabe7a9 of _0x139429){if(_0xabe7a9){if(_0xabe7a9['type']!=_0x5e6265(0x1f3))continue;if(_0xabe7a9[_0x5e6265(0x26b)]===_0x5e6265(0x222)){log(_0x542691,':\x20XONG\x201\x20LƯỢT',null,'i');break;}if(!_0xabe7a9[_0x5e6265(0x1dd)]){log(_0x542691,_0x5e6265(0x1d4)+json(_0xabe7a9)+_0x5e6265(0x253),null,![]);continue;}if(_0xabe7a9[_0x5e6265(0x25b)]==='0'){log(_0x542691,_0x5e6265(0x1d4)+json(_0xabe7a9[_0x5e6265(0x266)])+_0x5e6265(0x1b7),null,![]);continue;}const _0x4c79c7=await genlogin[_0x5e6265(0x1e6)](_0x542691);if(_0xabe7a9['nextRunStamp']>_0x4c79c7[_0x5e6265(0x220)]){log(_0x542691,_0x5e6265(0x1d4)+json(_0xabe7a9[_0x5e6265(0x266)])+_0x5e6265(0x275),null,'w');continue;}switch(_0xabe7a9[_0x5e6265(0x1dd)]){case'A':log(_0x542691,':\x20'+json(_0xabe7a9[_0x5e6265(0x266)])+_0x5e6265(0x21b)),await xuLyGame(_0xabe7a9,'A',_0x542691,_0x41e77f,_0x27898c,_0x1405ef);break;case'K':log(_0x542691,':\x20'+json(_0xabe7a9['name'])+'\x20Tele\x20K\x20OK'),await xuLyGame(_0xabe7a9,'K',_0x542691,_0x41e77f,_0x27898c,_0x1405ef);break;case'W':log(_0x542691,':\x20'+json(_0xabe7a9[_0x5e6265(0x266)])+'\x20Web\x20OK'),await xuLyGame(_0xabe7a9,'W',_0x542691,_0x41e77f,_0x27898c,_0x1405ef);break;default:log(_0x542691,_0x5e6265(0x21f)+json(_0xabe7a9[_0x5e6265(0x1dd)]),null,![]);break;}log(_0x542691,_0x5e6265(0x1f0));}}return await closeBrowser(_0x542691,_0x1405ef),!![];}catch(_0x4c1b56){return log(_0x542691,_0x5e6265(0x25e)+_0x4c1b56,null,![]),await closeBrowser(_0x542691,_0x1405ef),null;}}async function xuLyGame(_0x5e7244,_0xbeeb54,_0x543104,_0xb07e17,_0x5d6ae1,_0x10750e){const _0x534f14=a0_0x5caf4e;try{const _0x25afb1=_0x543104;if(_0x5e7244[_0x534f14(0x239)]===_0x534f14(0x1e2)){log(_0x543104,'[xuLyGame]:\x20'+_0x5e7244[_0x534f14(0x266)]+_0x534f14(0x22d),null,'i');const _0x460aa6=await genlogin[_0x534f14(0x1e6)](_0x543104),_0x72a454=await http[_0x534f14(0x22f)](_0x543104,_0x25afb1,_0x5e7244[_0x534f14(0x266)],_0x460aa6[_0x534f14(0x227)],'',_0x534f14(0x269),'running'),_0x5df6e7=_0x72a454['ID'],_0x49bd4c={'bot':_0x5e7244,'profileNameId':_0x543104,'genlogin':genlogin,'http':http,'dataId':_0x5df6e7},_0x1afda4=await loadGameApi(_0x5e7244['name'],_0x49bd4c);if(!_0x1afda4[_0x534f14(0x1b8)])return log(_0x543104,'[xuLyGame]:\x20Thực\x20thi\x20'+_0x5e7244[_0x534f14(0x266)]+_0x534f14(0x1fe),null,![]),await http[_0x534f14(0x1d1)](_0x543104,_0x25afb1,_0x5df6e7,'Fail',_0x534f14(0x24a)),null;if(_0x1afda4['status']==_0x534f14(0x1c7))return log(_0x543104,'[xuLyGame]:\x20Thực\x20thi\x20'+_0x5e7244[_0x534f14(0x266)]+'\x20loop',null,'i'),_0x534f14(0x1c7);if(_0x1afda4[_0x534f14(0x1b8)])return log(_0x543104,_0x534f14(0x1fb)+_0x5e7244['name']+_0x534f14(0x23b)),await http['nextRunTime'](_0x543104,_0x25afb1,_0x5e7244['id'],_0x1afda4['nextRun'],_0x1afda4[_0x534f14(0x234)]),await http[_0x534f14(0x1d1)](_0x543104,_0x25afb1,_0x5df6e7,'Ok',_0x534f14(0x1ba),_0x1afda4[_0x534f14(0x1fa)],_0x1afda4[_0x534f14(0x25a)]),!![];}else{if(_0xbeeb54=='A'||_0xbeeb54=='K'){log(_0x543104,_0x534f14(0x240)+_0x5e7244[_0x534f14(0x266)]+_0x534f14(0x21a),null,'w','-');const _0x36b7fa=await http[_0x534f14(0x1eb)](_0x543104,_0xbeeb54);if(_0x36b7fa){log(_0x543104,_0x534f14(0x21e));let _0x1ae20d=0x0;while(_0x1ae20d<0x2){const _0x5ae80b=await checkTeleWebOpen(_0x5e7244,_0x36b7fa,_0x543104,_0x5d6ae1,_0x10750e);if(_0x5ae80b===_0x534f14(0x1c7))_0x1ae20d++,log(_0x543104,_0x534f14(0x24b)+_0x1ae20d+'/2',null,'i'),await delay(0x3e8);else return _0x5ae80b?(log(_0x543104,'[xuLyGame]:\x20checkTeleWebOpen\x20OK'),!![]):(log(_0x543104,_0x534f14(0x257),null,![]),null);}return log(_0x543104,_0x534f14(0x1f5),null,![]),null;}}else{if(_0xbeeb54=='W'){log(_0x543104,_0x534f14(0x240)+_0x5e7244[_0x534f14(0x266)]+_0x534f14(0x1d3),null,'w','-');const _0x4ac019=await checkTeleWebOpen(_0x5e7244,_0xbeeb54,_0x543104,_0x5d6ae1,_0x10750e);return _0x4ac019?(log(_0x543104,'[xuLyGame]:\x20checkTeleWebOpen\x20OK'),!![]):(log(_0x543104,'[xuLyGame]:\x20checkTeleWebOpen\x20có\x20gì\x20đó\x20sai\x20sai\x20rồi\x20bro',null,![]),null);}else return log(_0x543104,_0x534f14(0x1d5)+_0xbeeb54,null,![]),null;}}}catch(_0x506a55){return log(_0x543104,_0x534f14(0x256)+_0x506a55,null,![]),null;}}async function OpenBrowser(_0x2150d8,_0x5a23c9,_0x29ff4a){const _0x19cd14=a0_0x5caf4e;try{const _0x362234=_0x2150d8;log(_0x2150d8,_0x19cd14(0x274)+JSON['stringify'](_0x2150d8),null,'i');if(getAllProfiles[_0x19cd14(0x249)]==='n'){const _0x48af4b=getAllProfiles[_0x19cd14(0x1f7)][_0x19cd14(0x1b5)]('x');parseInt(_0x48af4b[0x0])>=0x0&&parseInt(_0x48af4b[0x1])>=0x0?(_0x29ff4a['x']=parseInt(_0x48af4b[0x0]),_0x29ff4a['y']=parseInt(_0x48af4b[0x1])):(_0x29ff4a['x']=0x0,_0x29ff4a['y']=0x0),log(_0x2150d8,_0x19cd14(0x230)+_0x29ff4a['x']+'x'+_0x29ff4a['y'],null,'w');}const _0x442bc5=await genlogin[_0x19cd14(0x1b9)](_0x2150d8,getAllProfiles,_0x5a23c9,_0x29ff4a);log(_0x2150d8,_0x19cd14(0x233)+JSON[_0x19cd14(0x23d)](_0x442bc5),null,'i'),await delay(0x1388);if(_0x442bc5){let _0x2df2f9=0x0;const _0x3c6589=0xa;while(_0x2df2f9<_0x3c6589){_0x2df2f9++;const _0x334ac3=await genlogin[_0x19cd14(0x1b4)](_0x2150d8,_0x442bc5);if(_0x334ac3<=0x1)return log(_0x2150d8,_0x19cd14(0x1dc)+_0x334ac3+_0x19cd14(0x1b1),null,'i'),_0x442bc5;const _0x206c5e=await genlogin[_0x19cd14(0x221)](_0x2150d8,_0x442bc5,_0x334ac3-0x1,0xbb8);if(!_0x206c5e){log(_0x2150d8,_0x19cd14(0x1ca),null,![]);continue;}log(_0x2150d8,_0x19cd14(0x25f)),await delay(0xbb8);continue;}}return log(_0x2150d8,'[OpenBrowser]:\x20Lỗi\x20khi\x20mở\x20browser:\x20'+JSON[_0x19cd14(0x23d)](_0x2150d8)),null;}catch(_0xeb734b){throw new Error(_0x19cd14(0x258)+_0xeb734b[_0x19cd14(0x276)]);}}async function checkTeleWebOpen(_0x5ddf24,_0x1e7bba,_0x4a2d3c,_0x9e6bc,_0x5f49fe){const _0x4bea2c=a0_0x5caf4e;let _0x1a46b0,_0x37c1e2;try{_0x37c1e2=await genlogin[_0x4bea2c(0x229)](_0x4a2d3c,_0x5f49fe,0x0,getAllProfiles[_0x4bea2c(0x1c4)],_0x9e6bc[_0x4bea2c(0x1e5)]);if(_0x1e7bba!='W'){const _0x5aa56b=await genlogin['elementExistsByXPath'](_0x4a2d3c,_0x37c1e2,_0x1e7bba['InputSearch'],0x7d0);!_0x5aa56b&&(await genlogin[_0x4bea2c(0x20c)](_0x4a2d3c,_0x37c1e2,_0x4bea2c(0x216),0xea60),await delay(0x7d0),await genlogin['openUrl'](_0x4a2d3c,_0x37c1e2,_0x1e7bba[_0x4bea2c(0x1c9)],0xea60),await genlogin[_0x4bea2c(0x1c5)](_0x4a2d3c,_0x37c1e2,_0x4a2d3c),await delay(0x1388));}else _0x1e7bba='W',await genlogin[_0x4bea2c(0x20c)](_0x4a2d3c,_0x37c1e2,_0x4bea2c(0x216),0xea60),await delay(0x7d0),await genlogin[_0x4bea2c(0x20c)](_0x4a2d3c,_0x37c1e2,_0x5ddf24[_0x4bea2c(0x241)],0xea60),await genlogin[_0x4bea2c(0x1c5)](_0x4a2d3c,_0x37c1e2,_0x4a2d3c),await delay(0x1388);log(_0x4a2d3c,_0x4bea2c(0x228),null,'i');const _0x581988=await genlogin[_0x4bea2c(0x1e6)](_0x4a2d3c),_0x5af241=await http[_0x4bea2c(0x22f)](_0x4a2d3c,_0x4a2d3c,_0x5ddf24[_0x4bea2c(0x266)],_0x581988['date'],'',_0x4bea2c(0x1d6),_0x4bea2c(0x1f6));_0x1a46b0=_0x5af241['ID'];const _0x30a39e={'firstPage':_0x37c1e2,'bot':_0x5ddf24,'profileNameId':_0x4a2d3c,'getAks':_0x1e7bba,'genlogin':genlogin,'http':http,'browser':_0x5f49fe,'dataId':_0x5af241['ID'],'taskIndex':taskInfo[_0x4bea2c(0x1f2)],'screenDataBuffer2':screenDataBuffer1,'tasksDataBuffer2':tasksDataBuffer1};let _0x488696=null;log(_0x4a2d3c,'[checkTeleWebOpen]:\x20dataId:\x20'+json(_0x1a46b0),null,'i');if(timgame&&_0x1e7bba!='W'){await http['updateData'](_0x4a2d3c,_0x4a2d3c,_0x1a46b0,'Tìm');const _0x6a2bb0=await loadGame(_0x4bea2c(0x1bf),_0x30a39e,_0x488696,_0x1a46b0,_0x4a2d3c);if(_0x6a2bb0[_0x4bea2c(0x1b8)]==_0x4bea2c(0x1c7))return log(_0x4a2d3c,'[checkTeleWebOpen]:\x20Thực\x20thi\x20'+_0x5ddf24[_0x4bea2c(0x266)]+_0x4bea2c(0x259),null,'i'),await http[_0x4bea2c(0x1d1)](_0x4a2d3c,_0x4a2d3c,_0x1a46b0,_0x4bea2c(0x1bd)),'loop';else{if(!_0x6a2bb0)return log(_0x4a2d3c,_0x4bea2c(0x23e)+_0x5ddf24['name'],null,![]),await http[_0x4bea2c(0x1d1)](_0x4a2d3c,_0x4a2d3c,_0x1a46b0,'Fail',_0x4bea2c(0x24a)),null;}_0x6a2bb0[_0x4bea2c(0x263)]&&(_0x488696=_0x6a2bb0[_0x4bea2c(0x263)]);}await http[_0x4bea2c(0x1d1)](_0x4a2d3c,_0x4a2d3c,_0x1a46b0,'Vào');const _0x3473fa=await loadGame(_0x5ddf24[_0x4bea2c(0x266)],_0x30a39e,_0x488696,_0x1a46b0,_0x4a2d3c);if(!_0x3473fa[_0x4bea2c(0x1b8)])return log(_0x4a2d3c,_0x4bea2c(0x255)+_0x5ddf24['name'],null,![]),log(_0x4a2d3c,_0x4bea2c(0x279)+json(_0x3473fa),null,![]),await http[_0x4bea2c(0x1d1)](_0x4a2d3c,_0x4a2d3c,_0x1a46b0,_0x4bea2c(0x24a),'Fail'),null;else{if(_0x3473fa[_0x4bea2c(0x1b8)]==_0x4bea2c(0x1c7))return log(_0x4a2d3c,_0x4bea2c(0x225)+_0x5ddf24[_0x4bea2c(0x266)]+'\x20loop',null,'i'),await http['updateData'](_0x4a2d3c,_0x4a2d3c,_0x1a46b0,_0x4bea2c(0x1c7)),'loop';}return await http[_0x4bea2c(0x1c6)](_0x4a2d3c,_0x4a2d3c,_0x5ddf24['id'],_0x3473fa[_0x4bea2c(0x25a)],_0x3473fa[_0x4bea2c(0x234)]),await http['updateData'](_0x4a2d3c,_0x4a2d3c,_0x1a46b0,'Ok',_0x4bea2c(0x1ba),_0x3473fa[_0x4bea2c(0x1fa)],_0x3473fa[_0x4bea2c(0x25a)]),log(_0x4a2d3c,_0x4bea2c(0x1ed)+_0x5ddf24[_0x4bea2c(0x266)]+_0x4bea2c(0x20b)),await delay(0x7d0),_0x1a46b0=null,_0x37c1e2=null,!![];}catch(_0x5521e4){return log(_0x4a2d3c,'[checkTeleWebOpen]:\x20Lỗi\x20trong\x20quá\x20trình\x20mở\x20trang\x20:\x20'+_0x5521e4,null,![]),await http[_0x4bea2c(0x1d1)](_0x4a2d3c,_0x4a2d3c,_0x1a46b0,_0x4bea2c(0x24a),_0x4bea2c(0x24a)),_0x1a46b0=null,_0x37c1e2=null,null;}}async function loadGame(_0x1d4d6e,_0x3af218,_0x32f1c7,_0x116a46,_0x2e442a){const _0x550bdb=a0_0x5caf4e;try{const _0x3e6bb2=pathToFileURL(a0_0x43a755[_0x550bdb(0x271)](__dirname,_0x550bdb(0x243),_0x1d4d6e+_0x550bdb(0x1f1)))['href'];log(_0x2e442a,_0x550bdb(0x1b2)+_0x3e6bb2);const _0x5b0ae5=await import(_0x3e6bb2);if(typeof _0x5b0ae5[_0x550bdb(0x1da)]===_0x550bdb(0x26c)){const _0x35c217=await _0x5b0ae5[_0x550bdb(0x1da)](_0x3af218,_0x32f1c7);await delay(0x3e8);if(!_0x35c217[_0x550bdb(0x1b8)])return log(_0x2e442a,'[loadGame]:\x20Script\x20'+_0x1d4d6e+_0x550bdb(0x23a),null,![]),null;else return _0x35c217['status']===_0x550bdb(0x1c7)?(log(_0x2e442a,_0x550bdb(0x242)+_0x1d4d6e+_0x550bdb(0x259),null,'i'),_0x35c217):(log(_0x2e442a,'[loadGame]:\x20Chạy\x20'+_0x1d4d6e+'\x20'+_0x35c217[_0x550bdb(0x1b8)],null,'i'),_0x35c217);}else return await delay(0x3e8),log(_0x2e442a,_0x550bdb(0x24d)+_0x1d4d6e+'\x20không\x20phải\x20là\x20một\x20hàm\x20hợp\x20lệ',null,![]),null;}catch(_0x43a02c){return log(_0x2e442a,_0x550bdb(0x202)+_0x1d4d6e+':\x20'+_0x43a02c,null,![]),teleId&&await http[_0x550bdb(0x214)](_0x2e442a,teleId,'['+_0x2e442a+']['+_0x1d4d6e+_0x550bdb(0x20d)+_0x43a02c),null;}}async function closeBrowser(_0x41c5a6='',_0x456e71){const _0x1f0507=a0_0x5caf4e;try{if(_0x456e71){if(_0x456e71['connected']){for(const _0xa49ba6 of await _0x456e71[_0x1f0507(0x244)]()){await _0xa49ba6[_0x1f0507(0x25c)]();}return await _0x456e71[_0x1f0507(0x25c)](),_0x456e71=null,global['gc']&&(global['gc'](),log(_0x1f0507(0x1cd),_0x1f0507(0x219),null,'i','+')),log(_0x41c5a6,'[closeBrowser]:\x20Đóng\x20trình\x20duyệt\x20'+_0x41c5a6+_0x1f0507(0x20b),null,'w'),!![];}}else log(_0x41c5a6,_0x1f0507(0x21d),null,'i');return null;}catch(_0x1691cf){return log(_0x41c5a6,_0x1f0507(0x20e)+_0x41c5a6+':\x20'+_0x1691cf,null,![]),null;}}function a0_0x3554(_0x2bd261,_0x355b8a){const _0x179a1c=a0_0x179a();return a0_0x3554=function(_0x355480,_0x229c95){_0x355480=_0x355480-0x1ab;let _0x502efc=_0x179a1c[_0x355480];return _0x502efc;},a0_0x3554(_0x2bd261,_0x355b8a);}async function procScreenArr(_0x4a8633,_0x3518e8,_0x100bb0){const _0x1909ec=a0_0x5caf4e;try{await acquireLock(screenData);let _0x4c33cd={};log(_0x100bb0,_0x1909ec(0x203)+_0x4a8633+_0x1909ec(0x25d)+json(_0x3518e8),null,'w','-');if(_0x4a8633===_0x1909ec(0x1e0)){log(_0x100bb0,_0x1909ec(0x1ff),null,'w'),_0x4c33cd[_0x1909ec(0x1e5)]=Atomics[_0x1909ec(0x1cf)](screenData,0x1)/0xf4240,_0x4c33cd[_0x1909ec(0x248)]=Atomics[_0x1909ec(0x1cf)](screenData,0x2),_0x4c33cd['height']=Atomics[_0x1909ec(0x1cf)](screenData,0x3);for(let _0x4f8831=0xa;_0x4f8831<screenData[_0x1909ec(0x20a)]-0x1;_0x4f8831=_0x4f8831+0x3){const _0x518c57=Atomics[_0x1909ec(0x1cf)](screenData,_0x4f8831);if(_0x518c57===0x2)return Atomics[_0x1909ec(0x1b0)](screenData,_0x4f8831,0x1),_0x4c33cd['default']=0x0,_0x4c33cd['x']=Atomics[_0x1909ec(0x1cf)](screenData,_0x4f8831+0x1),_0x4c33cd['y']=Atomics['load'](screenData,_0x4f8831+0x2),log(_0x100bb0,_0x1909ec(0x265)+_0x4f8831+_0x1909ec(0x21c)+json(_0x4c33cd),null,'w'),await releaseLock(screenData),_0x4c33cd;if(_0x518c57===0x0)return Atomics[_0x1909ec(0x1b0)](screenData,_0x4f8831,0x1),_0x4c33cd[_0x1909ec(0x1da)]=0x1,_0x4c33cd['x']=0x0,_0x4c33cd['y']=0x0,log(_0x100bb0,_0x1909ec(0x265)+_0x4f8831+_0x1909ec(0x1e7)+json(_0x4c33cd),null,'w'),await releaseLock(screenData),_0x4c33cd;}await releaseLock(screenData);throw new Error(_0x1909ec(0x24e));}else{if(_0x4a8633===_0x1909ec(0x25c)&&_0x3518e8['x']>=0x0&&_0x3518e8['y']>=0x0){log(_0x100bb0,_0x1909ec(0x1ea),null,'w');if(_0x3518e8[_0x1909ec(0x1da)]===0x1)return log(_0x100bb0,_0x1909ec(0x237),null,'w'),await releaseLock(screenData),!![];for(let _0x3908fe=0xa;_0x3908fe<screenData['length']-0x1;_0x3908fe+=0x3){const _0x386ded=Atomics[_0x1909ec(0x1cf)](screenData,_0x3908fe);if(_0x386ded===0x1){const _0x40bcc2=Atomics[_0x1909ec(0x1cf)](screenData,_0x3908fe+0x1),_0x5c3c9b=Atomics[_0x1909ec(0x1cf)](screenData,_0x3908fe+0x2);if(_0x40bcc2===_0x3518e8['x']&&_0x5c3c9b===_0x3518e8['y'])return Atomics[_0x1909ec(0x1b0)](screenData,_0x3908fe,0x2),log(_0x100bb0,_0x1909ec(0x265)+_0x3908fe+_0x1909ec(0x254),null,'w'),Atomics[_0x1909ec(0x238)](screenData,_0x3908fe),await releaseLock(screenData),!![];}}await releaseLock(screenData);throw new Error('Không\x20thể\x20đóng\x20màn\x20hình:\x20vị\x20trí\x20không\x20hợp\x20lệ\x20action:\x20'+_0x4a8633+_0x1909ec(0x25d)+json(_0x3518e8));}else return log(_0x100bb0,'[worker1.procScreenArr]\x20posVal:'+json(_0x3518e8)+_0x1909ec(0x232)+_0x4a8633,null,'w'),await releaseLock(screenData),!![];}}catch(_0x1acaa3){return log(_0x100bb0,_0x1909ec(0x1cb)+_0x1acaa3+_0x1909ec(0x204)+_0x4a8633+_0x1909ec(0x25d)+json(_0x3518e8),null,![]),await releaseLock(screenData),![];}}async function acquireLock(_0x44ceb8,_0x5760e7=0x7530){const _0x5e4467=a0_0x5caf4e,_0x3b790a=Date['now']();while(Atomics[_0x5e4467(0x268)](_0x44ceb8,0x8,0x0,0x1)!==0x0){if(Date[_0x5e4467(0x1e4)]()-_0x3b790a>_0x5760e7)throw new Error('Timeout\x20while\x20acquiring\x20lock');Atomics[_0x5e4467(0x1cc)](_0x44ceb8,0x8,0x1,_0x5760e7);}}async function releaseLock(_0x4d66ff){const _0x45db62=a0_0x5caf4e;Atomics[_0x45db62(0x1b0)](_0x4d66ff,0x8,0x0),Atomics[_0x45db62(0x238)](_0x4d66ff,0x8);}async function xoaTimeout(_0x2c1050){const _0xe4a141=a0_0x5caf4e;try{clearTimeout(_0x2c1050),log(_0xe4a141(0x211)+_0x2c1050,null,'i',_0xe4a141(0x1de));}catch(_0x20bab6){log(_0xe4a141(0x1f4)+_0x20bab6,null,![]);}}async function xoaInterval(_0x122465){const _0x2ed044=a0_0x5caf4e;try{clearInterval(_0x122465),log(_0x2ed044(0x26a)+_0x122465,null,'i','clrInterval');}catch(_0x101c84){log(_0x2ed044(0x1f4)+_0x101c84,null,![]);}}async function delay(_0x2c0563){return new Promise(async _0x23e525=>{setTimeout(_0x23e525,_0x2c0563);});}async function eTimeout(){const _0x1a4733=a0_0x5caf4e;return log(_0x1a4733(0x24f),null,'w'),Atomics[_0x1a4733(0x1b0)](tasksData,taskInfo[_0x1a4733(0x1f2)],0x1),!![];}async function cTimeout(){const _0x4c4439=a0_0x5caf4e;if(Atomics[_0x4c4439(0x1cf)](tasksData,taskInfo[_0x4c4439(0x1f2)])===0x1)return!![];return null;}async function rstTimeout(){const _0x4117de=a0_0x5caf4e;return log(_0x4117de(0x270),null,'w'),Atomics[_0x4117de(0x268)](tasksData,taskInfo[_0x4117de(0x1f2)],0x1,0x2),!![];}
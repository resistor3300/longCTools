const a0_0x2c0da3=a0_0x3bb2;(function(_0x521712,_0x327681){const _0x3d6e19=a0_0x3bb2,_0x7a1e4e=_0x521712();while(!![]){try{const _0x115bf4=parseInt(_0x3d6e19(0xc1))/0x1*(-parseInt(_0x3d6e19(0xb4))/0x2)+parseInt(_0x3d6e19(0xc5))/0x3*(parseInt(_0x3d6e19(0xd8))/0x4)+-parseInt(_0x3d6e19(0xe2))/0x5*(-parseInt(_0x3d6e19(0x137))/0x6)+parseInt(_0x3d6e19(0xe8))/0x7+parseInt(_0x3d6e19(0x134))/0x8+-parseInt(_0x3d6e19(0xb8))/0x9*(parseInt(_0x3d6e19(0xda))/0xa)+-parseInt(_0x3d6e19(0xbc))/0xb*(parseInt(_0x3d6e19(0x93))/0xc);if(_0x115bf4===_0x327681)break;else _0x7a1e4e['push'](_0x7a1e4e['shift']());}catch(_0x456565){_0x7a1e4e['push'](_0x7a1e4e['shift']());}}}(a0_0x41ff,0x50023));import'dotenv/config';import a0_0x1ffb71 from'fs';import a0_0x389028 from'path';import{fileURLToPath,pathToFileURL}from'url';import{expose}from'threads/worker';import{log,json}from'./modules/logger.js';import a0_0x419621 from'./modules/Genlogin.js';import a0_0x55bca2 from'./modules/http.js';import a0_0x146aa2 from'p-queue';const __filename=fileURLToPath(import.meta['url']),__dirname=a0_0x389028[a0_0x2c0da3(0x139)](__filename);let profileQueue,genlogin,http,getAllProfiles,taskInfo,GenDataProfile,timgame;genlogin=new a0_0x419621('',!![]),http=new a0_0x55bca2(process[a0_0x2c0da3(0xd4)][a0_0x2c0da3(0xf2)],process[a0_0x2c0da3(0xd4)][a0_0x2c0da3(0xa0)],!![]);let firstRun=!![],delayOpenProfile=0xbb8,profileTimeout=0x5265c0,botTimeout=0x5265c0,profileThreads=0x1,browserInfo={},version,screenData,tasksData,screenDataBuffer1,tasksDataBuffer1,teleId=null;const worker1=async _0x22df76=>{const _0x5a5671=a0_0x2c0da3,{version0:_0x2a58fd,tasksDataBuffer:_0x212c2a,screenDataBuffer:_0x121088,action:_0x2f083c,task:_0x59adfb,dataBrw:_0x328168,GenDataProfile0:_0x1c59f4,timgame0:_0x3cb286,timeout:_0x5d0a47,tele_id:_0xf3a7ce}=_0x22df76;taskInfo=_0x59adfb;_0xf3a7ce&&_0xf3a7ce[_0x5a5671(0xdb)]&&(teleId=_0xf3a7ce[_0x5a5671(0xdb)]);screenDataBuffer1=_0x121088,tasksDataBuffer1=_0x212c2a,screenData=new Int32Array(_0x121088),tasksData=new Int32Array(_0x212c2a);try{if(_0x5d0a47)return log(_0x5a5671(0x116),'timeout',null,'w'),await clearVar(),{'success':![],'error':_0x5a5671(0x10a)};else{if(_0x59adfb!=='screenArr'){version=_0x2a58fd,getAllProfiles=_0x328168,log('worker1',_0x5a5671(0xde)+JSON[_0x5a5671(0xfe)](_0x22df76[_0x5a5671(0xa5)]),null,'c'),log(_0x5a5671(0x116),_0x5a5671(0xc9)+JSON[_0x5a5671(0xfe)](getAllProfiles),null,'c'),GenDataProfile=_0x1c59f4,timgame=_0x3cb286,log('worker1','['+_0x59adfb[_0x5a5671(0xee)]+']:\x20Script\x20Mode',null,'w');const _0x308b25=await xuLyTask(_0x59adfb);return log('worker1',''+JSON[_0x5a5671(0xfe)](_0x308b25),null,'w'),log('worker1','DONE',null,'w',_0x5a5671(0xf7)),await clearVar(),_0x308b25?{'success':!![],'result':_0x308b25}:{'success':![],'result':_0x308b25};}else return log(_0x5a5671(0x116),_0x5a5671(0xc8)+_0x59adfb,null,'w'),await clearVar(),{'success':![],'error':_0x5a5671(0x116)};}}catch(_0x27cf51){return log('worker1','Lỗi\x20'+_0x27cf51,null,![]),await clearVar(),{'success':![],'error':'worker1'};}};expose({'worker1':worker1});async function clearVar(){return genlogin=null,http=null,profileQueue&&(profileQueue['clear'](),profileQueue=null),screenDataBuffer1=null,tasksDataBuffer1=null,screenData=null,tasksData=null,taskInfo=null,teleId=null,getAllProfiles=null,GenDataProfile=null,timgame=null,browserInfo=null,version=null,!![];}async function xuLyTask(_0x57a62e){const _0x5a80c3=a0_0x2c0da3;try{log(_0x5a80c3(0x116),'['+_0x57a62e[_0x5a80c3(0xee)]+_0x5a80c3(0x9a),null,'i','-');const _0x444789=await genlogin['nowTime']('worker1'),_0x43e5f7=_0x444789[_0x5a80c3(0xd7)];if(_0x43e5f7<_0x57a62e['nextrunstamp'])return log(_0x5a80c3(0x116),'['+_0x57a62e['name']+_0x5a80c3(0x13b)+JSON[_0x5a80c3(0xfe)](_0x57a62e[_0x5a80c3(0xee)])+_0x5a80c3(0x12d),null,'i'),log(_0x5a80c3(0x116),'['+_0x57a62e[_0x5a80c3(0xee)]+'][xuLyTask]:\x20currentDateTime:\x20'+JSON['stringify'](_0x444789)+'\x20|\x20nextrun:\x20'+JSON[_0x5a80c3(0xfe)](_0x57a62e[_0x5a80c3(0x10b)]),null,'w'),log(_0x5a80c3(0x116),'['+_0x57a62e['name']+_0x5a80c3(0xef)+JSON['stringify'](_0x43e5f7)+_0x5a80c3(0xb9)+JSON[_0x5a80c3(0xfe)](taskNextRunDateTime),null,'w'),log(_0x5a80c3(0x116),'['+_0x57a62e[_0x5a80c3(0xee)]+'][xuLyTask]:\x20Chờ\x205\x20giây\x20trước\x20khi\x20xử\x20lý\x20task\x20tiếp\x20theo...',null,'i'),await delay(0x1388),null;let _0x3c07e1=await http['getTask'](_0x5a80c3(0x116),_0x57a62e[_0x5a80c3(0xee)]);if(_0x3c07e1['value'][_0x5a80c3(0x132)][_0x5a80c3(0xff)]<=0x0){log(_0x5a80c3(0x116),'['+_0x57a62e[_0x5a80c3(0xee)]+_0x5a80c3(0x106),null,![]);throw new Error(_0x5a80c3(0xf6));}firstRun&&(profileThreads=parseInt(_0x57a62e[_0x5a80c3(0xec)]),profileQueue=new a0_0x146aa2({'concurrency':profileThreads}),log(_0x5a80c3(0x116),'['+_0x57a62e[_0x5a80c3(0xee)]+'][xuLyTask]profileQueue:\x20concurrency:'+profileThreads,null,'w'),firstRun=![],delayOpenProfile=parseInt(_0x57a62e['delayOpenProfile'])*0x3e8,profileTimeout=parseInt(_0x57a62e['profileTimeout'])*0x3e8,botTimeout=parseInt(_0x57a62e[_0x5a80c3(0x101)])*0x3e8);const _0x4ae951=await xuLyProfiles(_0x3c07e1[_0x5a80c3(0xdf)][_0x5a80c3(0x132)],_0x57a62e[_0x5a80c3(0xee)]);if(!_0x4ae951){log(_0x5a80c3(0x116),'['+_0x57a62e[_0x5a80c3(0xee)]+'][xuLyTask]:\x20Không\x20lấy\x20được\x20dữ\x20liệu\x20profiles\x20'+json(_0x4ae951),null,![]);throw new Error(_0x5a80c3(0xf6));}return log(_0x5a80c3(0x116),'['+_0x57a62e[_0x5a80c3(0xee)]+'][xuLyTask]:\x20Tasks:\x20'+_0x57a62e[_0x5a80c3(0xee)]+_0x5a80c3(0xb2)),await delay(0x7d0),log(_0x5a80c3(0x116),'['+_0x57a62e['name']+'][xuLyTask]:\x20Hoàn\x20thành\x20xử\x20lý\x20task:\x20'+JSON['stringify'](_0x57a62e[_0x5a80c3(0xee)])),!![];}catch(_0x189293){return log(_0x5a80c3(0x116),'['+_0x57a62e[_0x5a80c3(0xee)]+_0x5a80c3(0xe3)+_0x189293,null,![]),null;}}async function xuLyProfiles(_0x140248,_0x48a526){const _0x490e54=a0_0x2c0da3;try{const _0x436c75=[];for(const [_0x225419,_0x5bb14f]of _0x140248[_0x490e54(0x95)]()){const _0x53bfa6=await GenDataProfile[_0x490e54(0xf5)](_0x5d41e4=>_0x5d41e4[_0x490e54(0xe0)]===_0x5bb14f);if(_0x225419!==-0x1)log(_0x490e54(0x116),'['+_0x48a526+'][xuLyProfiles]index:\x20'+_0x53bfa6);else{log(_0x490e54(0x116),'['+_0x48a526+_0x490e54(0xae));throw new Error('Không\x20tìm\x20thấy\x20indexGenP');}log('worker1','['+_0x48a526+_0x490e54(0xcf)+_0x5bb14f+_0x490e54(0x10c)+profileThreads,null,'i'),_0x436c75[_0x490e54(0xa4)](profileQueue[_0x490e54(0x111)](async()=>{const _0x2f5869=_0x490e54;try{delayOpenProfile>0x0?(log(_0x2f5869(0x116),'['+_0x48a526+'][xuLyProfiles]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile\x20'+_0x5bb14f+'\x20sau\x20'+delayOpenProfile+'ms',null,'w','-'),await delay(delayOpenProfile)):log(_0x2f5869(0x116),'['+_0x48a526+_0x2f5869(0x11d)+_0x5bb14f,null,'w','-'),await xuLyTungProfile(_0x5bb14f,GenDataProfile[_0x53bfa6]);}catch(_0x1e0182){log(_0x2f5869(0x116),'['+_0x48a526+_0x2f5869(0xc2)+_0x5bb14f+':\x20'+_0x1e0182['message'],null,![]);throw _0x1e0182;}})),log(_0x490e54(0x116),'['+_0x48a526+_0x490e54(0xcb)+_0x5bb14f+'\x20vào\x20hàng\x20đợi.');}const _0x3ec821=await Promise[_0x490e54(0x11c)](_0x436c75),_0x61cd8c=_0x3ec821[_0x490e54(0x130)](_0x297719=>_0x297719[_0x490e54(0x120)]==='rejected');return _0x61cd8c['length']>0x0?log(_0x490e54(0x116),'['+_0x48a526+_0x490e54(0x99)+JSON[_0x490e54(0xfe)](_0x61cd8c),null,![]):log(_0x490e54(0x116),'['+_0x48a526+_0x490e54(0x12b)+json(_0x3ec821)),!![];}catch(_0x325668){return log(_0x490e54(0x116),'['+_0x48a526+'][xuLyProfiles]:\x20Lỗi\x20:\x20'+_0x325668,null,![]),null;}}async function xuLyTungProfile(_0x1887f1,_0x1c09ab){const _0x5489a2=a0_0x2c0da3;let _0x4606e6,_0xba952f;const _0x11bb4a=_0x1887f1;let _0x13e617;try{await delay(delayOpenProfile),log(_0x1887f1,_0x5489a2(0x109),null,'i'),_0x4606e6=await genlogin[_0x5489a2(0xd1)](_0x1887f1),await http['addData'](_0x5489a2(0x116),_0x1887f1,_0x5489a2(0xe5),_0x4606e6[_0x5489a2(0xd7)],'',_0x5489a2(0x8e)+version,'Start');teleId&&await http[_0x5489a2(0x119)](_0x1887f1,teleId,'['+_0x1887f1+_0x5489a2(0x8a));log(_0x1887f1,_0x5489a2(0x103)+_0x1887f1,null,'w'),_0x13e617=await procScreenArr(_0x5489a2(0xce),null,_0x1887f1);if(_0x13e617['x']===undefined||_0x13e617['y']===undefined){log(_0x1887f1,_0x5489a2(0xa7),null,![]);throw new Error(_0x5489a2(0xf9));}const _0xe2fc1f=await xuLyBrowser(_0x1887f1,_0x1c09ab,_0x13e617);await procScreenArr(_0x5489a2(0xea),_0x13e617,_0x1887f1);const _0x2108e7=await genlogin['tinhThoiGian'](_0x4606e6[_0x5489a2(0xb7)]);return await http[_0x5489a2(0xe7)](_0x5489a2(0x116),_0x1887f1,_0x5489a2(0xbd),'','',_0x2108e7,_0x5489a2(0x91)),teleId&&await http['tele'](_0x1887f1,teleId,'['+_0x1887f1+_0x5489a2(0xfc)),_0xe2fc1f;}catch(_0x362909){log(_0x1887f1,_0x5489a2(0xd5)+_0x362909,null,![]);if(_0xba952f)await Thread[_0x5489a2(0xd2)](_0xba952f);await procScreenArr('close',_0x13e617,_0x1887f1);const _0x29841f=await genlogin[_0x5489a2(0x13a)](_0x4606e6?.[_0x5489a2(0xb7)]||Date[_0x5489a2(0xcc)]());await http['addData'](_0x5489a2(0x116),_0x1887f1,'STOP\x20SCRIPT','','',_0x29841f,_0x5489a2(0x91));teleId&&await http[_0x5489a2(0x119)](_0x1887f1,teleId,'['+_0x1887f1+'][ERR]:\x20STOP\x20SCRIPT');throw _0x362909;}}async function xuLyBrowser(_0x214900,_0x72f04b,_0x324aab){const _0x235351=a0_0x2c0da3;let _0x4903ed;try{const _0xbdaade=_0x214900;if(!browserInfo[_0x214900])browserInfo[_0x214900]={};browserInfo[_0x214900][_0x235351(0x117)]=0x0,log(_0x214900,_0x235351(0xe4)+json(browserInfo),null,'w','w');if(browserInfo[_0x214900][_0x235351(0x117)]==0x0){_0x4903ed=await OpenBrowser(_0x214900,_0x72f04b,_0x324aab);if(!_0x4903ed){log(_0x214900,_0x235351(0x8d)+_0x214900,null,![]);throw new Error('[xuLyBrowser]:\x20Không\x20mở\x20được\x20trình\x20duyệt\x20'+_0x214900);}browserInfo[_0x214900][_0x235351(0x117)]=0x1;}if(!_0x4903ed[_0x235351(0xc0)])throw new Error('[xuLyBrowser]:\x20browser\x20disconnected\x20'+_0x214900);let _0x36012e=0x0;const _0x47eb4e=await http['getBotAll'](_0x235351(0x116),_0xbdaade);if(!_0x47eb4e){log(_0x214900,_0x235351(0xdd),null,![]);throw new Error('No\x20bot\x20found');}if(_0x47eb4e[_0x235351(0xff)]<=0x0){log(_0x214900,_0x235351(0x124),null,![]);throw new Error(_0x235351(0x87));}for(const _0x2bdcf0 of _0x47eb4e){if(_0x2bdcf0){if(_0x2bdcf0[_0x235351(0xd9)]!=_0x235351(0xcd))continue;if(_0x2bdcf0[_0x235351(0xdf)]==='end'){log(_0x214900,_0x235351(0xfb),null,'i');break;}if(!_0x2bdcf0[_0x235351(0x12e)]){log(_0x214900,_0x235351(0xfa)+json(_0x2bdcf0)+_0x235351(0xaf),null,![]);continue;}if(_0x2bdcf0[_0x235351(0x131)]==='0'){log(_0x214900,_0x235351(0xfa)+json(_0x2bdcf0[_0x235351(0xee)])+'\x20OFF',null,![]);continue;}const _0x56ddc2=await genlogin[_0x235351(0xd1)](_0x214900);if(_0x2bdcf0[_0x235351(0x126)]>_0x56ddc2[_0x235351(0xb7)]){log(_0x214900,_0x235351(0xfa)+json(_0x2bdcf0[_0x235351(0xee)])+'\x20Chưa\x20tới\x20giờ\x20chạy',null,'w');continue;}switch(_0x2bdcf0[_0x235351(0x12e)]){case'A':log(_0x214900,':\x20'+json(_0x2bdcf0['name'])+_0x235351(0xac)),await xuLyGame(_0x2bdcf0,'A',_0x214900,_0x72f04b,_0x324aab,_0x4903ed);break;case'K':log(_0x214900,':\x20'+json(_0x2bdcf0['name'])+_0x235351(0x127)),await xuLyGame(_0x2bdcf0,'K',_0x214900,_0x72f04b,_0x324aab,_0x4903ed);break;case'W':log(_0x214900,':\x20'+json(_0x2bdcf0[_0x235351(0xee)])+'\x20Web\x20OK'),await xuLyGame(_0x2bdcf0,'W',_0x214900,_0x72f04b,_0x324aab,_0x4903ed);break;default:log(_0x214900,_0x235351(0xc6)+json(_0x2bdcf0[_0x235351(0x12e)]),null,![]);break;}log(_0x214900,'[xuLyBrowser]:\x20Bot\x20OK');}}return await closeBrowser(_0x214900,_0x4903ed),!![];}catch(_0x243ffc){return log(_0x214900,'[xuLyBrowser]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20browser:\x20'+_0x243ffc,null,![]),await closeBrowser(_0x214900,_0x4903ed),null;}}function a0_0x3bb2(_0x54ac34,_0x3f8e2e){const _0x41ff78=a0_0x41ff();return a0_0x3bb2=function(_0x3bb2cd,_0x3f08e8){_0x3bb2cd=_0x3bb2cd-0x80;let _0x48eed0=_0x41ff78[_0x3bb2cd];return _0x48eed0;},a0_0x3bb2(_0x54ac34,_0x3f8e2e);}async function xuLyGame(_0x30a5cc,_0x5ea64e,_0x3f10ec,_0x56220b,_0x4b4fe0,_0x44190b){const _0x3a95fb=a0_0x2c0da3;try{const _0x2fad01=_0x3f10ec;if(_0x30a5cc[_0x3a95fb(0xd9)]===_0x3a95fb(0xfd)){log(_0x3f10ec,'[xuLyGame]:\x20'+_0x30a5cc[_0x3a95fb(0xee)]+_0x3a95fb(0xbe),null,'i');const _0xd7ef2=await genlogin['nowTime'](_0x3f10ec),_0x1fc66e=await http[_0x3a95fb(0xe7)](_0x3f10ec,_0x2fad01,_0x30a5cc['name'],_0xd7ef2[_0x3a95fb(0xd7)],'','StartApi','running'),_0x2359bf=_0x1fc66e['ID'],_0x188e8a={'bot':_0x30a5cc,'profileNameId':_0x3f10ec,'genlogin':genlogin,'http':http,'dataId':_0x2359bf},_0x2b694e=await loadGameApi(_0x30a5cc['name'],_0x188e8a);if(!_0x2b694e['status'])return log(_0x3f10ec,_0x3a95fb(0x104)+_0x30a5cc[_0x3a95fb(0xee)]+'\x20lỗi',null,![]),await http['updateData'](_0x3f10ec,_0x2fad01,_0x2359bf,_0x3a95fb(0xd0),'Fail'),null;if(_0x2b694e[_0x3a95fb(0x120)]==_0x3a95fb(0x9e))return log(_0x3f10ec,'[xuLyGame]:\x20Thực\x20thi\x20'+_0x30a5cc[_0x3a95fb(0xee)]+_0x3a95fb(0x86),null,'i'),_0x3a95fb(0x9e);if(_0x2b694e[_0x3a95fb(0x120)])return log(_0x3f10ec,_0x3a95fb(0x104)+_0x30a5cc[_0x3a95fb(0xee)]+_0x3a95fb(0x129)),await http[_0x3a95fb(0xe6)](_0x3f10ec,_0x2fad01,_0x30a5cc['id'],_0x2b694e[_0x3a95fb(0x90)],_0x2b694e[_0x3a95fb(0x126)]),await http['updateData'](_0x3f10ec,_0x2fad01,_0x2359bf,'Ok',_0x3a95fb(0xe1),_0x2b694e[_0x3a95fb(0xca)],_0x2b694e[_0x3a95fb(0x90)]),!![];}else{if(_0x5ea64e=='A'||_0x5ea64e=='K'){log(_0x3f10ec,_0x3a95fb(0x92)+_0x30a5cc[_0x3a95fb(0xee)]+_0x3a95fb(0x136),null,'w','-');const _0x1e5d35=await http[_0x3a95fb(0x8b)](_0x3f10ec,_0x5ea64e);if(_0x1e5d35){log(_0x3f10ec,_0x3a95fb(0xd6));let _0x1e0ea1=0x0;while(_0x1e0ea1<0x2){const _0x56a9d2=await checkTeleWebOpen(_0x30a5cc,_0x1e5d35,_0x3f10ec,_0x4b4fe0,_0x44190b);if(_0x56a9d2===_0x3a95fb(0x9e))_0x1e0ea1++,log(_0x3f10ec,_0x3a95fb(0xbb)+_0x1e0ea1+'/2',null,'i'),await delay(0x3e8);else return _0x56a9d2?(log(_0x3f10ec,_0x3a95fb(0x135)),!![]):(log(_0x3f10ec,_0x3a95fb(0x9d),null,![]),null);}return log(_0x3f10ec,_0x3a95fb(0x138),null,![]),null;}}else{if(_0x5ea64e=='W'){log(_0x3f10ec,_0x3a95fb(0x92)+_0x30a5cc[_0x3a95fb(0xee)]+_0x3a95fb(0xd3),null,'w','-');const _0x16b6b9=await checkTeleWebOpen(_0x30a5cc,_0x5ea64e,_0x3f10ec,_0x4b4fe0,_0x44190b);return _0x16b6b9?(log(_0x3f10ec,'[xuLyGame]:\x20checkTeleWebOpen\x20OK'),!![]):(log(_0x3f10ec,_0x3a95fb(0x9d),null,![]),null);}else return log(_0x3f10ec,_0x3a95fb(0xf1)+_0x5ea64e,null,![]),null;}}}catch(_0x4bc648){return log(_0x3f10ec,_0x3a95fb(0x85)+_0x4bc648,null,![]),null;}}async function OpenBrowser(_0x53692b,_0x44a07f,_0x203171){const _0x10f897=a0_0x2c0da3;try{const _0x2f899c=_0x53692b;log(_0x53692b,_0x10f897(0x11b)+JSON[_0x10f897(0xfe)](_0x53692b),null,'i');if(getAllProfiles['autoSetBrowserPosition']==='n'){const _0x194b54=getAllProfiles[_0x10f897(0xdc)]['split']('x');parseInt(_0x194b54[0x0])>=0x0&&parseInt(_0x194b54[0x1])>=0x0?(_0x203171['x']=parseInt(_0x194b54[0x0]),_0x203171['y']=parseInt(_0x194b54[0x1])):(_0x203171['x']=0x0,_0x203171['y']=0x0),log(_0x53692b,_0x10f897(0x80)+_0x203171['x']+'x'+_0x203171['y'],null,'w');}const _0x1e34fa=await genlogin[_0x10f897(0xa6)](_0x53692b,getAllProfiles,_0x44a07f,_0x203171);log(_0x53692b,_0x10f897(0xc4)+JSON[_0x10f897(0xfe)](_0x1e34fa),null,'i'),await delay(0x1388);if(_0x1e34fa){let _0x3a82da=0x0;const _0x30488b=0xa;while(_0x3a82da<_0x30488b){_0x3a82da++;const _0x20a91f=await genlogin[_0x10f897(0xab)](_0x53692b,_0x1e34fa);if(_0x20a91f<=0x1)return log(_0x53692b,'[OpenBrowser]]Chỉ\x20có\x20'+_0x20a91f+_0x10f897(0xb3),null,'i'),_0x1e34fa;const _0x313b5e=await genlogin[_0x10f897(0x9c)](_0x53692b,_0x1e34fa,_0x20a91f-0x1,0xbb8);if(!_0x313b5e){log(_0x53692b,_0x10f897(0xeb),null,![]);continue;}log(_0x53692b,_0x10f897(0x10f)),await delay(0xbb8);continue;}}return log(_0x53692b,_0x10f897(0x112)+JSON[_0x10f897(0xfe)](_0x53692b)),null;}catch(_0x590f2d){throw new Error('Lỗi\x20xử\x20lý\x20profile:\x20'+_0x590f2d[_0x10f897(0x11f)]);}}async function checkTeleWebOpen(_0x4bd0cf,_0x1f3c66,_0x50e039,_0x3f07e7,_0x4ccb9c){const _0x317947=a0_0x2c0da3;let _0x27eecd;try{let _0x5460a0=await genlogin[_0x317947(0x115)](_0x50e039,_0x4ccb9c,0x0,getAllProfiles[_0x317947(0xaa)],_0x3f07e7[_0x317947(0xb5)]);if(_0x1f3c66!='W'){const _0x132dd3=await genlogin[_0x317947(0x83)](_0x50e039,_0x5460a0,_0x1f3c66['InputSearch'],0x7d0);!_0x132dd3&&(await genlogin[_0x317947(0x100)](_0x50e039,_0x5460a0,'https://www.google.com',0xea60),await delay(0x7d0),await genlogin[_0x317947(0x100)](_0x50e039,_0x5460a0,_0x1f3c66[_0x317947(0xc7)],0xea60),await genlogin[_0x317947(0x118)](_0x50e039,_0x5460a0,_0x50e039),await delay(0x1388));}else _0x1f3c66='W',await genlogin[_0x317947(0x100)](_0x50e039,_0x5460a0,'https://www.google.com',0xea60),await delay(0x7d0),await genlogin['openUrl'](_0x50e039,_0x5460a0,_0x4bd0cf['ref'],0xea60),await genlogin[_0x317947(0x118)](_0x50e039,_0x5460a0,_0x50e039),await delay(0x1388);log(_0x50e039,_0x317947(0x98),null,'i');const _0x10b467=await genlogin['nowTime'](_0x50e039),_0x3e38c0=await http[_0x317947(0xe7)](_0x50e039,_0x50e039,_0x4bd0cf[_0x317947(0xee)],_0x10b467['date'],'',_0x317947(0xb0),_0x317947(0x110));_0x27eecd=_0x3e38c0['ID'];const _0x1f6744={'firstPage':_0x5460a0,'bot':_0x4bd0cf,'profileNameId':_0x50e039,'getAks':_0x1f3c66,'genlogin':genlogin,'http':http,'browser':_0x4ccb9c,'dataId':_0x3e38c0['ID'],'taskIndex':taskInfo[_0x317947(0x12c)],'screenDataBuffer2':screenDataBuffer1,'tasksDataBuffer2':tasksDataBuffer1};let _0x282995=null;log(_0x50e039,_0x317947(0xa2)+json(_0x27eecd),null,'i');if(timgame&&_0x1f3c66!='W'){await http[_0x317947(0x88)](_0x50e039,_0x50e039,_0x27eecd,_0x317947(0x105));const _0x36443c=await loadGame(_0x317947(0xa1),_0x1f6744,_0x282995,_0x27eecd,_0x50e039);if(_0x36443c[_0x317947(0x120)]==_0x317947(0x9e))return log(_0x50e039,_0x317947(0xed)+_0x4bd0cf['name']+_0x317947(0x86),null,'i'),await http[_0x317947(0x88)](_0x50e039,_0x50e039,_0x27eecd,_0x317947(0x12f)),_0x317947(0x9e);else{if(!_0x36443c)return log(_0x50e039,_0x317947(0x82)+_0x4bd0cf['name'],null,![]),await http[_0x317947(0x88)](_0x50e039,_0x50e039,_0x27eecd,_0x317947(0xd0),_0x317947(0xd0)),null;}_0x36443c[_0x317947(0xf0)]&&(_0x282995=_0x36443c['HostName']);}await http['updateData'](_0x50e039,_0x50e039,_0x27eecd,_0x317947(0xbf));const _0x3ee569=await loadGame(_0x4bd0cf[_0x317947(0xee)],_0x1f6744,_0x282995,_0x27eecd,_0x50e039);if(!_0x3ee569['status'])return log(_0x50e039,'[checkTeleWebOpen]:\x20Không\x20thực\x20thi\x20script\x20'+_0x4bd0cf[_0x317947(0xee)],null,![]),log(_0x50e039,'[checkTeleWebOpen]:\x20'+json(_0x3ee569),null,![]),await http['updateData'](_0x50e039,_0x50e039,_0x27eecd,_0x317947(0xd0),_0x317947(0xd0)),null;else{if(_0x3ee569[_0x317947(0x120)]==_0x317947(0x9e))return log(_0x50e039,_0x317947(0xed)+_0x4bd0cf[_0x317947(0xee)]+_0x317947(0x86),null,'i'),await http[_0x317947(0x88)](_0x50e039,_0x50e039,_0x27eecd,'loop'),_0x317947(0x9e);}return await http[_0x317947(0xe6)](_0x50e039,_0x50e039,_0x4bd0cf['id'],_0x3ee569[_0x317947(0x90)],_0x3ee569[_0x317947(0x126)]),await http[_0x317947(0x88)](_0x50e039,_0x50e039,_0x27eecd,'Ok','Done',_0x3ee569[_0x317947(0xca)],_0x3ee569[_0x317947(0x90)]),log(_0x50e039,'[checkTeleWebOpen]:\x20Thực\x20thi\x20script\x20'+_0x4bd0cf[_0x317947(0xee)]+_0x317947(0x125)),await delay(0x7d0),!![];}catch(_0x98a73f){return log(_0x50e039,_0x317947(0x133)+_0x98a73f,null,![]),await http[_0x317947(0x88)](_0x50e039,_0x50e039,_0x27eecd,'Fail',_0x317947(0xd0)),null;}}async function loadGame(_0x422e0a,_0x2cbcfe,_0x84a643,_0x4c4036,_0xa2bb57){const _0x134a94=a0_0x2c0da3;try{const _0x314fd0=pathToFileURL(a0_0x389028['join'](__dirname,_0x134a94(0xad),_0x422e0a+_0x134a94(0xf8)))[_0x134a94(0x11e)];log(_0xa2bb57,_0x134a94(0x81)+_0x314fd0);const _0x2476f1=await import(_0x314fd0);if(typeof _0x2476f1[_0x134a94(0x108)]==='function'){const _0x314c7d=await _0x2476f1[_0x134a94(0x108)](_0x2cbcfe,_0x84a643);await delay(0x3e8);if(!_0x314c7d['status'])return log(_0xa2bb57,_0x134a94(0xba)+_0x422e0a+_0x134a94(0x128),null,![]),null;else return _0x314c7d[_0x134a94(0x120)]==='loop'?(log(_0xa2bb57,_0x134a94(0xf4)+_0x422e0a+_0x134a94(0x86),null,'i'),_0x314c7d):(log(_0xa2bb57,'[loadGame]:\x20Chạy\x20'+_0x422e0a+'\x20'+_0x314c7d[_0x134a94(0x120)],null,'i'),_0x314c7d);}else return await delay(0x3e8),log(_0xa2bb57,_0x134a94(0xba)+_0x422e0a+_0x134a94(0x97),null,![]),null;}catch(_0x97b469){return log(_0xa2bb57,_0x134a94(0x122)+_0x422e0a+':\x20'+_0x97b469,null,![]),teleId&&await http[_0x134a94(0x119)](_0xa2bb57,teleId,'['+_0xa2bb57+']['+_0x422e0a+_0x134a94(0x96)+_0x97b469),null;}}async function closeBrowser(_0x101503='',_0x28b916){const _0x29d781=a0_0x2c0da3;try{if(_0x28b916){if(_0x28b916[_0x29d781(0xc0)])return await _0x28b916[_0x29d781(0xea)](),log(_0x101503,'[closeBrowser]:\x20Đóng\x20trình\x20duyệt\x20'+_0x101503+_0x29d781(0x125),null,'w'),!![];}else log(_0x101503,'[closeBrowser]:\x20Không\x20có\x20trình\x20duyệt\x20để\x20đóng',null,'i');return null;}catch(_0x3d9377){return log(_0x101503,_0x29d781(0x89)+_0x101503+':\x20'+_0x3d9377,null,![]),null;}}async function procScreenArr(_0x520236,_0x431480,_0x3d3600){const _0x53c7e5=a0_0x2c0da3;try{await acquireLock(screenData);let _0x3931b0={};log(_0x3d3600,_0x53c7e5(0x94)+_0x520236+',\x20pos:\x20'+json(_0x431480),null,'w','-');if(_0x520236==='open'){log(_0x3d3600,_0x53c7e5(0xc3),null,'w'),_0x3931b0[_0x53c7e5(0xb5)]=Atomics[_0x53c7e5(0x10e)](screenData,0x1)/0xf4240,_0x3931b0[_0x53c7e5(0x8f)]=Atomics[_0x53c7e5(0x10e)](screenData,0x2),_0x3931b0['height']=Atomics['load'](screenData,0x3);for(let _0x5dc9a7=0xa;_0x5dc9a7<screenData[_0x53c7e5(0xff)]-0x1;_0x5dc9a7=_0x5dc9a7+0x3){const _0x4ee0b0=Atomics[_0x53c7e5(0x10e)](screenData,_0x5dc9a7);if(_0x4ee0b0===0x2)return Atomics[_0x53c7e5(0xb1)](screenData,_0x5dc9a7,0x1),_0x3931b0[_0x53c7e5(0x108)]=0x0,_0x3931b0['x']=Atomics[_0x53c7e5(0x10e)](screenData,_0x5dc9a7+0x1),_0x3931b0['y']=Atomics[_0x53c7e5(0x10e)](screenData,_0x5dc9a7+0x2),log(_0x3d3600,'[worker1.procScreenArr]\x20index:'+_0x5dc9a7+'\x20set\x20open\x20ok\x20pos:'+json(_0x3931b0),null,'w'),await releaseLock(screenData),_0x3931b0;if(_0x4ee0b0===0x0)return Atomics['store'](screenData,_0x5dc9a7,0x1),_0x3931b0[_0x53c7e5(0x108)]=0x1,_0x3931b0['x']=0x0,_0x3931b0['y']=0x0,log(_0x3d3600,_0x53c7e5(0x121)+_0x5dc9a7+_0x53c7e5(0x102)+json(_0x3931b0),null,'w'),await releaseLock(screenData),_0x3931b0;}await releaseLock(screenData);throw new Error('Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng');}else{if(_0x520236===_0x53c7e5(0xea)&&_0x431480['x']>=0x0&&_0x431480['y']>=0x0){log(_0x3d3600,_0x53c7e5(0xa3),null,'w');if(_0x431480[_0x53c7e5(0x108)]===0x1)return log(_0x3d3600,_0x53c7e5(0x11a),null,'w'),await releaseLock(screenData),!![];for(let _0x43d645=0xa;_0x43d645<screenData[_0x53c7e5(0xff)]-0x1;_0x43d645+=0x3){const _0x2d27b6=Atomics[_0x53c7e5(0x10e)](screenData,_0x43d645);if(_0x2d27b6===0x1){const _0x109a3a=Atomics[_0x53c7e5(0x10e)](screenData,_0x43d645+0x1),_0x38432c=Atomics[_0x53c7e5(0x10e)](screenData,_0x43d645+0x2);if(_0x109a3a===_0x431480['x']&&_0x38432c===_0x431480['y'])return Atomics[_0x53c7e5(0xb1)](screenData,_0x43d645,0x2),log(_0x3d3600,_0x53c7e5(0x121)+_0x43d645+_0x53c7e5(0x107),null,'w'),Atomics[_0x53c7e5(0x113)](screenData,_0x43d645),await releaseLock(screenData),!![];}}await releaseLock(screenData);throw new Error(_0x53c7e5(0x84)+_0x520236+',\x20pos:\x20'+json(_0x431480));}else return log(_0x3d3600,_0x53c7e5(0x12a)+json(_0x431480)+_0x53c7e5(0x123)+_0x520236,null,'w'),await releaseLock(screenData),!![];}}catch(_0x1fdca6){return log(_0x3d3600,_0x53c7e5(0x9f)+_0x1fdca6+'\x20action:\x20'+_0x520236+',\x20pos:\x20'+json(_0x431480),null,![]),await releaseLock(screenData),![];}}async function acquireLock(_0x45c743,_0x19f5e7=0x7530){const _0x2fa580=a0_0x2c0da3,_0x4770d5=Date[_0x2fa580(0xcc)]();while(Atomics[_0x2fa580(0xe9)](_0x45c743,0x8,0x0,0x1)!==0x0){if(Date[_0x2fa580(0xcc)]()-_0x4770d5>_0x19f5e7)throw new Error(_0x2fa580(0x10d));Atomics[_0x2fa580(0xa9)](_0x45c743,0x8,0x1,_0x19f5e7);}}async function releaseLock(_0x3f859d){const _0x1d6eab=a0_0x2c0da3;Atomics[_0x1d6eab(0xb1)](_0x3f859d,0x8,0x0),Atomics[_0x1d6eab(0x113)](_0x3f859d,0x8);}async function xoaTimeout(_0x129f1a){const _0x4e7bc3=a0_0x2c0da3;try{clearTimeout(_0x129f1a),log('[xoaTimeout]worker1:\x20Xóa\x20timeout:'+_0x129f1a,null,'i',_0x4e7bc3(0x8c));}catch(_0x174e05){log(_0x4e7bc3(0x114)+_0x174e05,null,![]);}}async function xoaInterval(_0x5cd03e){const _0x57941b=a0_0x2c0da3;try{clearInterval(_0x5cd03e),log(_0x57941b(0xb6)+_0x5cd03e,null,'i',_0x57941b(0xf3));}catch(_0x51f67b){log(_0x57941b(0x114)+_0x51f67b,null,![]);}}async function delay(_0x9e6092){return new Promise(async _0x1ccd0a=>{setTimeout(_0x1ccd0a,_0x9e6092);});}async function eTimeout(){const _0x3b6f03=a0_0x2c0da3;return log(_0x3b6f03(0x9b),null,'w'),Atomics[_0x3b6f03(0xb1)](tasksData,taskInfo[_0x3b6f03(0x12c)],0x1),!![];}function a0_0x41ff(){const _0x2a38cd=['[xuLyTungProfile]:\x20Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng','[eTimeout]worker1:\x20reset\x20timeout','wait','browserWidthHeight','countOpenTabs','\x20Tele\x20A\x20OK','scripts','][xuLyProfiles]Không\x20tìm\x20thấy\x20indexGenP','\x20ko\x20có\x20aks','Start','store','\x20ok','\x20tab\x20đang\x20mở','154174CBbUIA','scale','[xoaTimeout]worker1:\x20Xóa\x20Interval:','timestamp','171fDuWNd','\x20|\x20nextrun:\x20','[loadGame]:\x20Script\x20','[xuLyGame]:\x20Loop\x20lại\x20,\x20loop\x20lại\x20lần\x20','5651811SvESuY','STOP\x20SCRIPT','\x20Api\x20mode','Vào','connected','6bKJQSE','][xuLyProfiles]:\x20Lỗi\x20khi\x20xử\x20lý\x20profile\x20','[worker1.procScreenArr]vào\x20open','[OpenBrowser]:\x20GenLogin:\x20','7518CdujOp',':\x20Sai\x20aks\x20','FistUrl','Lỗi\x20gì\x20đó\x20task\x20','getAllProfiles\x20','coin','][xuLyProfiles]:\x20Đã\x20thêm\x20profile\x20','now','script','open','][xuLyProfiles]:\x20Thêm\x20profile\x20','Fail','nowTime','terminate','\x20Web\x20mode','env','[xuLyTungProfile]:\x20Lỗi:\x20','[xuLyGame]:\x20getAks\x20OK','date','524qoKQSb','type','85210mIHZfk','tele_id','customBrowserPosition','[xuLyBrowser]:\x20Bot\x20không\x20tìm\x20thấy','[worker1data.task]:data.task\x20','value','pid','Done','2476465zzBtIe','][xuLyTask]:\x20Lỗi\x20while:\x20','[xuLyBrowser]:browserInfo:\x20','START\x20SCRIPT','nextRunTime','addData','4128586vzilkJ','compareExchange','close','[OpenBrowser]\x20Lỗi\x20khi\x20đóng\x20tab\x20mới','profileThreads','[checkTeleWebOpen]:\x20Thực\x20thi\x20','name','][xuLyTask]:\x20currentDateTime:\x20','HostName','[xuLyGame]:\x20Sai\x20aks\x20','SERVER_HOST','clrInterval','[loadGame]:\x20Chạy\x20','findIndex','No\x20profile\x20found','done','.js','Không\x20tìm\x20thấy\x20giá\x20trị\x20status=0',':\x20Bot\x20',':\x20XONG\x201\x20LƯỢT','][OK]:\x20STOP\x20SCRIPT','api','stringify','length','openUrl','botTimeout','\x20set\x20open\x20default\x20pos:','[xuLyTungProfile]0:\x20Kiểm\x20tra\x20màn\x20hình\x20','[xuLyGame]:\x20Thực\x20thi\x20','Tìm','][xuLyTask]:\x20không\x20lấy\x20được\x20profile','\x20set\x20close\x20ok','default','[xuLyTungProfile]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile','timeout','nextrun','\x20vào\x20hàng\x20đợi\x20max:','Timeout\x20while\x20acquiring\x20lock','load','[OpenBrowser]\x20Đóng\x20tab\x20mới\x20thành\x20công','running','add','[OpenBrowser]:\x20Lỗi\x20khi\x20mở\x20browser:\x20','notify','[xoaTimeout]worker1:\x20','activateTab','worker1','fisrtOpenBrowser','setTitle','tele','[worker1.procScreenArr]vị\x20trí\x20default\x20không\x20cần\x20close','[OpenBrowser]:\x20Processing\x20profile:\x20','allSettled','][xuLyProfiles]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile\x20','href','message','status','[worker1.procScreenArr]\x20index:','[loadGame]:\x20Lỗi\x20khi\x20load\x20và\x20thực\x20thi\x20script\x20','\x20Action:','[xuLyBrowser]:\x20không\x20lấy\x20được\x20bot','\x20thành\x20công','nextRunStamp','\x20Tele\x20K\x20OK','\x20không\x20trả\x20về\x20status','\x20done','[worker1.procScreenArr]\x20posVal:','][xuLyProfiles]:\x20Đã\x20xử\x20lý\x20tất\x20cả\x20profiles\x20thành\x20công\x20','taskIndex','\x20chưa\x20đến\x20thời\x20gian\x20chạy','aks','loop\x20new\x20game','filter','onOff','profiles','[checkTeleWebOpen]:\x20Lỗi\x20trong\x20quá\x20trình\x20mở\x20trang\x20:\x20','420480IAbEgT','[xuLyGame]:\x20checkTeleWebOpen\x20OK','\x20Script\x20mode','6cTVKlV','[xuLyGame]:Max\x20loop\x20rồi\x20bro','dirname','tinhThoiGian','][xuLyTask]:\x20Task\x20','[OpenBrowser]:force\x20set\x20Position:\x20','[loadGame]:scriptPath\x20','[checkTeleWebOpen]:\x20Không\x20tìm\x20thấy\x20game\x20','elementExistsByXPath','Không\x20thể\x20đóng\x20màn\x20hình:\x20vị\x20trí\x20không\x20hợp\x20lệ\x20action:\x20','[xuLyGame]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20Game:\x20','\x20loop','No\x20bot\x20found','updateData','[closeBrowser]:\x20Lỗi\x20khi\x20đóng\x20trình\x20duyệt\x20',']:\x20START\x20SCRIPT','getAks','clrTimeout','[xuLyBrowser]:\x20Không\x20mở\x20được\x20trình\x20duyệt\x20','Version:','width','nextRun','Stop','[xuLyGame]:\x20','12WolkBr','[worker1.procScreenArr]action:\x20','entries','][ERR]:\x20Lỗi\x20','\x20không\x20phải\x20là\x20một\x20hàm\x20hợp\x20lệ','[checkTeleWebOpen]:\x20vào\x20loadGame','][xuLyProfiles]:\x20Một\x20số\x20profiles\x20gặp\x20lỗi:\x20','][xuLyTask]:\x20vào\x20xuLyTask','[eTimeout]worker1:\x20timeout','closeTab','[xuLyGame]:\x20checkTeleWebOpen\x20có\x20gì\x20đó\x20sai\x20sai\x20rồi\x20bro','loop','[worker1.procScreenArr]lỗi\x20','APIKEY','timGame','[checkTeleWebOpen]:\x20dataId:\x20','[worker1.procScreenArr]vào\x20close','push','task','connect'];a0_0x41ff=function(){return _0x2a38cd;};return a0_0x41ff();}async function cTimeout(){const _0x156fb5=a0_0x2c0da3;if(Atomics[_0x156fb5(0x10e)](tasksData,taskInfo[_0x156fb5(0x12c)])===0x1)return!![];return null;}async function rstTimeout(){const _0x290a0c=a0_0x2c0da3;return log(_0x290a0c(0xa8),null,'w'),Atomics[_0x290a0c(0xe9)](tasksData,taskInfo[_0x290a0c(0x12c)],0x1,0x2),!![];}
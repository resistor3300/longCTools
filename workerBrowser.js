const a0_0x323fbc=a0_0x459e;(function(_0x46f4bd,_0x2a5124){const _0xe73589=a0_0x459e,_0x4ec77f=_0x46f4bd();while(!![]){try{const _0x59793d=-parseInt(_0xe73589(0x199))/0x1*(-parseInt(_0xe73589(0x211))/0x2)+parseInt(_0xe73589(0x218))/0x3+parseInt(_0xe73589(0x1c6))/0x4*(-parseInt(_0xe73589(0x1ac))/0x5)+parseInt(_0xe73589(0x1ca))/0x6*(parseInt(_0xe73589(0x1d3))/0x7)+parseInt(_0xe73589(0x1b7))/0x8+parseInt(_0xe73589(0x19d))/0x9*(-parseInt(_0xe73589(0x1d1))/0xa)+-parseInt(_0xe73589(0x22c))/0xb;if(_0x59793d===_0x2a5124)break;else _0x4ec77f['push'](_0x4ec77f['shift']());}catch(_0x3d5355){_0x4ec77f['push'](_0x4ec77f['shift']());}}}(a0_0x1cf0,0x6cfa2));import'dotenv/config';import a0_0x1f6bfe from'fs';import a0_0x37bb41 from'path';function a0_0x459e(_0x3edc9d,_0x569f3b){const _0x1cf004=a0_0x1cf0();return a0_0x459e=function(_0x459e67,_0x267937){_0x459e67=_0x459e67-0x168;let _0xd5b062=_0x1cf004[_0x459e67];return _0xd5b062;},a0_0x459e(_0x3edc9d,_0x569f3b);}import{fileURLToPath,pathToFileURL}from'url';import{expose}from'threads/worker';import{log,json}from'./modules/logger.js';import a0_0x4a64e6 from'./modules/Genlogin.js';import a0_0x3b768e from'./modules/http.js';import a0_0x5ac59a from'p-queue';const __filename=fileURLToPath(import.meta[a0_0x323fbc(0x1ef)]),__dirname=a0_0x37bb41[a0_0x323fbc(0x1df)](__filename);let profileQueue,genlogin,http,getAllProfiles,taskInfo,GenDataProfile,timgame;genlogin=new a0_0x4a64e6('',!![]),http=new a0_0x3b768e(process[a0_0x323fbc(0x1f0)][a0_0x323fbc(0x182)],process[a0_0x323fbc(0x1f0)][a0_0x323fbc(0x1a8)],!![]);let firstRun=!![],delayOpenProfile=0xbb8,profileTimeout=0x5265c0,botTimeout=0x5265c0,profileThreads=0x1,browserInfo={},version,screenData,tasksData,screenDataBuffer1,tasksDataBuffer1,teleId=null;const worker1=async _0x468cb6=>{const _0x245e72=a0_0x323fbc,{version0:_0x55af61,tasksDataBuffer:_0x23f0ce,screenDataBuffer:_0xc60e52,action:_0x3c8622,task:_0x4191a3,dataBrw:_0x385b29,GenDataProfile0:_0x4c901a,timgame0:_0x3bfa03,timeout:_0x38e9e1,tele_id:_0x488f64}=_0x468cb6;log(profile,_0x245e72(0x197)+JSON[_0x245e72(0x174)](_0x385b29),null,'w'),taskInfo=_0x4191a3;_0x488f64&&_0x488f64[_0x245e72(0x202)]&&(teleId=_0x488f64[_0x245e72(0x202)]);screenDataBuffer1=_0xc60e52,tasksDataBuffer1=_0x23f0ce,screenData=new Int32Array(_0xc60e52),tasksData=new Int32Array(_0x23f0ce);try{if(_0x38e9e1)return log(_0x245e72(0x177),_0x245e72(0x1ab),null,'w'),await clearVar(),{'success':![],'error':_0x245e72(0x1ab)};else{if(_0x4191a3!=='screenArr'){version=_0x55af61,getAllProfiles=_0x385b29,log(_0x245e72(0x177),'[worker1data.task]:data.task\x20'+JSON[_0x245e72(0x174)](_0x468cb6[_0x245e72(0x1d5)]),null,'c'),log(_0x245e72(0x177),'getAllProfiles\x20'+JSON[_0x245e72(0x174)](getAllProfiles),null,'c'),GenDataProfile=_0x4c901a,timgame=_0x3bfa03,log(_0x245e72(0x177),'['+_0x4191a3[_0x245e72(0x183)]+_0x245e72(0x224),null,'w');const _0x807a00=await xuLyTask(_0x4191a3,_0x385b29);return log(_0x245e72(0x177),''+JSON['stringify'](_0x807a00),null,'w'),log(_0x245e72(0x177),'DONE',null,'w',_0x245e72(0x1e2)),await clearVar(),_0x807a00?{'success':!![],'result':_0x807a00}:{'success':![],'result':_0x807a00};}else return log(_0x245e72(0x177),_0x245e72(0x1e7)+_0x4191a3,null,'w'),await clearVar(),{'success':![],'error':_0x245e72(0x177)};}}catch(_0x4947e0){return log('worker1','Lỗi\x20'+_0x4947e0,null,![]),await clearVar(),{'success':![],'error':'worker1'};}};expose({'worker1':worker1});async function clearVar(){return genlogin=null,http=null,!![];}async function xuLyTask(_0x4575c2,_0xa551ca){const _0x31a92b=a0_0x323fbc;try{log(_0x31a92b(0x177),'['+_0x4575c2[_0x31a92b(0x183)]+'][xuLyTask]:\x20vào\x20xuLyTask',null,'i','-');const _0x4df93e=await genlogin[_0x31a92b(0x1c0)](_0x31a92b(0x177)),_0x5f4e34=_0x4df93e[_0x31a92b(0x180)];if(_0x5f4e34<_0x4575c2[_0x31a92b(0x18e)])return log(_0x31a92b(0x177),'['+_0x4575c2[_0x31a92b(0x183)]+'][xuLyTask]:\x20Task\x20'+JSON['stringify'](_0x4575c2[_0x31a92b(0x183)])+'\x20chưa\x20đến\x20thời\x20gian\x20chạy',null,'i'),log('worker1','['+_0x4575c2['name']+'][xuLyTask]:\x20currentDateTime:\x20'+JSON[_0x31a92b(0x174)](_0x4df93e)+_0x31a92b(0x1c1)+JSON[_0x31a92b(0x174)](_0x4575c2[_0x31a92b(0x1f3)]),null,'w'),log('worker1','['+_0x4575c2[_0x31a92b(0x183)]+'][xuLyTask]:\x20currentDateTime:\x20'+JSON[_0x31a92b(0x174)](_0x5f4e34)+_0x31a92b(0x1c1)+JSON[_0x31a92b(0x174)](taskNextRunDateTime),null,'w'),log(_0x31a92b(0x177),'['+_0x4575c2[_0x31a92b(0x183)]+_0x31a92b(0x194),null,'i'),await delay(0x1388),null;let _0x55a372=await http[_0x31a92b(0x228)](_0x31a92b(0x177),_0x4575c2[_0x31a92b(0x183)]);if(_0x55a372[_0x31a92b(0x234)][_0x31a92b(0x1db)][_0x31a92b(0x192)]<=0x0){log(_0x31a92b(0x177),'['+_0x4575c2[_0x31a92b(0x183)]+_0x31a92b(0x19c),null,![]);throw new Error('No\x20profile\x20found');}firstRun&&(profileThreads=parseInt(_0x4575c2[_0x31a92b(0x184)]),profileQueue=new a0_0x5ac59a({'concurrency':profileThreads}),log(_0x31a92b(0x177),'['+_0x4575c2['name']+_0x31a92b(0x1e4)+profileThreads,null,'w'),firstRun=![],delayOpenProfile=parseInt(_0x4575c2[_0x31a92b(0x16c)])*0x3e8,profileTimeout=parseInt(_0x4575c2[_0x31a92b(0x20b)])*0x3e8,botTimeout=parseInt(_0x4575c2[_0x31a92b(0x1c2)])*0x3e8);const _0x5ed061=await xuLyProfiles(_0x55a372['value'][_0x31a92b(0x1db)],_0x4575c2[_0x31a92b(0x183)],_0xa551ca);if(!_0x5ed061){log(_0x31a92b(0x177),'['+_0x4575c2[_0x31a92b(0x183)]+_0x31a92b(0x21d)+json(_0x5ed061),null,![]);throw new Error('No\x20profile\x20found');}return log('worker1','['+_0x4575c2[_0x31a92b(0x183)]+_0x31a92b(0x1a6)+_0x4575c2[_0x31a92b(0x183)]+_0x31a92b(0x17c)),await delay(0x7d0),log(_0x31a92b(0x177),'['+_0x4575c2[_0x31a92b(0x183)]+_0x31a92b(0x1f7)+JSON['stringify'](_0x4575c2[_0x31a92b(0x183)])),!![];}catch(_0x255da3){return log(_0x31a92b(0x177),'['+_0x4575c2[_0x31a92b(0x183)]+_0x31a92b(0x1a0)+_0x255da3,null,![]),null;}}async function xuLyProfiles(_0x5f4728,_0x4e0bdb,_0x2b3396){const _0x2572ec=a0_0x323fbc;try{const _0x20b9d5=[];for(const [_0x3518d4,_0x8d8295]of _0x5f4728[_0x2572ec(0x1f9)]()){const _0x32372d=await GenDataProfile[_0x2572ec(0x19e)](_0x4dfbf2=>_0x4dfbf2[_0x2572ec(0x1ff)]===_0x8d8295);if(_0x3518d4!==-0x1)log(_0x2572ec(0x177),'['+_0x4e0bdb+'][xuLyProfiles]index:\x20'+_0x32372d);else{log(_0x2572ec(0x177),'['+_0x4e0bdb+'][xuLyProfiles]Không\x20tìm\x20thấy\x20indexGenP');throw new Error(_0x2572ec(0x18f));}log('worker1','['+_0x4e0bdb+_0x2572ec(0x231)+_0x8d8295+_0x2572ec(0x1d0)+profileThreads,null,'i'),_0x20b9d5[_0x2572ec(0x1d8)](profileQueue[_0x2572ec(0x209)](async()=>{const _0x48eb30=_0x2572ec;try{delayOpenProfile>0x0?(log(_0x48eb30(0x177),'['+_0x4e0bdb+'][xuLyProfiles]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile\x20'+_0x8d8295+_0x48eb30(0x16b)+delayOpenProfile+'ms',null,'w','-'),await delay(delayOpenProfile)):log(_0x48eb30(0x177),'['+_0x4e0bdb+_0x48eb30(0x186)+_0x8d8295,null,'w','-'),await xuLyTungProfile(_0x8d8295,GenDataProfile[_0x32372d],_0x2b3396);}catch(_0x27a912){log(_0x48eb30(0x177),'['+_0x4e0bdb+_0x48eb30(0x21c)+_0x8d8295+':\x20'+_0x27a912[_0x48eb30(0x1eb)],null,![]);throw _0x27a912;}})),log(_0x2572ec(0x177),'['+_0x4e0bdb+_0x2572ec(0x1b9)+_0x8d8295+_0x2572ec(0x176));}const _0x3ad5df=await Promise['allSettled'](_0x20b9d5),_0x162a0f=_0x3ad5df[_0x2572ec(0x214)](_0x2d6a54=>_0x2d6a54['status']===_0x2572ec(0x1cd));return _0x162a0f[_0x2572ec(0x192)]>0x0?log(_0x2572ec(0x177),'['+_0x4e0bdb+_0x2572ec(0x1b5)+JSON['stringify'](_0x162a0f),null,![]):log(_0x2572ec(0x177),'['+_0x4e0bdb+_0x2572ec(0x1b2)+json(_0x3ad5df)),!![];}catch(_0x495400){return log('worker1','['+_0x4e0bdb+_0x2572ec(0x21b)+_0x495400,null,![]),null;}}async function xuLyTungProfile(_0x502ee2,_0xda6cfd,_0x3af879){const _0x3454a3=a0_0x323fbc;let _0xe63bba,_0x53437b;const _0x3f8fd7=_0x502ee2;let _0x1fd26d;try{await delay(delayOpenProfile),log(_0x502ee2,_0x3454a3(0x22e),null,'i'),_0xe63bba=await genlogin['nowTime'](_0x502ee2),await http['addData'](_0x3454a3(0x177),_0x502ee2,_0x3454a3(0x178),_0xe63bba[_0x3454a3(0x180)],'',_0x3454a3(0x20c)+version,_0x3454a3(0x20e));teleId&&await http[_0x3454a3(0x170)](_0x502ee2,teleId,'['+_0x502ee2+_0x3454a3(0x225));log(_0x502ee2,_0x3454a3(0x1a1)+_0x502ee2,null,'w'),_0x1fd26d=await procScreenArr(_0x3454a3(0x16d),null,_0x502ee2);if(_0x1fd26d['x']===undefined||_0x1fd26d['y']===undefined){log(_0x502ee2,_0x3454a3(0x1dd),null,![]);throw new Error(_0x3454a3(0x1ed));}const _0x4fb80b=await xuLyBrowser(_0x502ee2,_0xda6cfd,_0x1fd26d,_0x3af879);await procScreenArr(_0x3454a3(0x232),_0x1fd26d,_0x502ee2);const _0x396ba9=await genlogin[_0x3454a3(0x213)](_0xe63bba[_0x3454a3(0x1c9)]);return await http['addData']('worker1',_0x502ee2,_0x3454a3(0x1b0),'','',_0x396ba9,_0x3454a3(0x223)),teleId&&await http[_0x3454a3(0x170)](_0x502ee2,teleId,'['+_0x502ee2+_0x3454a3(0x1e9)),_0x4fb80b;}catch(_0x5acb02){log(_0x502ee2,_0x3454a3(0x200)+_0x5acb02,null,![]);if(_0x53437b)await Thread[_0x3454a3(0x1cf)](_0x53437b);await procScreenArr('close',_0x1fd26d,_0x502ee2);const _0x1be41f=await genlogin[_0x3454a3(0x213)](_0xe63bba?.[_0x3454a3(0x1c9)]||Date['now']());await http[_0x3454a3(0x1e8)](_0x3454a3(0x177),_0x502ee2,_0x3454a3(0x1b0),'','',_0x1be41f,_0x3454a3(0x223));teleId&&await http['tele'](_0x502ee2,teleId,'['+_0x502ee2+_0x3454a3(0x1aa));throw _0x5acb02;}}async function xuLyBrowser(_0x5b1540,_0x3e0ab5,_0xcdf4b9,_0x689ea3){const _0x285525=a0_0x323fbc;let _0x50f402;try{const _0x37d87b=_0x5b1540;if(!browserInfo[_0x5b1540])browserInfo[_0x5b1540]={};browserInfo[_0x5b1540]['fisrtOpenBrowser']=0x0,log(_0x5b1540,'[xuLyBrowser]:browserInfo:\x20'+json(browserInfo),null,'w','w');if(browserInfo[_0x5b1540][_0x285525(0x188)]==0x0){_0x50f402=await OpenBrowser(_0x5b1540,_0x3e0ab5,_0xcdf4b9,_0x689ea3);if(!_0x50f402){log(_0x5b1540,_0x285525(0x1bf)+_0x5b1540,null,![]);throw new Error('[xuLyBrowser]:\x20Không\x20mở\x20được\x20trình\x20duyệt\x20'+_0x5b1540);}browserInfo[_0x5b1540][_0x285525(0x188)]=0x1;}if(!_0x50f402[_0x285525(0x233)])throw new Error('[xuLyBrowser]:\x20browser\x20disconnected\x20'+_0x5b1540);let _0x1fbd08=0x0;const _0x41347a=await http[_0x285525(0x1cc)]('worker1',_0x37d87b);if(!_0x41347a){log(_0x5b1540,_0x285525(0x18d),null,![]);throw new Error(_0x285525(0x195));}if(_0x41347a[_0x285525(0x192)]<=0x0){log(_0x5b1540,_0x285525(0x16e),null,![]);throw new Error('No\x20bot\x20found');}for(const _0x5a9243 of _0x41347a){if(_0x5a9243){if(_0x5a9243[_0x285525(0x16a)]!=_0x285525(0x1b6))continue;if(_0x5a9243[_0x285525(0x234)]===_0x285525(0x1c3)){log(_0x5b1540,_0x285525(0x22d),null,'i');break;}if(!_0x5a9243['aks']){log(_0x5b1540,_0x285525(0x1fd)+json(_0x5a9243)+_0x285525(0x193),null,![]);continue;}if(_0x5a9243['onOff']==='0'){log(_0x5b1540,_0x285525(0x1fd)+json(_0x5a9243[_0x285525(0x183)])+_0x285525(0x1af),null,![]);continue;}const _0x18d1d9=await genlogin[_0x285525(0x1c0)](_0x5b1540);if(_0x5a9243[_0x285525(0x1c5)]>_0x18d1d9[_0x285525(0x1c9)]){log(_0x5b1540,':\x20Bot\x20'+json(_0x5a9243['name'])+'\x20Chưa\x20tới\x20giờ\x20chạy',null,'w');continue;}switch(_0x5a9243[_0x285525(0x1fc)]){case'A':log(_0x5b1540,':\x20'+json(_0x5a9243['name'])+_0x285525(0x1f1)),await xuLyGame(_0x5a9243,'A',_0x5b1540,_0x3e0ab5,_0xcdf4b9,_0x50f402,_0x689ea3);break;case'K':log(_0x5b1540,':\x20'+json(_0x5a9243['name'])+'\x20Tele\x20K\x20OK'),await xuLyGame(_0x5a9243,'K',_0x5b1540,_0x3e0ab5,_0xcdf4b9,_0x50f402,_0x689ea3);break;case'W':log(_0x5b1540,':\x20'+json(_0x5a9243[_0x285525(0x183)])+_0x285525(0x203)),await xuLyGame(_0x5a9243,'W',_0x5b1540,_0x3e0ab5,_0xcdf4b9,_0x50f402,_0x689ea3);break;default:log(_0x5b1540,_0x285525(0x19b)+json(_0x5a9243[_0x285525(0x1fc)]),null,![]);break;}log(_0x5b1540,_0x285525(0x216));}}return await closeBrowser(_0x5b1540,_0x50f402),!![];}catch(_0x3eba4e){return log(_0x5b1540,'[xuLyBrowser]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20browser:\x20'+_0x3eba4e,null,![]),log(_0x5b1540,_0x285525(0x1c8)+json(_0x689ea3),null,'w','w'),await closeBrowser(_0x5b1540,_0x50f402),null;}}async function xuLyGame(_0xb36f84,_0x3fadf,_0x34cba0,_0x54ddb1,_0x44f65c,_0x5c0e77,_0xe3aa){const _0x5c3981=a0_0x323fbc;try{const _0x442186=_0x34cba0;if(_0xb36f84[_0x5c3981(0x16a)]===_0x5c3981(0x17a)){log(_0x34cba0,_0x5c3981(0x1ec)+_0xb36f84['name']+_0x5c3981(0x217),null,'i');const _0x16a981=await genlogin[_0x5c3981(0x1c0)](_0x34cba0),_0x8ee835=await http[_0x5c3981(0x1e8)](_0x34cba0,_0x442186,_0xb36f84[_0x5c3981(0x183)],_0x16a981[_0x5c3981(0x180)],'','StartApi',_0x5c3981(0x17f)),_0x2dc9ae=_0x8ee835['ID'],_0x3e13b6={'bot':_0xb36f84,'profileNameId':_0x34cba0,'genlogin':genlogin,'http':http,'dataId':_0x2dc9ae},_0x159a08=await loadGameApi(_0xb36f84[_0x5c3981(0x183)],_0x3e13b6);if(!_0x159a08[_0x5c3981(0x17d)])return log(_0x34cba0,_0x5c3981(0x16f)+_0xb36f84[_0x5c3981(0x183)]+_0x5c3981(0x1ad),null,![]),await http[_0x5c3981(0x201)](_0x34cba0,_0x442186,_0x2dc9ae,_0x5c3981(0x189),'Fail'),null;if(_0x159a08[_0x5c3981(0x17d)]==_0x5c3981(0x206))return log(_0x34cba0,_0x5c3981(0x16f)+_0xb36f84['name']+_0x5c3981(0x1ae),null,'i'),'loop';if(_0x159a08[_0x5c3981(0x17d)])return log(_0x34cba0,_0x5c3981(0x16f)+_0xb36f84[_0x5c3981(0x183)]+_0x5c3981(0x1de)),await http[_0x5c3981(0x190)](_0x34cba0,_0x442186,_0xb36f84['id'],_0x159a08[_0x5c3981(0x1ea)],_0x159a08['nextRunStamp']),await http[_0x5c3981(0x201)](_0x34cba0,_0x442186,_0x2dc9ae,'Ok','Done',_0x159a08[_0x5c3981(0x17b)],_0x159a08[_0x5c3981(0x1ea)]),!![];}else{if(_0x3fadf=='A'||_0x3fadf=='K'){log(_0x34cba0,_0x5c3981(0x1ec)+_0xb36f84[_0x5c3981(0x183)]+'\x20Script\x20mode',null,'w','-');const _0x374021=await http[_0x5c3981(0x230)](_0x34cba0,_0x3fadf);if(_0x374021){log(_0x34cba0,_0x5c3981(0x171));let _0x284540=0x0;while(_0x284540<0x2){const _0x1e0e93=await checkTeleWebOpen(_0xb36f84,_0x374021,_0x34cba0,_0x44f65c,_0x5c0e77,_0xe3aa);if(_0x1e0e93==='loop')_0x284540++,log(_0x34cba0,_0x5c3981(0x1d4)+_0x284540+'/2',null,'i'),await delay(0x3e8);else return _0x1e0e93?(log(_0x34cba0,_0x5c3981(0x1d9)),!![]):(log(_0x34cba0,'[xuLyGame]:\x20checkTeleWebOpen\x20có\x20gì\x20đó\x20sai\x20sai\x20rồi\x20bro',null,![]),null);}return log(_0x34cba0,_0x5c3981(0x1ce),null,![]),null;}}else{if(_0x3fadf=='W'){log(_0x34cba0,_0x5c3981(0x1ec)+_0xb36f84[_0x5c3981(0x183)]+_0x5c3981(0x1a2),null,'w','-');const _0x712917=await checkTeleWebOpen(_0xb36f84,_0x3fadf,_0x34cba0,_0x44f65c,_0x5c0e77,_0xe3aa);return _0x712917?(log(_0x34cba0,_0x5c3981(0x1d9)),!![]):(log(_0x34cba0,'[xuLyGame]:\x20checkTeleWebOpen\x20có\x20gì\x20đó\x20sai\x20sai\x20rồi\x20bro',null,![]),null);}else return log(_0x34cba0,'[xuLyGame]:\x20Sai\x20aks\x20'+_0x3fadf,null,![]),null;}}}catch(_0x44fdec){return log(_0x34cba0,_0x5c3981(0x227)+_0x44fdec,null,![]),null;}}async function OpenBrowser(_0x4614f5,_0x3c825d,_0x49ba4e,_0x3390fa){const _0x22040f=a0_0x323fbc;try{const _0x589e87=_0x4614f5;log(_0x4614f5,_0x22040f(0x21e)+JSON['stringify'](_0x4614f5),null,'i');if(_0x3390fa['autoSetBrowserPosition']&&_0x3390fa[_0x22040f(0x1e5)]==='n'){const _0x22739f=_0x3390fa[_0x22040f(0x18c)][_0x22040f(0x1a7)]('x');parseInt(_0x22739f[0x0])>=0x0&&parseInt(_0x22739f[0x1])>=0x0?(_0x49ba4e['x']=parseInt(_0x22739f[0x0]),_0x49ba4e['y']=parseInt(_0x22739f[0x1])):(_0x49ba4e['x']=0x0,_0x49ba4e['y']=0x0),log(_0x4614f5,_0x22040f(0x1f6)+_0x49ba4e['x']+'x'+_0x49ba4e['y'],null,'w');}const _0x5bf69b=await genlogin[_0x22040f(0x1b3)](_0x4614f5,_0x3390fa,_0x3c825d,_0x49ba4e);log(_0x4614f5,'[OpenBrowser]:\x20GenLogin:\x20'+JSON['stringify'](_0x5bf69b),null,'i'),await delay(0x1388);if(_0x5bf69b){let _0x28b8bc=0x0;const _0x262c59=0xa;while(_0x28b8bc<_0x262c59){_0x28b8bc++;const _0x44b0d0=await genlogin[_0x22040f(0x1c7)](_0x4614f5,_0x5bf69b);if(_0x44b0d0<=0x1)return log(_0x4614f5,_0x22040f(0x21a)+_0x44b0d0+_0x22040f(0x1cb),null,'i'),_0x5bf69b;const _0x14de80=await genlogin['closeTab'](_0x4614f5,_0x5bf69b,_0x44b0d0-0x1,0xbb8);if(!_0x14de80){log(_0x4614f5,_0x22040f(0x1dc),null,![]);continue;}log(_0x4614f5,_0x22040f(0x172)),await delay(0xbb8);continue;}}return log(_0x4614f5,_0x22040f(0x220)+JSON[_0x22040f(0x174)](_0x4614f5)),null;}catch(_0x120f45){throw new Error(_0x22040f(0x1d7)+_0x120f45['message']);}}async function checkTeleWebOpen(_0x3151e4,_0x2b3548,_0x44bd33,_0x43a5b1,_0x38db9d,_0x12fbbd){const _0x48211f=a0_0x323fbc;let _0x3e4073,_0x3ac07c;try{_0x3ac07c=await genlogin['activateTab'](_0x44bd33,_0x38db9d,0x0,_0x12fbbd[_0x48211f(0x1b8)],_0x43a5b1['scale']);if(_0x2b3548!='W'){const _0x32a364=await genlogin[_0x48211f(0x205)](_0x44bd33,_0x3ac07c,_0x2b3548['InputSearch'],0x7d0);!_0x32a364&&(await genlogin[_0x48211f(0x20a)](_0x44bd33,_0x3ac07c,_0x48211f(0x175),0xea60),await delay(0x7d0),await genlogin[_0x48211f(0x20a)](_0x44bd33,_0x3ac07c,_0x2b3548[_0x48211f(0x221)],0xea60),await genlogin[_0x48211f(0x1ba)](_0x44bd33,_0x3ac07c,_0x44bd33),await delay(0x1388));}else _0x2b3548='W',await genlogin[_0x48211f(0x20a)](_0x44bd33,_0x3ac07c,'https://www.google.com',0xea60),await delay(0x7d0),await genlogin['openUrl'](_0x44bd33,_0x3ac07c,_0x3151e4[_0x48211f(0x1bc)],0xea60),await genlogin['setTitle'](_0x44bd33,_0x3ac07c,_0x44bd33),await delay(0x1388);log(_0x44bd33,_0x48211f(0x1fe),null,'i');const _0x181895=await genlogin[_0x48211f(0x1c0)](_0x44bd33),_0x4ea33c=await http[_0x48211f(0x1e8)](_0x44bd33,_0x44bd33,_0x3151e4[_0x48211f(0x183)],_0x181895[_0x48211f(0x180)],'',_0x48211f(0x20e),'running');_0x3e4073=_0x4ea33c['ID'];const _0x30bf0b={'firstPage':_0x3ac07c,'bot':_0x3151e4,'profileNameId':_0x44bd33,'getAks':_0x2b3548,'genlogin':genlogin,'http':http,'browser':_0x38db9d,'dataId':_0x4ea33c['ID'],'taskIndex':taskInfo['taskIndex'],'screenDataBuffer2':screenDataBuffer1,'tasksDataBuffer2':tasksDataBuffer1};let _0x583bb9=null;log(_0x44bd33,_0x48211f(0x196)+json(_0x3e4073),null,'i');if(timgame&&_0x2b3548!='W'){await http[_0x48211f(0x201)](_0x44bd33,_0x44bd33,_0x3e4073,_0x48211f(0x22a));const _0x5d89bd=await loadGame(_0x48211f(0x1e1),_0x30bf0b,_0x583bb9,_0x3e4073,_0x44bd33);if(_0x5d89bd['status']==_0x48211f(0x206))return log(_0x44bd33,_0x48211f(0x1f2)+_0x3151e4[_0x48211f(0x183)]+'\x20loop',null,'i'),await http['updateData'](_0x44bd33,_0x44bd33,_0x3e4073,_0x48211f(0x169)),'loop';else{if(!_0x5d89bd)return log(_0x44bd33,'[checkTeleWebOpen]:\x20Không\x20tìm\x20thấy\x20game\x20'+_0x3151e4[_0x48211f(0x183)],null,![]),await http[_0x48211f(0x201)](_0x44bd33,_0x44bd33,_0x3e4073,_0x48211f(0x189),_0x48211f(0x189)),null;}_0x5d89bd[_0x48211f(0x215)]&&(_0x583bb9=_0x5d89bd[_0x48211f(0x215)]);}await http[_0x48211f(0x201)](_0x44bd33,_0x44bd33,_0x3e4073,_0x48211f(0x1a9));const _0x12b20f=await loadGame(_0x3151e4[_0x48211f(0x183)],_0x30bf0b,_0x583bb9,_0x3e4073,_0x44bd33);if(!_0x12b20f[_0x48211f(0x17d)])return log(_0x44bd33,_0x48211f(0x1f5)+_0x3151e4[_0x48211f(0x183)],null,![]),log(_0x44bd33,_0x48211f(0x1da)+json(_0x12b20f),null,![]),await http[_0x48211f(0x201)](_0x44bd33,_0x44bd33,_0x3e4073,'Fail','Fail'),null;else{if(_0x12b20f[_0x48211f(0x17d)]=='loop')return log(_0x44bd33,_0x48211f(0x1f2)+_0x3151e4[_0x48211f(0x183)]+_0x48211f(0x1ae),null,'i'),await http[_0x48211f(0x201)](_0x44bd33,_0x44bd33,_0x3e4073,_0x48211f(0x206)),'loop';}return await http[_0x48211f(0x190)](_0x44bd33,_0x44bd33,_0x3151e4['id'],_0x12b20f['nextRun'],_0x12b20f['nextRunStamp']),await http[_0x48211f(0x201)](_0x44bd33,_0x44bd33,_0x3e4073,'Ok',_0x48211f(0x17e),_0x12b20f['coin'],_0x12b20f[_0x48211f(0x1ea)]),log(_0x44bd33,_0x48211f(0x208)+_0x3151e4[_0x48211f(0x183)]+'\x20thành\x20công'),await delay(0x7d0),_0x3e4073=null,_0x3ac07c=null,!![];}catch(_0x22dea8){return log(_0x44bd33,_0x48211f(0x1b4)+_0x22dea8,null,![]),await http['updateData'](_0x44bd33,_0x44bd33,_0x3e4073,_0x48211f(0x189),'Fail'),_0x3e4073=null,_0x3ac07c=null,null;}}async function loadGame(_0xf098a0,_0x46e25e,_0x7673dc,_0xdac338,_0x5833c1){const _0x52a973=a0_0x323fbc;try{const _0x450075=pathToFileURL(a0_0x37bb41[_0x52a973(0x1a4)](__dirname,_0x52a973(0x1d2),_0xf098a0+_0x52a973(0x1e0)))[_0x52a973(0x191)];log(_0x5833c1,_0x52a973(0x1ee)+_0x450075);const _0x1eac1b=await import(_0x450075);if(typeof _0x1eac1b[_0x52a973(0x1fa)]===_0x52a973(0x21f)){const _0x1423f2=await _0x1eac1b[_0x52a973(0x1fa)](_0x46e25e,_0x7673dc);await delay(0x3e8);if(!_0x1423f2[_0x52a973(0x17d)])return log(_0x5833c1,_0x52a973(0x1be)+_0xf098a0+_0x52a973(0x235),null,![]),null;else return _0x1423f2[_0x52a973(0x17d)]==='loop'?(log(_0x5833c1,_0x52a973(0x181)+_0xf098a0+_0x52a973(0x1ae),null,'i'),_0x1423f2):(log(_0x5833c1,_0x52a973(0x181)+_0xf098a0+'\x20'+_0x1423f2['status'],null,'i'),_0x1423f2);}else return await delay(0x3e8),log(_0x5833c1,_0x52a973(0x1be)+_0xf098a0+_0x52a973(0x1d6),null,![]),null;}catch(_0x1f3423){return log(_0x5833c1,_0x52a973(0x198)+_0xf098a0+':\x20'+_0x1f3423,null,![]),teleId&&await http[_0x52a973(0x170)](_0x5833c1,teleId,'['+_0x5833c1+']['+_0xf098a0+'][ERR]:\x20Lỗi\x20'+_0x1f3423),null;}}async function closeBrowser(_0x366dc6='',_0x3edfac){const _0x1d8e92=a0_0x323fbc;try{if(_0x3edfac){if(_0x3edfac[_0x1d8e92(0x233)]){for(const _0x8b291d of await _0x3edfac['pages']()){await _0x8b291d[_0x1d8e92(0x232)]();}return await _0x3edfac['close'](),_0x3edfac=null,global['gc']&&(global['gc'](),log(_0x1d8e92(0x212),'Garbage\x20Collector\x20đã\x20chạy!',null,'i','+')),log(_0x366dc6,_0x1d8e92(0x1f8)+_0x366dc6+_0x1d8e92(0x1b1),null,'w'),!![];}}else log(_0x366dc6,'[closeBrowser]:\x20Không\x20có\x20trình\x20duyệt\x20để\x20đóng',null,'i');return null;}catch(_0x4f415c){return log(_0x366dc6,_0x1d8e92(0x222)+_0x366dc6+':\x20'+_0x4f415c,null,![]),null;}}function a0_0x1cf0(){const _0x49c21f=['entries','default','\x20set\x20close\x20ok','aks',':\x20Bot\x20','[checkTeleWebOpen]:\x20vào\x20loadGame','pid','[xuLyTungProfile]:\x20Lỗi:\x20','updateData','tele_id','\x20Web\x20OK','\x20set\x20open\x20default\x20pos:','elementExistsByXPath','loop','wait','[checkTeleWebOpen]:\x20Thực\x20thi\x20script\x20','add','openUrl','profileTimeout','Version:','[worker1.procScreenArr]vị\x20trí\x20default\x20không\x20cần\x20close','Start','[worker1.procScreenArr]\x20posVal:','Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng','46wdOUlZ','Memory','tinhThoiGian','filter','HostName','[xuLyBrowser]:\x20Bot\x20OK','\x20Api\x20mode','411EOXlbk','[eTimeout]worker1:\x20timeout','[OpenBrowser]]Chỉ\x20có\x20','][xuLyProfiles]:\x20Lỗi\x20:\x20','][xuLyProfiles]:\x20Lỗi\x20khi\x20xử\x20lý\x20profile\x20','][xuLyTask]:\x20Không\x20lấy\x20được\x20dữ\x20liệu\x20profiles\x20','[OpenBrowser]:\x20Processing\x20profile:\x20','function','[OpenBrowser]:\x20Lỗi\x20khi\x20mở\x20browser:\x20','FistUrl','[closeBrowser]:\x20Lỗi\x20khi\x20đóng\x20trình\x20duyệt\x20','Stop',']:\x20Script\x20Mode',']:\x20START\x20SCRIPT','width','[xuLyGame]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20Game:\x20','getTask','[worker1.procScreenArr]vào\x20open','Tìm','[worker1.procScreenArr]lỗi\x20','941996JMCkJY',':\x20XONG\x201\x20LƯỢT','[xuLyTungProfile]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile','\x20action:\x20','getAks','][xuLyProfiles]:\x20Thêm\x20profile\x20','close','connected','value','\x20không\x20trả\x20về\x20status','\x20Action:','loop\x20new\x20game','type','\x20sau\x20','delayOpenProfile','open','[xuLyBrowser]:\x20không\x20lấy\x20được\x20bot','[xuLyGame]:\x20Thực\x20thi\x20','tele','[xuLyGame]:\x20getAks\x20OK','[OpenBrowser]\x20Đóng\x20tab\x20mới\x20thành\x20công','taskIndex','stringify','https://www.google.com','\x20vào\x20hàng\x20đợi.','worker1','START\x20SCRIPT','[worker1.procScreenArr]\x20index:','api','coin','\x20ok','status','Done','running','date','[loadGame]:\x20Chạy\x20','SERVER_HOST','name','profileThreads','now','][xuLyProfiles]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile\x20','[worker1.procScreenArr]vào\x20close','fisrtOpenBrowser','Fail','clrTimeout','[eTimeout]worker1:\x20reset\x20timeout','customBrowserPosition','[xuLyBrowser]:\x20Bot\x20không\x20tìm\x20thấy','nextrunstamp','Không\x20tìm\x20thấy\x20indexGenP','nextRunTime','href','length','\x20ko\x20có\x20aks','][xuLyTask]:\x20Chờ\x205\x20giây\x20trước\x20khi\x20xử\x20lý\x20task\x20tiếp\x20theo...','No\x20bot\x20found','[checkTeleWebOpen]:\x20dataId:\x20','[dmdmdmdmdm]:\x20dataBrw:\x20','[loadGame]:\x20Lỗi\x20khi\x20load\x20và\x20thực\x20thi\x20script\x20','30223BwgbXb','store',':\x20Sai\x20aks\x20','][xuLyTask]:\x20không\x20lấy\x20được\x20profile','9dupigu','findIndex','[xoaTimeout]worker1:\x20Xóa\x20Interval:','][xuLyTask]:\x20Lỗi\x20while:\x20','[xuLyTungProfile]0:\x20Kiểm\x20tra\x20màn\x20hình\x20','\x20Web\x20mode','[xoaTimeout]worker1:\x20','join',',\x20pos:\x20','][xuLyTask]:\x20Tasks:\x20','split','APIKEY','Vào','][ERR]:\x20STOP\x20SCRIPT','timeout','3065295mrBznn','\x20lỗi','\x20loop','\x20OFF','STOP\x20SCRIPT','\x20thành\x20công','][xuLyProfiles]:\x20Đã\x20xử\x20lý\x20tất\x20cả\x20profiles\x20thành\x20công\x20','connect','[checkTeleWebOpen]:\x20Lỗi\x20trong\x20quá\x20trình\x20mở\x20trang\x20:\x20','][xuLyProfiles]:\x20Một\x20số\x20profiles\x20gặp\x20lỗi:\x20','script','2061000DYCwgv','browserWidthHeight','][xuLyProfiles]:\x20Đã\x20thêm\x20profile\x20','setTitle','scale','ref','\x20set\x20open\x20ok\x20pos:','[loadGame]:\x20Script\x20','[xuLyBrowser]:\x20Không\x20mở\x20được\x20trình\x20duyệt\x20','nowTime','\x20|\x20nextrun:\x20','botTimeout','end','load','nextRunStamp','4QZyFJs','countOpenTabs','[xuLyBrowser]:dataBrw:\x20','timestamp','414TFywqr','\x20tab\x20đang\x20mở','getBotAll','rejected','[xuLyGame]:Max\x20loop\x20rồi\x20bro','terminate','\x20vào\x20hàng\x20đợi\x20max:','5893890YQegoV','scripts','79289VXVWVI','[xuLyGame]:\x20Loop\x20lại\x20,\x20loop\x20lại\x20lần\x20','task','\x20không\x20phải\x20là\x20một\x20hàm\x20hợp\x20lệ','Lỗi\x20xử\x20lý\x20profile:\x20','push','[xuLyGame]:\x20checkTeleWebOpen\x20OK','[checkTeleWebOpen]:\x20','profiles','[OpenBrowser]\x20Lỗi\x20khi\x20đóng\x20tab\x20mới','[xuLyTungProfile]:\x20Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng','\x20done','dirname','.js','timGame','done','[worker1.procScreenArr]action:\x20','][xuLyTask]profileQueue:\x20concurrency:','autoSetBrowserPosition','compareExchange','Lỗi\x20gì\x20đó\x20task\x20','addData','][OK]:\x20STOP\x20SCRIPT','nextRun','message','[xuLyGame]:\x20','Không\x20tìm\x20thấy\x20giá\x20trị\x20status=0','[loadGame]:scriptPath\x20','url','env','\x20Tele\x20A\x20OK','[checkTeleWebOpen]:\x20Thực\x20thi\x20','nextrun','notify','[checkTeleWebOpen]:\x20Không\x20thực\x20thi\x20script\x20','[OpenBrowser]:force\x20set\x20Position:\x20','][xuLyTask]:\x20Hoàn\x20thành\x20xử\x20lý\x20task:\x20','[closeBrowser]:\x20Đóng\x20trình\x20duyệt\x20'];a0_0x1cf0=function(){return _0x49c21f;};return a0_0x1cf0();}async function procScreenArr(_0xfb1dea,_0x136a6c,_0x3e8191){const _0x49c5e6=a0_0x323fbc;try{await acquireLock(screenData);let _0x52cd4c={};log(_0x3e8191,_0x49c5e6(0x1e3)+_0xfb1dea+',\x20pos:\x20'+json(_0x136a6c),null,'w','-');if(_0xfb1dea===_0x49c5e6(0x16d)){log(_0x3e8191,_0x49c5e6(0x229),null,'w'),_0x52cd4c[_0x49c5e6(0x1bb)]=Atomics[_0x49c5e6(0x1c4)](screenData,0x1)/0xf4240,_0x52cd4c[_0x49c5e6(0x226)]=Atomics[_0x49c5e6(0x1c4)](screenData,0x2),_0x52cd4c['height']=Atomics[_0x49c5e6(0x1c4)](screenData,0x3);for(let _0x32179a=0xa;_0x32179a<screenData[_0x49c5e6(0x192)]-0x1;_0x32179a=_0x32179a+0x3){const _0x5f3edb=Atomics['load'](screenData,_0x32179a);if(_0x5f3edb===0x2)return Atomics['store'](screenData,_0x32179a,0x1),_0x52cd4c[_0x49c5e6(0x1fa)]=0x0,_0x52cd4c['x']=Atomics[_0x49c5e6(0x1c4)](screenData,_0x32179a+0x1),_0x52cd4c['y']=Atomics[_0x49c5e6(0x1c4)](screenData,_0x32179a+0x2),log(_0x3e8191,_0x49c5e6(0x179)+_0x32179a+_0x49c5e6(0x1bd)+json(_0x52cd4c),null,'w'),await releaseLock(screenData),_0x52cd4c;if(_0x5f3edb===0x0)return Atomics[_0x49c5e6(0x19a)](screenData,_0x32179a,0x1),_0x52cd4c[_0x49c5e6(0x1fa)]=0x1,_0x52cd4c['x']=0x0,_0x52cd4c['y']=0x0,log(_0x3e8191,'[worker1.procScreenArr]\x20index:'+_0x32179a+_0x49c5e6(0x204)+json(_0x52cd4c),null,'w'),await releaseLock(screenData),_0x52cd4c;}await releaseLock(screenData);throw new Error(_0x49c5e6(0x210));}else{if(_0xfb1dea===_0x49c5e6(0x232)&&_0x136a6c['x']>=0x0&&_0x136a6c['y']>=0x0){log(_0x3e8191,_0x49c5e6(0x187),null,'w');if(_0x136a6c[_0x49c5e6(0x1fa)]===0x1)return log(_0x3e8191,_0x49c5e6(0x20d),null,'w'),await releaseLock(screenData),!![];for(let _0x38981c=0xa;_0x38981c<screenData['length']-0x1;_0x38981c+=0x3){const _0x1e66e7=Atomics[_0x49c5e6(0x1c4)](screenData,_0x38981c);if(_0x1e66e7===0x1){const _0xa1db54=Atomics[_0x49c5e6(0x1c4)](screenData,_0x38981c+0x1),_0x3c929d=Atomics[_0x49c5e6(0x1c4)](screenData,_0x38981c+0x2);if(_0xa1db54===_0x136a6c['x']&&_0x3c929d===_0x136a6c['y'])return Atomics['store'](screenData,_0x38981c,0x2),log(_0x3e8191,_0x49c5e6(0x179)+_0x38981c+_0x49c5e6(0x1fb),null,'w'),Atomics[_0x49c5e6(0x1f4)](screenData,_0x38981c),await releaseLock(screenData),!![];}}await releaseLock(screenData);throw new Error('Không\x20thể\x20đóng\x20màn\x20hình:\x20vị\x20trí\x20không\x20hợp\x20lệ\x20action:\x20'+_0xfb1dea+_0x49c5e6(0x1a5)+json(_0x136a6c));}else return log(_0x3e8191,_0x49c5e6(0x20f)+json(_0x136a6c)+_0x49c5e6(0x168)+_0xfb1dea,null,'w'),await releaseLock(screenData),!![];}}catch(_0x27ef1e){return log(_0x3e8191,_0x49c5e6(0x22b)+_0x27ef1e+_0x49c5e6(0x22f)+_0xfb1dea+',\x20pos:\x20'+json(_0x136a6c),null,![]),await releaseLock(screenData),![];}}async function acquireLock(_0x120bb8,_0x41cf94=0x7530){const _0x30b301=a0_0x323fbc,_0x553b7b=Date[_0x30b301(0x185)]();while(Atomics[_0x30b301(0x1e6)](_0x120bb8,0x8,0x0,0x1)!==0x0){if(Date[_0x30b301(0x185)]()-_0x553b7b>_0x41cf94)throw new Error('Timeout\x20while\x20acquiring\x20lock');Atomics[_0x30b301(0x207)](_0x120bb8,0x8,0x1,_0x41cf94);}}async function releaseLock(_0x3c0d40){const _0x12f65f=a0_0x323fbc;Atomics[_0x12f65f(0x19a)](_0x3c0d40,0x8,0x0),Atomics[_0x12f65f(0x1f4)](_0x3c0d40,0x8);}async function xoaTimeout(_0x1d20b1){const _0x445d3c=a0_0x323fbc;try{clearTimeout(_0x1d20b1),log('[xoaTimeout]worker1:\x20Xóa\x20timeout:'+_0x1d20b1,null,'i',_0x445d3c(0x18a));}catch(_0x3f0188){log(_0x445d3c(0x1a3)+_0x3f0188,null,![]);}}async function xoaInterval(_0x142f4d){const _0xf8758c=a0_0x323fbc;try{clearInterval(_0x142f4d),log(_0xf8758c(0x19f)+_0x142f4d,null,'i','clrInterval');}catch(_0xd74946){log(_0xf8758c(0x1a3)+_0xd74946,null,![]);}}async function delay(_0x307161){return new Promise(async _0x5682a4=>{setTimeout(_0x5682a4,_0x307161);});}async function eTimeout(){const _0x56a3d2=a0_0x323fbc;return log(_0x56a3d2(0x219),null,'w'),Atomics[_0x56a3d2(0x19a)](tasksData,taskInfo['taskIndex'],0x1),!![];}async function cTimeout(){const _0x30ac2a=a0_0x323fbc;if(Atomics['load'](tasksData,taskInfo[_0x30ac2a(0x173)])===0x1)return!![];return null;}async function rstTimeout(){const _0x44eb38=a0_0x323fbc;return log(_0x44eb38(0x18b),null,'w'),Atomics[_0x44eb38(0x1e6)](tasksData,taskInfo['taskIndex'],0x1,0x2),!![];}
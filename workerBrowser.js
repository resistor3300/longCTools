const a0_0x37bad6=a0_0x484d;(function(_0x121d9f,_0x2df2d5){const _0x43bc5b=a0_0x484d,_0x5622c4=_0x121d9f();while(!![]){try{const _0x773aa=parseInt(_0x43bc5b(0x91))/0x1+-parseInt(_0x43bc5b(0x87))/0x2+-parseInt(_0x43bc5b(0xe1))/0x3+-parseInt(_0x43bc5b(0x100))/0x4*(-parseInt(_0x43bc5b(0x88))/0x5)+-parseInt(_0x43bc5b(0xae))/0x6+-parseInt(_0x43bc5b(0xf2))/0x7+parseInt(_0x43bc5b(0x8c))/0x8;if(_0x773aa===_0x2df2d5)break;else _0x5622c4['push'](_0x5622c4['shift']());}catch(_0xb10415){_0x5622c4['push'](_0x5622c4['shift']());}}}(a0_0x1c5c,0xa3f86));import'dotenv/config';import a0_0x35793a from'fs';import a0_0x595836 from'path';import{fileURLToPath,pathToFileURL}from'url';import{expose}from'threads/worker';import{log,json}from'./modules/logger.js';import a0_0x475dc9 from'./modules/Genlogin.js';import a0_0x351fda from'./modules/http.js';import a0_0x50c63d from'p-queue';const __filename=fileURLToPath(import.meta['url']),__dirname=a0_0x595836[a0_0x37bad6(0xeb)](__filename);let profileQueue,genlogin,http,getAllProfiles,taskInfo,GenDataProfile,timgame;genlogin=new a0_0x475dc9('',!![]),http=new a0_0x351fda(process[a0_0x37bad6(0x7e)][a0_0x37bad6(0xbd)],process[a0_0x37bad6(0x7e)][a0_0x37bad6(0x7d)],!![]);let firstRun=!![],delayOpenProfile=0xbb8,profileTimeout=0x5265c0,botTimeout=0x5265c0,profileThreads=0x1,browserInfo={},version,screenData,tasksData,screenDataBuffer1,tasksDataBuffer1,teleId=null;const worker1=async _0x35dc67=>{const _0x801497=a0_0x37bad6,{version0:_0x41a1e0,tasksDataBuffer:_0x4dd270,screenDataBuffer:_0xf9b43a,action:_0x5cb535,task:_0x24e2d3,dataBrw:_0x1dc4a8,GenDataProfile0:_0x5818c2,timgame0:_0x390e06,timeout:_0x1d7a0c,tele_id:_0x3d0f5d}=_0x35dc67;taskInfo=_0x24e2d3;_0x3d0f5d&&_0x3d0f5d['tele_id']&&(teleId=_0x3d0f5d[_0x801497(0xc9)]);screenDataBuffer1=_0xf9b43a,tasksDataBuffer1=_0x4dd270,screenData=new Int32Array(_0xf9b43a),tasksData=new Int32Array(_0x4dd270);try{if(_0x1d7a0c)return log('worker1','timeout',null,'w'),await clearVar(),{'success':![],'error':_0x801497(0x114)};else{if(_0x24e2d3!==_0x801497(0xef)){version=_0x41a1e0,getAllProfiles=_0x1dc4a8,log(_0x801497(0xe4),'[worker1data.task]:data.task\x20'+JSON[_0x801497(0xed)](_0x35dc67[_0x801497(0xa9)]),null,'c'),log(_0x801497(0xe4),_0x801497(0xc3)+JSON[_0x801497(0xed)](getAllProfiles),null,'c'),GenDataProfile=_0x5818c2,timgame=_0x390e06,log(_0x801497(0xe4),'['+_0x24e2d3[_0x801497(0x6d)]+_0x801497(0xcb),null,'w');const _0x8721d8=await xuLyTask(_0x24e2d3);return log(_0x801497(0xe4),''+JSON[_0x801497(0xed)](_0x8721d8),null,'w'),log(_0x801497(0xe4),_0x801497(0x6f),null,'w',_0x801497(0x8b)),await clearVar(),_0x8721d8?{'success':!![],'result':_0x8721d8}:{'success':![],'result':_0x8721d8};}else return log(_0x801497(0xe4),_0x801497(0x9a)+_0x24e2d3,null,'w'),await clearVar(),{'success':![],'error':'worker1'};}}catch(_0x40e49b){return log(_0x801497(0xe4),_0x801497(0xb5)+_0x40e49b,null,![]),await clearVar(),{'success':![],'error':_0x801497(0xe4)};}};function a0_0x484d(_0x474560,_0x56a221){const _0x1c5ce5=a0_0x1c5c();return a0_0x484d=function(_0x484dad,_0x5eabcb){_0x484dad=_0x484dad-0x68;let _0xebf4d5=_0x1c5ce5[_0x484dad];return _0xebf4d5;},a0_0x484d(_0x474560,_0x56a221);}expose({'worker1':worker1});async function clearVar(){return genlogin=null,http=null,!![];}async function xuLyTask(_0x1083e6){const _0x5bdf52=a0_0x37bad6;try{log('worker1','['+_0x1083e6[_0x5bdf52(0x6d)]+_0x5bdf52(0xa8),null,'i','-');const _0x53fcd9=await genlogin[_0x5bdf52(0xa1)](_0x5bdf52(0xe4)),_0x3aed7e=_0x53fcd9[_0x5bdf52(0x104)];if(_0x3aed7e<_0x1083e6[_0x5bdf52(0xd1)])return log(_0x5bdf52(0xe4),'['+_0x1083e6[_0x5bdf52(0x6d)]+_0x5bdf52(0xd2)+JSON[_0x5bdf52(0xed)](_0x1083e6[_0x5bdf52(0x6d)])+_0x5bdf52(0xea),null,'i'),log('worker1','['+_0x1083e6[_0x5bdf52(0x6d)]+'][xuLyTask]:\x20currentDateTime:\x20'+JSON['stringify'](_0x53fcd9)+_0x5bdf52(0xc6)+JSON[_0x5bdf52(0xed)](_0x1083e6['nextrun']),null,'w'),log(_0x5bdf52(0xe4),'['+_0x1083e6[_0x5bdf52(0x6d)]+_0x5bdf52(0x83)+JSON[_0x5bdf52(0xed)](_0x3aed7e)+'\x20|\x20nextrun:\x20'+JSON[_0x5bdf52(0xed)](taskNextRunDateTime),null,'w'),log(_0x5bdf52(0xe4),'['+_0x1083e6[_0x5bdf52(0x6d)]+'][xuLyTask]:\x20Chờ\x205\x20giây\x20trước\x20khi\x20xử\x20lý\x20task\x20tiếp\x20theo...',null,'i'),await delay(0x1388),null;let _0x313e72=await http[_0x5bdf52(0xdf)](_0x5bdf52(0xe4),_0x1083e6['name']);if(_0x313e72['value'][_0x5bdf52(0xd9)][_0x5bdf52(0x7f)]<=0x0){log(_0x5bdf52(0xe4),'['+_0x1083e6[_0x5bdf52(0x6d)]+_0x5bdf52(0xe3),null,![]);throw new Error('No\x20profile\x20found');}firstRun&&(profileThreads=parseInt(_0x1083e6[_0x5bdf52(0xd0)]),profileQueue=new a0_0x50c63d({'concurrency':profileThreads}),log(_0x5bdf52(0xe4),'['+_0x1083e6['name']+_0x5bdf52(0x81)+profileThreads,null,'w'),firstRun=![],delayOpenProfile=parseInt(_0x1083e6[_0x5bdf52(0xc4)])*0x3e8,profileTimeout=parseInt(_0x1083e6[_0x5bdf52(0xdb)])*0x3e8,botTimeout=parseInt(_0x1083e6[_0x5bdf52(0xd6)])*0x3e8);const _0x558bf3=await xuLyProfiles(_0x313e72[_0x5bdf52(0x122)][_0x5bdf52(0xd9)],_0x1083e6['name']);if(!_0x558bf3){log(_0x5bdf52(0xe4),'['+_0x1083e6[_0x5bdf52(0x6d)]+_0x5bdf52(0x11b)+json(_0x558bf3),null,![]);throw new Error(_0x5bdf52(0x113));}return log(_0x5bdf52(0xe4),'['+_0x1083e6[_0x5bdf52(0x6d)]+_0x5bdf52(0x109)+_0x1083e6['name']+'\x20ok'),await delay(0x7d0),log(_0x5bdf52(0xe4),'['+_0x1083e6[_0x5bdf52(0x6d)]+'][xuLyTask]:\x20Hoàn\x20thành\x20xử\x20lý\x20task:\x20'+JSON[_0x5bdf52(0xed)](_0x1083e6[_0x5bdf52(0x6d)])),!![];}catch(_0x46b704){return log('worker1','['+_0x1083e6[_0x5bdf52(0x6d)]+'][xuLyTask]:\x20Lỗi\x20while:\x20'+_0x46b704,null,![]),null;}}async function xuLyProfiles(_0x140172,_0x5ccd7c){const _0x34f7ad=a0_0x37bad6;try{const _0x48d47b=[];for(const [_0x5579cb,_0x574bff]of _0x140172[_0x34f7ad(0x93)]()){const _0x5dd25d=await GenDataProfile[_0x34f7ad(0x10a)](_0x1c5627=>_0x1c5627[_0x34f7ad(0x111)]===_0x574bff);if(_0x5579cb!==-0x1)log(_0x34f7ad(0xe4),'['+_0x5ccd7c+'][xuLyProfiles]index:\x20'+_0x5dd25d);else{log(_0x34f7ad(0xe4),'['+_0x5ccd7c+_0x34f7ad(0x10c));throw new Error(_0x34f7ad(0xda));}log(_0x34f7ad(0xe4),'['+_0x5ccd7c+'][xuLyProfiles]:\x20Thêm\x20profile\x20'+_0x574bff+_0x34f7ad(0xb1)+profileThreads,null,'i'),_0x48d47b[_0x34f7ad(0x112)](profileQueue[_0x34f7ad(0xdd)](async()=>{const _0x44e309=_0x34f7ad;try{delayOpenProfile>0x0?(log(_0x44e309(0xe4),'['+_0x5ccd7c+_0x44e309(0x94)+_0x574bff+_0x44e309(0x115)+delayOpenProfile+'ms',null,'w','-'),await delay(delayOpenProfile)):log(_0x44e309(0xe4),'['+_0x5ccd7c+_0x44e309(0x94)+_0x574bff,null,'w','-'),await xuLyTungProfile(_0x574bff,GenDataProfile[_0x5dd25d]);}catch(_0x1c2802){log(_0x44e309(0xe4),'['+_0x5ccd7c+_0x44e309(0xb8)+_0x574bff+':\x20'+_0x1c2802['message'],null,![]);throw _0x1c2802;}})),log(_0x34f7ad(0xe4),'['+_0x5ccd7c+_0x34f7ad(0xf9)+_0x574bff+_0x34f7ad(0xf4));}const _0x579221=await Promise['allSettled'](_0x48d47b),_0xd49c93=_0x579221[_0x34f7ad(0x75)](_0x2600d3=>_0x2600d3[_0x34f7ad(0xfa)]===_0x34f7ad(0xcc));return _0xd49c93[_0x34f7ad(0x7f)]>0x0?log(_0x34f7ad(0xe4),'['+_0x5ccd7c+_0x34f7ad(0x120)+JSON['stringify'](_0xd49c93),null,![]):log(_0x34f7ad(0xe4),'['+_0x5ccd7c+'][xuLyProfiles]:\x20Đã\x20xử\x20lý\x20tất\x20cả\x20profiles\x20thành\x20công\x20'+json(_0x579221)),!![];}catch(_0x3183fb){return log(_0x34f7ad(0xe4),'['+_0x5ccd7c+_0x34f7ad(0x90)+_0x3183fb,null,![]),null;}}async function xuLyTungProfile(_0x5ee582,_0x18572d){const _0x4cd154=a0_0x37bad6;let _0x46b10c,_0x410916;const _0x19e721=_0x5ee582;let _0x4e45d2;try{await delay(delayOpenProfile),log(_0x5ee582,_0x4cd154(0x110),null,'i'),_0x46b10c=await genlogin[_0x4cd154(0xa1)](_0x5ee582),await http[_0x4cd154(0xc0)]('worker1',_0x5ee582,_0x4cd154(0x72),_0x46b10c[_0x4cd154(0x104)],'',_0x4cd154(0x118)+version,_0x4cd154(0x6b));teleId&&await http[_0x4cd154(0x106)](_0x5ee582,teleId,'['+_0x5ee582+_0x4cd154(0x102));log(_0x5ee582,'[xuLyTungProfile]0:\x20Kiểm\x20tra\x20màn\x20hình\x20'+_0x5ee582,null,'w'),_0x4e45d2=await procScreenArr(_0x4cd154(0x10b),null,_0x5ee582);if(_0x4e45d2['x']===undefined||_0x4e45d2['y']===undefined){log(_0x5ee582,_0x4cd154(0xb9),null,![]);throw new Error(_0x4cd154(0x7b));}const _0xfb182a=await xuLyBrowser(_0x5ee582,_0x18572d,_0x4e45d2);await procScreenArr(_0x4cd154(0xd8),_0x4e45d2,_0x5ee582);const _0x2774d8=await genlogin[_0x4cd154(0x92)](_0x46b10c['timestamp']);return await http['addData']('worker1',_0x5ee582,_0x4cd154(0xa4),'','',_0x2774d8,'Stop'),teleId&&await http[_0x4cd154(0x106)](_0x5ee582,teleId,'['+_0x5ee582+'][OK]:\x20STOP\x20SCRIPT'),_0xfb182a;}catch(_0x1df409){log(_0x5ee582,_0x4cd154(0xe9)+_0x1df409,null,![]);if(_0x410916)await Thread[_0x4cd154(0xff)](_0x410916);await procScreenArr(_0x4cd154(0xd8),_0x4e45d2,_0x5ee582);const _0x3e707c=await genlogin['tinhThoiGian'](_0x46b10c?.['timestamp']||Date[_0x4cd154(0xaa)]());await http[_0x4cd154(0xc0)](_0x4cd154(0xe4),_0x5ee582,'STOP\x20SCRIPT','','',_0x3e707c,'Stop');teleId&&await http['tele'](_0x5ee582,teleId,'['+_0x5ee582+_0x4cd154(0xdc));throw _0x1df409;}}async function xuLyBrowser(_0x2724a3,_0x1f193a,_0x1ce810){const _0x73eba1=a0_0x37bad6;let _0x5bac0f;try{const _0x2a8db8=_0x2724a3;if(!browserInfo[_0x2724a3])browserInfo[_0x2724a3]={};browserInfo[_0x2724a3][_0x73eba1(0xab)]=0x0,log(_0x2724a3,_0x73eba1(0xe8)+json(browserInfo),null,'w','w');if(browserInfo[_0x2724a3][_0x73eba1(0xab)]==0x0){_0x5bac0f=await OpenBrowser(_0x2724a3,_0x1f193a,_0x1ce810);if(!_0x5bac0f){log(_0x2724a3,_0x73eba1(0xe5)+_0x2724a3,null,![]);throw new Error(_0x73eba1(0xe5)+_0x2724a3);}browserInfo[_0x2724a3]['fisrtOpenBrowser']=0x1;}if(!_0x5bac0f[_0x73eba1(0xfc)])throw new Error(_0x73eba1(0x76)+_0x2724a3);let _0x20d22e=0x0;const _0x174724=await http[_0x73eba1(0xe6)](_0x73eba1(0xe4),_0x2a8db8);if(!_0x174724){log(_0x2724a3,'[xuLyBrowser]:\x20Bot\x20không\x20tìm\x20thấy',null,![]);throw new Error(_0x73eba1(0x116));}if(_0x174724[_0x73eba1(0x7f)]<=0x0){log(_0x2724a3,_0x73eba1(0x11a),null,![]);throw new Error('No\x20bot\x20found');}for(const _0x4a46b3 of _0x174724){if(_0x4a46b3){if(_0x4a46b3[_0x73eba1(0xf3)]!='script')continue;if(_0x4a46b3[_0x73eba1(0x122)]===_0x73eba1(0xac)){log(_0x2724a3,_0x73eba1(0xee),null,'i');break;}if(!_0x4a46b3[_0x73eba1(0xb0)]){log(_0x2724a3,_0x73eba1(0x7a)+json(_0x4a46b3)+'\x20ko\x20có\x20aks',null,![]);continue;}if(_0x4a46b3['onOff']==='0'){log(_0x2724a3,':\x20Bot\x20'+json(_0x4a46b3['name'])+_0x73eba1(0x9f),null,![]);continue;}const _0x223e2d=await genlogin[_0x73eba1(0xa1)](_0x2724a3);if(_0x4a46b3[_0x73eba1(0xe2)]>_0x223e2d[_0x73eba1(0x6e)]){log(_0x2724a3,_0x73eba1(0x7a)+json(_0x4a46b3[_0x73eba1(0x6d)])+_0x73eba1(0x11e),null,'w');continue;}switch(_0x4a46b3['aks']){case'A':log(_0x2724a3,':\x20'+json(_0x4a46b3[_0x73eba1(0x6d)])+_0x73eba1(0x10d)),await xuLyGame(_0x4a46b3,'A',_0x2724a3,_0x1f193a,_0x1ce810,_0x5bac0f);break;case'K':log(_0x2724a3,':\x20'+json(_0x4a46b3[_0x73eba1(0x6d)])+_0x73eba1(0xce)),await xuLyGame(_0x4a46b3,'K',_0x2724a3,_0x1f193a,_0x1ce810,_0x5bac0f);break;case'W':log(_0x2724a3,':\x20'+json(_0x4a46b3[_0x73eba1(0x6d)])+_0x73eba1(0xde)),await xuLyGame(_0x4a46b3,'W',_0x2724a3,_0x1f193a,_0x1ce810,_0x5bac0f);break;default:log(_0x2724a3,_0x73eba1(0xba)+json(_0x4a46b3[_0x73eba1(0xb0)]),null,![]);break;}log(_0x2724a3,_0x73eba1(0xf7));}}return await closeBrowser(_0x2724a3,_0x5bac0f),!![];}catch(_0x46dbbf){return log(_0x2724a3,_0x73eba1(0xb2)+_0x46dbbf,null,![]),await closeBrowser(_0x2724a3,_0x5bac0f),null;}}async function xuLyGame(_0x2b4db8,_0x40c94f,_0x5f431c,_0x472db3,_0x4cb0c9,_0x473bfc){const _0x47cb5f=a0_0x37bad6;try{const _0x4f8e8b=_0x5f431c;if(_0x2b4db8[_0x47cb5f(0xf3)]==='api'){log(_0x5f431c,'[xuLyGame]:\x20'+_0x2b4db8[_0x47cb5f(0x6d)]+'\x20Api\x20mode',null,'i');const _0x5a3061=await genlogin[_0x47cb5f(0xa1)](_0x5f431c),_0xc76e05=await http[_0x47cb5f(0xc0)](_0x5f431c,_0x4f8e8b,_0x2b4db8['name'],_0x5a3061[_0x47cb5f(0x104)],'',_0x47cb5f(0x69),_0x47cb5f(0xe0)),_0x5da8a7=_0xc76e05['ID'],_0x2f079c={'bot':_0x2b4db8,'profileNameId':_0x5f431c,'genlogin':genlogin,'http':http,'dataId':_0x5da8a7},_0x30d1b4=await loadGameApi(_0x2b4db8['name'],_0x2f079c);if(!_0x30d1b4[_0x47cb5f(0xfa)])return log(_0x5f431c,'[xuLyGame]:\x20Thực\x20thi\x20'+_0x2b4db8['name']+_0x47cb5f(0xfb),null,![]),await http[_0x47cb5f(0xa2)](_0x5f431c,_0x4f8e8b,_0x5da8a7,_0x47cb5f(0xb4),_0x47cb5f(0xb4)),null;if(_0x30d1b4[_0x47cb5f(0xfa)]==_0x47cb5f(0xbb))return log(_0x5f431c,_0x47cb5f(0x99)+_0x2b4db8['name']+_0x47cb5f(0x95),null,'i'),_0x47cb5f(0xbb);if(_0x30d1b4[_0x47cb5f(0xfa)])return log(_0x5f431c,_0x47cb5f(0x99)+_0x2b4db8[_0x47cb5f(0x6d)]+_0x47cb5f(0xc7)),await http[_0x47cb5f(0xd3)](_0x5f431c,_0x4f8e8b,_0x2b4db8['id'],_0x30d1b4[_0x47cb5f(0xf1)],_0x30d1b4[_0x47cb5f(0xe2)]),await http[_0x47cb5f(0xa2)](_0x5f431c,_0x4f8e8b,_0x5da8a7,'Ok',_0x47cb5f(0x119),_0x30d1b4[_0x47cb5f(0xe7)],_0x30d1b4[_0x47cb5f(0xf1)]),!![];}else{if(_0x40c94f=='A'||_0x40c94f=='K'){log(_0x5f431c,_0x47cb5f(0x80)+_0x2b4db8[_0x47cb5f(0x6d)]+_0x47cb5f(0x78),null,'w','-');const _0x4e21d5=await http['getAks'](_0x5f431c,_0x40c94f);if(_0x4e21d5){log(_0x5f431c,_0x47cb5f(0xa7));let _0x14b06c=0x0;while(_0x14b06c<0x2){const _0x14514d=await checkTeleWebOpen(_0x2b4db8,_0x4e21d5,_0x5f431c,_0x4cb0c9,_0x473bfc);if(_0x14514d===_0x47cb5f(0xbb))_0x14b06c++,log(_0x5f431c,_0x47cb5f(0xc8)+_0x14b06c+'/2',null,'i'),await delay(0x3e8);else return _0x14514d?(log(_0x5f431c,_0x47cb5f(0x9c)),!![]):(log(_0x5f431c,'[xuLyGame]:\x20checkTeleWebOpen\x20có\x20gì\x20đó\x20sai\x20sai\x20rồi\x20bro',null,![]),null);}return log(_0x5f431c,_0x47cb5f(0xd5),null,![]),null;}}else{if(_0x40c94f=='W'){log(_0x5f431c,_0x47cb5f(0x80)+_0x2b4db8[_0x47cb5f(0x6d)]+_0x47cb5f(0xbe),null,'w','-');const _0x1169d5=await checkTeleWebOpen(_0x2b4db8,_0x40c94f,_0x5f431c,_0x4cb0c9,_0x473bfc);return _0x1169d5?(log(_0x5f431c,'[xuLyGame]:\x20checkTeleWebOpen\x20OK'),!![]):(log(_0x5f431c,'[xuLyGame]:\x20checkTeleWebOpen\x20có\x20gì\x20đó\x20sai\x20sai\x20rồi\x20bro',null,![]),null);}else return log(_0x5f431c,'[xuLyGame]:\x20Sai\x20aks\x20'+_0x40c94f,null,![]),null;}}}catch(_0xcd1010){return log(_0x5f431c,'[xuLyGame]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20Game:\x20'+_0xcd1010,null,![]),null;}}async function OpenBrowser(_0x437610,_0x182988,_0x4861bd){const _0x22b8d4=a0_0x37bad6;try{const _0x33ed05=_0x437610;log(_0x437610,_0x22b8d4(0x74)+JSON[_0x22b8d4(0xed)](_0x437610),null,'i');if(getAllProfiles[_0x22b8d4(0x6a)]==='n'){const _0x331f31=getAllProfiles[_0x22b8d4(0xb6)][_0x22b8d4(0xc1)]('x');parseInt(_0x331f31[0x0])>=0x0&&parseInt(_0x331f31[0x1])>=0x0?(_0x4861bd['x']=parseInt(_0x331f31[0x0]),_0x4861bd['y']=parseInt(_0x331f31[0x1])):(_0x4861bd['x']=0x0,_0x4861bd['y']=0x0),log(_0x437610,_0x22b8d4(0xf8)+_0x4861bd['x']+'x'+_0x4861bd['y'],null,'w');}const _0x37586a=await genlogin[_0x22b8d4(0xa0)](_0x437610,getAllProfiles,_0x182988,_0x4861bd);log(_0x437610,'[OpenBrowser]:\x20GenLogin:\x20'+JSON['stringify'](_0x37586a),null,'i'),await delay(0x1388);if(_0x37586a){let _0x41245d=0x0;const _0x26a406=0xa;while(_0x41245d<_0x26a406){_0x41245d++;const _0x1304be=await genlogin[_0x22b8d4(0x73)](_0x437610,_0x37586a);if(_0x1304be<=0x1)return log(_0x437610,'[OpenBrowser]]Chỉ\x20có\x20'+_0x1304be+_0x22b8d4(0x96),null,'i'),_0x37586a;const _0x2e5034=await genlogin['closeTab'](_0x437610,_0x37586a,_0x1304be-0x1,0xbb8);if(!_0x2e5034){log(_0x437610,'[OpenBrowser]\x20Lỗi\x20khi\x20đóng\x20tab\x20mới',null,![]);continue;}log(_0x437610,_0x22b8d4(0x85)),await delay(0xbb8);continue;}}return log(_0x437610,'[OpenBrowser]:\x20Lỗi\x20khi\x20mở\x20browser:\x20'+JSON[_0x22b8d4(0xed)](_0x437610)),null;}catch(_0xe183a0){throw new Error(_0x22b8d4(0x97)+_0xe183a0[_0x22b8d4(0xfd)]);}}async function checkTeleWebOpen(_0x6ca2e3,_0x260db1,_0x220d08,_0x418a06,_0x4cc18c){const _0xf87654=a0_0x37bad6;let _0x2d154c;try{let _0x570e10=await genlogin[_0xf87654(0xc2)](_0x220d08,_0x4cc18c,0x0,getAllProfiles[_0xf87654(0xa5)],_0x418a06[_0xf87654(0x117)]);if(_0x260db1!='W'){const _0x408564=await genlogin['elementExistsByXPath'](_0x220d08,_0x570e10,_0x260db1[_0xf87654(0x9e)],0x7d0);!_0x408564&&(await genlogin[_0xf87654(0x105)](_0x220d08,_0x570e10,_0xf87654(0x11c),0xea60),await delay(0x7d0),await genlogin[_0xf87654(0x105)](_0x220d08,_0x570e10,_0x260db1[_0xf87654(0xf0)],0xea60),await genlogin[_0xf87654(0xb3)](_0x220d08,_0x570e10,_0x220d08),await delay(0x1388));}else _0x260db1='W',await genlogin['openUrl'](_0x220d08,_0x570e10,_0xf87654(0x11c),0xea60),await delay(0x7d0),await genlogin[_0xf87654(0x105)](_0x220d08,_0x570e10,_0x6ca2e3[_0xf87654(0xd4)],0xea60),await genlogin['setTitle'](_0x220d08,_0x570e10,_0x220d08),await delay(0x1388);log(_0x220d08,_0xf87654(0x84),null,'i');const _0x3bd02e=await genlogin[_0xf87654(0xa1)](_0x220d08),_0x2130ee=await http[_0xf87654(0xc0)](_0x220d08,_0x220d08,_0x6ca2e3[_0xf87654(0x6d)],_0x3bd02e['date'],'',_0xf87654(0x6b),_0xf87654(0xe0));_0x2d154c=_0x2130ee['ID'];const _0x4304bc={'firstPage':_0x570e10,'bot':_0x6ca2e3,'profileNameId':_0x220d08,'getAks':_0x260db1,'genlogin':genlogin,'http':http,'browser':_0x4cc18c,'dataId':_0x2130ee['ID'],'taskIndex':taskInfo[_0xf87654(0x8f)],'screenDataBuffer2':screenDataBuffer1,'tasksDataBuffer2':tasksDataBuffer1};let _0x4413ee=null;log(_0x220d08,_0xf87654(0x101)+json(_0x2d154c),null,'i');if(timgame&&_0x260db1!='W'){await http['updateData'](_0x220d08,_0x220d08,_0x2d154c,'Tìm');const _0x48b833=await loadGame('timGame',_0x4304bc,_0x4413ee,_0x2d154c,_0x220d08);if(_0x48b833[_0xf87654(0xfa)]==_0xf87654(0xbb))return log(_0x220d08,_0xf87654(0x71)+_0x6ca2e3[_0xf87654(0x6d)]+'\x20loop',null,'i'),await http[_0xf87654(0xa2)](_0x220d08,_0x220d08,_0x2d154c,_0xf87654(0xa6)),_0xf87654(0xbb);else{if(!_0x48b833)return log(_0x220d08,'[checkTeleWebOpen]:\x20Không\x20tìm\x20thấy\x20game\x20'+_0x6ca2e3[_0xf87654(0x6d)],null,![]),await http[_0xf87654(0xa2)](_0x220d08,_0x220d08,_0x2d154c,_0xf87654(0xb4),_0xf87654(0xb4)),null;}_0x48b833[_0xf87654(0x8d)]&&(_0x4413ee=_0x48b833['HostName']);}await http[_0xf87654(0xa2)](_0x220d08,_0x220d08,_0x2d154c,'Vào');const _0x9df3a=await loadGame(_0x6ca2e3[_0xf87654(0x6d)],_0x4304bc,_0x4413ee,_0x2d154c,_0x220d08);if(!_0x9df3a['status'])return log(_0x220d08,_0xf87654(0x108)+_0x6ca2e3[_0xf87654(0x6d)],null,![]),log(_0x220d08,'[checkTeleWebOpen]:\x20'+json(_0x9df3a),null,![]),await http[_0xf87654(0xa2)](_0x220d08,_0x220d08,_0x2d154c,_0xf87654(0xb4),'Fail'),null;else{if(_0x9df3a['status']==_0xf87654(0xbb))return log(_0x220d08,_0xf87654(0x71)+_0x6ca2e3[_0xf87654(0x6d)]+_0xf87654(0x95),null,'i'),await http[_0xf87654(0xa2)](_0x220d08,_0x220d08,_0x2d154c,'loop'),_0xf87654(0xbb);}return await http[_0xf87654(0xd3)](_0x220d08,_0x220d08,_0x6ca2e3['id'],_0x9df3a[_0xf87654(0xf1)],_0x9df3a[_0xf87654(0xe2)]),await http[_0xf87654(0xa2)](_0x220d08,_0x220d08,_0x2d154c,'Ok',_0xf87654(0x119),_0x9df3a[_0xf87654(0xe7)],_0x9df3a[_0xf87654(0xf1)]),log(_0x220d08,_0xf87654(0xd7)+_0x6ca2e3[_0xf87654(0x6d)]+_0xf87654(0xbf)),await delay(0x7d0),!![];}catch(_0x895e39){return log(_0x220d08,'[checkTeleWebOpen]:\x20Lỗi\x20trong\x20quá\x20trình\x20mở\x20trang\x20:\x20'+_0x895e39,null,![]),await http[_0xf87654(0xa2)](_0x220d08,_0x220d08,_0x2d154c,_0xf87654(0xb4),_0xf87654(0xb4)),null;}}async function loadGame(_0x5cdf21,_0x34bc56,_0x2f9cdc,_0x321e43,_0x26a8d0){const _0x5a8cd7=a0_0x37bad6;try{const _0x577029=pathToFileURL(a0_0x595836['join'](__dirname,_0x5a8cd7(0xbc),_0x5cdf21+_0x5a8cd7(0x70)))['href'];log(_0x26a8d0,_0x5a8cd7(0x11f)+_0x577029);const _0x3054de=await import(_0x577029);if(typeof _0x3054de[_0x5a8cd7(0x8a)]===_0x5a8cd7(0xfe)){const _0x107206=await _0x3054de[_0x5a8cd7(0x8a)](_0x34bc56,_0x2f9cdc);await delay(0x3e8);if(!_0x107206[_0x5a8cd7(0xfa)])return log(_0x26a8d0,_0x5a8cd7(0xf5)+_0x5cdf21+_0x5a8cd7(0x86),null,![]),null;else return _0x107206[_0x5a8cd7(0xfa)]===_0x5a8cd7(0xbb)?(log(_0x26a8d0,_0x5a8cd7(0xf6)+_0x5cdf21+_0x5a8cd7(0x95),null,'i'),_0x107206):(log(_0x26a8d0,'[loadGame]:\x20Chạy\x20'+_0x5cdf21+'\x20'+_0x107206[_0x5a8cd7(0xfa)],null,'i'),_0x107206);}else return await delay(0x3e8),log(_0x26a8d0,_0x5a8cd7(0xf5)+_0x5cdf21+'\x20không\x20phải\x20là\x20một\x20hàm\x20hợp\x20lệ',null,![]),null;}catch(_0x36bab4){return log(_0x26a8d0,_0x5a8cd7(0x7c)+_0x5cdf21+':\x20'+_0x36bab4,null,![]),teleId&&await http[_0x5a8cd7(0x106)](_0x26a8d0,teleId,'['+_0x26a8d0+']['+_0x5cdf21+_0x5a8cd7(0x107)+_0x36bab4),null;}}async function closeBrowser(_0x488b99='',_0x19b6ff){const _0x3c68d7=a0_0x37bad6;try{if(_0x19b6ff){if(_0x19b6ff[_0x3c68d7(0xfc)])return await _0x19b6ff[_0x3c68d7(0xd8)](),log(_0x488b99,'[closeBrowser]:\x20Đóng\x20trình\x20duyệt\x20'+_0x488b99+_0x3c68d7(0xbf),null,'w'),!![];}else log(_0x488b99,_0x3c68d7(0xcf),null,'i');return null;}catch(_0x435c1f){return log(_0x488b99,_0x3c68d7(0x6c)+_0x488b99+':\x20'+_0x435c1f,null,![]),null;}}async function procScreenArr(_0x5cd920,_0x5eb971,_0x4440ce){const _0x6532c8=a0_0x37bad6;try{await acquireLock(screenData);let _0xb194f5={};log(_0x4440ce,_0x6532c8(0x9b)+_0x5cd920+_0x6532c8(0x11d)+json(_0x5eb971),null,'w','-');if(_0x5cd920===_0x6532c8(0x10b)){log(_0x4440ce,_0x6532c8(0x8e),null,'w'),_0xb194f5[_0x6532c8(0x117)]=Atomics[_0x6532c8(0x10e)](screenData,0x1)/0xf4240,_0xb194f5[_0x6532c8(0x98)]=Atomics[_0x6532c8(0x10e)](screenData,0x2),_0xb194f5['height']=Atomics[_0x6532c8(0x10e)](screenData,0x3);for(let _0x3eaf58=0xa;_0x3eaf58<screenData['length']-0x1;_0x3eaf58=_0x3eaf58+0x3){const _0x4290e5=Atomics[_0x6532c8(0x10e)](screenData,_0x3eaf58);if(_0x4290e5===0x2)return Atomics[_0x6532c8(0x79)](screenData,_0x3eaf58,0x1),_0xb194f5[_0x6532c8(0x8a)]=0x0,_0xb194f5['x']=Atomics[_0x6532c8(0x10e)](screenData,_0x3eaf58+0x1),_0xb194f5['y']=Atomics[_0x6532c8(0x10e)](screenData,_0x3eaf58+0x2),log(_0x4440ce,_0x6532c8(0x10f)+_0x3eaf58+_0x6532c8(0xad)+json(_0xb194f5),null,'w'),await releaseLock(screenData),_0xb194f5;if(_0x4290e5===0x0)return Atomics['store'](screenData,_0x3eaf58,0x1),_0xb194f5['default']=0x1,_0xb194f5['x']=0x0,_0xb194f5['y']=0x0,log(_0x4440ce,_0x6532c8(0x10f)+_0x3eaf58+_0x6532c8(0x89)+json(_0xb194f5),null,'w'),await releaseLock(screenData),_0xb194f5;}await releaseLock(screenData);throw new Error('Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng');}else{if(_0x5cd920===_0x6532c8(0xd8)&&_0x5eb971['x']>=0x0&&_0x5eb971['y']>=0x0){log(_0x4440ce,_0x6532c8(0x121),null,'w');if(_0x5eb971[_0x6532c8(0x8a)]===0x1)return log(_0x4440ce,'[worker1.procScreenArr]vị\x20trí\x20default\x20không\x20cần\x20close',null,'w'),await releaseLock(screenData),!![];for(let _0x17e8f4=0xa;_0x17e8f4<screenData[_0x6532c8(0x7f)]-0x1;_0x17e8f4+=0x3){const _0x5bbd16=Atomics[_0x6532c8(0x10e)](screenData,_0x17e8f4);if(_0x5bbd16===0x1){const _0x5f57d3=Atomics[_0x6532c8(0x10e)](screenData,_0x17e8f4+0x1),_0xe5486e=Atomics['load'](screenData,_0x17e8f4+0x2);if(_0x5f57d3===_0x5eb971['x']&&_0xe5486e===_0x5eb971['y'])return Atomics[_0x6532c8(0x79)](screenData,_0x17e8f4,0x2),log(_0x4440ce,_0x6532c8(0x10f)+_0x17e8f4+_0x6532c8(0x82),null,'w'),Atomics['notify'](screenData,_0x17e8f4),await releaseLock(screenData),!![];}}await releaseLock(screenData);throw new Error(_0x6532c8(0x103)+_0x5cd920+_0x6532c8(0x11d)+json(_0x5eb971));}else return log(_0x4440ce,'[worker1.procScreenArr]\x20posVal:'+json(_0x5eb971)+_0x6532c8(0xaf)+_0x5cd920,null,'w'),await releaseLock(screenData),!![];}}catch(_0x5e3a44){return log(_0x4440ce,_0x6532c8(0xcd)+_0x5e3a44+_0x6532c8(0xca)+_0x5cd920+',\x20pos:\x20'+json(_0x5eb971),null,![]),await releaseLock(screenData),![];}}async function acquireLock(_0x245091,_0x23d254=0x7530){const _0x2c53eb=a0_0x37bad6,_0x3813d3=Date['now']();while(Atomics[_0x2c53eb(0xec)](_0x245091,0x8,0x0,0x1)!==0x0){if(Date[_0x2c53eb(0xaa)]()-_0x3813d3>_0x23d254)throw new Error('Timeout\x20while\x20acquiring\x20lock');Atomics[_0x2c53eb(0xa3)](_0x245091,0x8,0x1,_0x23d254);}}async function releaseLock(_0x4d539d){const _0x2e3187=a0_0x37bad6;Atomics[_0x2e3187(0x79)](_0x4d539d,0x8,0x0),Atomics[_0x2e3187(0x68)](_0x4d539d,0x8);}async function xoaTimeout(_0x49978c){const _0x9f9e55=a0_0x37bad6;try{clearTimeout(_0x49978c),log(_0x9f9e55(0xc5)+_0x49978c,null,'i',_0x9f9e55(0xb7));}catch(_0x3f50b8){log('[xoaTimeout]worker1:\x20'+_0x3f50b8,null,![]);}}async function xoaInterval(_0x5f3b64){try{clearInterval(_0x5f3b64),log('[xoaTimeout]worker1:\x20Xóa\x20Interval:'+_0x5f3b64,null,'i','clrInterval');}catch(_0x1036fc){log('[xoaTimeout]worker1:\x20'+_0x1036fc,null,![]);}}async function delay(_0x2f2e11){return new Promise(async _0x38496e=>{setTimeout(_0x38496e,_0x2f2e11);});}async function eTimeout(){const _0xa91c5=a0_0x37bad6;return log(_0xa91c5(0x77),null,'w'),Atomics['store'](tasksData,taskInfo['taskIndex'],0x1),!![];}async function cTimeout(){const _0x5c4bf9=a0_0x37bad6;if(Atomics[_0x5c4bf9(0x10e)](tasksData,taskInfo['taskIndex'])===0x1)return!![];return null;}async function rstTimeout(){const _0x3397dd=a0_0x37bad6;return log(_0x3397dd(0x9d),null,'w'),Atomics[_0x3397dd(0xec)](tasksData,taskInfo[_0x3397dd(0x8f)],0x1,0x2),!![];}function a0_0x1c5c(){const _0x2b9098=['now','fisrtOpenBrowser','end','\x20set\x20open\x20ok\x20pos:','7769448QNcHfB','\x20Action:','aks','\x20vào\x20hàng\x20đợi\x20max:','[xuLyBrowser]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20browser:\x20','setTitle','Fail','Lỗi\x20','customBrowserPosition','clrTimeout','][xuLyProfiles]:\x20Lỗi\x20khi\x20xử\x20lý\x20profile\x20','[xuLyTungProfile]:\x20Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng',':\x20Sai\x20aks\x20','loop','scripts','SERVER_HOST','\x20Web\x20mode','\x20thành\x20công','addData','split','activateTab','getAllProfiles\x20','delayOpenProfile','[xoaTimeout]worker1:\x20Xóa\x20timeout:','\x20|\x20nextrun:\x20','\x20done','[xuLyGame]:\x20Loop\x20lại\x20,\x20loop\x20lại\x20lần\x20','tele_id','\x20action:\x20',']:\x20Script\x20Mode','rejected','[worker1.procScreenArr]lỗi\x20','\x20Tele\x20K\x20OK','[closeBrowser]:\x20Không\x20có\x20trình\x20duyệt\x20để\x20đóng','profileThreads','nextrunstamp','][xuLyTask]:\x20Task\x20','nextRunTime','ref','[xuLyGame]:Max\x20loop\x20rồi\x20bro','botTimeout','[checkTeleWebOpen]:\x20Thực\x20thi\x20script\x20','close','profiles','Không\x20tìm\x20thấy\x20indexGenP','profileTimeout','][ERR]:\x20STOP\x20SCRIPT','add','\x20Web\x20OK','getTask','running','3820158pFFPrq','nextRunStamp','][xuLyTask]:\x20không\x20lấy\x20được\x20profile','worker1','[xuLyBrowser]:\x20Không\x20mở\x20được\x20trình\x20duyệt\x20','getBotAll','coin','[xuLyBrowser]:browserInfo:\x20','[xuLyTungProfile]:\x20Lỗi:\x20','\x20chưa\x20đến\x20thời\x20gian\x20chạy','dirname','compareExchange','stringify',':\x20XONG\x201\x20LƯỢT','screenArr','FistUrl','nextRun','528108neUVpl','type','\x20vào\x20hàng\x20đợi.','[loadGame]:\x20Script\x20','[loadGame]:\x20Chạy\x20','[xuLyBrowser]:\x20Bot\x20OK','[OpenBrowser]:force\x20set\x20Position:\x20','][xuLyProfiles]:\x20Đã\x20thêm\x20profile\x20','status','\x20lỗi','connected','message','function','terminate','195824jEXoiJ','[checkTeleWebOpen]:\x20dataId:\x20',']:\x20START\x20SCRIPT','Không\x20thể\x20đóng\x20màn\x20hình:\x20vị\x20trí\x20không\x20hợp\x20lệ\x20action:\x20','date','openUrl','tele','][ERR]:\x20Lỗi\x20','[checkTeleWebOpen]:\x20Không\x20thực\x20thi\x20script\x20','][xuLyTask]:\x20Tasks:\x20','findIndex','open','][xuLyProfiles]Không\x20tìm\x20thấy\x20indexGenP','\x20Tele\x20A\x20OK','load','[worker1.procScreenArr]\x20index:','[xuLyTungProfile]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile','pid','push','No\x20profile\x20found','timeout','\x20sau\x20','No\x20bot\x20found','scale','Version:','Done','[xuLyBrowser]:\x20không\x20lấy\x20được\x20bot','][xuLyTask]:\x20Không\x20lấy\x20được\x20dữ\x20liệu\x20profiles\x20','https://www.google.com',',\x20pos:\x20','\x20Chưa\x20tới\x20giờ\x20chạy','[loadGame]:scriptPath\x20','][xuLyProfiles]:\x20Một\x20số\x20profiles\x20gặp\x20lỗi:\x20','[worker1.procScreenArr]vào\x20close','value','notify','StartApi','autoSetBrowserPosition','Start','[closeBrowser]:\x20Lỗi\x20khi\x20đóng\x20trình\x20duyệt\x20','name','timestamp','DONE','.js','[checkTeleWebOpen]:\x20Thực\x20thi\x20','START\x20SCRIPT','countOpenTabs','[OpenBrowser]:\x20Processing\x20profile:\x20','filter','[xuLyBrowser]:\x20browser\x20disconnected\x20','[eTimeout]worker1:\x20timeout','\x20Script\x20mode','store',':\x20Bot\x20','Không\x20tìm\x20thấy\x20giá\x20trị\x20status=0','[loadGame]:\x20Lỗi\x20khi\x20load\x20và\x20thực\x20thi\x20script\x20','APIKEY','env','length','[xuLyGame]:\x20','][xuLyTask]profileQueue:\x20concurrency:','\x20set\x20close\x20ok','][xuLyTask]:\x20currentDateTime:\x20','[checkTeleWebOpen]:\x20vào\x20loadGame','[OpenBrowser]\x20Đóng\x20tab\x20mới\x20thành\x20công','\x20không\x20trả\x20về\x20status','2341250YQgSOa','115RlvNwD','\x20set\x20open\x20default\x20pos:','default','done','22721312XYVasV','HostName','[worker1.procScreenArr]vào\x20open','taskIndex','][xuLyProfiles]:\x20Lỗi\x20:\x20','519833sviNZW','tinhThoiGian','entries','][xuLyProfiles]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile\x20','\x20loop','\x20tab\x20đang\x20mở','Lỗi\x20xử\x20lý\x20profile:\x20','width','[xuLyGame]:\x20Thực\x20thi\x20','Lỗi\x20gì\x20đó\x20task\x20','[worker1.procScreenArr]action:\x20','[xuLyGame]:\x20checkTeleWebOpen\x20OK','[eTimeout]worker1:\x20reset\x20timeout','InputSearch','\x20OFF','connect','nowTime','updateData','wait','STOP\x20SCRIPT','browserWidthHeight','loop\x20new\x20game','[xuLyGame]:\x20getAks\x20OK','][xuLyTask]:\x20vào\x20xuLyTask','task'];a0_0x1c5c=function(){return _0x2b9098;};return a0_0x1c5c();}
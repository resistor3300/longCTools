const a0_0x5be02d=a0_0x48a9;(function(_0x17b425,_0x4a1258){const _0x4a168d=a0_0x48a9,_0x2c1ef6=_0x17b425();while(!![]){try{const _0x4ec3b6=-parseInt(_0x4a168d(0x1ed))/0x1*(-parseInt(_0x4a168d(0x2b1))/0x2)+-parseInt(_0x4a168d(0x25b))/0x3+parseInt(_0x4a168d(0x230))/0x4+-parseInt(_0x4a168d(0x233))/0x5*(parseInt(_0x4a168d(0x1ea))/0x6)+parseInt(_0x4a168d(0x2a2))/0x7*(-parseInt(_0x4a168d(0x293))/0x8)+-parseInt(_0x4a168d(0x275))/0x9*(parseInt(_0x4a168d(0x22d))/0xa)+parseInt(_0x4a168d(0x282))/0xb;if(_0x4ec3b6===_0x4a1258)break;else _0x2c1ef6['push'](_0x2c1ef6['shift']());}catch(_0x1e1aac){_0x2c1ef6['push'](_0x2c1ef6['shift']());}}}(a0_0x1b51,0x236eb));import'dotenv/config';function a0_0x48a9(_0x1902a3,_0xf3bc8b){const _0x1b5129=a0_0x1b51();return a0_0x48a9=function(_0x48a9cc,_0x4ae87d){_0x48a9cc=_0x48a9cc-0x1e7;let _0x54933a=_0x1b5129[_0x48a9cc];return _0x54933a;},a0_0x48a9(_0x1902a3,_0xf3bc8b);}import a0_0x47b5ff from'fs';import a0_0x28a7a9 from'path';import{fileURLToPath,pathToFileURL}from'url';import{expose}from'threads/worker';import{log,json}from'./modules/logger.js';import a0_0x434261 from'./modules/Genlogin.js';import a0_0x708f22 from'./modules/http.js';import a0_0x3703b6 from'p-queue';function a0_0x1b51(){const _0x7049d=['nextrunstamp','getBotAll','profileTimeout','24MDvbbO',',\x20pos:\x20','Version:','29vxnIYJ','open','\x20không\x20trả\x20về\x20status','\x20sau\x20','[worker1.procScreenArr]\x20index:','loop\x20new\x20game','split','DONE','[worker1.procScreenArr]action:\x20','[xoaTimeout]worker1:\x20','delayOpenProfile','taskIndex','[xuLyGame]:Max\x20loop\x20rồi\x20bro','[xuLyTungProfile]:\x20Lỗi:\x20','\x20|\x20nextrun:\x20','end','profileThreads','[xuLyBrowser]:\x20Không\x20mở\x20được\x20trình\x20duyệt\x20','now','load','[checkTeleWebOpen]:\x20dataId:\x20','][xuLyTask]:\x20Hoàn\x20thành\x20xử\x20lý\x20task:\x20','[closeBrowser]:\x20Đóng\x20trình\x20duyệt\x20','[checkTeleWebOpen]:\x20vào\x20loadGame','addData','[xuLyBrowser]:\x20browser\x20disconnected\x20','Fail','[xuLyGame]:\x20','][xuLyProfiles]:\x20Đã\x20thêm\x20profile\x20','elementExistsByXPath','\x20Script\x20mode','type','value','date','\x20vào\x20hàng\x20đợi\x20max:','\x20ko\x20có\x20aks','Memory','[worker1.procScreenArr]vào\x20open','][OK]:\x20STOP\x20SCRIPT','Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng','\x20vào\x20hàng\x20đợi.','\x20Tele\x20A\x20OK','[worker1.procScreenArr]\x20posVal:','name','][xuLyTask]:\x20Lỗi\x20while:\x20','clrInterval','[xuLyBrowser]:\x20Bot\x20OK','wait','length','setTitle','Lỗi\x20','store','[loadGame]:\x20Script\x20','\x20set\x20open\x20ok\x20pos:','push','No\x20bot\x20found','STOP\x20SCRIPT','[xuLyTungProfile]:\x20Không\x20tìm\x20thấy\x20vị\x20trí\x20màn\x20hình\x20khả\x20dụng','height','][xuLyProfiles]:\x20Đã\x20xử\x20lý\x20tất\x20cả\x20profiles\x20thành\x20công\x20','status','getAllProfiles\x20','pages','][xuLyTask]:\x20Task\x20','110ntQPBa','][xuLyProfiles]:\x20Thêm\x20profile\x20','[OpenBrowser]:\x20Lỗi\x20khi\x20mở\x20browser:\x20','710712NyZfXH','clrTimeout','\x20ok','34915NHGBNb','getTask','onOff','compareExchange',':\x20XONG\x201\x20LƯỢT','notify','][xuLyProfiles]:\x20Lỗi\x20:\x20','[worker1.procScreenArr]lỗi\x20','[OpenBrowser]]Chỉ\x20có\x20','nextRun','\x20action:\x20','fisrtOpenBrowser','pid','Start','\x20done','nextrun','[xuLyBrowser]:\x20không\x20lấy\x20được\x20bot','close','\x20Action:','SERVER_HOST','entries','[OpenBrowser]\x20Lỗi\x20khi\x20đóng\x20tab\x20mới','url','][xuLyProfiles]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile\x20','Lỗi\x20gì\x20đó\x20task\x20','[closeBrowser]:\x20Không\x20có\x20trình\x20duyệt\x20để\x20đóng','customBrowserPosition','function','\x20Web\x20mode','env','][xuLyProfiles]Không\x20tìm\x20thấy\x20indexGenP','Không\x20thể\x20đóng\x20màn\x20hình:\x20vị\x20trí\x20không\x20hợp\x20lệ\x20action:\x20','[loadGame]:\x20Chạy\x20','\x20lỗi','\x20Chưa\x20tới\x20giờ\x20chạy',']:\x20Script\x20Mode','autoSetBrowserPosition','countOpenTabs','][ERR]:\x20Lỗi\x20','\x20không\x20phải\x20là\x20một\x20hàm\x20hợp\x20lệ','617439eRgMhI','default','updateData','activateTab','coin','[xoaTimeout]worker1:\x20Xóa\x20timeout:','nextRunStamp','connect','[checkTeleWebOpen]:\x20Không\x20tìm\x20thấy\x20game\x20',']:\x20START\x20SCRIPT','[xuLyBrowser]:browserInfo:\x20','nowTime','screenArr','rejected','][xuLyProfiles]:\x20Một\x20số\x20profiles\x20gặp\x20lỗi:\x20','Done','.js','Vào','script','tinhThoiGian','loop','\x20tab\x20đang\x20mở','[eTimeout]worker1:\x20reset\x20timeout','[closeBrowser]:\x20Lỗi\x20khi\x20đóng\x20trình\x20duyệt\x20','StartApi','nextRunTime','30951hGbPFV','[checkTeleWebOpen]:\x20','getAks','aks','FistUrl','\x20Tele\x20K\x20OK','[xuLyGame]:\x20checkTeleWebOpen\x20có\x20gì\x20đó\x20sai\x20sai\x20rồi\x20bro','Lỗi\x20xử\x20lý\x20profile:\x20','HostName','href','][xuLyTask]:\x20currentDateTime:\x20','\x20OFF','profiles','1258400RDCnBv','[OpenBrowser]:force\x20set\x20Position:\x20','botTimeout','InputSearch','No\x20profile\x20found','[loadGame]:\x20Lỗi\x20khi\x20load\x20và\x20thực\x20thi\x20script\x20','[xuLyGame]:\x20checkTeleWebOpen\x20OK','Stop','width','ref','connected',':\x20Bot\x20','openUrl','tele','worker1','findIndex','[xuLyBrowser]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20browser:\x20','449040NBaDNb','tele_id','[worker1.procScreenArr]vào\x20close','[OpenBrowser]:\x20GenLogin:\x20','[xuLyBrowser]:dataBrw:\x20','\x20thành\x20công','timGame','https://www.google.com','[checkTeleWebOpen]:\x20Thực\x20thi\x20','[xuLyGame]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20Game:\x20','[xuLyGame]:\x20Thực\x20thi\x20','api','\x20set\x20close\x20ok','START\x20SCRIPT','terminate','7nttyrQ','filter','join','Garbage\x20Collector\x20đã\x20chạy!','stringify','timeout','running','\x20Api\x20mode','\x20set\x20open\x20default\x20pos:','Tìm','[worker1.procScreenArr]vị\x20trí\x20default\x20không\x20cần\x20close','][xuLyTask]:\x20Tasks:\x20','[checkTeleWebOpen]:\x20Không\x20thực\x20thi\x20script\x20','[xuLyGame]:\x20Loop\x20lại\x20,\x20loop\x20lại\x20lần\x20','[OpenBrowser]\x20Đóng\x20tab\x20mới\x20thành\x20công','12466ZcLoAU','[checkTeleWebOpen]:\x20Thực\x20thi\x20script\x20','\x20loop'];a0_0x1b51=function(){return _0x7049d;};return a0_0x1b51();}const __filename=fileURLToPath(import.meta[a0_0x5be02d(0x249)]),__dirname=a0_0x28a7a9['dirname'](__filename);let profileQueue,genlogin,http,getAllProfiles,taskInfo,GenDataProfile,timgame;genlogin=new a0_0x434261('',!![]),http=new a0_0x708f22(process['env'][a0_0x5be02d(0x246)],process[a0_0x5be02d(0x250)]['APIKEY'],!![]);let firstRun=!![],delayOpenProfile=0xbb8,profileTimeout=0x5265c0,botTimeout=0x5265c0,profileThreads=0x1,browserInfo={},version,screenData,tasksData,screenDataBuffer1,tasksDataBuffer1,teleId=null;const worker1=async _0x1c5697=>{const _0x51f77e=a0_0x5be02d,{version0:_0x309a18,tasksDataBuffer:_0x553904,screenDataBuffer:_0x492afa,action:_0x2c62c9,task:_0x141da5,dataBrw:_0x503ce9,GenDataProfile0:_0x54f4b7,timgame0:_0x3dd776,timeout:_0x5441c6,tele_id:_0x2c8b96}=_0x1c5697;taskInfo=_0x141da5;_0x2c8b96&&_0x2c8b96[_0x51f77e(0x294)]&&(teleId=_0x2c8b96[_0x51f77e(0x294)]);screenDataBuffer1=_0x492afa,tasksDataBuffer1=_0x553904,screenData=new Int32Array(_0x492afa),tasksData=new Int32Array(_0x553904);try{if(_0x5441c6)return log('worker1',_0x51f77e(0x2a7),null,'w'),await clearVar(),{'success':![],'error':'timeout'};else{if(_0x141da5!==_0x51f77e(0x267)){version=_0x309a18,getAllProfiles=_0x503ce9,log(_0x51f77e(0x290),'[worker1data.task]:data.task\x20'+JSON[_0x51f77e(0x2a6)](_0x1c5697['task']),null,'c'),log(_0x51f77e(0x290),_0x51f77e(0x22a)+JSON['stringify'](getAllProfiles),null,'c'),GenDataProfile=_0x54f4b7,timgame=_0x3dd776,log(_0x51f77e(0x290),'['+_0x141da5['name']+_0x51f77e(0x256),null,'w');const _0x50a4db=await xuLyTask(_0x141da5,_0x503ce9);return log(_0x51f77e(0x290),''+JSON['stringify'](_0x50a4db),null,'w'),log('worker1',_0x51f77e(0x1f4),null,'w','done'),await clearVar(),_0x50a4db?{'success':!![],'result':_0x50a4db}:{'success':![],'result':_0x50a4db};}else return log(_0x51f77e(0x290),_0x51f77e(0x24b)+_0x141da5,null,'w'),await clearVar(),{'success':![],'error':_0x51f77e(0x290)};}}catch(_0x4634b2){return log(_0x51f77e(0x290),_0x51f77e(0x21f)+_0x4634b2,null,![]),await clearVar(),{'success':![],'error':_0x51f77e(0x290)};}};expose({'worker1':worker1});async function clearVar(){return genlogin=null,http=null,!![];}async function xuLyTask(_0x4fe27e,_0x686418){const _0x31e5f7=a0_0x5be02d;try{log(_0x31e5f7(0x290),'['+_0x4fe27e[_0x31e5f7(0x218)]+'][xuLyTask]:\x20vào\x20xuLyTask',null,'i','-');const _0x4c41ac=await genlogin[_0x31e5f7(0x266)](_0x31e5f7(0x290)),_0x22a402=_0x4c41ac[_0x31e5f7(0x20e)];if(_0x22a402<_0x4fe27e[_0x31e5f7(0x1e7)])return log(_0x31e5f7(0x290),'['+_0x4fe27e[_0x31e5f7(0x218)]+_0x31e5f7(0x22c)+JSON[_0x31e5f7(0x2a6)](_0x4fe27e[_0x31e5f7(0x218)])+'\x20chưa\x20đến\x20thời\x20gian\x20chạy',null,'i'),log('worker1','['+_0x4fe27e[_0x31e5f7(0x218)]+_0x31e5f7(0x27f)+JSON[_0x31e5f7(0x2a6)](_0x4c41ac)+_0x31e5f7(0x1fb)+JSON[_0x31e5f7(0x2a6)](_0x4fe27e[_0x31e5f7(0x242)]),null,'w'),log(_0x31e5f7(0x290),'['+_0x4fe27e['name']+_0x31e5f7(0x27f)+JSON[_0x31e5f7(0x2a6)](_0x22a402)+'\x20|\x20nextrun:\x20'+JSON[_0x31e5f7(0x2a6)](taskNextRunDateTime),null,'w'),log(_0x31e5f7(0x290),'['+_0x4fe27e['name']+'][xuLyTask]:\x20Chờ\x205\x20giây\x20trước\x20khi\x20xử\x20lý\x20task\x20tiếp\x20theo...',null,'i'),await delay(0x1388),null;let _0xf0de0=await http[_0x31e5f7(0x234)](_0x31e5f7(0x290),_0x4fe27e[_0x31e5f7(0x218)]);if(_0xf0de0[_0x31e5f7(0x20d)]['profiles'][_0x31e5f7(0x21d)]<=0x0){log(_0x31e5f7(0x290),'['+_0x4fe27e[_0x31e5f7(0x218)]+'][xuLyTask]:\x20không\x20lấy\x20được\x20profile',null,![]);throw new Error(_0x31e5f7(0x286));}firstRun&&(profileThreads=parseInt(_0x4fe27e[_0x31e5f7(0x1fd)]),profileQueue=new a0_0x3703b6({'concurrency':profileThreads}),log('worker1','['+_0x4fe27e['name']+'][xuLyTask]profileQueue:\x20concurrency:'+profileThreads,null,'w'),firstRun=![],delayOpenProfile=parseInt(_0x4fe27e[_0x31e5f7(0x1f7)])*0x3e8,profileTimeout=parseInt(_0x4fe27e[_0x31e5f7(0x1e9)])*0x3e8,botTimeout=parseInt(_0x4fe27e[_0x31e5f7(0x284)])*0x3e8);const _0x49709a=await xuLyProfiles(_0xf0de0[_0x31e5f7(0x20d)][_0x31e5f7(0x281)],_0x4fe27e['name'],_0x686418);if(!_0x49709a){log(_0x31e5f7(0x290),'['+_0x4fe27e[_0x31e5f7(0x218)]+'][xuLyTask]:\x20Không\x20lấy\x20được\x20dữ\x20liệu\x20profiles\x20'+json(_0x49709a),null,![]);throw new Error(_0x31e5f7(0x286));}return log(_0x31e5f7(0x290),'['+_0x4fe27e[_0x31e5f7(0x218)]+_0x31e5f7(0x2ad)+_0x4fe27e['name']+_0x31e5f7(0x232)),await delay(0x7d0),log(_0x31e5f7(0x290),'['+_0x4fe27e[_0x31e5f7(0x218)]+_0x31e5f7(0x202)+JSON['stringify'](_0x4fe27e[_0x31e5f7(0x218)])),!![];}catch(_0x307531){return log(_0x31e5f7(0x290),'['+_0x4fe27e[_0x31e5f7(0x218)]+_0x31e5f7(0x219)+_0x307531,null,![]),null;}}async function xuLyProfiles(_0x395d8d,_0x1b5ad3,_0x35cbdf){const _0x2ea8fa=a0_0x5be02d;try{const _0x55181d=[];for(const [_0x155b6c,_0x332c95]of _0x395d8d[_0x2ea8fa(0x247)]()){const _0x3b57a2=await GenDataProfile[_0x2ea8fa(0x291)](_0x51cbe2=>_0x51cbe2[_0x2ea8fa(0x23f)]===_0x332c95);if(_0x155b6c!==-0x1)log('worker1','['+_0x1b5ad3+'][xuLyProfiles]index:\x20'+_0x3b57a2);else{log(_0x2ea8fa(0x290),'['+_0x1b5ad3+_0x2ea8fa(0x251));throw new Error('Không\x20tìm\x20thấy\x20indexGenP');}log('worker1','['+_0x1b5ad3+_0x2ea8fa(0x22e)+_0x332c95+_0x2ea8fa(0x20f)+profileThreads,null,'i'),_0x55181d[_0x2ea8fa(0x223)](profileQueue['add'](async()=>{const _0x52d166=_0x2ea8fa;try{delayOpenProfile>0x0?(log(_0x52d166(0x290),'['+_0x1b5ad3+_0x52d166(0x24a)+_0x332c95+_0x52d166(0x1f0)+delayOpenProfile+'ms',null,'w','-'),await delay(delayOpenProfile)):log(_0x52d166(0x290),'['+_0x1b5ad3+_0x52d166(0x24a)+_0x332c95,null,'w','-'),await xuLyTungProfile(_0x332c95,GenDataProfile[_0x3b57a2],_0x35cbdf);}catch(_0x5bb07a){log('worker1','['+_0x1b5ad3+'][xuLyProfiles]:\x20Lỗi\x20khi\x20xử\x20lý\x20profile\x20'+_0x332c95+':\x20'+_0x5bb07a['message'],null,![]);throw _0x5bb07a;}})),log(_0x2ea8fa(0x290),'['+_0x1b5ad3+_0x2ea8fa(0x209)+_0x332c95+_0x2ea8fa(0x215));}const _0x19a65b=await Promise['allSettled'](_0x55181d),_0x259554=_0x19a65b[_0x2ea8fa(0x2a3)](_0x2162be=>_0x2162be[_0x2ea8fa(0x229)]===_0x2ea8fa(0x268));return _0x259554[_0x2ea8fa(0x21d)]>0x0?log(_0x2ea8fa(0x290),'['+_0x1b5ad3+_0x2ea8fa(0x269)+JSON[_0x2ea8fa(0x2a6)](_0x259554),null,![]):log(_0x2ea8fa(0x290),'['+_0x1b5ad3+_0x2ea8fa(0x228)+json(_0x19a65b)),!![];}catch(_0x3d61b5){return log(_0x2ea8fa(0x290),'['+_0x1b5ad3+_0x2ea8fa(0x239)+_0x3d61b5,null,![]),null;}}async function xuLyTungProfile(_0x4b501e,_0x637545,_0x370da1){const _0x2114ea=a0_0x5be02d;let _0x5a4774,_0xded2a;const _0x1726c1=_0x4b501e;let _0x3e114d;try{await delay(delayOpenProfile),log(_0x4b501e,'[xuLyTungProfile]:\x20Bắt\x20đầu\x20xử\x20lý\x20profile',null,'i'),_0x5a4774=await genlogin[_0x2114ea(0x266)](_0x4b501e),await http['addData']('worker1',_0x4b501e,_0x2114ea(0x2a0),_0x5a4774[_0x2114ea(0x20e)],'',_0x2114ea(0x1ec)+version,_0x2114ea(0x240));teleId&&await http[_0x2114ea(0x28f)](_0x4b501e,teleId,'['+_0x4b501e+_0x2114ea(0x264));log(_0x4b501e,'[xuLyTungProfile]0:\x20Kiểm\x20tra\x20màn\x20hình\x20'+_0x4b501e,null,'w'),_0x3e114d=await procScreenArr(_0x2114ea(0x1ee),null,_0x4b501e);if(_0x3e114d['x']===undefined||_0x3e114d['y']===undefined){log(_0x4b501e,_0x2114ea(0x226),null,![]);throw new Error('Không\x20tìm\x20thấy\x20giá\x20trị\x20status=0');}const _0x135194=await xuLyBrowser(_0x4b501e,_0x637545,_0x3e114d,_0x370da1);await procScreenArr(_0x2114ea(0x244),_0x3e114d,_0x4b501e);const _0x302638=await genlogin[_0x2114ea(0x26e)](_0x5a4774['timestamp']);return await http[_0x2114ea(0x205)](_0x2114ea(0x290),_0x4b501e,_0x2114ea(0x225),'','',_0x302638,'Stop'),teleId&&await http[_0x2114ea(0x28f)](_0x4b501e,teleId,'['+_0x4b501e+_0x2114ea(0x213)),_0x135194;}catch(_0x59444d){log(_0x4b501e,_0x2114ea(0x1fa)+_0x59444d,null,![]);if(_0xded2a)await Thread[_0x2114ea(0x2a1)](_0xded2a);await procScreenArr(_0x2114ea(0x244),_0x3e114d,_0x4b501e);const _0x38216f=await genlogin[_0x2114ea(0x26e)](_0x5a4774?.['timestamp']||Date['now']());await http['addData']('worker1',_0x4b501e,_0x2114ea(0x225),'','',_0x38216f,_0x2114ea(0x289));teleId&&await http[_0x2114ea(0x28f)](_0x4b501e,teleId,'['+_0x4b501e+'][ERR]:\x20STOP\x20SCRIPT');throw _0x59444d;}}async function xuLyBrowser(_0x1c1c9a,_0x239522,_0x359c64,_0x3399bc){const _0x4da530=a0_0x5be02d;let _0x10863a;try{const _0x40f503=_0x1c1c9a;if(!browserInfo[_0x1c1c9a])browserInfo[_0x1c1c9a]={};browserInfo[_0x1c1c9a][_0x4da530(0x23e)]=0x0,log(_0x1c1c9a,_0x4da530(0x265)+json(browserInfo),null,'w','w');if(browserInfo[_0x1c1c9a][_0x4da530(0x23e)]==0x0){_0x10863a=await OpenBrowser(_0x1c1c9a,_0x239522,_0x359c64,_0x3399bc);if(!_0x10863a){log(_0x1c1c9a,_0x4da530(0x1fe)+_0x1c1c9a,null,![]);throw new Error('[xuLyBrowser]:\x20Không\x20mở\x20được\x20trình\x20duyệt\x20'+_0x1c1c9a);}browserInfo[_0x1c1c9a][_0x4da530(0x23e)]=0x1;}if(!_0x10863a[_0x4da530(0x28c)])throw new Error(_0x4da530(0x206)+_0x1c1c9a);let _0x130c29=0x0;const _0x2c303c=await http[_0x4da530(0x1e8)]('worker1',_0x40f503);if(!_0x2c303c){log(_0x1c1c9a,'[xuLyBrowser]:\x20Bot\x20không\x20tìm\x20thấy',null,![]);throw new Error(_0x4da530(0x224));}if(_0x2c303c[_0x4da530(0x21d)]<=0x0){log(_0x1c1c9a,_0x4da530(0x243),null,![]);throw new Error(_0x4da530(0x224));}for(const _0x3f0a8b of _0x2c303c){if(_0x3f0a8b){if(_0x3f0a8b[_0x4da530(0x20c)]!=_0x4da530(0x26d))continue;if(_0x3f0a8b[_0x4da530(0x20d)]===_0x4da530(0x1fc)){log(_0x1c1c9a,_0x4da530(0x237),null,'i');break;}if(!_0x3f0a8b[_0x4da530(0x278)]){log(_0x1c1c9a,_0x4da530(0x28d)+json(_0x3f0a8b)+_0x4da530(0x210),null,![]);continue;}if(_0x3f0a8b[_0x4da530(0x235)]==='0'){log(_0x1c1c9a,':\x20Bot\x20'+json(_0x3f0a8b[_0x4da530(0x218)])+_0x4da530(0x280),null,![]);continue;}const _0x39d17e=await genlogin[_0x4da530(0x266)](_0x1c1c9a);if(_0x3f0a8b['nextRunStamp']>_0x39d17e['timestamp']){log(_0x1c1c9a,_0x4da530(0x28d)+json(_0x3f0a8b[_0x4da530(0x218)])+_0x4da530(0x255),null,'w');continue;}switch(_0x3f0a8b[_0x4da530(0x278)]){case'A':log(_0x1c1c9a,':\x20'+json(_0x3f0a8b[_0x4da530(0x218)])+_0x4da530(0x216)),await xuLyGame(_0x3f0a8b,'A',_0x1c1c9a,_0x239522,_0x359c64,_0x10863a,_0x3399bc);break;case'K':log(_0x1c1c9a,':\x20'+json(_0x3f0a8b[_0x4da530(0x218)])+_0x4da530(0x27a)),await xuLyGame(_0x3f0a8b,'K',_0x1c1c9a,_0x239522,_0x359c64,_0x10863a,_0x3399bc);break;case'W':log(_0x1c1c9a,':\x20'+json(_0x3f0a8b[_0x4da530(0x218)])+'\x20Web\x20OK'),await xuLyGame(_0x3f0a8b,'W',_0x1c1c9a,_0x239522,_0x359c64,_0x10863a,_0x3399bc);break;default:log(_0x1c1c9a,':\x20Sai\x20aks\x20'+json(_0x3f0a8b[_0x4da530(0x278)]),null,![]);break;}log(_0x1c1c9a,_0x4da530(0x21b));}}return await closeBrowser(_0x1c1c9a,_0x10863a),!![];}catch(_0x350ddb){return log(_0x1c1c9a,_0x4da530(0x292)+_0x350ddb,null,![]),log(_0x1c1c9a,_0x4da530(0x297)+json(_0x3399bc),null,'w','w'),await closeBrowser(_0x1c1c9a,_0x10863a),null;}}async function xuLyGame(_0x4ed8a4,_0x939754,_0x576ceb,_0x587b03,_0x3f561a,_0x18ac18,_0x582ca9){const _0x4c099b=a0_0x5be02d;try{const _0x4ead14=_0x576ceb;if(_0x4ed8a4[_0x4c099b(0x20c)]===_0x4c099b(0x29e)){log(_0x576ceb,'[xuLyGame]:\x20'+_0x4ed8a4['name']+_0x4c099b(0x2a9),null,'i');const _0xf207bf=await genlogin[_0x4c099b(0x266)](_0x576ceb),_0x1b10d6=await http[_0x4c099b(0x205)](_0x576ceb,_0x4ead14,_0x4ed8a4[_0x4c099b(0x218)],_0xf207bf[_0x4c099b(0x20e)],'',_0x4c099b(0x273),_0x4c099b(0x2a8)),_0x2d8f2a=_0x1b10d6['ID'],_0x45fe5f={'bot':_0x4ed8a4,'profileNameId':_0x576ceb,'genlogin':genlogin,'http':http,'dataId':_0x2d8f2a},_0x474191=await loadGameApi(_0x4ed8a4['name'],_0x45fe5f);if(!_0x474191['status'])return log(_0x576ceb,_0x4c099b(0x29d)+_0x4ed8a4[_0x4c099b(0x218)]+_0x4c099b(0x254),null,![]),await http[_0x4c099b(0x25d)](_0x576ceb,_0x4ead14,_0x2d8f2a,_0x4c099b(0x207),'Fail'),null;if(_0x474191['status']=='loop')return log(_0x576ceb,'[xuLyGame]:\x20Thực\x20thi\x20'+_0x4ed8a4[_0x4c099b(0x218)]+'\x20loop',null,'i'),'loop';if(_0x474191[_0x4c099b(0x229)])return log(_0x576ceb,_0x4c099b(0x29d)+_0x4ed8a4[_0x4c099b(0x218)]+_0x4c099b(0x241)),await http[_0x4c099b(0x274)](_0x576ceb,_0x4ead14,_0x4ed8a4['id'],_0x474191['nextRun'],_0x474191[_0x4c099b(0x261)]),await http[_0x4c099b(0x25d)](_0x576ceb,_0x4ead14,_0x2d8f2a,'Ok','Done',_0x474191[_0x4c099b(0x25f)],_0x474191[_0x4c099b(0x23c)]),!![];}else{if(_0x939754=='A'||_0x939754=='K'){log(_0x576ceb,_0x4c099b(0x208)+_0x4ed8a4[_0x4c099b(0x218)]+_0x4c099b(0x20b),null,'w','-');const _0x22b6fe=await http[_0x4c099b(0x277)](_0x576ceb,_0x939754);if(_0x22b6fe){log(_0x576ceb,'[xuLyGame]:\x20getAks\x20OK');let _0xf16cfa=0x0;while(_0xf16cfa<0x2){const _0xdc92c7=await checkTeleWebOpen(_0x4ed8a4,_0x22b6fe,_0x576ceb,_0x3f561a,_0x18ac18,_0x582ca9);if(_0xdc92c7===_0x4c099b(0x26f))_0xf16cfa++,log(_0x576ceb,_0x4c099b(0x2af)+_0xf16cfa+'/2',null,'i'),await delay(0x3e8);else return _0xdc92c7?(log(_0x576ceb,_0x4c099b(0x288)),!![]):(log(_0x576ceb,'[xuLyGame]:\x20checkTeleWebOpen\x20có\x20gì\x20đó\x20sai\x20sai\x20rồi\x20bro',null,![]),null);}return log(_0x576ceb,_0x4c099b(0x1f9),null,![]),null;}}else{if(_0x939754=='W'){log(_0x576ceb,_0x4c099b(0x208)+_0x4ed8a4[_0x4c099b(0x218)]+_0x4c099b(0x24f),null,'w','-');const _0x375d09=await checkTeleWebOpen(_0x4ed8a4,_0x939754,_0x576ceb,_0x3f561a,_0x18ac18,_0x582ca9);return _0x375d09?(log(_0x576ceb,_0x4c099b(0x288)),!![]):(log(_0x576ceb,_0x4c099b(0x27b),null,![]),null);}else return log(_0x576ceb,'[xuLyGame]:\x20Sai\x20aks\x20'+_0x939754,null,![]),null;}}}catch(_0x218ef5){return log(_0x576ceb,_0x4c099b(0x29c)+_0x218ef5,null,![]),null;}}async function OpenBrowser(_0xa90b69,_0x3f831d,_0x364c32,_0x33f30e){const _0x27c048=a0_0x5be02d;try{const _0x37f113=_0xa90b69;log(_0xa90b69,'[OpenBrowser]:\x20Processing\x20profile:\x20'+JSON[_0x27c048(0x2a6)](_0xa90b69),null,'i'),log(_0xa90b69,'[OpenBrowser]:\x20dataBrw:\x20'+JSON['stringify'](_0x33f30e),null,'w');if(_0x33f30e['autoSetBrowserPosition']&&_0x33f30e[_0x27c048(0x257)]==='n'){const _0x8abb92=_0x33f30e[_0x27c048(0x24d)][_0x27c048(0x1f3)]('x');parseInt(_0x8abb92[0x0])>=0x0&&parseInt(_0x8abb92[0x1])>=0x0?(_0x364c32['x']=parseInt(_0x8abb92[0x0]),_0x364c32['y']=parseInt(_0x8abb92[0x1])):(_0x364c32['x']=0x0,_0x364c32['y']=0x0),log(_0xa90b69,_0x27c048(0x283)+_0x364c32['x']+'x'+_0x364c32['y'],null,'w');}const _0x9ab1ae=await genlogin[_0x27c048(0x262)](_0xa90b69,_0x33f30e,_0x3f831d,_0x364c32);log(_0xa90b69,_0x27c048(0x296)+JSON[_0x27c048(0x2a6)](_0x9ab1ae),null,'i'),await delay(0x1388);if(_0x9ab1ae){let _0x36dbc6=0x0;const _0x4a37f2=0xa;while(_0x36dbc6<_0x4a37f2){_0x36dbc6++;const _0xd9b414=await genlogin[_0x27c048(0x258)](_0xa90b69,_0x9ab1ae);if(_0xd9b414<=0x1)return log(_0xa90b69,_0x27c048(0x23b)+_0xd9b414+_0x27c048(0x270),null,'i'),_0x9ab1ae;const _0x1dc126=await genlogin['closeTab'](_0xa90b69,_0x9ab1ae,_0xd9b414-0x1,0xbb8);if(!_0x1dc126){log(_0xa90b69,_0x27c048(0x248),null,![]);continue;}log(_0xa90b69,_0x27c048(0x2b0)),await delay(0xbb8);continue;}}return log(_0xa90b69,_0x27c048(0x22f)+JSON[_0x27c048(0x2a6)](_0xa90b69)),null;}catch(_0x3bc974){throw new Error(_0x27c048(0x27c)+_0x3bc974['message']);}}async function checkTeleWebOpen(_0x2d05d1,_0x5262e4,_0x4e9c6f,_0x57315e,_0x44f45f,_0x249a2c){const _0x53489c=a0_0x5be02d;let _0x1137be,_0x1c6ba4;try{_0x1c6ba4=await genlogin[_0x53489c(0x25e)](_0x4e9c6f,_0x44f45f,0x0,_0x249a2c['browserWidthHeight'],_0x57315e['scale']);if(_0x5262e4!='W'){const _0x490bef=await genlogin[_0x53489c(0x20a)](_0x4e9c6f,_0x1c6ba4,_0x5262e4[_0x53489c(0x285)],0x7d0);!_0x490bef&&(await genlogin[_0x53489c(0x28e)](_0x4e9c6f,_0x1c6ba4,_0x53489c(0x29a),0xea60),await delay(0x7d0),await genlogin[_0x53489c(0x28e)](_0x4e9c6f,_0x1c6ba4,_0x5262e4[_0x53489c(0x279)],0xea60),await genlogin[_0x53489c(0x21e)](_0x4e9c6f,_0x1c6ba4,_0x4e9c6f),await delay(0x1388));}else _0x5262e4='W',await genlogin[_0x53489c(0x28e)](_0x4e9c6f,_0x1c6ba4,_0x53489c(0x29a),0xea60),await delay(0x7d0),await genlogin['openUrl'](_0x4e9c6f,_0x1c6ba4,_0x2d05d1[_0x53489c(0x28b)],0xea60),await genlogin[_0x53489c(0x21e)](_0x4e9c6f,_0x1c6ba4,_0x4e9c6f),await delay(0x1388);log(_0x4e9c6f,_0x53489c(0x204),null,'i');const _0xc123fd=await genlogin[_0x53489c(0x266)](_0x4e9c6f),_0x29e14b=await http[_0x53489c(0x205)](_0x4e9c6f,_0x4e9c6f,_0x2d05d1[_0x53489c(0x218)],_0xc123fd['date'],'',_0x53489c(0x240),_0x53489c(0x2a8));_0x1137be=_0x29e14b['ID'];const _0x1b1594={'firstPage':_0x1c6ba4,'bot':_0x2d05d1,'profileNameId':_0x4e9c6f,'getAks':_0x5262e4,'genlogin':genlogin,'http':http,'browser':_0x44f45f,'dataId':_0x29e14b['ID'],'taskIndex':taskInfo[_0x53489c(0x1f8)],'screenDataBuffer2':screenDataBuffer1,'tasksDataBuffer2':tasksDataBuffer1};let _0x2b67a6=null;log(_0x4e9c6f,_0x53489c(0x201)+json(_0x1137be),null,'i');if(timgame&&_0x5262e4!='W'){await http[_0x53489c(0x25d)](_0x4e9c6f,_0x4e9c6f,_0x1137be,_0x53489c(0x2ab));const _0xd71225=await loadGame(_0x53489c(0x299),_0x1b1594,_0x2b67a6,_0x1137be,_0x4e9c6f);if(_0xd71225[_0x53489c(0x229)]==_0x53489c(0x26f))return log(_0x4e9c6f,_0x53489c(0x29b)+_0x2d05d1[_0x53489c(0x218)]+_0x53489c(0x2b3),null,'i'),await http[_0x53489c(0x25d)](_0x4e9c6f,_0x4e9c6f,_0x1137be,_0x53489c(0x1f2)),_0x53489c(0x26f);else{if(!_0xd71225)return log(_0x4e9c6f,_0x53489c(0x263)+_0x2d05d1['name'],null,![]),await http['updateData'](_0x4e9c6f,_0x4e9c6f,_0x1137be,_0x53489c(0x207),_0x53489c(0x207)),null;}_0xd71225[_0x53489c(0x27d)]&&(_0x2b67a6=_0xd71225[_0x53489c(0x27d)]);}await http[_0x53489c(0x25d)](_0x4e9c6f,_0x4e9c6f,_0x1137be,_0x53489c(0x26c));const _0x4f5d49=await loadGame(_0x2d05d1[_0x53489c(0x218)],_0x1b1594,_0x2b67a6,_0x1137be,_0x4e9c6f);if(!_0x4f5d49['status'])return log(_0x4e9c6f,_0x53489c(0x2ae)+_0x2d05d1['name'],null,![]),log(_0x4e9c6f,_0x53489c(0x276)+json(_0x4f5d49),null,![]),await http['updateData'](_0x4e9c6f,_0x4e9c6f,_0x1137be,'Fail',_0x53489c(0x207)),null;else{if(_0x4f5d49['status']==_0x53489c(0x26f))return log(_0x4e9c6f,'[checkTeleWebOpen]:\x20Thực\x20thi\x20'+_0x2d05d1[_0x53489c(0x218)]+_0x53489c(0x2b3),null,'i'),await http[_0x53489c(0x25d)](_0x4e9c6f,_0x4e9c6f,_0x1137be,_0x53489c(0x26f)),'loop';}return await http['nextRunTime'](_0x4e9c6f,_0x4e9c6f,_0x2d05d1['id'],_0x4f5d49[_0x53489c(0x23c)],_0x4f5d49[_0x53489c(0x261)]),await http[_0x53489c(0x25d)](_0x4e9c6f,_0x4e9c6f,_0x1137be,'Ok',_0x53489c(0x26a),_0x4f5d49[_0x53489c(0x25f)],_0x4f5d49[_0x53489c(0x23c)]),log(_0x4e9c6f,_0x53489c(0x2b2)+_0x2d05d1['name']+_0x53489c(0x298)),await delay(0x7d0),_0x1137be=null,_0x1c6ba4=null,!![];}catch(_0x51bfde){return log(_0x4e9c6f,'[checkTeleWebOpen]:\x20Lỗi\x20trong\x20quá\x20trình\x20mở\x20trang\x20:\x20'+_0x51bfde,null,![]),await http[_0x53489c(0x25d)](_0x4e9c6f,_0x4e9c6f,_0x1137be,_0x53489c(0x207),'Fail'),_0x1137be=null,_0x1c6ba4=null,null;}}async function loadGame(_0x59c715,_0x49c701,_0x4605fa,_0x57bd2d,_0x5f0a4b){const _0x1eed09=a0_0x5be02d;try{const _0x16f712=pathToFileURL(a0_0x28a7a9[_0x1eed09(0x2a4)](__dirname,'scripts',_0x59c715+_0x1eed09(0x26b)))[_0x1eed09(0x27e)];log(_0x5f0a4b,'[loadGame]:scriptPath\x20'+_0x16f712);const _0x302817=await import(_0x16f712);if(typeof _0x302817['default']===_0x1eed09(0x24e)){const _0x337fa1=await _0x302817[_0x1eed09(0x25c)](_0x49c701,_0x4605fa);await delay(0x3e8);if(!_0x337fa1[_0x1eed09(0x229)])return log(_0x5f0a4b,_0x1eed09(0x221)+_0x59c715+_0x1eed09(0x1ef),null,![]),null;else return _0x337fa1[_0x1eed09(0x229)]===_0x1eed09(0x26f)?(log(_0x5f0a4b,_0x1eed09(0x253)+_0x59c715+_0x1eed09(0x2b3),null,'i'),_0x337fa1):(log(_0x5f0a4b,'[loadGame]:\x20Chạy\x20'+_0x59c715+'\x20'+_0x337fa1[_0x1eed09(0x229)],null,'i'),_0x337fa1);}else return await delay(0x3e8),log(_0x5f0a4b,'[loadGame]:\x20Script\x20'+_0x59c715+_0x1eed09(0x25a),null,![]),null;}catch(_0x5b5de2){return log(_0x5f0a4b,_0x1eed09(0x287)+_0x59c715+':\x20'+_0x5b5de2,null,![]),teleId&&await http['tele'](_0x5f0a4b,teleId,'['+_0x5f0a4b+']['+_0x59c715+_0x1eed09(0x259)+_0x5b5de2),null;}}async function closeBrowser(_0x58338='',_0x205330){const _0x31ac34=a0_0x5be02d;try{if(_0x205330){if(_0x205330['connected']){for(const _0x13c0d4 of await _0x205330[_0x31ac34(0x22b)]()){await _0x13c0d4[_0x31ac34(0x244)]();}return await _0x205330[_0x31ac34(0x244)](),_0x205330=null,global['gc']&&(global['gc'](),log(_0x31ac34(0x211),_0x31ac34(0x2a5),null,'i','+')),log(_0x58338,_0x31ac34(0x203)+_0x58338+_0x31ac34(0x298),null,'w'),!![];}}else log(_0x58338,_0x31ac34(0x24c),null,'i');return null;}catch(_0x46a549){return log(_0x58338,_0x31ac34(0x272)+_0x58338+':\x20'+_0x46a549,null,![]),null;}}async function procScreenArr(_0x54adc9,_0x35b6d9,_0x230d08){const _0x1767bf=a0_0x5be02d;try{await acquireLock(screenData);let _0x505420={};log(_0x230d08,_0x1767bf(0x1f5)+_0x54adc9+_0x1767bf(0x1eb)+json(_0x35b6d9),null,'w','-');if(_0x54adc9===_0x1767bf(0x1ee)){log(_0x230d08,_0x1767bf(0x212),null,'w'),_0x505420['scale']=Atomics[_0x1767bf(0x200)](screenData,0x1)/0xf4240,_0x505420[_0x1767bf(0x28a)]=Atomics[_0x1767bf(0x200)](screenData,0x2),_0x505420[_0x1767bf(0x227)]=Atomics[_0x1767bf(0x200)](screenData,0x3);for(let _0x3e795d=0xa;_0x3e795d<screenData['length']-0x1;_0x3e795d=_0x3e795d+0x3){const _0x479716=Atomics[_0x1767bf(0x200)](screenData,_0x3e795d);if(_0x479716===0x2)return Atomics[_0x1767bf(0x220)](screenData,_0x3e795d,0x1),_0x505420['default']=0x0,_0x505420['x']=Atomics[_0x1767bf(0x200)](screenData,_0x3e795d+0x1),_0x505420['y']=Atomics[_0x1767bf(0x200)](screenData,_0x3e795d+0x2),log(_0x230d08,_0x1767bf(0x1f1)+_0x3e795d+_0x1767bf(0x222)+json(_0x505420),null,'w'),await releaseLock(screenData),_0x505420;if(_0x479716===0x0)return Atomics['store'](screenData,_0x3e795d,0x1),_0x505420[_0x1767bf(0x25c)]=0x1,_0x505420['x']=0x0,_0x505420['y']=0x0,log(_0x230d08,'[worker1.procScreenArr]\x20index:'+_0x3e795d+_0x1767bf(0x2aa)+json(_0x505420),null,'w'),await releaseLock(screenData),_0x505420;}await releaseLock(screenData);throw new Error(_0x1767bf(0x214));}else{if(_0x54adc9===_0x1767bf(0x244)&&_0x35b6d9['x']>=0x0&&_0x35b6d9['y']>=0x0){log(_0x230d08,_0x1767bf(0x295),null,'w');if(_0x35b6d9[_0x1767bf(0x25c)]===0x1)return log(_0x230d08,_0x1767bf(0x2ac),null,'w'),await releaseLock(screenData),!![];for(let _0x430602=0xa;_0x430602<screenData[_0x1767bf(0x21d)]-0x1;_0x430602+=0x3){const _0x40e207=Atomics[_0x1767bf(0x200)](screenData,_0x430602);if(_0x40e207===0x1){const _0xc50bbc=Atomics[_0x1767bf(0x200)](screenData,_0x430602+0x1),_0x5010fa=Atomics[_0x1767bf(0x200)](screenData,_0x430602+0x2);if(_0xc50bbc===_0x35b6d9['x']&&_0x5010fa===_0x35b6d9['y'])return Atomics[_0x1767bf(0x220)](screenData,_0x430602,0x2),log(_0x230d08,_0x1767bf(0x1f1)+_0x430602+_0x1767bf(0x29f),null,'w'),Atomics[_0x1767bf(0x238)](screenData,_0x430602),await releaseLock(screenData),!![];}}await releaseLock(screenData);throw new Error(_0x1767bf(0x252)+_0x54adc9+_0x1767bf(0x1eb)+json(_0x35b6d9));}else return log(_0x230d08,_0x1767bf(0x217)+json(_0x35b6d9)+_0x1767bf(0x245)+_0x54adc9,null,'w'),await releaseLock(screenData),!![];}}catch(_0x4dc17d){return log(_0x230d08,_0x1767bf(0x23a)+_0x4dc17d+_0x1767bf(0x23d)+_0x54adc9+_0x1767bf(0x1eb)+json(_0x35b6d9),null,![]),await releaseLock(screenData),![];}}async function acquireLock(_0x2d43af,_0x1a24e2=0x7530){const _0x492827=a0_0x5be02d,_0x45da42=Date[_0x492827(0x1ff)]();while(Atomics[_0x492827(0x236)](_0x2d43af,0x8,0x0,0x1)!==0x0){if(Date[_0x492827(0x1ff)]()-_0x45da42>_0x1a24e2)throw new Error('Timeout\x20while\x20acquiring\x20lock');Atomics[_0x492827(0x21c)](_0x2d43af,0x8,0x1,_0x1a24e2);}}async function releaseLock(_0x5d0507){const _0x546177=a0_0x5be02d;Atomics[_0x546177(0x220)](_0x5d0507,0x8,0x0),Atomics[_0x546177(0x238)](_0x5d0507,0x8);}async function xoaTimeout(_0x4f5d9e){const _0x45ebbe=a0_0x5be02d;try{clearTimeout(_0x4f5d9e),log(_0x45ebbe(0x260)+_0x4f5d9e,null,'i',_0x45ebbe(0x231));}catch(_0xf800c3){log('[xoaTimeout]worker1:\x20'+_0xf800c3,null,![]);}}async function xoaInterval(_0x36149a){const _0x45dddc=a0_0x5be02d;try{clearInterval(_0x36149a),log('[xoaTimeout]worker1:\x20Xóa\x20Interval:'+_0x36149a,null,'i',_0x45dddc(0x21a));}catch(_0x5b6fb7){log(_0x45dddc(0x1f6)+_0x5b6fb7,null,![]);}}async function delay(_0x372a94){return new Promise(async _0x177b9d=>{setTimeout(_0x177b9d,_0x372a94);});}async function eTimeout(){const _0x48c79a=a0_0x5be02d;return log('[eTimeout]worker1:\x20timeout',null,'w'),Atomics['store'](tasksData,taskInfo[_0x48c79a(0x1f8)],0x1),!![];}async function cTimeout(){const _0x2d2912=a0_0x5be02d;if(Atomics[_0x2d2912(0x200)](tasksData,taskInfo[_0x2d2912(0x1f8)])===0x1)return!![];return null;}async function rstTimeout(){const _0xf0751a=a0_0x5be02d;return log(_0xf0751a(0x271),null,'w'),Atomics[_0xf0751a(0x236)](tasksData,taskInfo['taskIndex'],0x1,0x2),!![];}
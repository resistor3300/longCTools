const a30_0x15d310=a30_0x129d;(function(_0x381c26,_0x15e2b6){const _0x13ebfc=a30_0x129d,_0x89cf79=_0x381c26();while(!![]){try{const _0x5e0be5=parseInt(_0x13ebfc(0xa3))/0x1*(parseInt(_0x13ebfc(0x9a))/0x2)+-parseInt(_0x13ebfc(0x85))/0x3*(-parseInt(_0x13ebfc(0xc4))/0x4)+parseInt(_0x13ebfc(0xdb))/0x5+-parseInt(_0x13ebfc(0xae))/0x6+-parseInt(_0x13ebfc(0x9f))/0x7*(-parseInt(_0x13ebfc(0x8d))/0x8)+-parseInt(_0x13ebfc(0xad))/0x9*(-parseInt(_0x13ebfc(0xd0))/0xa)+-parseInt(_0x13ebfc(0xb7))/0xb;if(_0x5e0be5===_0x15e2b6)break;else _0x89cf79['push'](_0x89cf79['shift']());}catch(_0x2fbcc6){_0x89cf79['push'](_0x89cf79['shift']());}}}(a30_0x194e,0x5b804),require(a30_0x15d310(0xd2))[a30_0x15d310(0x98)]());const {Worker,parentPort}=require(a30_0x15d310(0xc8)),{log,json}=require(a30_0x15d310(0xda)),Genlogin=require(a30_0x15d310(0xaf)),httpPost=require(a30_0x15d310(0x84)),path=require(a30_0x15d310(0xd9)),PQueue=require(a30_0x15d310(0xac))[a30_0x15d310(0x94)];let genlogin,profileNameId,profileId,browser,dataId;const timGame=!![];genlogin=new Genlogin('',!![]);const http=new httpPost(process[a30_0x15d310(0x8c)]['SERVER_HOST'],process[a30_0x15d310(0x8c)][a30_0x15d310(0xc0)],!![]);let signal={'aborted':![]},firstRun=!![],maxBotThreads=0x1;function a30_0x194e(){const _0x2c0d13=['loop','length','11545072jZooKL','updateData','running','[worker-api2]:\x20Max\x20Bot\x20threads:\x20','[xuLyBrowser]:\x20','[loadGameApi]:\x20Lỗi\x20khi\x20load\x20và\x20thực\x20thi\x20script\x20','\x20done','[xuLyGame]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20Bot:\x20','[worker-api2]:timeout','APIKEY','nextRunTime','nextRun','\x20đã\x20bị\x20hủy','4cfYMIM','aks','function','stringify','worker_threads','\x20vào\x20hàng\x20đợi\x20max:','addData','getBotAll','join','Fail','date','[xuLyBrowser]:\x20Bot\x20không\x20tìm\x20thấy','255900JhVaYL','coin','dotenv','add','push','message','[xuLyProfile]:đã\x20bị\x20hủy','[xuLyGame]:\x20','toolApi','path','./modules/logger','253795RPrWDQ','[xuLyBrowser]:\x20Đã\x20thêm\x20profile\x20','No\x20bot\x20found','[xuLyGame]:\x20Thực\x20thi\x20','./modules/http','698391rNhFMf','\x20có\x20lỗi','name','Done','\x20Chưa\x20tới\x20giờ\x20chạy','aborted','\x20không\x20phải\x20là\x20một\x20hàm\x20hợp\x20lệ','env','19352YyLBvm','[xuLyProfile]:\x20Xử\x20lý\x20profile\x20','end',']:\x20XONG\x201\x20LƯỢT','onOff','type','[xuLyBrowser]:đã\x20bị\x20hủy','default','api','[loadGameApi]:\x20Chạy\x20','status','config','nextRunStamp','76426CWkZhY','[xuLyBrowser]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20browser:\x20','\x20lỗi','nowTime','[xuLyProfile]:\x20Xử\x20lý\x20browser\x20','1351LMPLKg','timestamp','[xuLyBrowser]:\x20Đã\x20xử\x20lý\x20tất\x20cả\x20bots\x20thành\x20công','[xuLyBrowser]:\x20Bot\x20','14mkSfdf','\x20OFF',']:\x20Bot\x20','all','Lỗi\x20xử\x20lý\x20profile:\x20','value','\x20loop','postMessage','\x20thành\x20công','p-queue','162RqVwnC','1930110usWyrE','./modules/Genlogin','.js','[xuLyBrowser]:\x20Thêm\x20Bot\x20','\x20Api\x20mode','\x20thất\x20bại','timeout'];a30_0x194e=function(){return _0x2c0d13;};return a30_0x194e();}parentPort['on'](a30_0x15d310(0xd5),async _0x5186e5=>{const _0x5d7b77=a30_0x15d310,{profile:_0x4007fb,maxBot:_0xa9e20d}=_0x5186e5;try{if(_0x4007fb=='timeout')signal['aborted']=!![],log(_0x5d7b77(0xbf),null,'w');else{firstRun&&(firstRun=![],maxBotThreads=parseInt(_0xa9e20d),botQueue=new PQueue({'concurrency':maxBotThreads}),log(_0x5d7b77(0xba)+maxBotThreads,null,'w'));if(signal[_0x5d7b77(0x8a)])throw new Error(_0x5d7b77(0xb4));log('[\x27worker-api2]['+_0x4007fb+']:\x20Api\x20Mode',null,'w');const _0x1ac74e=await xuLyProfile(_0x4007fb);!_0x1ac74e?(log(_0x5d7b77(0x8e)+_0x4007fb+_0x5d7b77(0x86),null,'w'),parentPort['postMessage']({'success':![],'result':_0x1ac74e})):(log(_0x5d7b77(0x8e)+_0x4007fb+_0x5d7b77(0xab),null,'i'),parentPort[_0x5d7b77(0xaa)]({'success':!![],'result':_0x1ac74e}));}}catch(_0x468e6d){parentPort[_0x5d7b77(0xaa)]({'success':![],'error':{'message':_0x468e6d['message'],'stack':_0x468e6d['stack']}});}});async function xuLyProfile(_0x52e145){const _0x23070d=a30_0x15d310;try{if(signal[_0x23070d(0x8a)]){log(_0x23070d(0xd6),null,'w');throw new Error(_0x23070d(0xb4));}profileNameId=_0x52e145,log('[xuLyProfile]:\x20Processing\x20profile:\x20'+JSON[_0x23070d(0xc7)](_0x52e145),null,'i');const _0x2ac42c=await xuLyBrowser(_0x52e145);return!_0x2ac42c?(log(_0x23070d(0x9e)+_0x52e145+_0x23070d(0xb3),null,'w'),null):(log(_0x23070d(0x9e)+_0x52e145+'\x20thành\x20công'),!![]);}catch(_0x51e8bd){throw new Error(_0x23070d(0xa7)+_0x51e8bd[_0x23070d(0xd5)]);}}async function xuLyBrowser(_0x13647a){const _0x643634=a30_0x15d310;try{if(signal[_0x643634(0x8a)]){log(_0x643634(0x93),null,'w');throw new Error('timeout');}let _0x20fbeb=0x0;const _0x85d65b=await http[_0x643634(0xcb)](profileNameId);if(!_0x85d65b){log(_0x643634(0xcf),null,![]);throw new Error(_0x643634(0x82));}if(_0x85d65b[_0x643634(0xb6)]<=0x0){log('[xuLyBrowser]:\x20không\x20lấy\x20được\x20bot',null,![]);throw new Error(_0x643634(0x82));}const _0x1f6eb6=[];for(const _0x23696d of _0x85d65b){if(!_0x23696d)continue;if(_0x23696d[_0x643634(0x92)]!=_0x643634(0x95))continue;if(signal[_0x643634(0x8a)]){log(_0x643634(0xa2)+_0x23696d[_0x643634(0x87)]+_0x643634(0xc3),null,'w');throw new Error(_0x643634(0xb4));}if(_0x23696d[_0x643634(0xa8)]===_0x643634(0x8f)){log('['+profileNameId+_0x643634(0x90),null,'i');break;}if(_0x23696d[_0x643634(0x91)]==='0'){log('['+profileNameId+_0x643634(0xa5)+json(_0x23696d['name'])+_0x643634(0xa4),null,![]);continue;}if(!_0x23696d[_0x643634(0xc5)]){log('['+profileNameId+_0x643634(0xa5)+json(_0x23696d)+'\x20ko\x20có\x20aks',null,![]);continue;}const _0x2d053c=await genlogin[_0x643634(0x9d)]();if(_0x23696d['nextRunStamp']>_0x2d053c[_0x643634(0xa0)]){log('['+profileNameId+']:\x20Bot\x20'+json(_0x23696d[_0x643634(0x87)])+_0x643634(0x89),null,'w');continue;}log(_0x643634(0xb1)+_0x23696d[_0x643634(0x87)]+_0x643634(0xc9)+maxBotThreads,null,'i'),_0x1f6eb6[_0x643634(0xd4)](botQueue[_0x643634(0xd3)](()=>xuLyGame(_0x23696d,_0x23696d[_0x643634(0xc5)]))),log(_0x643634(0xdc)+_0x23696d[_0x643634(0x87)]+'\x20vào\x20hàng\x20đợi.'),await delay(0x3e8);}return await Promise[_0x643634(0xa6)](_0x1f6eb6),log(_0x643634(0xa1)),!![];}catch(_0x369e59){return log(_0x643634(0x9b)+_0x369e59,null,![]),log(_0x643634(0xbb)+json(bots),null,![]),null;}}async function xuLyGame(_0x4ad79a,_0x352d08){const _0xc5f7ce=a30_0x15d310;try{if(signal[_0xc5f7ce(0x8a)]){log('[xuLyGame]:đã\x20bị\x20hủy',null,'w');throw new Error(_0xc5f7ce(0xb4));}if(_0x4ad79a[_0xc5f7ce(0x92)]===_0xc5f7ce(0x95)){log(_0xc5f7ce(0xd7)+_0x4ad79a[_0xc5f7ce(0x87)]+_0xc5f7ce(0xb2),null,'i');const _0x555e4e=await genlogin[_0xc5f7ce(0x9d)](),_0xd336e8=await http[_0xc5f7ce(0xca)](profileNameId,_0x4ad79a['name'],_0x555e4e[_0xc5f7ce(0xce)],'','StartApi',_0xc5f7ce(0xb9)),_0x5c50cf=_0xd336e8['ID'],_0x13f8ce={'bot':_0x4ad79a,'profileNameId':profileNameId,'genlogin':genlogin,'http':http,'dataId':_0x5c50cf},_0x3d9836=await loadGameApi(_0x4ad79a['name'],_0x13f8ce);if(!_0x3d9836[_0xc5f7ce(0x97)])return log(_0xc5f7ce(0x83)+_0x4ad79a[_0xc5f7ce(0x87)]+_0xc5f7ce(0x9c),null,![]),await http[_0xc5f7ce(0xb8)](profileNameId,_0x5c50cf,_0xc5f7ce(0xcd),_0xc5f7ce(0xcd)),null;if(_0x3d9836[_0xc5f7ce(0x97)]==_0xc5f7ce(0xb5))return log(_0xc5f7ce(0x83)+_0x4ad79a[_0xc5f7ce(0x87)]+'\x20loop',null,'i'),await http[_0xc5f7ce(0xb8)](profileNameId,_0x5c50cf,_0xc5f7ce(0xb5),'loop'),_0xc5f7ce(0xb5);if(_0x3d9836[_0xc5f7ce(0x97)])return log(_0xc5f7ce(0x83)+_0x4ad79a[_0xc5f7ce(0x87)]+_0xc5f7ce(0xbd)),await http[_0xc5f7ce(0xc1)](profileNameId,_0x4ad79a['id'],_0x3d9836[_0xc5f7ce(0xc2)],_0x3d9836[_0xc5f7ce(0x99)]),await http[_0xc5f7ce(0xb8)](profileNameId,_0x5c50cf,'Ok',_0xc5f7ce(0x88),_0x3d9836[_0xc5f7ce(0xd1)],_0x3d9836['nextRun']),!![];}return null;}catch(_0x530e99){return log(_0xc5f7ce(0xbe)+_0x530e99,null,![]),null;}}async function loadGameApi(_0x1473bc,_0x4eb90d){const _0x1cdf7c=a30_0x15d310;try{const _0x11be23=path[_0x1cdf7c(0xcc)](__dirname,_0x1cdf7c(0xd8),_0x1473bc+_0x1cdf7c(0xb0)),_0x50e1ee=require(_0x11be23);if(typeof _0x50e1ee===_0x1cdf7c(0xc6)){const _0x3aa1fc=await _0x50e1ee(_0x4eb90d);return await delay(0x3e8),_0x3aa1fc['status']===_0x1cdf7c(0xb5)?(log(_0x1cdf7c(0x96)+_0x1473bc+_0x1cdf7c(0xa9)),_0x3aa1fc):(log(_0x1cdf7c(0x96)+_0x1473bc+'\x20'+_0x3aa1fc[_0x1cdf7c(0x97)]),_0x3aa1fc);}else return await delay(0x3e8),log('[loadGameApi]:\x20Script\x20'+_0x1473bc+_0x1cdf7c(0x8b)),null;}catch(_0x1766a9){return log(_0x1cdf7c(0xbc)+_0x1473bc+':\x20'+_0x1766a9,![]),null;}}function a30_0x129d(_0x48df31,_0x22e063){const _0x194ef1=a30_0x194e();return a30_0x129d=function(_0x129d7a,_0x217cf6){_0x129d7a=_0x129d7a-0x82;let _0x53f5c4=_0x194ef1[_0x129d7a];return _0x53f5c4;},a30_0x129d(_0x48df31,_0x22e063);}async function delay(_0x43f3e2){return new Promise(_0x29dd3c=>{const _0x471734=a30_0x129d;if(signal[_0x471734(0x8a)])throw new Error('timeout');setTimeout(_0x29dd3c,_0x43f3e2);});}
const a30_0x214606=a30_0x192c;(function(_0x1ecf24,_0x13c934){const _0x214eea=a30_0x192c,_0x17c2d2=_0x1ecf24();while(!![]){try{const _0x449fbe=parseInt(_0x214eea(0x18d))/0x1*(parseInt(_0x214eea(0x1a9))/0x2)+parseInt(_0x214eea(0x169))/0x3+parseInt(_0x214eea(0x19b))/0x4*(-parseInt(_0x214eea(0x18e))/0x5)+parseInt(_0x214eea(0x1a2))/0x6*(-parseInt(_0x214eea(0x1b4))/0x7)+-parseInt(_0x214eea(0x19d))/0x8+-parseInt(_0x214eea(0x19c))/0x9*(-parseInt(_0x214eea(0x190))/0xa)+parseInt(_0x214eea(0x170))/0xb;if(_0x449fbe===_0x13c934)break;else _0x17c2d2['push'](_0x17c2d2['shift']());}catch(_0x2aba8b){_0x17c2d2['push'](_0x17c2d2['shift']());}}}(a30_0x51b2,0x48fe1),require(a30_0x214606(0x1b1))[a30_0x214606(0x179)]());const {Worker,parentPort}=require(a30_0x214606(0x17f)),{log,json}=require(a30_0x214606(0x1a4)),Genlogin=require(a30_0x214606(0x194)),httpPost=require(a30_0x214606(0x174)),path=require(a30_0x214606(0x1a3)),PQueue=require(a30_0x214606(0x19e))[a30_0x214606(0x192)];let genlogin,profileNameId,profileId,browser,dataId;const timGame=!![];genlogin=new Genlogin('',!![]);const http=new httpPost(process[a30_0x214606(0x16d)]['SERVER_HOST'],process[a30_0x214606(0x16d)][a30_0x214606(0x181)],!![]);let signal={'aborted':![]},firstRun=!![],maxBotThreads=0x1;parentPort['on'](a30_0x214606(0x1a5),async _0x2b57f4=>{const _0xf59425=a30_0x214606,{profile:_0x234ea8,maxBot:_0x49a048}=_0x2b57f4;try{if(_0x234ea8==_0xf59425(0x1af))signal[_0xf59425(0x1aa)]=!![],log(_0xf59425(0x17b),null,'w');else{firstRun&&(firstRun=![],maxBotThreads=parseInt(_0x49a048),botQueue=new PQueue({'concurrency':maxBotThreads}),log('[worker-api2]:\x20Max\x20Bot\x20threads:\x20'+maxBotThreads,null,'w'));if(signal[_0xf59425(0x1aa)])throw new Error(_0xf59425(0x1af));log(_0xf59425(0x16a)+_0x234ea8+_0xf59425(0x1b6),null,'w');const _0x16661e=await xuLyProfile(_0x234ea8);!_0x16661e?(log('[xuLyProfile]:\x20Xử\x20lý\x20profile\x20'+_0x234ea8+_0xf59425(0x172),null,'w'),parentPort['postMessage']({'success':![],'result':_0x16661e})):(log(_0xf59425(0x167)+_0x234ea8+'\x20thành\x20công',null,'i'),parentPort['postMessage']({'success':!![],'result':_0x16661e}));}}catch(_0x5202ce){parentPort[_0xf59425(0x185)]({'success':![],'error':{'message':_0x5202ce[_0xf59425(0x1a5)],'stack':_0x5202ce[_0xf59425(0x188)]}});}});async function xuLyProfile(_0x1559a8){const _0x2ad2b2=a30_0x214606;try{if(signal[_0x2ad2b2(0x1aa)]){log(_0x2ad2b2(0x16b),null,'w');throw new Error('timeout');}profileNameId=_0x1559a8,log(_0x2ad2b2(0x1b2)+JSON[_0x2ad2b2(0x195)](_0x1559a8),null,'i');const _0xb17e3d=await xuLyBrowser(_0x1559a8);return!_0xb17e3d?(log(_0x2ad2b2(0x1a1)+_0x1559a8+_0x2ad2b2(0x1a8),null,'w'),null):(log('[xuLyProfile]:\x20Xử\x20lý\x20browser\x20'+_0x1559a8+'\x20thành\x20công'),!![]);}catch(_0x55dac1){throw new Error('Lỗi\x20xử\x20lý\x20profile:\x20'+_0x55dac1[_0x2ad2b2(0x1a5)]);}}function a30_0x51b2(){const _0x190f66=['api',']:\x20Api\x20Mode','[xuLyProfile]:\x20Xử\x20lý\x20profile\x20','\x20ko\x20có\x20aks','1397559DeOrAc','[\x27worker-api2][','[xuLyProfile]:đã\x20bị\x20hủy','all','env','.js','[loadGameApi]:\x20Script\x20','6765462vtXRfk','\x20vào\x20hàng\x20đợi.','\x20có\x20lỗi','\x20loop','./modules/http','aks','\x20không\x20phải\x20là\x20một\x20hàm\x20hợp\x20lệ','nextRunStamp','add','config','[xuLyBrowser]:\x20','[worker-api2]:timeout','\x20OFF','[loadGameApi]:\x20Lỗi\x20khi\x20load\x20và\x20thực\x20thi\x20script\x20','\x20vào\x20hàng\x20đợi\x20max:','worker_threads','updateData','APIKEY','length','coin','status','postMessage','\x20đã\x20bị\x20hủy','nextRunTime','stack','function','Fail','StartApi','loop','359555mggJFy','185RMtldA','\x20done','19150VkViwC','[xuLyBrowser]:\x20Đã\x20thêm\x20profile\x20','default',']:\x20XONG\x201\x20LƯỢT','./modules/Genlogin','stringify','type','name','[loadGameApi]:\x20Chạy\x20','[xuLyGame]:đã\x20bị\x20hủy','[xuLyBrowser]:\x20Đã\x20xử\x20lý\x20tất\x20cả\x20bots\x20thành\x20công','34836wPfbtM','1395vPUQZR','4236960xUBRBc','p-queue','nextRun','[xuLyGame]:\x20Thực\x20thi\x20','[xuLyProfile]:\x20Xử\x20lý\x20browser\x20','13278eMSLrE','path','./modules/logger','message','[xuLyBrowser]:đã\x20bị\x20hủy','[xuLyBrowser]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20browser:\x20','\x20thất\x20bại','2SkGiVs','aborted','join','No\x20bot\x20found','end','[xuLyBrowser]:\x20không\x20lấy\x20được\x20bot','timeout',']:\x20Bot\x20','dotenv','[xuLyProfile]:\x20Processing\x20profile:\x20','onOff','1855pHoyzU'];a30_0x51b2=function(){return _0x190f66;};return a30_0x51b2();}async function xuLyBrowser(_0x1550f9){const _0x29474f=a30_0x214606;try{if(signal[_0x29474f(0x1aa)]){log(_0x29474f(0x1a6),null,'w');throw new Error(_0x29474f(0x1af));}let _0x1faa5b=0x0;const _0x617997=await http['getBotAll'](profileNameId);if(!_0x617997){log('[xuLyBrowser]:\x20Bot\x20không\x20tìm\x20thấy',null,![]);throw new Error(_0x29474f(0x1ac));}if(_0x617997[_0x29474f(0x182)]<=0x0){log(_0x29474f(0x1ae),null,![]);throw new Error('No\x20bot\x20found');}const _0x6ebaa6=[];for(const _0x15f664 of _0x617997){if(!_0x15f664)continue;if(_0x15f664['type']!=_0x29474f(0x1b5))continue;if(signal[_0x29474f(0x1aa)]){log('[xuLyBrowser]:\x20Bot\x20'+_0x15f664[_0x29474f(0x197)]+_0x29474f(0x186),null,'w');throw new Error('timeout');}if(_0x15f664['value']===_0x29474f(0x1ad)){log('['+profileNameId+_0x29474f(0x193),null,'i');break;}if(_0x15f664[_0x29474f(0x1b3)]==='0'){log('['+profileNameId+_0x29474f(0x1b0)+json(_0x15f664['name'])+_0x29474f(0x17c),null,![]);continue;}if(!_0x15f664[_0x29474f(0x175)]){log('['+profileNameId+_0x29474f(0x1b0)+json(_0x15f664)+_0x29474f(0x168),null,![]);continue;}const _0x58fff7=await genlogin['nowTime']();if(_0x15f664[_0x29474f(0x177)]>_0x58fff7['timestamp']){log('['+profileNameId+_0x29474f(0x1b0)+json(_0x15f664['name'])+'\x20Chưa\x20tới\x20giờ\x20chạy',null,'w');continue;}log('[xuLyBrowser]:\x20Thêm\x20Bot\x20'+_0x15f664['name']+_0x29474f(0x17e)+maxBotThreads,null,'i'),_0x6ebaa6['push'](botQueue[_0x29474f(0x178)](()=>xuLyGame(_0x15f664,_0x15f664[_0x29474f(0x175)]))),log(_0x29474f(0x191)+_0x15f664[_0x29474f(0x197)]+_0x29474f(0x171)),await delay(0x3e8);}return await Promise[_0x29474f(0x16c)](_0x6ebaa6),log(_0x29474f(0x19a)),!![];}catch(_0x1bdc3d){return log(_0x29474f(0x1a7)+_0x1bdc3d,null,![]),log(_0x29474f(0x17a)+json(bots),null,![]),null;}}async function xuLyGame(_0x8ecb16,_0x2d40bb){const _0x44cb3b=a30_0x214606;try{if(signal['aborted']){log(_0x44cb3b(0x199),null,'w');throw new Error(_0x44cb3b(0x1af));}if(_0x8ecb16[_0x44cb3b(0x196)]===_0x44cb3b(0x1b5)){log('[xuLyGame]:\x20'+_0x8ecb16[_0x44cb3b(0x197)]+'\x20Api\x20mode',null,'i');const _0x44e314=await genlogin['nowTime'](),_0x5ad597=await http['addData'](profileNameId,_0x8ecb16[_0x44cb3b(0x197)],_0x44e314['date'],'',_0x44cb3b(0x18b),'running'),_0x65894a=_0x5ad597['ID'],_0x533a2a={'bot':_0x8ecb16,'profileNameId':profileNameId,'genlogin':genlogin,'http':http,'dataId':_0x65894a},_0x5f13ab=await loadGameApi(_0x8ecb16[_0x44cb3b(0x197)],_0x533a2a);if(!_0x5f13ab[_0x44cb3b(0x184)])return log(_0x44cb3b(0x1a0)+_0x8ecb16['name']+'\x20lỗi',null,![]),await http[_0x44cb3b(0x180)](profileNameId,_0x65894a,_0x44cb3b(0x18a),_0x44cb3b(0x18a)),null;if(_0x5f13ab[_0x44cb3b(0x184)]=='loop')return log('[xuLyGame]:\x20Thực\x20thi\x20'+_0x8ecb16['name']+_0x44cb3b(0x173),null,'i'),await http[_0x44cb3b(0x180)](profileNameId,_0x65894a,_0x44cb3b(0x18c),'loop'),_0x44cb3b(0x18c);if(_0x5f13ab[_0x44cb3b(0x184)])return log(_0x44cb3b(0x1a0)+_0x8ecb16[_0x44cb3b(0x197)]+_0x44cb3b(0x18f)),await http[_0x44cb3b(0x187)](profileNameId,_0x8ecb16['id'],_0x5f13ab[_0x44cb3b(0x19f)],_0x5f13ab['nextRunStamp']),await http[_0x44cb3b(0x180)](profileNameId,_0x65894a,'Ok','Done',_0x5f13ab[_0x44cb3b(0x183)],_0x5f13ab['nextRun']),!![];}return null;}catch(_0x3196cf){return log('[xuLyGame]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20Bot:\x20'+_0x3196cf,null,![]),null;}}function a30_0x192c(_0x28c6e8,_0x5c134d){const _0x51b2e5=a30_0x51b2();return a30_0x192c=function(_0x192c73,_0x4ca158){_0x192c73=_0x192c73-0x167;let _0x57db64=_0x51b2e5[_0x192c73];return _0x57db64;},a30_0x192c(_0x28c6e8,_0x5c134d);}async function loadGameApi(_0x1335aa,_0x562488){const _0x4aeee1=a30_0x214606;try{const _0x203e40=path[_0x4aeee1(0x1ab)](__dirname,'toolApi',_0x1335aa+_0x4aeee1(0x16e)),_0x4f8b60=require(_0x203e40);if(typeof _0x4f8b60===_0x4aeee1(0x189)){const _0x35edc3=await _0x4f8b60(_0x562488);return await delay(0x3e8),_0x35edc3[_0x4aeee1(0x184)]==='loop'?(log('[loadGameApi]:\x20Chạy\x20'+_0x1335aa+_0x4aeee1(0x173)),_0x35edc3):(log(_0x4aeee1(0x198)+_0x1335aa+'\x20'+_0x35edc3[_0x4aeee1(0x184)]),_0x35edc3);}else return await delay(0x3e8),log(_0x4aeee1(0x16f)+_0x1335aa+_0x4aeee1(0x176)),null;}catch(_0x113721){return log(_0x4aeee1(0x17d)+_0x1335aa+':\x20'+_0x113721,![]),null;}}async function delay(_0x4a9e62){return new Promise(_0x413998=>{const _0x1e97d8=a30_0x192c;if(signal[_0x1e97d8(0x1aa)])throw new Error(_0x1e97d8(0x1af));setTimeout(_0x413998,_0x4a9e62);});}
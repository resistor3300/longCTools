const a30_0x4a9a33=a30_0x3cb7;(function(_0x1bd7d2,_0x4e9f07){const _0xfefac3=a30_0x3cb7,_0xd7e9bd=_0x1bd7d2();while(!![]){try{const _0x59b3df=parseInt(_0xfefac3(0x1b5))/0x1*(parseInt(_0xfefac3(0x1ce))/0x2)+parseInt(_0xfefac3(0x1ae))/0x3*(-parseInt(_0xfefac3(0x1ea))/0x4)+-parseInt(_0xfefac3(0x1fc))/0x5*(-parseInt(_0xfefac3(0x1e9))/0x6)+parseInt(_0xfefac3(0x1b7))/0x7+-parseInt(_0xfefac3(0x1dc))/0x8+-parseInt(_0xfefac3(0x1cb))/0x9+parseInt(_0xfefac3(0x1fb))/0xa;if(_0x59b3df===_0x4e9f07)break;else _0xd7e9bd['push'](_0xd7e9bd['shift']());}catch(_0x5c68d8){_0xd7e9bd['push'](_0xd7e9bd['shift']());}}}(a30_0x1d92,0xe594b),require(a30_0x4a9a33(0x1de))['config']());const {Worker,parentPort}=require(a30_0x4a9a33(0x1b0)),{log,json}=require(a30_0x4a9a33(0x1c8)),Genlogin=require(a30_0x4a9a33(0x1c4)),httpPost=require('./modules/http'),path=require(a30_0x4a9a33(0x1f4)),PQueue=require(a30_0x4a9a33(0x1d9))[a30_0x4a9a33(0x1e7)];let genlogin,profileNameId,profileId,browser,dataId;const timGame=!![];genlogin=new Genlogin('',!![]);const http=new httpPost(process[a30_0x4a9a33(0x1ec)][a30_0x4a9a33(0x1af)],process[a30_0x4a9a33(0x1ec)][a30_0x4a9a33(0x1f6)],!![]);let signal={'aborted':![]},firstRun=!![],maxBotThreads=0x1;parentPort['on'](a30_0x4a9a33(0x1f2),async _0x4c692a=>{const _0x1cc0e5=a30_0x4a9a33,{profile:_0x5792bb,maxBot:_0x6a1e13}=_0x4c692a;try{if(_0x5792bb=='timeout')signal['aborted']=!![],log('[worker-api2]:timeout',null,'w');else{firstRun&&(firstRun=![],maxBotThreads=parseInt(_0x6a1e13),botQueue=new PQueue({'concurrency':maxBotThreads}),log(_0x1cc0e5(0x1c5)+maxBotThreads,null,'w'));if(signal[_0x1cc0e5(0x1ef)])throw new Error(_0x1cc0e5(0x1cc));log(_0x1cc0e5(0x1e6)+_0x5792bb+_0x1cc0e5(0x1f5),null,'w');const _0x27a52e=await xuLyProfile(_0x5792bb);!_0x27a52e?(log(_0x1cc0e5(0x1ee)+_0x5792bb+_0x1cc0e5(0x1e4),null,'w'),parentPort['postMessage']({'success':![],'result':_0x27a52e})):(log(_0x1cc0e5(0x1ee)+_0x5792bb+_0x1cc0e5(0x1f7),null,'i'),parentPort[_0x1cc0e5(0x1c0)]({'success':!![],'result':_0x27a52e}));}}catch(_0x13ee54){parentPort[_0x1cc0e5(0x1c0)]({'success':![],'error':{'message':_0x13ee54['message'],'stack':_0x13ee54[_0x1cc0e5(0x1da)]}});}});function a30_0x3cb7(_0x2737ac,_0x10857d){const _0x1d92b9=a30_0x1d92();return a30_0x3cb7=function(_0x3cb74c,_0x4a669d){_0x3cb74c=_0x3cb74c-0x1ab;let _0x52e161=_0x1d92b9[_0x3cb74c];return _0x52e161;},a30_0x3cb7(_0x2737ac,_0x10857d);}async function xuLyProfile(_0x125de9){const _0x12dbdf=a30_0x4a9a33;try{if(signal['aborted']){log('[xuLyProfile]:đã\x20bị\x20hủy',null,'w');throw new Error(_0x12dbdf(0x1cc));}profileNameId=_0x125de9,log(_0x12dbdf(0x1ac)+JSON[_0x12dbdf(0x1d6)](_0x125de9),null,'i');const _0x42bb22=await xuLyBrowser(_0x125de9);return!_0x42bb22?(log(_0x12dbdf(0x1bf)+_0x125de9+_0x12dbdf(0x1e5),null,'w'),null):(log(_0x12dbdf(0x1bf)+_0x125de9+_0x12dbdf(0x1f7)),!![]);}catch(_0x3651c0){throw new Error('Lỗi\x20xử\x20lý\x20profile:\x20'+_0x3651c0[_0x12dbdf(0x1f2)]);}}async function xuLyBrowser(_0x5003c1){const _0x2fe8dc=a30_0x4a9a33;try{if(signal['aborted']){log('[xuLyBrowser]:đã\x20bị\x20hủy',null,'w');throw new Error(_0x2fe8dc(0x1cc));}let _0x45c9bc=0x0;const _0x3c4fc3=await http['getBotAll'](profileNameId);if(!_0x3c4fc3){log(_0x2fe8dc(0x1fd),null,![]);throw new Error('No\x20bot\x20found');}if(_0x3c4fc3['length']<=0x0){log(_0x2fe8dc(0x1c9),null,![]);throw new Error(_0x2fe8dc(0x1b6));}const _0x4f09af=[];for(const _0x4baa6e of _0x3c4fc3){if(!_0x4baa6e)continue;if(_0x4baa6e[_0x2fe8dc(0x1b3)]!=_0x2fe8dc(0x1c1))continue;if(signal['aborted']){log(_0x2fe8dc(0x1e1)+_0x4baa6e['name']+'\x20đã\x20bị\x20hủy',null,'w');throw new Error(_0x2fe8dc(0x1cc));}if(_0x4baa6e[_0x2fe8dc(0x1db)]===_0x2fe8dc(0x1c3)){log('['+profileNameId+_0x2fe8dc(0x1e8),null,'i');break;}if(_0x4baa6e[_0x2fe8dc(0x1e3)]==='0'){log('['+profileNameId+']:\x20Bot\x20'+json(_0x4baa6e['name'])+_0x2fe8dc(0x1ab),null,![]);continue;}if(!_0x4baa6e[_0x2fe8dc(0x1d5)]){log('['+profileNameId+_0x2fe8dc(0x1f1)+json(_0x4baa6e)+'\x20ko\x20có\x20aks',null,![]);continue;}const _0xe54db9=await genlogin['nowTime']();if(_0x4baa6e[_0x2fe8dc(0x1d4)]>_0xe54db9['timestamp']){log('['+profileNameId+']:\x20Bot\x20'+json(_0x4baa6e[_0x2fe8dc(0x1d1)])+'\x20Chưa\x20tới\x20giờ\x20chạy',null,'w');continue;}log('[xuLyBrowser]:\x20Thêm\x20Bot\x20'+_0x4baa6e[_0x2fe8dc(0x1d1)]+_0x2fe8dc(0x1e2)+maxBotThreads,null,'i'),_0x4f09af[_0x2fe8dc(0x1ba)](botQueue[_0x2fe8dc(0x1d3)](()=>xuLyGame(_0x4baa6e,_0x4baa6e['aks']))),log(_0x2fe8dc(0x1d2)+_0x4baa6e[_0x2fe8dc(0x1d1)]+_0x2fe8dc(0x1ca)),await delay(0x3e8);}return await Promise[_0x2fe8dc(0x1ed)](_0x4f09af),log(_0x2fe8dc(0x1cd)),!![];}catch(_0xf27784){return log(_0x2fe8dc(0x1bc)+_0xf27784,null,![]),log(_0x2fe8dc(0x1d8)+json(bots),null,![]),null;}}async function xuLyGame(_0x1c77a0,_0x28cba4){const _0x36b73e=a30_0x4a9a33;try{if(signal[_0x36b73e(0x1ef)]){log(_0x36b73e(0x1cf),null,'w');throw new Error(_0x36b73e(0x1cc));}if(_0x1c77a0[_0x36b73e(0x1b3)]==='api'){log(_0x36b73e(0x1e0)+_0x1c77a0[_0x36b73e(0x1d1)]+'\x20Api\x20mode',null,'i');const _0x1e0d27=await genlogin[_0x36b73e(0x1b8)](),_0x33edc2=await http[_0x36b73e(0x1b2)](profileNameId,_0x1c77a0[_0x36b73e(0x1d1)],_0x1e0d27[_0x36b73e(0x1b4)],'','StartApi',_0x36b73e(0x1bd)),_0x2a865f=_0x33edc2['ID'],_0x213fa2={'bot':_0x1c77a0,'profileNameId':profileNameId,'genlogin':genlogin,'http':http,'dataId':_0x2a865f},_0x3ca75e=await loadGameApi(_0x1c77a0[_0x36b73e(0x1d1)],_0x213fa2);if(!_0x3ca75e[_0x36b73e(0x1eb)])return log(_0x36b73e(0x1c6)+_0x1c77a0[_0x36b73e(0x1d1)]+_0x36b73e(0x1c7),null,![]),await http[_0x36b73e(0x1f9)](profileNameId,_0x2a865f,'Fail',_0x36b73e(0x1f8)),null;if(_0x3ca75e[_0x36b73e(0x1eb)]==_0x36b73e(0x1dd))return log(_0x36b73e(0x1c6)+_0x1c77a0[_0x36b73e(0x1d1)]+_0x36b73e(0x1df),null,'i'),await http[_0x36b73e(0x1f9)](profileNameId,_0x2a865f,_0x36b73e(0x1dd),_0x36b73e(0x1dd)),_0x36b73e(0x1dd);if(_0x3ca75e[_0x36b73e(0x1eb)])return log(_0x36b73e(0x1c6)+_0x1c77a0['name']+_0x36b73e(0x1b1)),await http[_0x36b73e(0x1bb)](profileNameId,_0x1c77a0['id'],_0x3ca75e[_0x36b73e(0x1c2)],_0x3ca75e['nextRunStamp']),await http[_0x36b73e(0x1f9)](profileNameId,_0x2a865f,'Ok',_0x36b73e(0x1b9),_0x3ca75e[_0x36b73e(0x1f3)],_0x3ca75e[_0x36b73e(0x1c2)]),!![];}return null;}catch(_0x17caa0){return log('[xuLyGame]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20Bot:\x20'+_0x17caa0,null,![]),null;}}async function loadGameApi(_0x1df328,_0x4bc307){const _0x5b5898=a30_0x4a9a33;try{const _0x2ba7f0=path[_0x5b5898(0x1ad)](__dirname,_0x5b5898(0x1fa),_0x1df328+_0x5b5898(0x1be)),_0x1664bf=require(_0x2ba7f0);if(typeof _0x1664bf===_0x5b5898(0x1f0)){const _0x4de742=await _0x1664bf(_0x4bc307);return await delay(0x3e8),_0x4de742[_0x5b5898(0x1eb)]==='loop'?(log('[loadGameApi]:\x20Chạy\x20'+_0x1df328+_0x5b5898(0x1df)),_0x4de742):(log(_0x5b5898(0x1d7)+_0x1df328+'\x20'+_0x4de742[_0x5b5898(0x1eb)]),_0x4de742);}else return await delay(0x3e8),log('[loadGameApi]:\x20Script\x20'+_0x1df328+_0x5b5898(0x1d0)),null;}catch(_0x14bb16){return log('[loadGameApi]:\x20Lỗi\x20khi\x20load\x20và\x20thực\x20thi\x20script\x20'+_0x1df328+':\x20'+_0x14bb16,![]),null;}}function a30_0x1d92(){const _0x4e8a04=['coin','path',']:\x20Api\x20Mode','APIKEY','\x20thành\x20công','Fail','updateData','toolApi','32376510KZIMzE','30TChohK','[xuLyBrowser]:\x20Bot\x20không\x20tìm\x20thấy','\x20OFF','[xuLyProfile]:\x20Processing\x20profile:\x20','join','31701vhdjHw','SERVER_HOST','worker_threads','\x20done','addData','type','date','113497aBeZOc','No\x20bot\x20found','1314523eSOufu','nowTime','Done','push','nextRunTime','[xuLyBrowser]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20browser:\x20','running','.js','[xuLyProfile]:\x20Xử\x20lý\x20browser\x20','postMessage','api','nextRun','end','./modules/Genlogin','[worker-api2]:\x20Max\x20Bot\x20threads:\x20','[xuLyGame]:\x20Thực\x20thi\x20','\x20lỗi','./modules/logger','[xuLyBrowser]:\x20không\x20lấy\x20được\x20bot','\x20vào\x20hàng\x20đợi.','4752315JuSrNe','timeout','[xuLyBrowser]:\x20Đã\x20xử\x20lý\x20tất\x20cả\x20bots\x20thành\x20công','4uKSYDQ','[xuLyGame]:đã\x20bị\x20hủy','\x20không\x20phải\x20là\x20một\x20hàm\x20hợp\x20lệ','name','[xuLyBrowser]:\x20Đã\x20thêm\x20profile\x20','add','nextRunStamp','aks','stringify','[loadGameApi]:\x20Chạy\x20','[xuLyBrowser]:\x20','p-queue','stack','value','13139144QuFqzC','loop','dotenv','\x20loop','[xuLyGame]:\x20','[xuLyBrowser]:\x20Bot\x20','\x20vào\x20hàng\x20đợi\x20max:','onOff','\x20có\x20lỗi','\x20thất\x20bại','[\x27worker-api2][','default',']:\x20XONG\x201\x20LƯỢT','779232KCrWke','500mlBTez','status','env','all','[xuLyProfile]:\x20Xử\x20lý\x20profile\x20','aborted','function',']:\x20Bot\x20','message'];a30_0x1d92=function(){return _0x4e8a04;};return a30_0x1d92();}async function delay(_0x3a24d7){return new Promise(_0x5b43fe=>{const _0x148c31=a30_0x3cb7;if(signal[_0x148c31(0x1ef)])throw new Error(_0x148c31(0x1cc));setTimeout(_0x5b43fe,_0x3a24d7);});}
const a31_0x58c2e0=a31_0x34c5;(function(_0x4ad134,_0x4ff208){const _0x2d3e29=a31_0x34c5,_0x4cb38a=_0x4ad134();while(!![]){try{const _0x4be3f2=parseInt(_0x2d3e29(0x12e))/0x1+parseInt(_0x2d3e29(0xf8))/0x2+-parseInt(_0x2d3e29(0x112))/0x3+-parseInt(_0x2d3e29(0xff))/0x4+-parseInt(_0x2d3e29(0xd8))/0x5+-parseInt(_0x2d3e29(0x122))/0x6*(parseInt(_0x2d3e29(0x10c))/0x7)+parseInt(_0x2d3e29(0x10f))/0x8*(parseInt(_0x2d3e29(0x135))/0x9);if(_0x4be3f2===_0x4ff208)break;else _0x4cb38a['push'](_0x4cb38a['shift']());}catch(_0x1a51c6){_0x4cb38a['push'](_0x4cb38a['shift']());}}}(a31_0x17af,0x2acec),require(a31_0x58c2e0(0x100))['config']());const {Worker,parentPort}=require(a31_0x58c2e0(0x104)),{log,json}=require(a31_0x58c2e0(0xdc)),Genlogin=require(a31_0x58c2e0(0x13a)),httpPost=require(a31_0x58c2e0(0x126)),path=require(a31_0x58c2e0(0x105)),PQueue=require(a31_0x58c2e0(0x138))['default'],gameQueue=new PQueue({'concurrency':0x2});let genlogin,profileNameId,profileId,browser,dataId;const timGame=!![];genlogin=new Genlogin('',!![]);const http=new httpPost(process[a31_0x58c2e0(0x101)][a31_0x58c2e0(0x125)],process[a31_0x58c2e0(0x101)]['APIKEY'],!![]);let signal={'aborted':![]};function a31_0x17af(){const _0x7f2267=['elementExistsByXPath','\x20thành\x20công','[checkTeleWebOpen]:đã\x20bị\x20hủy','running','loop','\x20is\x20not\x20running',']:\x20','checkProfileIsRun','getBotAll','nextRunStamp','[xuLyGame]:đã\x20bị\x20hủy','end','[worker-api3]:timeout','nowTime','Fail','coin','[checkTeleWebOpen]:\x20Thực\x20thi\x20script\x20','[xuLyProfile]:\x20Thử\x20lần\x20',']:\x20Bot\x20','[xuLyProfile]:đã\x20bị\x20hủy','[xuLyGame]:\x20',']:\x20XONG\x201\x20LƯỢT','132338iHPigj','\x20không\x20phải\x20là\x20một\x20hàm\x20hợp\x20lệ','\x20Tele\x20K\x20OK','\x20done','\x20thất\x20bại','StartApi','value','1363916QWSzrX','dotenv','env','[xuLyProfile]:\x20Profile\x20đã\x20chạy\x20thành\x20công\x20với\x20wsEndpoint:','[xuLyProfile]:\x20Đang\x20mở\x20trình\x20duyệt...','worker_threads','path','getAks','message','[xuLyGame]:\x20Thực\x20thi\x20','[loadGame]:\x20Lỗi\x20khi\x20load\x20và\x20thực\x20thi\x20script\x20','date','\x20không\x20trả\x20về\x20status','203329WKxYVG','[checkTeleWebOpen]:\x20vào\x20loadGame','[xuLyProfile]:\x20Lỗi\x20chung\x20xuLyProfile:\x20','56904zyCFZf','Done','aborted','302217hihXXX','\x20ko\x20có\x20aks','[checkTeleWebOpen]:\x20Lỗi\x20trong\x20quá\x20trình\x20mở\x20trang\x20:\x20','[xuLyProfile]:\x20Xử\x20lý\x20profile\x20','updateData','\x20OFF','[checkTeleWebOpen]:\x20','[checkTeleWebOpen]:\x20Không\x20thực\x20thi\x20script\x20','\x20Script\x20mode','timeout','postMessage','[loadGame]:\x20Chạy\x20','\x20Api\x20mode','.js','[xuLyProfile]:\x20wsEndpoint:\x20',']:\x20Sai\x20aks\x20','36RVTPPz','[checkTeleWebOpen]:\x20Không\x20tìm\x20thấy\x20game\x20','[checkTeleWebOpen]:\x20dataId:\x20','SERVER_HOST','./modules/http','nextRunTime','\x20loop','runProfile','[xuLyBrowser]:\x20Bot\x20OK','stringify','loop\x20new\x20game',']:\x20Api\x20Mode','126400HvEwZD','No\x20bot\x20found','nextRun','[xuLyGame]:\x20getAks\x20OK','\x20để\x20kiểm\x20tra\x20wsEndpoint...','timGame','length','990ZVnovT','Vào','status','p-queue','\x20có\x20lỗi','./modules/Genlogin','[xuLyProfile]:\x20Xử\x20lý\x20browser\x20','Start','Lỗi\x20xử\x20lý\x20profile:\x20','[xuLyBrowser]:\x20','timestamp','Tìm','\x20lỗi','[xuLyGame]:\x20checkTeleWebOpen\x20có\x20gì\x20đó\x20sai\x20sai\x20rồi\x20bro','[checkTeleWebOpen]:\x20Thực\x20thi\x20','addData','[xuLyProfile]:\x20Không\x20thể\x20lấy\x20được\x20wsEndpoint\x20sau\x205\x20lần\x20thử','split','[xuLyGame]:\x20Loop\x20lại\x20,\x20loop\x20lại\x20lần\x20','918295oqlBWi','openUrl','[xuLyBrowser]:\x20Bot\x20không\x20tìm\x20thấy','[xuLyGame]:\x20checkTeleWebOpen\x20OK','./modules/logger','name','type','api','aks','[xuLyBrowser]:đã\x20bị\x20hủy'];a31_0x17af=function(){return _0x7f2267;};return a31_0x17af();}parentPort['on']('message',async({profile:_0x4ba5e8})=>{const _0x47910e=a31_0x58c2e0;try{if(_0x4ba5e8==_0x47910e(0x11b))signal[_0x47910e(0x111)]=!![],log(_0x47910e(0xee),null,'w');else{if(signal['aborted'])throw new Error(_0x47910e(0x11b));log('[\x27worker-api3]['+_0x4ba5e8+_0x47910e(0x12d),null,'w');const _0x9fc81e=await xuLyProfile(_0x4ba5e8);!_0x9fc81e?(log(_0x47910e(0x115)+_0x4ba5e8+_0x47910e(0x139),null,'w'),parentPort[_0x47910e(0x11c)]({'success':![],'result':_0x9fc81e})):(log(_0x47910e(0x115)+_0x4ba5e8+_0x47910e(0xe3),null,'i'),parentPort[_0x47910e(0x11c)]({'success':!![],'result':_0x9fc81e}));}}catch(_0x45794f){parentPort[_0x47910e(0x11c)]({'success':![],'error':{'message':_0x45794f[_0x47910e(0x107)],'stack':_0x45794f['stack']}});}});async function xuLyProfile(_0x43d5c4){const _0x352880=a31_0x58c2e0;try{if(signal[_0x352880(0x111)]){log(_0x352880(0xf5),null,'w');throw new Error(_0x352880(0x11b));}profileNameId=_0x43d5c4,log('[xuLyProfile]:\x20Processing\x20profile:\x20'+JSON[_0x352880(0x12b)](_0x43d5c4),null,'i');const _0x3e2346=await xuLyBrowser(_0x43d5c4);return!_0x3e2346?(log(_0x352880(0xcb)+_0x43d5c4+_0x352880(0xfc),null,'w'),null):(log(_0x352880(0xcb)+_0x43d5c4+_0x352880(0xe3)),!![]);}catch(_0x25fc03){throw new Error(_0x352880(0xcd)+_0x25fc03[_0x352880(0x107)]);}}async function xuLyEndPoint(_0x36f46c){const _0x43d4d2=a31_0x58c2e0;try{if(signal[_0x43d4d2(0x111)]){log('[xuLyProfile]:đã\x20bị\x20hủy',null,'w');throw new Error(_0x43d4d2(0x11b));}const _0x18654d=_0x36f46c[_0x43d4d2(0xd6)]('-')[0x1];profileId=_0x18654d;let {wsEndpoint:_0x407302}=await genlogin[_0x43d4d2(0xe9)](_0x18654d);if(signal[_0x43d4d2(0x111)]){log(_0x43d4d2(0xf5),null,'w');throw new Error(_0x43d4d2(0x11b));}log(_0x43d4d2(0x120)+json(_0x407302),null,'i');if(!_0x407302){log('[xuLyProfile]:\x20Đang\x20mở\x20profile\x20'+_0x18654d+_0x43d4d2(0xe7),null,'i'),await genlogin[_0x43d4d2(0x129)](_0x18654d);for(let _0x1e31f5=0x0;_0x1e31f5<0x5;_0x1e31f5++){if(signal[_0x43d4d2(0x111)]){log(_0x43d4d2(0xf5),null,'w');throw new Error(_0x43d4d2(0x11b));}log(_0x43d4d2(0xf3)+(_0x1e31f5+0x1)+_0x43d4d2(0x132),null,'i'),await delay(0x1388);if(signal[_0x43d4d2(0x111)]){log('[xuLyProfile]:đã\x20bị\x20hủy',null,'w');throw new Error(_0x43d4d2(0x11b));}({wsEndpoint:_0x407302}=await genlogin[_0x43d4d2(0xe9)](_0x18654d));if(signal[_0x43d4d2(0x111)]){log('[xuLyProfile]:đã\x20bị\x20hủy',null,'w');throw new Error(_0x43d4d2(0x11b));}if(_0x407302){log(_0x43d4d2(0x102)+_0x407302);break;}}if(!_0x407302)return log(_0x43d4d2(0xd5),null,![]),![];}const _0x1d2646=_0x36f46c;return await delay(0xbb8),log(_0x43d4d2(0x103),null,'i'),log('[xuLyProfile]:\x20wsEndpoint:\x20'+_0x407302,null,'i'),_0x407302;}catch(_0x4815c5){log(_0x43d4d2(0x10e)+_0x4815c5,null,![]);}}async function xuLyBrowser(_0xe42b95){const _0x1a5a4a=a31_0x58c2e0;try{if(signal[_0x1a5a4a(0x111)]){log(_0x1a5a4a(0xe1),null,'w');throw new Error('timeout');}let _0xf192f4=0x0;const _0x757d3c=await http[_0x1a5a4a(0xea)](profileNameId);if(!_0x757d3c){log(_0x1a5a4a(0xda),null,![]);throw new Error(_0x1a5a4a(0x12f));}if(_0x757d3c[_0x1a5a4a(0x134)]<=0x0){log('[xuLyBrowser]:\x20không\x20lấy\x20được\x20bot',null,![]);throw new Error(_0x1a5a4a(0x12f));}for(const _0x176f40 of _0x757d3c){if(signal[_0x1a5a4a(0x111)]){log(_0x1a5a4a(0xe1),null,'w');throw new Error(_0x1a5a4a(0x11b));}if(_0x176f40){if(_0x176f40[_0x1a5a4a(0xfe)]===_0x1a5a4a(0xed)){log('['+profileNameId+_0x1a5a4a(0xf7),null,'i');break;}if(!_0x176f40['aks']){log('['+profileNameId+_0x1a5a4a(0xf4)+json(_0x176f40)+_0x1a5a4a(0x113),null,![]);continue;}if(_0x176f40['onOff']==='0'){log('['+profileNameId+_0x1a5a4a(0xf4)+json(_0x176f40[_0x1a5a4a(0xdd)])+_0x1a5a4a(0x117),null,![]);continue;}const _0x24f799=await genlogin[_0x1a5a4a(0xef)]();if(_0x176f40[_0x1a5a4a(0xeb)]>_0x24f799[_0x1a5a4a(0xcf)]){log('['+profileNameId+_0x1a5a4a(0xf4)+json(_0x176f40['name'])+'\x20Chưa\x20tới\x20giờ\x20chạy',null,'w');continue;}switch(_0x176f40[_0x1a5a4a(0xe0)]){case'A':log('['+profileNameId+']:\x20'+json(_0x176f40[_0x1a5a4a(0xdd)])+'\x20Tele\x20A\x20OK'),await xuLyGame(_0x176f40,'A');break;case'K':log('['+profileNameId+_0x1a5a4a(0xe8)+json(_0x176f40['name'])+_0x1a5a4a(0xfa)),await xuLyGame(_0x176f40,'K');break;case'W':log('['+profileNameId+_0x1a5a4a(0xe8)+json(_0x176f40[_0x1a5a4a(0xdd)])+'\x20Web\x20OK'),await xuLyGame(_0x176f40,'W');break;default:log('['+profileNameId+_0x1a5a4a(0x121)+json(_0x176f40[_0x1a5a4a(0xe0)]),null,![]);break;}log(_0x1a5a4a(0x12a));}}return!![];}catch(_0x2a985e){return log('[xuLyBrowser]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20browser:\x20'+_0x2a985e,null,![]),log(_0x1a5a4a(0xce)+json(bots),null,![]),null;}}async function xuLyGame(_0x36f711,_0xa5c99){const _0x14a1f2=a31_0x58c2e0;try{if(signal['aborted']){log(_0x14a1f2(0xec),null,'w');throw new Error(_0x14a1f2(0x11b));}if(_0x36f711[_0x14a1f2(0xde)]===_0x14a1f2(0xdf)){log(_0x14a1f2(0xf6)+_0x36f711[_0x14a1f2(0xdd)]+_0x14a1f2(0x11e),null,'i');const _0x8d0e76=await genlogin['nowTime'](),_0x4d5950=await http[_0x14a1f2(0xd4)](profileNameId,_0x36f711['name'],_0x8d0e76[_0x14a1f2(0x10a)],'',_0x14a1f2(0xfd),'running'),_0xffcb4e=_0x4d5950['ID'],_0x15dce3={'bot':_0x36f711,'profileNameId':profileNameId,'genlogin':genlogin,'http':http,'dataId':_0xffcb4e},_0x45cbfd=await loadGameApi(_0x36f711[_0x14a1f2(0xdd)],_0x15dce3);if(!_0x45cbfd['status'])return log(_0x14a1f2(0x108)+_0x36f711['name']+_0x14a1f2(0xd1),null,![]),await http[_0x14a1f2(0x116)](profileNameId,_0xffcb4e,_0x14a1f2(0xf0),_0x14a1f2(0xf0)),null;if(_0x45cbfd['status']=='loop')return log(_0x14a1f2(0x108)+_0x36f711[_0x14a1f2(0xdd)]+'\x20loop',null,'i'),_0x14a1f2(0xe6);if(_0x45cbfd[_0x14a1f2(0x137)])return log(_0x14a1f2(0x108)+_0x36f711[_0x14a1f2(0xdd)]+_0x14a1f2(0xfb)),await http[_0x14a1f2(0x127)](profileNameId,_0x36f711['id'],_0x45cbfd['nextRun'],_0x45cbfd[_0x14a1f2(0xeb)]),await http['updateData'](profileNameId,_0xffcb4e,'Ok',_0x14a1f2(0x110),_0x45cbfd[_0x14a1f2(0xf1)],_0x45cbfd[_0x14a1f2(0x130)]),!![];}else{log(_0x14a1f2(0xf6)+_0x36f711[_0x14a1f2(0xdd)]+_0x14a1f2(0x11a),null,'i');const _0x50f1f4=await http[_0x14a1f2(0x106)](_0xa5c99);if(_0x50f1f4){log(_0x14a1f2(0x131));let _0x19aa3c=0x0;while(_0x19aa3c<0x2){if(signal[_0x14a1f2(0x111)]){log(_0x14a1f2(0xec),null,'w');throw new Error(_0x14a1f2(0x11b));}const _0x22f90e=await checkTeleWebOpen(_0x36f711,_0x50f1f4);if(_0x22f90e===_0x14a1f2(0xe6))_0x19aa3c++,log(_0x14a1f2(0xd7)+_0x19aa3c+'/2',null,'i'),await delay(0x3e8);else return _0x22f90e?(log(_0x14a1f2(0xdb)),!![]):(log(_0x14a1f2(0xd2),null,![]),null);}return log('[xuLyGame]:Max\x20loop\x20rồi\x20bro',null,![]),null;}}}catch(_0x5371a9){return log('[xuLyGame]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20Game:\x20'+_0x5371a9,null,![]),null;}}async function checkTeleWebOpen(_0x52b0a3,_0x4e5824){const _0xd40a0a=a31_0x58c2e0;try{if(signal[_0xd40a0a(0x111)]){log(_0xd40a0a(0xe4),null,'w');throw new Error(_0xd40a0a(0x11b));}let _0x44ae1a=await genlogin['activateTab'](browser,0x0);const _0x4752bd=await genlogin[_0xd40a0a(0xe2)](_0x44ae1a,_0x4e5824['InputSearch'],0x7d0);!_0x4752bd&&(await genlogin['openUrl'](_0x44ae1a,'https://www.google.com'),await delay(0x7d0),await genlogin[_0xd40a0a(0xd9)](_0x44ae1a,_0x4e5824['FistUrl']),await delay(0x7d0));log(_0xd40a0a(0x10d),null,'i');const _0x5bb473=await genlogin[_0xd40a0a(0xef)](),_0x4a4661=await http['addData'](profileNameId,_0x52b0a3['name'],_0x5bb473[_0xd40a0a(0x10a)],'',_0xd40a0a(0xcc),_0xd40a0a(0xe5));dataId=_0x4a4661['ID'];const _0x4f415c={'firstPage':_0x44ae1a,'bot':_0x52b0a3,'profileNameId':profileNameId,'getAks':_0x4e5824,'genlogin':genlogin,'http':http,'browser':browser,'dataId':dataId};log(_0xd40a0a(0x124)+json(dataId),null,'i');if(timGame){await http[_0xd40a0a(0x116)](profileNameId,dataId,_0xd40a0a(0xd0));const _0x53c151=await loadGame(_0xd40a0a(0x133),_0x4f415c);if(_0x53c151[_0xd40a0a(0x137)]==_0xd40a0a(0xe6))return log(_0xd40a0a(0xd3)+_0x52b0a3[_0xd40a0a(0xdd)]+_0xd40a0a(0x128),null,'i'),await http[_0xd40a0a(0x116)](profileNameId,dataId,_0xd40a0a(0x12c)),_0xd40a0a(0xe6);else{if(!_0x53c151)return log(_0xd40a0a(0x123)+_0x52b0a3[_0xd40a0a(0xdd)],null,![]),null;}}await http[_0xd40a0a(0x116)](profileNameId,dataId,_0xd40a0a(0x136));const _0x58f1fc=await loadGame(_0x52b0a3['name'],_0x4f415c);if(!_0x58f1fc[_0xd40a0a(0x137)])return log(_0xd40a0a(0x119)+_0x52b0a3['name'],null,![]),log(_0xd40a0a(0x118)+json(_0x58f1fc),null,![]),null;else{if(_0x58f1fc[_0xd40a0a(0x137)]==_0xd40a0a(0xe6))return log(_0xd40a0a(0xd3)+_0x52b0a3[_0xd40a0a(0xdd)]+_0xd40a0a(0x128),null,'i'),await http[_0xd40a0a(0x116)](profileNameId,dataId,_0xd40a0a(0xe6)),_0xd40a0a(0xe6);}return await http['nextRunTime'](profileNameId,_0x52b0a3['id'],_0x58f1fc['nextRun'],_0x58f1fc[_0xd40a0a(0xeb)]),await http[_0xd40a0a(0x116)](profileNameId,dataId,'Ok',_0xd40a0a(0x110),_0x58f1fc[_0xd40a0a(0xf1)],_0x58f1fc[_0xd40a0a(0x130)]),log(_0xd40a0a(0xf2)+_0x52b0a3[_0xd40a0a(0xdd)]+_0xd40a0a(0xe3)),await delay(0x7d0),!![];}catch(_0x2ae537){return log(_0xd40a0a(0x114)+_0x2ae537,null,![]),null;}}function a31_0x34c5(_0xf8a084,_0xc1aab1){const _0x17aff3=a31_0x17af();return a31_0x34c5=function(_0x34c55b,_0x1d9023){_0x34c55b=_0x34c55b-0xcb;let _0xb3e984=_0x17aff3[_0x34c55b];return _0xb3e984;},a31_0x34c5(_0xf8a084,_0xc1aab1);}async function loadGame(_0x41f68e,_0x275a44){const _0x5802ad=a31_0x58c2e0;try{if(signal[_0x5802ad(0x111)]){log('[loadGame]:đã\x20bị\x20hủy',null,'w');throw new Error('timeout');}const _0x260462=path['join'](__dirname,'scripts',_0x41f68e+_0x5802ad(0x11f)),_0x5003be=require(_0x260462);if(typeof _0x5003be==='function'){const _0xcebc32=await _0x5003be(_0x275a44,signal);await delay(0x3e8);if(!_0xcebc32[_0x5802ad(0x137)])return log('[loadGame]:\x20Script\x20'+_0x41f68e+_0x5802ad(0x10b),null,![]),null;return _0xcebc32[_0x5802ad(0x137)]===_0x5802ad(0xe6)?(log(_0x5802ad(0x11d)+_0x41f68e+'\x20loop',null,'i'),_0xcebc32):(log(_0x5802ad(0x11d)+_0x41f68e+'\x20'+_0xcebc32[_0x5802ad(0x137)],null,'i'),_0xcebc32);}else return await delay(0x3e8),log('[loadGame]:\x20Script\x20'+_0x41f68e+_0x5802ad(0xf9),null,![]),null;}catch(_0x1f9267){return log(_0x5802ad(0x109)+_0x41f68e+':\x20'+_0x1f9267,null,![]),null;}}async function delay(_0x336a51){return new Promise(_0x3e1c1d=>{const _0x53893c=a31_0x34c5;if(signal[_0x53893c(0x111)])throw new Error(_0x53893c(0x11b));setTimeout(_0x3e1c1d,_0x336a51);});}
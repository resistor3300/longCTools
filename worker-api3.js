function a0_0xf361(_0x8366cb,_0x2d4ea8){const _0x6db75e=a0_0x6db7();return a0_0xf361=function(_0xf361b6,_0x24455a){_0xf361b6=_0xf361b6-0x17e;let _0x5f5d30=_0x6db75e[_0xf361b6];return _0x5f5d30;},a0_0xf361(_0x8366cb,_0x2d4ea8);}const a0_0xd218c7=a0_0xf361;(function(_0x4d2d41,_0xb62853){const _0x3b1509=a0_0xf361,_0x5019e6=_0x4d2d41();while(!![]){try{const _0x465732=parseInt(_0x3b1509(0x1ee))/0x1+-parseInt(_0x3b1509(0x180))/0x2+-parseInt(_0x3b1509(0x199))/0x3*(parseInt(_0x3b1509(0x1bb))/0x4)+-parseInt(_0x3b1509(0x181))/0x5+-parseInt(_0x3b1509(0x1d0))/0x6*(parseInt(_0x3b1509(0x1df))/0x7)+parseInt(_0x3b1509(0x1b2))/0x8+parseInt(_0x3b1509(0x189))/0x9*(parseInt(_0x3b1509(0x1e9))/0xa);if(_0x465732===_0xb62853)break;else _0x5019e6['push'](_0x5019e6['shift']());}catch(_0x552239){_0x5019e6['push'](_0x5019e6['shift']());}}}(a0_0x6db7,0x18d49),require(a0_0xd218c7(0x1dd))[a0_0xd218c7(0x1a2)]());const {Worker,parentPort}=require('worker_threads'),{log,json}=require(a0_0xd218c7(0x1b8)),Genlogin=require(a0_0xd218c7(0x1ea)),httpPost=require('./modules/http'),path=require(a0_0xd218c7(0x193)),PQueue=require('p-queue')['default'],gameQueue=new PQueue({'concurrency':0x2});let genlogin,profileNameId,profileId,browser,dataId;function a0_0x6db7(){const _0x1e6ddc=['[xuLyProfile]:\x20Processing\x20profile:\x20','422541UOqlWo','\x20is\x20not\x20running','name','\x20OFF','[checkTeleWebOpen]:\x20','updateData','[checkTeleWebOpen]:đã\x20bị\x20hủy','api','env','[xuLyGame]:Max\x20loop\x20rồi\x20bro','80ZYdClF','./modules/Genlogin','\x20Web\x20OK','loop\x20new\x20game','\x20lỗi','156829ikXYKw','[xuLyGame]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20Game:\x20','[checkTeleWebOpen]:\x20Không\x20thực\x20thi\x20script\x20','timeout','\x20Tele\x20A\x20OK','[checkTeleWebOpen]:\x20Thực\x20thi\x20script\x20','270450IuZGVh','358845IIBNIe','nextRunTime','[xuLyProfile]:\x20Đang\x20mở\x20profile\x20','[xuLyGame]:đã\x20bị\x20hủy','\x20done','\x20Tele\x20K\x20OK','[checkTeleWebOpen]:\x20Không\x20tìm\x20thấy\x20game\x20','[xuLyGame]:\x20Loop\x20lại\x20,\x20loop\x20lại\x20lần\x20','99063lReoOF','https://www.google.com','[xuLyBrowser]:đã\x20bị\x20hủy','getAks','\x20có\x20lỗi','Done','\x20loop','length','stringify','[loadGame]:\x20Script\x20','path','FistUrl','postMessage','nextRunStamp','timGame','Fail','3rGanxw','getBotAll','type',']:\x20','loop','[xuLyProfile]:\x20Profile\x20đã\x20chạy\x20thành\x20công\x20với\x20wsEndpoint:','checkProfileIsRun','[xuLyProfile]:đã\x20bị\x20hủy','activateTab','config','[xuLyProfile]:\x20Xử\x20lý\x20browser\x20','nextRun','openUrl','split','[xuLyBrowser]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20browser:\x20','[xuLyProfile]:\x20Đang\x20mở\x20trình\x20duyệt...','[worker-api3]:timeout','\x20Script\x20mode',']:\x20Bot\x20','Start','timestamp','[xuLyProfile]:\x20wsEndpoint:\x20','nowTime','InputSearch','[xuLyGame]:\x20Thực\x20thi\x20','1039344DINvJm','StartApi','runProfile','[xuLyGame]:\x20getAks\x20OK','[loadGame]:đã\x20bị\x20hủy','join','./modules/logger','[xuLyGame]:\x20','[xuLyGame]:\x20checkTeleWebOpen\x20có\x20gì\x20đó\x20sai\x20sai\x20rồi\x20bro','22964jOKobv','\x20Chưa\x20tới\x20giờ\x20chạy','[xuLyProfile]:\x20Thử\x20lần\x20','[loadGame]:\x20Lỗi\x20khi\x20load\x20và\x20thực\x20thi\x20script\x20','No\x20bot\x20found','[checkTeleWebOpen]:\x20Lỗi\x20trong\x20quá\x20trình\x20mở\x20trang\x20:\x20','[xuLyProfile]:\x20Xử\x20lý\x20profile\x20','.js',']:\x20Sai\x20aks\x20','[xuLyBrowser]:\x20','[checkTeleWebOpen]:\x20dataId:\x20','message','\x20ko\x20có\x20aks','Vào','[xuLyBrowser]:\x20không\x20lấy\x20được\x20bot','[checkTeleWebOpen]:\x20Thực\x20thi\x20','\x20để\x20kiểm\x20tra\x20wsEndpoint...','[xuLyGame]:\x20checkTeleWebOpen\x20OK','coin','onOff','\x20thành\x20công','6uANgOY','\x20không\x20trả\x20về\x20status','running','\x20thất\x20bại','\x20không\x20phải\x20là\x20một\x20hàm\x20hợp\x20lệ','addData','aborted','date','[checkTeleWebOpen]:\x20vào\x20loadGame','status','[xuLyBrowser]:\x20Bot\x20không\x20tìm\x20thấy','Lỗi\x20xử\x20lý\x20profile:\x20','aks','dotenv'];a0_0x6db7=function(){return _0x1e6ddc;};return a0_0x6db7();}const timGame=!![];genlogin=new Genlogin('',!![]);const http=new httpPost(process[a0_0xd218c7(0x1e7)]['SERVER_HOST'],process[a0_0xd218c7(0x1e7)]['APIKEY'],!![]);let signal={'aborted':![]};parentPort['on'](a0_0xd218c7(0x1c6),async({profile:_0x367e9d})=>{const _0x1ecf50=a0_0xd218c7;try{if(_0x367e9d=='timeout')signal[_0x1ecf50(0x1d6)]=!![],log(_0x1ecf50(0x1a9),null,'w');else{if(signal[_0x1ecf50(0x1d6)])throw new Error('timeout');log('[\x27worker-api3]['+_0x367e9d+']:\x20Api\x20Mode',null,'w');const _0x527b0b=await xuLyProfile(_0x367e9d);!_0x527b0b?(log(_0x1ecf50(0x1c1)+_0x367e9d+_0x1ecf50(0x18d),null,'w'),parentPort[_0x1ecf50(0x195)]({'success':![],'result':_0x527b0b})):(log(_0x1ecf50(0x1c1)+_0x367e9d+_0x1ecf50(0x1cf),null,'i'),parentPort[_0x1ecf50(0x195)]({'success':!![],'result':_0x527b0b}));}}catch(_0x19b933){parentPort[_0x1ecf50(0x195)]({'success':![],'error':{'message':_0x19b933[_0x1ecf50(0x1c6)],'stack':_0x19b933['stack']}});}});async function xuLyProfile(_0x5fff13){const _0x32843b=a0_0xd218c7;try{if(signal[_0x32843b(0x1d6)]){log(_0x32843b(0x1a0),null,'w');throw new Error(_0x32843b(0x1f1));}profileNameId=_0x5fff13,log(_0x32843b(0x1de)+JSON[_0x32843b(0x191)](_0x5fff13),null,'i');const _0x160d50=await xuLyBrowser(_0x5fff13);return!_0x160d50?(log(_0x32843b(0x1a3)+_0x5fff13+_0x32843b(0x1d3),null,'w'),null):(log(_0x32843b(0x1a3)+_0x5fff13+'\x20thành\x20công'),!![]);}catch(_0x1f9967){throw new Error(_0x32843b(0x1db)+_0x1f9967[_0x32843b(0x1c6)]);}}async function xuLyEndPoint(_0x1a01f6){const _0x4445c0=a0_0xd218c7;try{if(signal[_0x4445c0(0x1d6)]){log(_0x4445c0(0x1a0),null,'w');throw new Error(_0x4445c0(0x1f1));}const _0x1cea0b=_0x1a01f6[_0x4445c0(0x1a6)]('-')[0x1];profileId=_0x1cea0b;let {wsEndpoint:_0x416d43}=await genlogin[_0x4445c0(0x19f)](_0x1cea0b);if(signal[_0x4445c0(0x1d6)]){log(_0x4445c0(0x1a0),null,'w');throw new Error('timeout');}log(_0x4445c0(0x1ae)+json(_0x416d43),null,'i');if(!_0x416d43){log(_0x4445c0(0x183)+_0x1cea0b+_0x4445c0(0x1e0),null,'i'),await genlogin[_0x4445c0(0x1b4)](_0x1cea0b);for(let _0x1a9209=0x0;_0x1a9209<0x5;_0x1a9209++){if(signal[_0x4445c0(0x1d6)]){log(_0x4445c0(0x1a0),null,'w');throw new Error('timeout');}log(_0x4445c0(0x1bd)+(_0x1a9209+0x1)+_0x4445c0(0x1cb),null,'i'),await delay(0x1388);if(signal['aborted']){log('[xuLyProfile]:đã\x20bị\x20hủy',null,'w');throw new Error(_0x4445c0(0x1f1));}({wsEndpoint:_0x416d43}=await genlogin['checkProfileIsRun'](_0x1cea0b));if(signal[_0x4445c0(0x1d6)]){log('[xuLyProfile]:đã\x20bị\x20hủy',null,'w');throw new Error(_0x4445c0(0x1f1));}if(_0x416d43){log(_0x4445c0(0x19e)+_0x416d43);break;}}if(!_0x416d43)return log('[xuLyProfile]:\x20Không\x20thể\x20lấy\x20được\x20wsEndpoint\x20sau\x205\x20lần\x20thử',null,![]),![];}const _0x395f75=_0x1a01f6;return await delay(0xbb8),log(_0x4445c0(0x1a8),null,'i'),log('[xuLyProfile]:\x20wsEndpoint:\x20'+_0x416d43,null,'i'),_0x416d43;}catch(_0x250cf1){log('[xuLyProfile]:\x20Lỗi\x20chung\x20xuLyProfile:\x20'+_0x250cf1,null,![]);}}async function xuLyBrowser(_0x29dc4c){const _0x3f7d47=a0_0xd218c7;try{if(signal[_0x3f7d47(0x1d6)]){log(_0x3f7d47(0x18b),null,'w');throw new Error(_0x3f7d47(0x1f1));}let _0x13869d=0x0;const _0x586194=await http[_0x3f7d47(0x19a)](profileNameId);if(!_0x586194){log(_0x3f7d47(0x1da),null,![]);throw new Error(_0x3f7d47(0x1bf));}if(_0x586194[_0x3f7d47(0x190)]<=0x0){log(_0x3f7d47(0x1c9),null,![]);throw new Error(_0x3f7d47(0x1bf));}for(const _0x2dad3a of _0x586194){if(signal[_0x3f7d47(0x1d6)]){log(_0x3f7d47(0x18b),null,'w');throw new Error('timeout');}if(_0x2dad3a){if(_0x2dad3a['value']==='end'){log('['+profileNameId+']:\x20XONG\x201\x20LƯỢT',null,'i');break;}if(!_0x2dad3a[_0x3f7d47(0x1dc)]){log('['+profileNameId+_0x3f7d47(0x1ab)+json(_0x2dad3a)+_0x3f7d47(0x1c7),null,![]);continue;}if(_0x2dad3a[_0x3f7d47(0x1ce)]==='0'){log('['+profileNameId+_0x3f7d47(0x1ab)+json(_0x2dad3a[_0x3f7d47(0x1e1)])+_0x3f7d47(0x1e2),null,![]);continue;}const _0x5cf69e=await genlogin[_0x3f7d47(0x1af)]();if(_0x2dad3a['nextRunStamp']>_0x5cf69e[_0x3f7d47(0x1ad)]){log('['+profileNameId+_0x3f7d47(0x1ab)+json(_0x2dad3a[_0x3f7d47(0x1e1)])+_0x3f7d47(0x1bc),null,'w');continue;}switch(_0x2dad3a['aks']){case'A':log('['+profileNameId+_0x3f7d47(0x19c)+json(_0x2dad3a[_0x3f7d47(0x1e1)])+_0x3f7d47(0x17e)),await xuLyGame(_0x2dad3a,'A');break;case'K':log('['+profileNameId+_0x3f7d47(0x19c)+json(_0x2dad3a[_0x3f7d47(0x1e1)])+_0x3f7d47(0x186)),await xuLyGame(_0x2dad3a,'K');break;case'W':log('['+profileNameId+']:\x20'+json(_0x2dad3a[_0x3f7d47(0x1e1)])+_0x3f7d47(0x1eb)),await xuLyGame(_0x2dad3a,'W');break;default:log('['+profileNameId+_0x3f7d47(0x1c3)+json(_0x2dad3a[_0x3f7d47(0x1dc)]),null,![]);break;}log('[xuLyBrowser]:\x20Bot\x20OK');}}return!![];}catch(_0x391a53){return log(_0x3f7d47(0x1a7)+_0x391a53,null,![]),log(_0x3f7d47(0x1c4)+json(bots),null,![]),null;}}async function xuLyGame(_0x8e060e,_0x2ce90e){const _0x3162f7=a0_0xd218c7;try{if(signal[_0x3162f7(0x1d6)]){log(_0x3162f7(0x184),null,'w');throw new Error(_0x3162f7(0x1f1));}if(_0x8e060e[_0x3162f7(0x19b)]===_0x3162f7(0x1e6)){log(_0x3162f7(0x1b9)+_0x8e060e['name']+'\x20Api\x20mode',null,'i');const _0x4ab2d1=await genlogin[_0x3162f7(0x1af)](),_0x24d1a4=await http[_0x3162f7(0x1d5)](profileNameId,_0x8e060e[_0x3162f7(0x1e1)],_0x4ab2d1[_0x3162f7(0x1d7)],'',_0x3162f7(0x1b3),_0x3162f7(0x1d2)),_0x15db7e=_0x24d1a4['ID'],_0x14a39e={'bot':_0x8e060e,'profileNameId':profileNameId,'genlogin':genlogin,'http':http,'dataId':_0x15db7e},_0x3c1f75=await loadGameApi(_0x8e060e[_0x3162f7(0x1e1)],_0x14a39e);if(!_0x3c1f75[_0x3162f7(0x1d9)])return log(_0x3162f7(0x1b1)+_0x8e060e[_0x3162f7(0x1e1)]+_0x3162f7(0x1ed),null,![]),await http[_0x3162f7(0x1e4)](profileNameId,_0x15db7e,_0x3162f7(0x198),_0x3162f7(0x198)),null;if(_0x3c1f75[_0x3162f7(0x1d9)]=='loop')return log('[xuLyGame]:\x20Thực\x20thi\x20'+_0x8e060e[_0x3162f7(0x1e1)]+_0x3162f7(0x18f),null,'i'),_0x3162f7(0x19d);if(_0x3c1f75[_0x3162f7(0x1d9)])return log(_0x3162f7(0x1b1)+_0x8e060e[_0x3162f7(0x1e1)]+_0x3162f7(0x185)),await http[_0x3162f7(0x182)](profileNameId,_0x8e060e['id'],_0x3c1f75['nextRun'],_0x3c1f75[_0x3162f7(0x196)]),await http['updateData'](profileNameId,_0x15db7e,'Ok',_0x3162f7(0x18e),_0x3c1f75[_0x3162f7(0x1cd)],_0x3c1f75[_0x3162f7(0x1a4)]),!![];}else{log(_0x3162f7(0x1b9)+_0x8e060e[_0x3162f7(0x1e1)]+_0x3162f7(0x1aa),null,'i');const _0x5e59f7=await http[_0x3162f7(0x18c)](_0x2ce90e);if(_0x5e59f7){log(_0x3162f7(0x1b5));let _0x4d3acd=0x0;while(_0x4d3acd<0x2){if(signal[_0x3162f7(0x1d6)]){log(_0x3162f7(0x184),null,'w');throw new Error('timeout');}const _0x5bc5e0=await checkTeleWebOpen(_0x8e060e,_0x5e59f7);if(_0x5bc5e0===_0x3162f7(0x19d))_0x4d3acd++,log(_0x3162f7(0x188)+_0x4d3acd+'/2',null,'i'),await delay(0x3e8);else return _0x5bc5e0?(log(_0x3162f7(0x1cc)),!![]):(log(_0x3162f7(0x1ba),null,![]),null);}return log(_0x3162f7(0x1e8),null,![]),null;}}}catch(_0x3fe37b){return log(_0x3162f7(0x1ef)+_0x3fe37b,null,![]),null;}}async function checkTeleWebOpen(_0x31aaac,_0x50264a){const _0x52508a=a0_0xd218c7;try{if(signal['aborted']){log(_0x52508a(0x1e5),null,'w');throw new Error(_0x52508a(0x1f1));}let _0x4365d5=await genlogin[_0x52508a(0x1a1)](browser,0x0);const _0x196873=await genlogin['elementExistsByXPath'](_0x4365d5,_0x50264a[_0x52508a(0x1b0)],0x7d0);!_0x196873&&(await genlogin[_0x52508a(0x1a5)](_0x4365d5,_0x52508a(0x18a)),await delay(0x7d0),await genlogin[_0x52508a(0x1a5)](_0x4365d5,_0x50264a[_0x52508a(0x194)]),await delay(0x7d0));log(_0x52508a(0x1d8),null,'i');const _0x249a3f=await genlogin[_0x52508a(0x1af)](),_0x2f22a7=await http[_0x52508a(0x1d5)](profileNameId,_0x31aaac[_0x52508a(0x1e1)],_0x249a3f[_0x52508a(0x1d7)],'',_0x52508a(0x1ac),_0x52508a(0x1d2));dataId=_0x2f22a7['ID'];const _0x163b69={'firstPage':_0x4365d5,'bot':_0x31aaac,'profileNameId':profileNameId,'getAks':_0x50264a,'genlogin':genlogin,'http':http,'browser':browser,'dataId':dataId};log(_0x52508a(0x1c5)+json(dataId),null,'i');if(timGame){await http[_0x52508a(0x1e4)](profileNameId,dataId,'Tìm');const _0x55eac1=await loadGame(_0x52508a(0x197),_0x163b69);if(_0x55eac1['status']=='loop')return log(_0x52508a(0x1ca)+_0x31aaac[_0x52508a(0x1e1)]+'\x20loop',null,'i'),await http[_0x52508a(0x1e4)](profileNameId,dataId,_0x52508a(0x1ec)),_0x52508a(0x19d);else{if(!_0x55eac1)return log(_0x52508a(0x187)+_0x31aaac['name'],null,![]),null;}}await http['updateData'](profileNameId,dataId,_0x52508a(0x1c8));const _0x59ac09=await loadGame(_0x31aaac[_0x52508a(0x1e1)],_0x163b69);if(!_0x59ac09[_0x52508a(0x1d9)])return log(_0x52508a(0x1f0)+_0x31aaac[_0x52508a(0x1e1)],null,![]),log(_0x52508a(0x1e3)+json(_0x59ac09),null,![]),null;else{if(_0x59ac09[_0x52508a(0x1d9)]=='loop')return log(_0x52508a(0x1ca)+_0x31aaac[_0x52508a(0x1e1)]+_0x52508a(0x18f),null,'i'),await http[_0x52508a(0x1e4)](profileNameId,dataId,_0x52508a(0x19d)),_0x52508a(0x19d);}return await http[_0x52508a(0x182)](profileNameId,_0x31aaac['id'],_0x59ac09[_0x52508a(0x1a4)],_0x59ac09[_0x52508a(0x196)]),await http[_0x52508a(0x1e4)](profileNameId,dataId,'Ok',_0x52508a(0x18e),_0x59ac09[_0x52508a(0x1cd)],_0x59ac09[_0x52508a(0x1a4)]),log(_0x52508a(0x17f)+_0x31aaac[_0x52508a(0x1e1)]+_0x52508a(0x1cf)),await delay(0x7d0),!![];}catch(_0x22d5c7){return log(_0x52508a(0x1c0)+_0x22d5c7,null,![]),null;}}async function loadGame(_0x1c0689,_0x303028){const _0x12aa05=a0_0xd218c7;try{if(signal[_0x12aa05(0x1d6)]){log(_0x12aa05(0x1b6),null,'w');throw new Error('timeout');}const _0x174d06=path[_0x12aa05(0x1b7)](__dirname,'scripts',_0x1c0689+_0x12aa05(0x1c2)),_0x1d83c0=require(_0x174d06);if(typeof _0x1d83c0==='function'){const _0x2cf14b=await _0x1d83c0(_0x303028,signal);await delay(0x3e8);if(!_0x2cf14b[_0x12aa05(0x1d9)])return log(_0x12aa05(0x192)+_0x1c0689+_0x12aa05(0x1d1),null,![]),null;return _0x2cf14b[_0x12aa05(0x1d9)]===_0x12aa05(0x19d)?(log('[loadGame]:\x20Chạy\x20'+_0x1c0689+_0x12aa05(0x18f),null,'i'),_0x2cf14b):(log('[loadGame]:\x20Chạy\x20'+_0x1c0689+'\x20'+_0x2cf14b[_0x12aa05(0x1d9)],null,'i'),_0x2cf14b);}else return await delay(0x3e8),log('[loadGame]:\x20Script\x20'+_0x1c0689+_0x12aa05(0x1d4),null,![]),null;}catch(_0x199d3b){return log(_0x12aa05(0x1be)+_0x1c0689+':\x20'+_0x199d3b,null,![]),null;}}async function delay(_0x598525){return new Promise(_0x569f7a=>{const _0x38a2e6=a0_0xf361;if(signal['aborted'])throw new Error(_0x38a2e6(0x1f1));setTimeout(_0x569f7a,_0x598525);});}
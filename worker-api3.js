const a31_0x47dd9f=a31_0x3fff;(function(_0xcc87fd,_0x1f43f0){const _0x1c3599=a31_0x3fff,_0x4ab0b8=_0xcc87fd();while(!![]){try{const _0x3d6fa7=parseInt(_0x1c3599(0x1de))/0x1+-parseInt(_0x1c3599(0x191))/0x2+-parseInt(_0x1c3599(0x18d))/0x3*(parseInt(_0x1c3599(0x1c2))/0x4)+parseInt(_0x1c3599(0x1df))/0x5*(parseInt(_0x1c3599(0x1a9))/0x6)+parseInt(_0x1c3599(0x1ef))/0x7*(parseInt(_0x1c3599(0x1cb))/0x8)+-parseInt(_0x1c3599(0x1b6))/0x9+-parseInt(_0x1c3599(0x1d2))/0xa*(-parseInt(_0x1c3599(0x1e9))/0xb);if(_0x3d6fa7===_0x1f43f0)break;else _0x4ab0b8['push'](_0x4ab0b8['shift']());}catch(_0x1628fd){_0x4ab0b8['push'](_0x4ab0b8['shift']());}}}(a31_0x2fa4,0x3e208),require(a31_0x47dd9f(0x1ac))[a31_0x47dd9f(0x18b)]());const {Worker,parentPort}=require('worker_threads'),{log,json}=require(a31_0x47dd9f(0x1c5)),Genlogin=require(a31_0x47dd9f(0x1e7)),httpPost=require(a31_0x47dd9f(0x1e2)),path=require(a31_0x47dd9f(0x1d7)),PQueue=require('p-queue')[a31_0x47dd9f(0x194)],gameQueue=new PQueue({'concurrency':0x2});function a31_0x2fa4(){const _0xbc39e=['Fail','Done','1878390GXxNuL','[xuLyGame]:Max\x20loop\x20rồi\x20bro',']:\x20XONG\x201\x20LƯỢT','[xuLyProfile]:\x20Xử\x20lý\x20profile\x20','end','\x20thất\x20bại','nowTime','scripts','elementExistsByXPath','nextRunStamp','\x20có\x20lỗi','getBotAll','1180232ReCEfI','[xuLyProfile]:\x20Xử\x20lý\x20browser\x20','addData','./modules/logger','[checkTeleWebOpen]:\x20Lỗi\x20trong\x20quá\x20trình\x20mở\x20trang\x20:\x20',']:\x20Api\x20Mode','[xuLyBrowser]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20browser:\x20','\x20không\x20phải\x20là\x20một\x20hàm\x20hợp\x20lệ','timeout','64LvOpsF','\x20done','api','[xuLyProfile]:\x20Không\x20thể\x20lấy\x20được\x20wsEndpoint\x20sau\x205\x20lần\x20thử','[checkTeleWebOpen]:\x20Không\x20thực\x20thi\x20script\x20','\x20Chưa\x20tới\x20giờ\x20chạy','InputSearch','216510YjirAo','timGame','checkProfileIsRun','[xuLyGame]:\x20getAks\x20OK','openUrl','path','split','[\x27worker-api3][','Vào','running','[xuLyBrowser]:\x20Bot\x20không\x20tìm\x20thấy','\x20OFF','488589fYqLgC','40TSedSz','onOff','[xuLyBrowser]:đã\x20bị\x20hủy','./modules/http','APIKEY','updateData','[xuLyGame]:\x20Thực\x20thi\x20','[xuLyProfile]:\x20wsEndpoint:\x20','./modules/Genlogin','aks','187czNoyv','\x20thành\x20công','stringify','timestamp','postMessage','\x20để\x20kiểm\x20tra\x20wsEndpoint...','24689KhYBEh','date','runProfile','https://www.google.com','[xuLyProfile]:đã\x20bị\x20hủy','\x20Api\x20mode','\x20lỗi','[xuLyProfile]:\x20Đang\x20mở\x20profile\x20','[loadGame]:đã\x20bị\x20hủy','\x20loop','[checkTeleWebOpen]:\x20','StartApi','Lỗi\x20xử\x20lý\x20profile:\x20','[worker-api3]:timeout','message','[xuLyBrowser]:\x20không\x20lấy\x20được\x20bot','name','config','[loadGame]:\x20Chạy\x20','3pFPTOf','No\x20bot\x20found','[loadGame]:\x20Script\x20',']:\x20Bot\x20','733936LXiyEA','[xuLyProfile]:\x20Lỗi\x20chung\x20xuLyProfile:\x20','[xuLyGame]:\x20checkTeleWebOpen\x20có\x20gì\x20đó\x20sai\x20sai\x20rồi\x20bro','default','join','[xuLyProfile]:\x20Đang\x20mở\x20trình\x20duyệt...','SERVER_HOST','\x20Tele\x20K\x20OK','[xuLyProfile]:\x20Profile\x20đã\x20chạy\x20thành\x20công\x20với\x20wsEndpoint:','\x20Web\x20OK','coin','env','\x20Script\x20mode','[checkTeleWebOpen]:đã\x20bị\x20hủy','aborted','[xuLyProfile]:\x20Thử\x20lần\x20','loop','Start',']:\x20','loop\x20new\x20game','\x20không\x20trả\x20về\x20status',']:\x20Sai\x20aks\x20','FistUrl','status','180252cMeQdu','length','[xuLyGame]:\x20','dotenv','\x20is\x20not\x20running','.js','nextRun','[xuLyGame]:đã\x20bị\x20hủy','\x20Tele\x20A\x20OK','Tìm','[checkTeleWebOpen]:\x20vào\x20loadGame'];a31_0x2fa4=function(){return _0xbc39e;};return a31_0x2fa4();}let genlogin,profileNameId,profileId,browser,dataId;const timGame=!![];genlogin=new Genlogin('',!![]);const http=new httpPost(process[a31_0x47dd9f(0x19c)][a31_0x47dd9f(0x197)],process[a31_0x47dd9f(0x19c)][a31_0x47dd9f(0x1e3)],!![]);let signal={'aborted':![]};parentPort['on'](a31_0x47dd9f(0x188),async({profile:_0x5e812a})=>{const _0x684668=a31_0x47dd9f;try{if(_0x5e812a==_0x684668(0x1ca))signal[_0x684668(0x19f)]=!![],log(_0x684668(0x187),null,'w');else{if(signal[_0x684668(0x19f)])throw new Error('timeout');log(_0x684668(0x1d9)+_0x5e812a+_0x684668(0x1c7),null,'w');const _0x1b9fe7=await xuLyProfile(_0x5e812a);!_0x1b9fe7?(log(_0x684668(0x1b9)+_0x5e812a+_0x684668(0x1c0),null,'w'),parentPort[_0x684668(0x1ed)]({'success':![],'result':_0x1b9fe7})):(log(_0x684668(0x1b9)+_0x5e812a+_0x684668(0x1ea),null,'i'),parentPort['postMessage']({'success':!![],'result':_0x1b9fe7}));}}catch(_0x49601e){parentPort[_0x684668(0x1ed)]({'success':![],'error':{'message':_0x49601e[_0x684668(0x188)],'stack':_0x49601e['stack']}});}});async function xuLyProfile(_0x113694){const _0x33f3ba=a31_0x47dd9f;try{if(signal['aborted']){log(_0x33f3ba(0x1f3),null,'w');throw new Error(_0x33f3ba(0x1ca));}profileNameId=_0x113694,log('[xuLyProfile]:\x20Processing\x20profile:\x20'+JSON[_0x33f3ba(0x1eb)](_0x113694),null,'i');const _0x504e25=await xuLyBrowser(_0x113694);return!_0x504e25?(log('[xuLyProfile]:\x20Xử\x20lý\x20browser\x20'+_0x113694+_0x33f3ba(0x1bb),null,'w'),null):(log(_0x33f3ba(0x1c3)+_0x113694+_0x33f3ba(0x1ea)),!![]);}catch(_0x3655a1){throw new Error(_0x33f3ba(0x186)+_0x3655a1[_0x33f3ba(0x188)]);}}async function xuLyEndPoint(_0x3bc49a){const _0x46f625=a31_0x47dd9f;try{if(signal[_0x46f625(0x19f)]){log(_0x46f625(0x1f3),null,'w');throw new Error(_0x46f625(0x1ca));}const _0x57e5fd=_0x3bc49a[_0x46f625(0x1d8)]('-')[0x1];profileId=_0x57e5fd;let {wsEndpoint:_0x4fa510}=await genlogin[_0x46f625(0x1d4)](_0x57e5fd);if(signal[_0x46f625(0x19f)]){log(_0x46f625(0x1f3),null,'w');throw new Error(_0x46f625(0x1ca));}log(_0x46f625(0x1e6)+json(_0x4fa510),null,'i');if(!_0x4fa510){log(_0x46f625(0x181)+_0x57e5fd+_0x46f625(0x1ad),null,'i'),await genlogin[_0x46f625(0x1f1)](_0x57e5fd);for(let _0x9f2132=0x0;_0x9f2132<0x5;_0x9f2132++){if(signal[_0x46f625(0x19f)]){log(_0x46f625(0x1f3),null,'w');throw new Error('timeout');}log(_0x46f625(0x1a0)+(_0x9f2132+0x1)+_0x46f625(0x1ee),null,'i'),await delay(0x1388);if(signal[_0x46f625(0x19f)]){log(_0x46f625(0x1f3),null,'w');throw new Error('timeout');}({wsEndpoint:_0x4fa510}=await genlogin[_0x46f625(0x1d4)](_0x57e5fd));if(signal['aborted']){log(_0x46f625(0x1f3),null,'w');throw new Error(_0x46f625(0x1ca));}if(_0x4fa510){log(_0x46f625(0x199)+_0x4fa510);break;}}if(!_0x4fa510)return log(_0x46f625(0x1ce),null,![]),![];}const _0x41f0cd=_0x3bc49a;return await delay(0xbb8),log(_0x46f625(0x196),null,'i'),log(_0x46f625(0x1e6)+_0x4fa510,null,'i'),_0x4fa510;}catch(_0x515003){log(_0x46f625(0x192)+_0x515003,null,![]);}}function a31_0x3fff(_0x12ab5c,_0x1e169){const _0x2fa4f7=a31_0x2fa4();return a31_0x3fff=function(_0x3fff62,_0x2708a7){_0x3fff62=_0x3fff62-0x17f;let _0x5d317e=_0x2fa4f7[_0x3fff62];return _0x5d317e;},a31_0x3fff(_0x12ab5c,_0x1e169);}async function xuLyBrowser(_0xc46009){const _0x1cc87d=a31_0x47dd9f;try{if(signal[_0x1cc87d(0x19f)]){log(_0x1cc87d(0x1e1),null,'w');throw new Error(_0x1cc87d(0x1ca));}let _0x327538=0x0;const _0xd061a9=await http[_0x1cc87d(0x1c1)](profileNameId);if(!_0xd061a9){log(_0x1cc87d(0x1dc),null,![]);throw new Error(_0x1cc87d(0x18e));}if(_0xd061a9[_0x1cc87d(0x1aa)]<=0x0){log(_0x1cc87d(0x189),null,![]);throw new Error(_0x1cc87d(0x18e));}for(const _0x314528 of _0xd061a9){if(signal[_0x1cc87d(0x19f)]){log(_0x1cc87d(0x1e1),null,'w');throw new Error(_0x1cc87d(0x1ca));}if(_0x314528){if(_0x314528['value']===_0x1cc87d(0x1ba)){log('['+profileNameId+_0x1cc87d(0x1b8),null,'i');break;}if(!_0x314528[_0x1cc87d(0x1e8)]){log('['+profileNameId+_0x1cc87d(0x190)+json(_0x314528)+'\x20ko\x20có\x20aks',null,![]);continue;}if(_0x314528[_0x1cc87d(0x1e0)]==='0'){log('['+profileNameId+']:\x20Bot\x20'+json(_0x314528['name'])+_0x1cc87d(0x1dd),null,![]);continue;}const _0x363fbb=await genlogin[_0x1cc87d(0x1bc)]();if(_0x314528['nextRunStamp']>_0x363fbb[_0x1cc87d(0x1ec)]){log('['+profileNameId+_0x1cc87d(0x190)+json(_0x314528[_0x1cc87d(0x18a)])+_0x1cc87d(0x1d0),null,'w');continue;}switch(_0x314528[_0x1cc87d(0x1e8)]){case'A':log('['+profileNameId+_0x1cc87d(0x1a3)+json(_0x314528[_0x1cc87d(0x18a)])+_0x1cc87d(0x1b1)),await xuLyGame(_0x314528,'A');break;case'K':log('['+profileNameId+_0x1cc87d(0x1a3)+json(_0x314528[_0x1cc87d(0x18a)])+_0x1cc87d(0x198)),await xuLyGame(_0x314528,'K');break;case'W':log('['+profileNameId+_0x1cc87d(0x1a3)+json(_0x314528['name'])+_0x1cc87d(0x19a)),await xuLyGame(_0x314528,'W');break;default:log('['+profileNameId+_0x1cc87d(0x1a6)+json(_0x314528[_0x1cc87d(0x1e8)]),null,![]);break;}log('[xuLyBrowser]:\x20Bot\x20OK');}}return!![];}catch(_0x48134e){return log(_0x1cc87d(0x1c8)+_0x48134e,null,![]),log('[xuLyBrowser]:\x20'+json(bots),null,![]),null;}}async function xuLyGame(_0x46bdfa,_0x42f50d){const _0x5f4cad=a31_0x47dd9f;try{if(signal[_0x5f4cad(0x19f)]){log(_0x5f4cad(0x1b0),null,'w');throw new Error(_0x5f4cad(0x1ca));}if(_0x46bdfa['type']===_0x5f4cad(0x1cd)){log(_0x5f4cad(0x1ab)+_0x46bdfa[_0x5f4cad(0x18a)]+_0x5f4cad(0x17f),null,'i');const _0x2d040f=await genlogin[_0x5f4cad(0x1bc)](),_0x15709f=await http[_0x5f4cad(0x1c4)](profileNameId,_0x46bdfa[_0x5f4cad(0x18a)],_0x2d040f['date'],'',_0x5f4cad(0x185),_0x5f4cad(0x1db)),_0x5f1407=_0x15709f['ID'],_0x2501e0={'bot':_0x46bdfa,'profileNameId':profileNameId,'genlogin':genlogin,'http':http,'dataId':_0x5f1407},_0x4832c4=await loadGameApi(_0x46bdfa[_0x5f4cad(0x18a)],_0x2501e0);if(!_0x4832c4[_0x5f4cad(0x1a8)])return log(_0x5f4cad(0x1e5)+_0x46bdfa['name']+_0x5f4cad(0x180),null,![]),await http['updateData'](profileNameId,_0x5f1407,_0x5f4cad(0x1b4),_0x5f4cad(0x1b4)),null;if(_0x4832c4[_0x5f4cad(0x1a8)]==_0x5f4cad(0x1a1))return log('[xuLyGame]:\x20Thực\x20thi\x20'+_0x46bdfa['name']+_0x5f4cad(0x183),null,'i'),_0x5f4cad(0x1a1);if(_0x4832c4['status'])return log(_0x5f4cad(0x1e5)+_0x46bdfa['name']+_0x5f4cad(0x1cc)),await http['nextRunTime'](profileNameId,_0x46bdfa['id'],_0x4832c4[_0x5f4cad(0x1af)],_0x4832c4['nextRunStamp']),await http['updateData'](profileNameId,_0x5f1407,'Ok',_0x5f4cad(0x1b5),_0x4832c4[_0x5f4cad(0x19b)],_0x4832c4['nextRun']),!![];}else{log(_0x5f4cad(0x1ab)+_0x46bdfa[_0x5f4cad(0x18a)]+_0x5f4cad(0x19d),null,'i');const _0x5133f1=await http['getAks'](_0x42f50d);if(_0x5133f1){log(_0x5f4cad(0x1d5));let _0x587af7=0x0;while(_0x587af7<0x2){if(signal[_0x5f4cad(0x19f)]){log(_0x5f4cad(0x1b0),null,'w');throw new Error('timeout');}const _0x4b67a6=await checkTeleWebOpen(_0x46bdfa,_0x5133f1);if(_0x4b67a6==='loop')_0x587af7++,log('[xuLyGame]:\x20Loop\x20lại\x20,\x20loop\x20lại\x20lần\x20'+_0x587af7+'/2',null,'i'),await delay(0x3e8);else return _0x4b67a6?(log('[xuLyGame]:\x20checkTeleWebOpen\x20OK'),!![]):(log(_0x5f4cad(0x193),null,![]),null);}return log(_0x5f4cad(0x1b7),null,![]),null;}}}catch(_0x4c4dc3){return log('[xuLyGame]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20Game:\x20'+_0x4c4dc3,null,![]),null;}}async function checkTeleWebOpen(_0x4d9665,_0x1f7d7d){const _0x2071ae=a31_0x47dd9f;try{if(signal['aborted']){log(_0x2071ae(0x19e),null,'w');throw new Error(_0x2071ae(0x1ca));}let _0x2cc823=await genlogin['activateTab'](browser,0x0);const _0x18e0b9=await genlogin[_0x2071ae(0x1be)](_0x2cc823,_0x1f7d7d[_0x2071ae(0x1d1)],0x7d0);!_0x18e0b9&&(await genlogin[_0x2071ae(0x1d6)](_0x2cc823,_0x2071ae(0x1f2)),await delay(0x7d0),await genlogin['openUrl'](_0x2cc823,_0x1f7d7d[_0x2071ae(0x1a7)]),await delay(0x7d0));log(_0x2071ae(0x1b3),null,'i');const _0x513848=await genlogin[_0x2071ae(0x1bc)](),_0x9af6b6=await http['addData'](profileNameId,_0x4d9665[_0x2071ae(0x18a)],_0x513848[_0x2071ae(0x1f0)],'',_0x2071ae(0x1a2),_0x2071ae(0x1db));dataId=_0x9af6b6['ID'];const _0x3bd9a1={'firstPage':_0x2cc823,'bot':_0x4d9665,'profileNameId':profileNameId,'getAks':_0x1f7d7d,'genlogin':genlogin,'http':http,'browser':browser,'dataId':dataId};log('[checkTeleWebOpen]:\x20dataId:\x20'+json(dataId),null,'i');if(timGame){await http[_0x2071ae(0x1e4)](profileNameId,dataId,_0x2071ae(0x1b2));const _0x491e05=await loadGame(_0x2071ae(0x1d3),_0x3bd9a1);if(_0x491e05[_0x2071ae(0x1a8)]==_0x2071ae(0x1a1))return log('[checkTeleWebOpen]:\x20Thực\x20thi\x20'+_0x4d9665['name']+_0x2071ae(0x183),null,'i'),await http[_0x2071ae(0x1e4)](profileNameId,dataId,_0x2071ae(0x1a4)),_0x2071ae(0x1a1);else{if(!_0x491e05)return log('[checkTeleWebOpen]:\x20Không\x20tìm\x20thấy\x20game\x20'+_0x4d9665[_0x2071ae(0x18a)],null,![]),null;}}await http[_0x2071ae(0x1e4)](profileNameId,dataId,_0x2071ae(0x1da));const _0x5342eb=await loadGame(_0x4d9665[_0x2071ae(0x18a)],_0x3bd9a1);if(!_0x5342eb[_0x2071ae(0x1a8)])return log(_0x2071ae(0x1cf)+_0x4d9665[_0x2071ae(0x18a)],null,![]),log(_0x2071ae(0x184)+json(_0x5342eb),null,![]),null;else{if(_0x5342eb['status']=='loop')return log('[checkTeleWebOpen]:\x20Thực\x20thi\x20'+_0x4d9665['name']+'\x20loop',null,'i'),await http['updateData'](profileNameId,dataId,'loop'),_0x2071ae(0x1a1);}return await http['nextRunTime'](profileNameId,_0x4d9665['id'],_0x5342eb[_0x2071ae(0x1af)],_0x5342eb[_0x2071ae(0x1bf)]),await http[_0x2071ae(0x1e4)](profileNameId,dataId,'Ok',_0x2071ae(0x1b5),_0x5342eb[_0x2071ae(0x19b)],_0x5342eb[_0x2071ae(0x1af)]),log('[checkTeleWebOpen]:\x20Thực\x20thi\x20script\x20'+_0x4d9665[_0x2071ae(0x18a)]+_0x2071ae(0x1ea)),await delay(0x7d0),!![];}catch(_0x44c9f6){return log(_0x2071ae(0x1c6)+_0x44c9f6,null,![]),null;}}async function loadGame(_0x2d31c6,_0x54af8a){const _0x1b324c=a31_0x47dd9f;try{if(signal['aborted']){log(_0x1b324c(0x182),null,'w');throw new Error('timeout');}const _0x4442b8=path[_0x1b324c(0x195)](__dirname,_0x1b324c(0x1bd),_0x2d31c6+_0x1b324c(0x1ae)),_0x1bd7e2=require(_0x4442b8);if(typeof _0x1bd7e2==='function'){const _0x4a05e0=await _0x1bd7e2(_0x54af8a,signal);await delay(0x3e8);if(!_0x4a05e0[_0x1b324c(0x1a8)])return log('[loadGame]:\x20Script\x20'+_0x2d31c6+_0x1b324c(0x1a5),null,![]),null;return _0x4a05e0['status']===_0x1b324c(0x1a1)?(log('[loadGame]:\x20Chạy\x20'+_0x2d31c6+_0x1b324c(0x183),null,'i'),_0x4a05e0):(log(_0x1b324c(0x18c)+_0x2d31c6+'\x20'+_0x4a05e0['status'],null,'i'),_0x4a05e0);}else return await delay(0x3e8),log(_0x1b324c(0x18f)+_0x2d31c6+_0x1b324c(0x1c9),null,![]),null;}catch(_0x18280d){return log('[loadGame]:\x20Lỗi\x20khi\x20load\x20và\x20thực\x20thi\x20script\x20'+_0x2d31c6+':\x20'+_0x18280d,null,![]),null;}}async function delay(_0x3b5c59){return new Promise(_0x2a5f7e=>{const _0x3c4d66=a31_0x3fff;if(signal['aborted'])throw new Error(_0x3c4d66(0x1ca));setTimeout(_0x2a5f7e,_0x3b5c59);});}
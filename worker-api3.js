const a31_0x281789=a31_0x1349;(function(_0x19c6f1,_0x910974){const _0x4c197a=a31_0x1349,_0xa9fa11=_0x19c6f1();while(!![]){try{const _0x6c1694=parseInt(_0x4c197a(0x17c))/0x1+parseInt(_0x4c197a(0x1a5))/0x2+parseInt(_0x4c197a(0x197))/0x3+-parseInt(_0x4c197a(0x187))/0x4*(parseInt(_0x4c197a(0x1a1))/0x5)+parseInt(_0x4c197a(0x16f))/0x6*(-parseInt(_0x4c197a(0x192))/0x7)+parseInt(_0x4c197a(0x1b0))/0x8*(-parseInt(_0x4c197a(0x198))/0x9)+-parseInt(_0x4c197a(0x170))/0xa;if(_0x6c1694===_0x910974)break;else _0xa9fa11['push'](_0xa9fa11['shift']());}catch(_0x2ede6e){_0xa9fa11['push'](_0xa9fa11['shift']());}}}(a31_0x4579,0x5e48c),require(a31_0x281789(0x18d))['config']());const {Worker,parentPort}=require('worker_threads'),{log,json}=require(a31_0x281789(0x155)),Genlogin=require(a31_0x281789(0x152)),httpPost=require(a31_0x281789(0x18f)),path=require('path'),PQueue=require(a31_0x281789(0x193))[a31_0x281789(0x19f)],gameQueue=new PQueue({'concurrency':0x2});let genlogin,profileNameId,profileId,browser,dataId;function a31_0x4579(){const _0x47287f=['1925775iqEIXE','6300Ghdxgz','timestamp','running','loop','elementExistsByXPath','[xuLyProfile]:đã\x20bị\x20hủy','\x20không\x20phải\x20là\x20một\x20hàm\x20hợp\x20lệ','default','message','5VfHIXF','[checkTeleWebOpen]:\x20Thực\x20thi\x20script\x20','[loadGame]:\x20Chạy\x20','[xuLyProfile]:\x20Xử\x20lý\x20browser\x20','1427668VXwzYJ','function','[xuLyGame]:\x20checkTeleWebOpen\x20OK','length','SERVER_HOST','[xuLyGame]:\x20getAks\x20OK','[xuLyProfile]:\x20Processing\x20profile:\x20','onOff','status','env','[xuLyGame]:Max\x20loop\x20rồi\x20bro','1432NIvxlL','[checkTeleWebOpen]:\x20Không\x20tìm\x20thấy\x20game\x20','postMessage','timGame','nextRunTime','FistUrl','[xuLyProfile]:\x20Đang\x20mở\x20trình\x20duyệt...','\x20không\x20trả\x20về\x20status',']:\x20Sai\x20aks\x20','aborted','APIKEY','getAks','[checkTeleWebOpen]:\x20','date','[xuLyBrowser]:\x20không\x20lấy\x20được\x20bot','[xuLyBrowser]:đã\x20bị\x20hủy','Start','[xuLyProfile]:\x20Lỗi\x20chung\x20xuLyProfile:\x20','[checkTeleWebOpen]:\x20Lỗi\x20trong\x20quá\x20trình\x20mở\x20trang\x20:\x20','timeout','\x20OFF','[xuLyBrowser]:\x20Bot\x20OK','[xuLyProfile]:\x20Xử\x20lý\x20profile\x20','\x20Tele\x20K\x20OK','./modules/Genlogin','\x20lỗi','[xuLyBrowser]:\x20','./modules/logger','[xuLyGame]:\x20checkTeleWebOpen\x20có\x20gì\x20đó\x20sai\x20sai\x20rồi\x20bro','runProfile','[xuLyProfile]:\x20Thử\x20lần\x20','\x20Script\x20mode','updateData','api','openUrl','Lỗi\x20xử\x20lý\x20profile:\x20','[xuLyGame]:\x20Loop\x20lại\x20,\x20loop\x20lại\x20lần\x20','coin','[xuLyGame]:\x20Thực\x20thi\x20','[xuLyProfile]:\x20Đang\x20mở\x20profile\x20','nextRunStamp',']:\x20Api\x20Mode','[worker-api3]:timeout','[loadGame]:\x20Lỗi\x20khi\x20load\x20và\x20thực\x20thi\x20script\x20',']:\x20Bot\x20','Done','Vào','[loadGame]:\x20Script\x20','[checkTeleWebOpen]:\x20vào\x20loadGame','activateTab','[xuLyBrowser]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20browser:\x20','\x20thành\x20công','stack','60LEaBrP','5546080sXbLri',']:\x20','end','\x20có\x20lỗi','\x20Chưa\x20tới\x20giờ\x20chạy','\x20loop','name','nowTime','join','split','type','[xuLyProfile]:\x20wsEndpoint:\x20','130127kCtmaZ','nextRun','Fail','scripts','[checkTeleWebOpen]:\x20Thực\x20thi\x20','[loadGame]:đã\x20bị\x20hủy','[xuLyGame]:đã\x20bị\x20hủy','[xuLyBrowser]:\x20Bot\x20không\x20tìm\x20thấy','[\x27worker-api3][',']:\x20XONG\x201\x20LƯỢT','Tìm','1177280rnqeRP','aks','getBotAll','[xuLyProfile]:\x20Không\x20thể\x20lấy\x20được\x20wsEndpoint\x20sau\x205\x20lần\x20thử','\x20để\x20kiểm\x20tra\x20wsEndpoint...','[xuLyGame]:\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20Game:\x20','dotenv','\x20is\x20not\x20running','./modules/http','No\x20bot\x20found','addData','87829daXOqG','p-queue','StartApi','checkProfileIsRun','\x20thất\x20bại'];a31_0x4579=function(){return _0x47287f;};return a31_0x4579();}const timGame=!![];genlogin=new Genlogin('',!![]);const http=new httpPost(process[a31_0x281789(0x1ae)][a31_0x281789(0x1a9)],process[a31_0x281789(0x1ae)][a31_0x281789(0x1ba)],!![]);let signal={'aborted':![]};function a31_0x1349(_0x4d0b84,_0x2dc5ab){const _0x457974=a31_0x4579();return a31_0x1349=function(_0x1349b3,_0x528e89){_0x1349b3=_0x1349b3-0x149;let _0x58d6d2=_0x457974[_0x1349b3];return _0x58d6d2;},a31_0x1349(_0x4d0b84,_0x2dc5ab);}parentPort['on'](a31_0x281789(0x1a0),async({profile:_0x5c397b})=>{const _0x19ffae=a31_0x281789;try{if(_0x5c397b==_0x19ffae(0x14d))signal[_0x19ffae(0x1b9)]=!![],log(_0x19ffae(0x164),null,'w');else{if(signal['aborted'])throw new Error(_0x19ffae(0x14d));log(_0x19ffae(0x184)+_0x5c397b+_0x19ffae(0x163),null,'w');const _0x5195ce=await xuLyProfile(_0x5c397b);!_0x5195ce?(log(_0x19ffae(0x150)+_0x5c397b+_0x19ffae(0x173),null,'w'),parentPort[_0x19ffae(0x1b2)]({'success':![],'result':_0x5195ce})):(log(_0x19ffae(0x150)+_0x5c397b+_0x19ffae(0x16d),null,'i'),parentPort[_0x19ffae(0x1b2)]({'success':!![],'result':_0x5195ce}));}}catch(_0x444c58){parentPort['postMessage']({'success':![],'error':{'message':_0x444c58[_0x19ffae(0x1a0)],'stack':_0x444c58[_0x19ffae(0x16e)]}});}});async function xuLyProfile(_0x5a686f){const _0xf39dc8=a31_0x281789;try{if(signal[_0xf39dc8(0x1b9)]){log('[xuLyProfile]:đã\x20bị\x20hủy',null,'w');throw new Error(_0xf39dc8(0x14d));}profileNameId=_0x5a686f,log(_0xf39dc8(0x1ab)+JSON['stringify'](_0x5a686f),null,'i');const _0x5ebe88=await xuLyBrowser(_0x5a686f);return!_0x5ebe88?(log(_0xf39dc8(0x1a4)+_0x5a686f+_0xf39dc8(0x196),null,'w'),null):(log(_0xf39dc8(0x1a4)+_0x5a686f+_0xf39dc8(0x16d)),!![]);}catch(_0x2c16fd){throw new Error(_0xf39dc8(0x15d)+_0x2c16fd[_0xf39dc8(0x1a0)]);}}async function xuLyEndPoint(_0x3c871c){const _0x590626=a31_0x281789;try{if(signal['aborted']){log('[xuLyProfile]:đã\x20bị\x20hủy',null,'w');throw new Error(_0x590626(0x14d));}const _0x722dcf=_0x3c871c[_0x590626(0x179)]('-')[0x1];profileId=_0x722dcf;let {wsEndpoint:_0x4ac238}=await genlogin[_0x590626(0x195)](_0x722dcf);if(signal[_0x590626(0x1b9)]){log(_0x590626(0x19d),null,'w');throw new Error(_0x590626(0x14d));}log('[xuLyProfile]:\x20wsEndpoint:\x20'+json(_0x4ac238),null,'i');if(!_0x4ac238){log(_0x590626(0x161)+_0x722dcf+_0x590626(0x18e),null,'i'),await genlogin[_0x590626(0x157)](_0x722dcf);for(let _0x2cecce=0x0;_0x2cecce<0x5;_0x2cecce++){if(signal[_0x590626(0x1b9)]){log(_0x590626(0x19d),null,'w');throw new Error(_0x590626(0x14d));}log(_0x590626(0x158)+(_0x2cecce+0x1)+_0x590626(0x18b),null,'i'),await delay(0x1388);if(signal[_0x590626(0x1b9)]){log(_0x590626(0x19d),null,'w');throw new Error(_0x590626(0x14d));}({wsEndpoint:_0x4ac238}=await genlogin[_0x590626(0x195)](_0x722dcf));if(signal[_0x590626(0x1b9)]){log(_0x590626(0x19d),null,'w');throw new Error(_0x590626(0x14d));}if(_0x4ac238){log('[xuLyProfile]:\x20Profile\x20đã\x20chạy\x20thành\x20công\x20với\x20wsEndpoint:'+_0x4ac238);break;}}if(!_0x4ac238)return log(_0x590626(0x18a),null,![]),![];}const _0xc31408=_0x3c871c;return await delay(0xbb8),log(_0x590626(0x1b6),null,'i'),log(_0x590626(0x17b)+_0x4ac238,null,'i'),_0x4ac238;}catch(_0x3b105e){log(_0x590626(0x14b)+_0x3b105e,null,![]);}}async function xuLyBrowser(_0x2a421e){const _0xe2e94d=a31_0x281789;try{if(signal['aborted']){log(_0xe2e94d(0x149),null,'w');throw new Error(_0xe2e94d(0x14d));}let _0x1f5c65=0x0;const _0x22b45c=await http[_0xe2e94d(0x189)](profileNameId);if(!_0x22b45c){log(_0xe2e94d(0x183),null,![]);throw new Error('No\x20bot\x20found');}if(_0x22b45c[_0xe2e94d(0x1a8)]<=0x0){log(_0xe2e94d(0x1be),null,![]);throw new Error(_0xe2e94d(0x190));}for(const _0x2d82db of _0x22b45c){if(signal['aborted']){log('[xuLyBrowser]:đã\x20bị\x20hủy',null,'w');throw new Error(_0xe2e94d(0x14d));}if(_0x2d82db){if(_0x2d82db['value']===_0xe2e94d(0x172)){log('['+profileNameId+_0xe2e94d(0x185),null,'i');break;}if(!_0x2d82db[_0xe2e94d(0x188)]){log('['+profileNameId+_0xe2e94d(0x166)+json(_0x2d82db)+'\x20ko\x20có\x20aks',null,![]);continue;}if(_0x2d82db[_0xe2e94d(0x1ac)]==='0'){log('['+profileNameId+_0xe2e94d(0x166)+json(_0x2d82db[_0xe2e94d(0x176)])+_0xe2e94d(0x14e),null,![]);continue;}const _0x542bfd=await genlogin[_0xe2e94d(0x177)]();if(_0x2d82db[_0xe2e94d(0x162)]>_0x542bfd[_0xe2e94d(0x199)]){log('['+profileNameId+_0xe2e94d(0x166)+json(_0x2d82db[_0xe2e94d(0x176)])+_0xe2e94d(0x174),null,'w');continue;}switch(_0x2d82db[_0xe2e94d(0x188)]){case'A':log('['+profileNameId+_0xe2e94d(0x171)+json(_0x2d82db[_0xe2e94d(0x176)])+'\x20Tele\x20A\x20OK'),await xuLyGame(_0x2d82db,'A');break;case'K':log('['+profileNameId+_0xe2e94d(0x171)+json(_0x2d82db[_0xe2e94d(0x176)])+_0xe2e94d(0x151)),await xuLyGame(_0x2d82db,'K');break;case'W':log('['+profileNameId+_0xe2e94d(0x171)+json(_0x2d82db[_0xe2e94d(0x176)])+'\x20Web\x20OK'),await xuLyGame(_0x2d82db,'W');break;default:log('['+profileNameId+_0xe2e94d(0x1b8)+json(_0x2d82db['aks']),null,![]);break;}log(_0xe2e94d(0x14f));}}return!![];}catch(_0x45316b){return log(_0xe2e94d(0x16c)+_0x45316b,null,![]),log(_0xe2e94d(0x154)+json(bots),null,![]),null;}}async function xuLyGame(_0x1332da,_0x3f0305){const _0x12ec85=a31_0x281789;try{if(signal[_0x12ec85(0x1b9)]){log(_0x12ec85(0x182),null,'w');throw new Error(_0x12ec85(0x14d));}if(_0x1332da[_0x12ec85(0x17a)]===_0x12ec85(0x15b)){log('[xuLyGame]:\x20'+_0x1332da[_0x12ec85(0x176)]+'\x20Api\x20mode',null,'i');const _0x1bb7b5=await genlogin[_0x12ec85(0x177)](),_0x5efe8b=await http[_0x12ec85(0x191)](profileNameId,_0x1332da[_0x12ec85(0x176)],_0x1bb7b5[_0x12ec85(0x1bd)],'',_0x12ec85(0x194),_0x12ec85(0x19a)),_0x3ecd19=_0x5efe8b['ID'],_0x10bfea={'bot':_0x1332da,'profileNameId':profileNameId,'genlogin':genlogin,'http':http,'dataId':_0x3ecd19},_0x44fd53=await loadGameApi(_0x1332da[_0x12ec85(0x176)],_0x10bfea);if(!_0x44fd53[_0x12ec85(0x1ad)])return log(_0x12ec85(0x160)+_0x1332da[_0x12ec85(0x176)]+_0x12ec85(0x153),null,![]),await http[_0x12ec85(0x15a)](profileNameId,_0x3ecd19,'Fail',_0x12ec85(0x17e)),null;if(_0x44fd53[_0x12ec85(0x1ad)]==_0x12ec85(0x19b))return log(_0x12ec85(0x160)+_0x1332da[_0x12ec85(0x176)]+_0x12ec85(0x175),null,'i'),_0x12ec85(0x19b);if(_0x44fd53[_0x12ec85(0x1ad)])return log('[xuLyGame]:\x20Thực\x20thi\x20'+_0x1332da[_0x12ec85(0x176)]+'\x20done'),await http[_0x12ec85(0x1b4)](profileNameId,_0x1332da['id'],_0x44fd53['nextRun'],_0x44fd53['nextRunStamp']),await http['updateData'](profileNameId,_0x3ecd19,'Ok',_0x12ec85(0x167),_0x44fd53[_0x12ec85(0x15f)],_0x44fd53[_0x12ec85(0x17d)]),!![];}else{log('[xuLyGame]:\x20'+_0x1332da[_0x12ec85(0x176)]+_0x12ec85(0x159),null,'i');const _0x5c2b04=await http[_0x12ec85(0x1bb)](_0x3f0305);if(_0x5c2b04){log(_0x12ec85(0x1aa));let _0x382e48=0x0;while(_0x382e48<0x2){if(signal[_0x12ec85(0x1b9)]){log(_0x12ec85(0x182),null,'w');throw new Error(_0x12ec85(0x14d));}const _0xcc7e33=await checkTeleWebOpen(_0x1332da,_0x5c2b04);if(_0xcc7e33===_0x12ec85(0x19b))_0x382e48++,log(_0x12ec85(0x15e)+_0x382e48+'/2',null,'i'),await delay(0x3e8);else return _0xcc7e33?(log(_0x12ec85(0x1a7)),!![]):(log(_0x12ec85(0x156),null,![]),null);}return log(_0x12ec85(0x1af),null,![]),null;}}}catch(_0x54c2c1){return log(_0x12ec85(0x18c)+_0x54c2c1,null,![]),null;}}async function checkTeleWebOpen(_0x4e5e82,_0x533145){const _0x2d3521=a31_0x281789;try{if(signal[_0x2d3521(0x1b9)]){log('[checkTeleWebOpen]:đã\x20bị\x20hủy',null,'w');throw new Error(_0x2d3521(0x14d));}let _0x21a6b8=await genlogin[_0x2d3521(0x16b)](browser,0x0);const _0xe7676c=await genlogin[_0x2d3521(0x19c)](_0x21a6b8,_0x533145['InputSearch'],0x7d0);!_0xe7676c&&(await genlogin[_0x2d3521(0x15c)](_0x21a6b8,'https://www.google.com'),await delay(0x7d0),await genlogin[_0x2d3521(0x15c)](_0x21a6b8,_0x533145[_0x2d3521(0x1b5)]),await delay(0x7d0));log(_0x2d3521(0x16a),null,'i');const _0x4d1c93=await genlogin[_0x2d3521(0x177)](),_0x569fbd=await http[_0x2d3521(0x191)](profileNameId,_0x4e5e82['name'],_0x4d1c93['date'],'',_0x2d3521(0x14a),_0x2d3521(0x19a));dataId=_0x569fbd['ID'];const _0x4a566a={'firstPage':_0x21a6b8,'bot':_0x4e5e82,'profileNameId':profileNameId,'getAks':_0x533145,'genlogin':genlogin,'http':http,'browser':browser,'dataId':dataId};log('[checkTeleWebOpen]:\x20dataId:\x20'+json(dataId),null,'i');if(timGame){await http[_0x2d3521(0x15a)](profileNameId,dataId,_0x2d3521(0x186));const _0x2733c4=await loadGame(_0x2d3521(0x1b3),_0x4a566a);if(_0x2733c4[_0x2d3521(0x1ad)]==_0x2d3521(0x19b))return log(_0x2d3521(0x180)+_0x4e5e82['name']+_0x2d3521(0x175),null,'i'),await http[_0x2d3521(0x15a)](profileNameId,dataId,'loop\x20new\x20game'),'loop';else{if(!_0x2733c4)return log(_0x2d3521(0x1b1)+_0x4e5e82[_0x2d3521(0x176)],null,![]),null;}}await http['updateData'](profileNameId,dataId,_0x2d3521(0x168));const _0x12193e=await loadGame(_0x4e5e82[_0x2d3521(0x176)],_0x4a566a);if(!_0x12193e['status'])return log('[checkTeleWebOpen]:\x20Không\x20thực\x20thi\x20script\x20'+_0x4e5e82['name'],null,![]),log(_0x2d3521(0x1bc)+json(_0x12193e),null,![]),null;else{if(_0x12193e[_0x2d3521(0x1ad)]=='loop')return log(_0x2d3521(0x180)+_0x4e5e82[_0x2d3521(0x176)]+_0x2d3521(0x175),null,'i'),await http['updateData'](profileNameId,dataId,_0x2d3521(0x19b)),'loop';}return await http[_0x2d3521(0x1b4)](profileNameId,_0x4e5e82['id'],_0x12193e[_0x2d3521(0x17d)],_0x12193e[_0x2d3521(0x162)]),await http[_0x2d3521(0x15a)](profileNameId,dataId,'Ok',_0x2d3521(0x167),_0x12193e[_0x2d3521(0x15f)],_0x12193e[_0x2d3521(0x17d)]),log(_0x2d3521(0x1a2)+_0x4e5e82[_0x2d3521(0x176)]+_0x2d3521(0x16d)),await delay(0x7d0),!![];}catch(_0x9ea4d3){return log(_0x2d3521(0x14c)+_0x9ea4d3,null,![]),null;}}async function loadGame(_0x4e9af5,_0xee1045){const _0xfd589f=a31_0x281789;try{if(signal[_0xfd589f(0x1b9)]){log(_0xfd589f(0x181),null,'w');throw new Error(_0xfd589f(0x14d));}const _0x33be21=path[_0xfd589f(0x178)](__dirname,_0xfd589f(0x17f),_0x4e9af5+'.js'),_0x18c21d=require(_0x33be21);if(typeof _0x18c21d===_0xfd589f(0x1a6)){const _0xf25dd5=await _0x18c21d(_0xee1045,signal);await delay(0x3e8);if(!_0xf25dd5[_0xfd589f(0x1ad)])return log(_0xfd589f(0x169)+_0x4e9af5+_0xfd589f(0x1b7),null,![]),null;return _0xf25dd5['status']===_0xfd589f(0x19b)?(log(_0xfd589f(0x1a3)+_0x4e9af5+_0xfd589f(0x175),null,'i'),_0xf25dd5):(log('[loadGame]:\x20Chạy\x20'+_0x4e9af5+'\x20'+_0xf25dd5[_0xfd589f(0x1ad)],null,'i'),_0xf25dd5);}else return await delay(0x3e8),log(_0xfd589f(0x169)+_0x4e9af5+_0xfd589f(0x19e),null,![]),null;}catch(_0x1d4c77){return log(_0xfd589f(0x165)+_0x4e9af5+':\x20'+_0x1d4c77,null,![]),null;}}async function delay(_0x495661){return new Promise(_0x52a124=>{const _0x22176b=a31_0x1349;if(signal[_0x22176b(0x1b9)])throw new Error(_0x22176b(0x14d));setTimeout(_0x52a124,_0x495661);});}
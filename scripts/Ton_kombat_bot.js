(function(_0x3a152b,_0x2cdb96){const _0x3bac9b=a0_0x91d9,_0x2ddda4=_0x3a152b();while(!![]){try{const _0x4818bc=parseInt(_0x3bac9b(0x14d))/0x1*(parseInt(_0x3bac9b(0x15a))/0x2)+parseInt(_0x3bac9b(0x188))/0x3*(-parseInt(_0x3bac9b(0x17f))/0x4)+parseInt(_0x3bac9b(0x15f))/0x5*(parseInt(_0x3bac9b(0x179))/0x6)+-parseInt(_0x3bac9b(0x15e))/0x7+parseInt(_0x3bac9b(0x143))/0x8+parseInt(_0x3bac9b(0x189))/0x9*(parseInt(_0x3bac9b(0x13f))/0xa)+parseInt(_0x3bac9b(0x176))/0xb*(-parseInt(_0x3bac9b(0x178))/0xc);if(_0x4818bc===_0x2cdb96)break;else _0x2ddda4['push'](_0x2ddda4['shift']());}catch(_0x1f3788){_0x2ddda4['push'](_0x2ddda4['shift']());}}}(a0_0x583c,0xced7c));import{log,json}from'../modules/logger.js';function a0_0x91d9(_0x6850bc,_0x8e96bc){const _0x583c74=a0_0x583c();return a0_0x91d9=function(_0x91d901,_0x4f2a49){_0x91d901=_0x91d901-0x137;let _0x56b794=_0x583c74[_0x91d901];return _0x56b794;},a0_0x91d9(_0x6850bc,_0x8e96bc);}function a0_0x583c(){const _0x578608=['join','coin','Không\x20tìm\x20thấy\x20iframe','][lamQuest]Không\x20click\x20được\x20vào\x20quest','floor','utf8',']nextRunAt:\x20','Không\x20tìm\x20thấy\x20quest','][Lỗi]:\x20','][checkClosePopup]\x20checkClosePopup\x20nè','message','path','][checkClaim]Click\x20claim\x20OK','claim','][lamQuest]:\x20',']Không\x20click\x20được\x20vào\x20Check\x20news','-autoTap','][lamQuest]Tìm\x20thấy\x20quest','snapshotItem','Iframe','readFile','218779ihUneq','][getCoin]:\x20','300rgpnBp','174kmRCNz','elementExistsByXPath','//span[text()=\x27Check\x20news\x27]','//span[contains(@class,\x27text-shadow\x20font-bold\x20text-3xl\x20lsm:text-[40px]\x27)]','promises','snapshotLength','177492SVOgtc','NextRun','load','\x20nè','][autoTap]:\x20','Không\x20click\x20được\x20vào\x20quest','[getFile]\x20error:\x20',']Vào\x20game\x20OK','][thoigianconlai]:Xử\x20lý\x20gian\x20còn\x20lại\x20nè','105MENhAG','18TFhUMq','textContent','NextRunStamp',']Không\x20tìm\x20thấy\x20coin',']Click\x20Check\x20news\x20OK','mainframe','][checkClaim]Không\x20click\x20được\x20vào\x20claim','][checkClosePopup]Click\x20claimDailyReward\x20OK','quest','01:00:00','4953460OtCyes','\x20OK','][click]Không\x20click\x20được\x20vào\x20','][checkClosePopup]Không\x20click\x20được\x20vào\x20claimDailyReward','10222584QFtOEF','][checkClaim]\x20checkClaim\x20nè','evaluate','//span[text()=\x27Claim\x27]',']Tìm\x20thấy\x20Check\x20news','][checkClaim]Không\x20tìm\x20thấy\x20claim','split',']Tìm\x20thấy\x20coin:\x20','claimDailyReward',']Ra\x20game\x20nè','1264GWIYWl',']Không\x20tìm\x20thấy\x20iframe','][lamQuest]Làm\x20Quest\x20nè','javascript','Không\x20tìm\x20thấy\x20main\x20frame',']Không\x20tìm\x20thấy\x20Claim',']không\x20xử\x20lý\x20được\x20thoigianconlai','ORDERED_NODE_SNAPSHOT_TYPE',']Không\x20tìm\x20thấy\x20Check\x20news','][checkClosePopup]\x20error:\x20',']Auto\x20tap\x20','updateData','switchFrame','1670FeXBow','][lamQuest]Không\x20tìm\x20thấy\x20quest','][checkClosePopup]Không\x20tìm\x20thayas\x20claimDailyReward','toLocaleDateString','3207820NpTSNp','5485dDXEUc','checkNews'];a0_0x583c=function(){return _0x578608;};return a0_0x583c();}export default async function (context,signal){const _0x22a41c=a0_0x91d9,choMs=ms=>new Promise(resolve=>setTimeout(resolve,ms)),{firstPage,bot,profileNameId,getAks,genlogin,http,browser,dataId,screenDataBuffer2,tasksDataBuffer2,taskIndex}=context;let currentPage=firstPage,subframe;const botName=bot['name'];let screenData=new Int32Array(screenDataBuffer2),tasksData=new Int32Array(tasksDataBuffer2),demLoop=0x0,remainTime;const xpath={'checkNews':_0x22a41c(0x17b),'claim':_0x22a41c(0x146),'coin':_0x22a41c(0x17c)};try{subframe=await vaoGame();if(!subframe){log(profileNameId,'['+botName+_0x22a41c(0x14e),![]);throw new Error(_0x22a41c(0x163));}log(profileNameId,'['+botName+_0x22a41c(0x186)),await delay(0x3e8);const kqCheckNews=await genlogin[_0x22a41c(0x17a)](profileNameId,subframe,xpath[_0x22a41c(0x160)],0x7d0);if(!kqCheckNews)log(profileNameId,'['+botName+_0x22a41c(0x155),null,![]);else{log(profileNameId,'['+botName+_0x22a41c(0x147));const clicked=await click(xpath[_0x22a41c(0x160)]);if(!clicked)log(profileNameId,'['+botName+_0x22a41c(0x170),null,![]);else return log(profileNameId,'['+botName+_0x22a41c(0x139)),{'status':'loop'};}const kqClaim=await checkClaim();!kqClaim&&log(profileNameId,'['+botName+_0x22a41c(0x152),null,![]);log(profileNameId,'['+botName+']Claim\x20OK');const coin=await getCoin();!coin&&log(profileNameId,'['+botName+_0x22a41c(0x138),![]);await http[_0x22a41c(0x158)](profileNameId,profileNameId,dataId,null,null,coin),log(profileNameId,'['+botName+_0x22a41c(0x14a)+coin);const remainT=await thoigianconlai(_0x22a41c(0x13e));return!remainT&&log(profileNameId,'['+botName+_0x22a41c(0x153),null,![]),log(profileNameId,'['+botName+']Xử\x20lý\x20thoigianconlai\x20OK'),log(profileNameId,'['+botName+_0x22a41c(0x167)+remainT[_0x22a41c(0x180)]),await clearVar(),{'status':!![],'coin':coin,'nextRun':remainT[_0x22a41c(0x180)],'nextRunStamp':remainT[_0x22a41c(0x137)]};}catch(error){return log(profileNameId,'['+botName+_0x22a41c(0x169)+error,![]),await clearVar(),{'status':null,'coin':0x0,'nextRun':0x0,'nextRunStamp':0x0};}async function vaoGame(){const _0xc20e6d=_0x22a41c;try{log(profileNameId,'['+botName+']Vào\x20game\x20nè');const subframe0=await genlogin[_0xc20e6d(0x159)](profileNameId,currentPage,getAks[_0xc20e6d(0x174)],0x2710);if(!subframe0){log(profileNameId,'['+botName+_0xc20e6d(0x14e),![]);throw new Error(_0xc20e6d(0x163));}return log(profileNameId,'['+botName+']Đã\x20tìm\x20thấy\x20iframe'),subframe0;}catch(error){return log(profileNameId,'['+botName+'][Lỗi]:\x20'+error,![]),null;}}async function raGame(){const _0x5de516=_0x22a41c;try{log(profileNameId,'['+botName+_0x5de516(0x14c)),currentPage=genlogin[_0x5de516(0x159)](profileNameId,currentPage,_0x5de516(0x13a),0x7d0);if(!currentPage){log(profileNameId,'['+botName+']Không\x20tìm\x20thấy\x20main\x20frame',![]);throw new Error(_0x5de516(0x151));}return currentPage;}catch(error){return log(profileNameId,'['+botName+'][Lỗi]:\x20'+error,![]),null;}}async function click(xpath){const _0x1269ab=_0x22a41c;try{await delay(0x3e8);const clicked=await genlogin['click'](profileNameId,subframe,{'xpath':xpath,'mainframe':currentPage,'browser':browser},0x3e8);await delay(0x3e8);if(!clicked)return log(profileNameId,'['+botName+_0x1269ab(0x141)+xpath,null,![]),null;return log(profileNameId,'['+botName+'][click]Click\x20'+xpath+_0x1269ab(0x140)),clicked;}catch(error){return log(profileNameId,'['+botName+'][click][Lỗi]:\x20'+error,null,![]),null;}}async function autoTap(tapElement){const _0x53f1cc=_0x22a41c;try{log(profileNameId,'['+botName+_0x53f1cc(0x157)+tapElement+_0x53f1cc(0x182));let codeAutoTap=await getFile(botName+_0x53f1cc(0x171));return genlogin[_0x53f1cc(0x150)](profileNameId,subframe,codeAutoTap),log(profileNameId,'['+botName+_0x53f1cc(0x157)+tapElement+_0x53f1cc(0x140)),!![];}catch(error){return log(profileNameId,'['+botName+_0x53f1cc(0x183)+error,null,![]),null;}}async function getFile(nameFile){const _0x1da579=_0x22a41c;try{const fs=require('fs'),path=require(_0x1da579(0x16c)),filePath=path[_0x1da579(0x161)](__dirname,_0x1da579(0x150),nameFile),code=await fs[_0x1da579(0x17d)][_0x1da579(0x175)](filePath,_0x1da579(0x166));return code;}catch(e){log(_0x1da579(0x185)+e[_0x1da579(0x16b)]);}}async function checkClosePopup(){const _0x14081d=_0x22a41c;try{log(profileNameId,'['+botName+_0x14081d(0x16a));const kqClosePopup=await genlogin[_0x14081d(0x17a)](profileNameId,subframe,xpath[_0x14081d(0x14b)],0x7d0);if(!kqClosePopup)log(profileNameId,'['+botName+_0x14081d(0x15c),null,![]);else{log(profileNameId,'['+botName+'][checkClosePopup]Tìm\x20thấy\x20claimDailyReward');const clicked=await click(xpath[_0x14081d(0x14b)]);!clicked?log(profileNameId,'['+botName+_0x14081d(0x142),null,![]):log(profileNameId,'['+botName+_0x14081d(0x13c));}return await delay(0xbb8),!![];}catch(error){log(profileNameId,'['+botName+_0x14081d(0x156)+error[_0x14081d(0x16b)],null,![]);}}async function checkClaim(){const _0x30af0c=_0x22a41c;try{log(profileNameId,'['+botName+_0x30af0c(0x144));const kqClaim=await genlogin[_0x30af0c(0x17a)](profileNameId,subframe,xpath[_0x30af0c(0x16e)],0x7d0);if(!kqClaim)log(profileNameId,'['+botName+_0x30af0c(0x148),null,![]);else{log(profileNameId,'['+botName+'][checkClaim]Tìm\x20thấy\x20claim');const clicked=await click(xpath['claim']);!clicked?log(profileNameId,'['+botName+_0x30af0c(0x13b),null,![]):log(profileNameId,'['+botName+_0x30af0c(0x16d));}return await delay(0x3e8),!![];}catch(e){return log(profileNameId,'['+botName+'][checkClaim]\x20error:\x20'+e[_0x30af0c(0x16b)],null,![]),null;}}async function lamQuest(){const _0x484f31=_0x22a41c;try{log(profileNameId,'['+botName+_0x484f31(0x14f));const kq10=await genlogin['elementExistsByXPath'](profileNameId,subframe,xpath[_0x484f31(0x13d)],0x7d0);if(!kq10){log(profileNameId,'['+botName+_0x484f31(0x15b),![]);throw new Error(_0x484f31(0x168));}log(profileNameId,'['+botName+_0x484f31(0x172));const clicked=await click(xpath[_0x484f31(0x13d)]);if(!clicked){log(profileNameId,'['+botName+_0x484f31(0x164),![]);throw new Error(_0x484f31(0x184));}return log(profileNameId,'['+botName+'][lamQuest]Click\x20quest\x20OK'),!![];}catch(error){return log(profileNameId,'['+botName+_0x484f31(0x16f)+error,null,![]),null;}}async function getCoin(){const _0xbea1ac=_0x22a41c;try{let xpathCoin=xpath[_0xbea1ac(0x162)];log(profileNameId,'['+botName+'][getCoin]:\x20Xử\x20lý\x20coin\x20nè');const numberString=await subframe[_0xbea1ac(0x145)](xpathCoin=>{const _0x2ddc2c=_0xbea1ac,result=document[_0x2ddc2c(0x145)](xpathCoin,document,null,XPathResult[_0x2ddc2c(0x154)],null);let numberString='';for(let i=0x0;i<result[_0x2ddc2c(0x17e)];i++){numberString+=result[_0x2ddc2c(0x173)](i)[_0x2ddc2c(0x18a)];}return numberString;},xpathCoin);return numberString;}catch(error){return log(profileNameId,'['+botName+_0xbea1ac(0x177)+error,null,![]),null;}}async function thoigianconlai(thoigianconlai){const _0x15ff7b=_0x22a41c;try{log(profileNameId,'['+botName+_0x15ff7b(0x187));let parts=thoigianconlai[_0x15ff7b(0x149)](':'),hour0=parseInt(parts[0x0]),minute0=parseInt(parts[0x1]),second0=parseInt(parts[0x2]),hours=parseInt(hour0),minutes=parseInt(minute0),seconds=parseInt(second0),totalSeconds=parseInt(hours*0xe10+minutes*0x3c+seconds);const unixTime=Math[_0x15ff7b(0x165)](Date['now']()/0x3e8),newUnixTime=unixTime+totalSeconds,newDate=new Date(newUnixTime*0x3e8),formattedDate=newDate[_0x15ff7b(0x15d)](),formattedTime=newDate['toLocaleTimeString']('en-GB',{'hour12':![]});let NextRun=formattedDate+'\x20'+formattedTime;return{'NextRun':NextRun,'NextRunStamp':newUnixTime};}catch(error){return log(profileNameId,'['+botName+'][thoigianconlai]:\x20'+error,null,![]),null;}}async function delay(ms){return new Promise(async resolve=>{setTimeout(resolve,ms);});}async function cTimeout(){const _0x3eeaf0=_0x22a41c;if(Atomics[_0x3eeaf0(0x181)](tasksData,taskIndex)===0x1)return!![];return![];}async function clearVar(){currentPage=null,subframe=null,screenData=null,tasksData=null;}};
function a0_0x26cb(_0x908154,_0x4a63dd){const _0x417350=a0_0x4173();return a0_0x26cb=function(_0x26cb8f,_0x3cbb25){_0x26cb8f=_0x26cb8f-0x1c2;let _0x1a2654=_0x417350[_0x26cb8f];return _0x1a2654;},a0_0x26cb(_0x908154,_0x4a63dd);}function a0_0x4173(){const _0x36c968=['(//div[contains(@data-tc-modal,\x27true\x27)]//button[contains(@data-tc-icon-button,\x27true\x27)])[1]','][checkClaim]Không\x20tìm\x20thayas\x20claim','message','now','][checkCloseTab]\x20Lỗi\x20khi\x20đóng\x20tab\x20mới','16zgUIRS',']Không\x20tìm\x20thấy\x20coin','00:10:00','popupBackBtn',']\x20đã\x20get\x20timeleft\x20ok\x20trước\x20đó\x20','Stars',']không\x20xử\x20lý\x20được\x20thoigianconlai','entries','transaction',')\x20không\x20hợp\x20lệ.\x20Tổng\x20số\x20tab:\x20','value',']Vào\x20game\x20nè','][Lỗi]:\x20','][checkClaim]\x20error:\x20','includes','\x20demLoop:','][checkQuayLaiXpath]\x20Tìm\x20thấy\x20backXpath','][checkQuayLaiXpath]\x20Chỉ\x20có\x20','Không\x20tìm\x20thấy\x20iframe','][checkBackGame]\x20Chỉ\x20có\x20','][checkQuayLaiXpath]\x20Vào\x20game\x20thành\x20công','\x20OK','name','Boost','][checkClosePopup]\x20XPath:\x20','closeAds','timeLeft','click','NextRunStamp','botSet','][click]Không\x20click\x20được\x20vào\x20','closeTab','elementExistsByXPath',']Không\x20tìm\x20thấy\x20iframe','tasks','length',']Ra\x20game\x20nè','][checkQuayLaiXpath]\x20Lỗi\x20khi\x20đóng\x20tab\x20mới','][checkQuayLaiXpath]\x20quay\x20lại\x20tasks\x20thành\x20công','][checkQuayLaiXpath]\x20Đóng\x20tab\x20mới\x20thành\x20công','//div[contains(@class,\x20\x27slider-onb-close\x27)]','][checkAutoLamTask]\x20checkAutoLamTask\x20nè','showTimeleft1','Không\x20tìm\x20thấy\x20main\x20frame','Become\x20a\x20king','tasktitle','home','][checkAutoLamTask]Click\x20taskClaim\x20OK','][thoigianconlai]:\x20','][checkClosePopup]\x20Click:\x20','\x20tab\x20đang\x20mở','20ISOGjt','web.telegram.org',']Tìm\x20thấy\x20timeleft:\x20','6GLcgQC','][checkQuayLaiXpath]\x20Không\x20tìm\x20thấy\x20iframe','map','LaunchCancel','split','keys',']Không\x20tìm\x20thấy\x20timeleft','][checkCloseTab]\x20Đóng\x20tab\x20mới\x20thành\x20công','//div[contains(@style,\x27-adsgram-\x27)]','246872CcHKkU','][checkClaim]Tìm\x20thayas\x20claim','][checkQuayLaiXpath]\x20Kiểm\x20tra\x20lần:\x20','url','][backToHome]Không\x20tìm\x20thayas\x20vaoHome','][backToHome]\x20error:\x20','][AdsGramDetec]:\x20Done\x20Ads','][checkBackGame]\x20Lỗi\x20khi\x20đóng\x20tab\x20mới','//div[contains(@class,\x27close_btn\x27)]','][AdsGramDetec]:\x20đang\x20chờ\x20Ads\x20','2865950vrtOyf','][checkQuayLaiXpath]\x20Lỗi\x20trong\x20quá\x20trình\x20kiểm\x20tra:\x20','2527188BDlYiA',']Click\x20show\x20timeleft1\x20OK','Invite','soLuotLamTask','][checkQuayLaiXpath]\x20Không\x20tìm\x20thấy\x20currentPage',']\x20Tìm\x20thấy\x20timeleft1:\x20','][checkAutoLamTask]Tìm\x20thayas\x20taskClaim',']Đã\x20tìm\x20thấy\x20iframe','][getCoin]:\x20','282578aSuOfP','][checkClaim]Không\x20click\x20là\x20claim','8cWdttp','][checkQuayLaiXpath]\x20Không\x20phát\x20hiện\x20tab\x20mới','en-GB','][checkBackGame]\x20Đóng\x20tab\x20mới\x20thành\x20công',']nextRunAt:\x20','][backToHome]\x20backToHome\x20nè','//div[contains(@class,\x27bg-bottom-menu-gradient\x27)]//a[contains(@href,\x27miner\x27)]','][checkAutoLamTask]Tìm\x20thayas\x20tasktitle:\x20','CloseGame','][xuLyhoiGianConLai]\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20thời\x20gian\x20còn\x20lại:\x20',']Không\x20tìm\x20thấy\x20timeleft1','//div[contains(@class,\x27divide-y\x27)]//div[contains(@class,\x20\x27items-center\x27)\x20and\x20not(contains(@class,\x20\x27opacity\x27))]//h3','//span[contains(text(),\x20\x27Thank\x20you\x27)]','][getCoin]:\x20Không\x20tìm\x20thấy\x20xpathCoin','][checkClaim]Click\x20claim\x20OK','][checkCloseTab]\x20error:\x20','][checkCloseTab]\x20Chỉ\x20có\x20','][backToHome]Tìm\x20thayas\x20vaoHome','NextRun','switchFrame','newTab',']Không\x20tìm\x20thấy\x20main\x20frame','claim','][checkQuayLaiXpath]Không\x20click\x20được\x20vào\x20closeQcBtn','toLocaleDateString','][AdsGramDetec]:\x20','398952lTxZBW','][thoigianconlai]:\x20Xử\x20lý\x20danh\x20sách\x20thời\x20gian','20308164IOABwW',':00','][checkAutoLamTask]Không\x20tìm\x20thayas\x20tasktitle','match','autoLamTask','][checkAutoLamTask]\x20error:\x20',']Xử\x20lý\x20thoigianconlai\x20OK','pages','getTextByXPath','hostname','][checkClosePopup]\x20error:\x20','countOpenTabs','][click][Lỗi]:\x20','14cmuvwZ','][click]Click\x20','timeleft1','294250mMYbtM','][checkAutoLamTask]Tìm\x20thayas\x20tasktitle','min','][getCoin]:\x20Xử\x20lý\x20coin\x20nè','][checkClaim]\x20check\x20Claim','][getCoin]:\x20Tìm\x20thấy\x20xpathCoin'];a0_0x4173=function(){return _0x36c968;};return a0_0x4173();}(function(_0x90f42b,_0x52489a){const _0x1dd9c0=a0_0x26cb,_0x309f4b=_0x90f42b();while(!![]){try{const _0x3d601e=-parseInt(_0x1dd9c0(0x211))/0x1*(-parseInt(_0x1dd9c0(0x20f))/0x2)+-parseInt(_0x1dd9c0(0x1f1))/0x3*(parseInt(_0x1dd9c0(0x1fa))/0x4)+parseInt(_0x1dd9c0(0x204))/0x5+parseInt(_0x1dd9c0(0x206))/0x6*(parseInt(_0x1dd9c0(0x23a))/0x7)+parseInt(_0x1dd9c0(0x248))/0x8*(-parseInt(_0x1dd9c0(0x22b))/0x9)+-parseInt(_0x1dd9c0(0x1ee))/0xa*(parseInt(_0x1dd9c0(0x23d))/0xb)+-parseInt(_0x1dd9c0(0x22d))/0xc;if(_0x3d601e===_0x52489a)break;else _0x309f4b['push'](_0x309f4b['shift']());}catch(_0x4c540a){_0x309f4b['push'](_0x309f4b['shift']());}}}(a0_0x4173,0x8f8b7));import{log,json}from'../modules/logger.js';export default async function (context,signal){const _0x359180=a0_0x26cb,choMs=ms=>new Promise(resolve=>setTimeout(resolve,ms)),{firstPage,bot,profileNameId,getAks,genlogin,http,browser,dataId,screenDataBuffer2,tasksDataBuffer2,taskIndex}=context;let currentPage=firstPage,subframe;const botName=bot[_0x359180(0x1d1)];let screenData=new Int32Array(screenDataBuffer2),tasksData=new Int32Array(tasksDataBuffer2),soLuotLamTask=0x5,autoLamTask='y';const defaultTimeLeft=_0x359180(0x24a);bot['botSet']&&(bot['botSet'][_0x359180(0x209)]&&(parseInt(bot['botSet'][_0x359180(0x209)][_0x359180(0x1c5)])>0x0&&(soLuotLamTask=parseInt(bot[_0x359180(0x1d8)]['soLuotLamTask'][_0x359180(0x1c5)]))),bot[_0x359180(0x1d8)][_0x359180(0x231)]&&(bot[_0x359180(0x1d8)][_0x359180(0x231)][_0x359180(0x1c5)]&&(autoLamTask=bot[_0x359180(0x1d8)][_0x359180(0x231)][_0x359180(0x1c5)])));const xpath={'home':_0x359180(0x217),'coin':'(//div[contains(@class,\x27md:px-8\x20px-4\x20md:py-5\x20py-2.5\x27)]//h4)[2]','timeLeft':'//button[@disabled]'};try{return await inToGame(),await delay(0x3e8),await checkClosePopup(),await delay(0x3e8),await checkClaim(),await delay(0x3e8),await finalStep();}catch(error){return log(profileNameId,'['+botName+_0x359180(0x1c7)+error,![]),await checkQuayLaiXpath(getAks['InputSearch']),{'status':![],'coin':null,'nextRun':null,'nextRunStamp':null};}async function checkClosePopup(){const _0x30964b=_0x359180,xpathClosePopup={'thanksYou':_0x30964b(0x21d),'closePopup':_0x30964b(0x1e3)},keys=Object[_0x30964b(0x1f6)](xpathClosePopup),lastKey=keys[keys[_0x30964b(0x1de)]-0x1];try{log(profileNameId,'['+botName+'][checkClosePopup]\x20checkClosePopup\x20nè',null,'i','-');let demLoop=0x0;const maxDemLoop=0xa;let kqWhile=0x0;while(demLoop<maxDemLoop){demLoop++;for(const [key,xpath]of Object[_0x30964b(0x1c2)](xpathClosePopup)){log(profileNameId,'['+botName+_0x30964b(0x1d3)+xpath+_0x30964b(0x1ca)+demLoop,null,'i');const kq=await genlogin[_0x30964b(0x1db)](profileNameId,subframe,xpath,0x3e8);if(kq){log(profileNameId,'['+botName+_0x30964b(0x1ec)+xpath,null,'i'),await click(xpath,0x3e8),await delay(0x1f4);break;}else key==lastKey&&(kqWhile=0x1);}if(kqWhile===0x1)break;}return!![];}catch(error){return log(profileNameId,'['+botName+_0x30964b(0x237)+error[_0x30964b(0x245)],null,![]),null;}}async function checkClaim(){const _0x5b4366=_0x359180;try{const xpathClaim={'miner':'//div[contains(@class,\x27bg-bottom-menu-gradient\x27)]//a[contains(@href,\x27miner\x27)]'};log(profileNameId,'['+botName+_0x5b4366(0x241),null,!![],'-');const kqClaim=await genlogin[_0x5b4366(0x1db)](profileNameId,subframe,xpathClaim['claim'],0x3e8);if(!kqClaim)log(profileNameId,'['+botName+_0x5b4366(0x244),null,![]);else{log(profileNameId,'['+botName+_0x5b4366(0x1fb));const clickedClaim=await click(xpathClaim[_0x5b4366(0x227)]);!clickedClaim?log(profileNameId,'['+botName+_0x5b4366(0x210),null,![]):(log(profileNameId,'['+botName+_0x5b4366(0x21f)),await delay(0x3e8));}return await checkQuayLaiXpath(xpath['home']),!![];}catch(e){return log(profileNameId,'['+botName+_0x5b4366(0x1c8)+e[_0x5b4366(0x245)],null,![]),null;}}async function backToHome(){const _0x23e6fd=_0x359180;try{log(profileNameId,'['+botName+_0x23e6fd(0x216));const kqVaoHome=await genlogin[_0x23e6fd(0x1db)](profileNameId,subframe,xpath[_0x23e6fd(0x1e9)],0x3e8);if(!kqVaoHome)return log(profileNameId,'['+botName+_0x23e6fd(0x1fe),null,![]),null;else{log(profileNameId,'['+botName+_0x23e6fd(0x222));const clickedHome=await click(xpath[_0x23e6fd(0x1e9)]);return!clickedHome?(log(profileNameId,'['+botName+'][backToHome]Không\x20click\x20là\x20vaoHome',null,![]),null):(log(profileNameId,'['+botName+'][backToHome]Click\x20vaoHome\x20OK'),await delay(0x3e8),await AdsGramDetect(),!![]);}}catch(e){return log(profileNameId,'['+botName+_0x23e6fd(0x1ff)+e[_0x23e6fd(0x245)],null,![]),null;}}async function checkAutoLamTask(){const _0xb4e74a=_0x359180;try{const xpathLamTask={'tasktitle':_0xb4e74a(0x21c),'taskClaim':'//div[contains(@class,\x20\x27items-center\x27)\x20and\x20not(contains(@class,\x20\x27opacity\x27))]//button[not(@disabled)]'};log(profileNameId,'['+botName+_0xb4e74a(0x1e4));let demLoop=0x0;const maxDemLoop=0x5;while(demLoop<maxDemLoop){demLoop++;const duyetXpathTitle='('+xpathLamTask[_0xb4e74a(0x1e8)]+')['+demLoop+']',duyetXpathClaim='('+xpathLamTask['taskClaim']+')['+demLoop+']',kqTask=await genlogin[_0xb4e74a(0x1db)](profileNameId,subframe,xpath[_0xb4e74a(0x1dd)],0x7d0);if(!kqTask){log(profileNameId,'['+botName+'][checkAutoLamTask]Không\x20tìm\x20thayas\x20tasks',null,![]);break;}else log(profileNameId,'['+botName+'][checkAutoLamTask]Tìm\x20thayas\x20tasks'),await click(xpath[_0xb4e74a(0x1dd)]),await delay(0x3e8),await AdsGramDetect(),await click(xpath[_0xb4e74a(0x1dd)]);const kqCheckTask=await genlogin['elementExistsByXPath'](profileNameId,subframe,duyetXpathTitle,0x7d0);if(!kqCheckTask)return log(profileNameId,'['+botName+_0xb4e74a(0x22f),null,![]),null;else{log(profileNameId,'['+botName+_0xb4e74a(0x23e));const kqTasktitle=await genlogin[_0xb4e74a(0x235)](profileNameId,subframe,duyetXpathTitle,0x7d0);if(!kqTasktitle)return log(profileNameId,'['+botName+_0xb4e74a(0x22f),null,![]),null;else{log(profileNameId,'['+botName+_0xb4e74a(0x218)+kqTasktitle);if(!kqTasktitle||kqTasktitle[_0xb4e74a(0x1c9)](_0xb4e74a(0x1c3))||kqTasktitle[_0xb4e74a(0x1c9)](_0xb4e74a(0x1d2))||kqTasktitle[_0xb4e74a(0x1c9)](_0xb4e74a(0x208))||kqTasktitle['includes'](_0xb4e74a(0x1d2))||kqTasktitle[_0xb4e74a(0x1c9)](_0xb4e74a(0x24d))||kqTasktitle[_0xb4e74a(0x1c9)](_0xb4e74a(0x1e7)))continue;}}log(profileNameId,'['+botName+_0xb4e74a(0x20c));const kqTaskClaim=await click(duyetXpathClaim);log(profileNameId,'['+botName+_0xb4e74a(0x1ea)),await delay(0x3e8),await AdsGramDetect(),await checkQuayLaiXpath(xpath[_0xb4e74a(0x1dd)]);}}catch(e){return log(profileNameId,'['+botName+_0xb4e74a(0x232)+e['message'],null,![]),null;}}async function checkCloseTab(){const _0x4c1d78=_0x359180;try{const pages=await browser[_0x4c1d78(0x234)]();let demLoop=0x0;const maxDemLoop=0xa;while(demLoop<maxDemLoop){demLoop++;const countTab=await genlogin[_0x4c1d78(0x238)](profileNameId,browser);if(countTab<=0x1){log(profileNameId,'['+botName+_0x4c1d78(0x221)+countTab+_0x4c1d78(0x1ed));break;}const indexTab=countTab-demLoop,pages=await browser[_0x4c1d78(0x234)]();if(indexTab>=pages[_0x4c1d78(0x1de)]){log(profileNameId,'['+botName+'][checkCloseTab]Index\x20tab\x20('+indexTab+_0x4c1d78(0x1c4)+pages[_0x4c1d78(0x1de)]);break;}const urlPage=await pages[indexTab][_0x4c1d78(0x1fd)](),parsedUrl=new URL(urlPage);if(parsedUrl[_0x4c1d78(0x236)]!='web.telegram.org'){const closeTab=await genlogin[_0x4c1d78(0x1da)](profileNameId,browser,indexTab,0xbb8);if(!closeTab){log(profileNameId,'['+botName+_0x4c1d78(0x247),null,![]);continue;}log(profileNameId,'['+botName+_0x4c1d78(0x1f8)),await delay(0x3e8);continue;}}return!![];}catch(error){return log(profileNameId,'['+botName+_0x4c1d78(0x220)+error[_0x4c1d78(0x245)],null,![]),null;}}async function checkBackGame(){const _0x431d09=_0x359180;try{const pages=await browser['pages']();let demLoop=0x0;const maxDemLoop=0xa;while(demLoop<maxDemLoop){demLoop++;const countTab=await genlogin[_0x431d09(0x238)](profileNameId,browser);if(countTab<=0x2){log(profileNameId,'['+botName+_0x431d09(0x1ce)+countTab+'\x20tab\x20đang\x20mở');break;}const indexTab=countTab-demLoop,urlPage=await browser['pages']()[indexTab][_0x431d09(0x1fd)](),parsedUrl=new URL(urlPage);if(parsedUrl[_0x431d09(0x236)]!=_0x431d09(0x1ef)&&parsedUrl[_0x431d09(0x236)]!=iframeHostName){const closeTab=await genlogin[_0x431d09(0x1da)](profileNameId,browser,indexTab,0xbb8);if(!closeTab){log(profileNameId,'['+botName+_0x431d09(0x201),null,![]);continue;}log(profileNameId,'['+botName+_0x431d09(0x214)),await delay(0x3e8);continue;}}return!![];}catch(error){return log(profileNameId,'['+botName+_0x431d09(0x220)+error[_0x431d09(0x245)],null,![]),null;}}async function checkQuayLaiXpath(backXpath){const _0x107b6e=_0x359180;try{const maxattemptCQ=0x5;let attemptCQ=0x0;const loopBack={'walletClose':_0x107b6e(0x243),'dialogClose':'(//dialog//button[contains(@class,\x27close-btn\x27)])[1]','closeQcBtn':_0x107b6e(0x202)};while(attemptCQ<maxattemptCQ){attemptCQ++,await delay(0x3e8);const kqCloseQcBtn=await genlogin[_0x107b6e(0x1db)](profileNameId,subframe,loopBack['closeQcBtn'],0x7d0);if(kqCloseQcBtn){const kqClickCloseQcBtn=await click(loopBack['closeQcBtn']);if(!kqClickCloseQcBtn){log(profileNameId,'['+botName+_0x107b6e(0x228),null,![]);continue;}log(profileNameId,'['+botName+'][checkQuayLaiXpath]\x20Click\x20closeQcBtn\x20OK');}log(profileNameId,'['+botName+_0x107b6e(0x1fc)+attemptCQ);const currentPage=await genlogin['getCurrentPage'](profileNameId,browser);if(!currentPage){log(profileNameId,'['+botName+_0x107b6e(0x20a),null,![]);continue;}log(profileNameId,'['+botName+'][checkQuayLaiXpath]\x20Tìm\x20thấy\x20currentPage');const kqTelePage=await genlogin[_0x107b6e(0x1db)](profileNameId,currentPage,getAks[_0x107b6e(0x219)],0x7d0);if(!kqTelePage){log(profileNameId,'['+botName+'][checkQuayLaiXpath]\x20Phát\x20hiện\x20tab\x20mới');const countTab=await genlogin[_0x107b6e(0x238)](profileNameId,browser);if(countTab<=0x2){log(profileNameId,'['+botName+_0x107b6e(0x1cc)+countTab+_0x107b6e(0x1ed));break;}const closeTab=await genlogin[_0x107b6e(0x1da)](profileNameId,browser,countTab-0x1,0xbb8);if(!closeTab){log(profileNameId,'['+botName+_0x107b6e(0x1e0),null,![]);continue;}log(profileNameId,'['+botName+_0x107b6e(0x1e2)),await delay(0xbb8);continue;}log(profileNameId,'['+botName+_0x107b6e(0x212)),subframe=await vaoGame();if(!subframe){log(profileNameId,'['+botName+_0x107b6e(0x1f2),null,![]);continue;}log(profileNameId,'['+botName+_0x107b6e(0x1cf));const kqbackXpath=await genlogin[_0x107b6e(0x1db)](profileNameId,subframe,backXpath,0x7d0);if(kqbackXpath){log(profileNameId,'['+botName+_0x107b6e(0x1cb));break;}if(!![]){let attemptBack=0x0,maxAttempBack=0x5,kqBack=![];while(attemptBack<maxAttempBack){attemptBack++,log(profileNameId,'['+botName+'][checkQuayLaiXpath]\x20Kiểm\x20tra\x20lần\x20quay\x20lại:\x20'+attemptBack);const kqbackXpath=await genlogin[_0x107b6e(0x1db)](profileNameId,subframe,backXpath,0x7d0);if(kqbackXpath){log(profileNameId,'['+botName+_0x107b6e(0x1cb));break;}const kqb0=await genlogin[_0x107b6e(0x1db)](profileNameId,currentPage,getAks[_0x107b6e(0x24b)],0x3e8);if(kqb0){await clickM(getAks[_0x107b6e(0x24b)]);continue;}await delay(0x3e8);}}const kqPopupLaunch=await genlogin['elementExistsByXPath'](profileNameId,currentPage,getAks[_0x107b6e(0x1f4)],0x3e8);if(kqPopupLaunch){await clickM(getAks[_0x107b6e(0x1f4)]);continue;}await delay(0x3e8),await AdsGramDetect();}return log(profileNameId,'['+botName+_0x107b6e(0x1e1)),!![];}catch(error){return log(profileNameId,'['+botName+_0x107b6e(0x205)+error[_0x107b6e(0x245)],null,![]),null;}}async function inToGame(){const _0x39c970=_0x359180;try{subframe=await vaoGame();if(!subframe){log(profileNameId,'['+botName+_0x39c970(0x1dc),![]);throw new Error('Không\x20tìm\x20thấy\x20iframe');}else return log(profileNameId,'['+botName+_0x39c970(0x20d)),!![];}catch(error){log(profileNameId,'['+botName+_0x39c970(0x1c7)+error,![]);throw new Error(_0x39c970(0x1cd));}}async function vaoGame(){const _0x509af3=_0x359180;try{log(profileNameId,'['+botName+_0x509af3(0x1c6),null,'-');const subframe0=await genlogin['getCurrentPage'](profileNameId,browser);parseInt(bot[_0x509af3(0x225)])!=0x0&&(currentPage=subframe0);await delay(0x3e8);if(!subframe0){log(profileNameId,'['+botName+_0x509af3(0x1dc),![]);throw new Error(_0x509af3(0x1cd));}return log(profileNameId,'['+botName+']Đã\x20tìm\x20thấy\x20iframe'),subframe0;}catch(error){return log(profileNameId,'['+botName+_0x509af3(0x1c7)+error,![]),null;}}async function raGame(){const _0x388546=_0x359180;try{log(profileNameId,'['+botName+_0x388546(0x1df)),currentPage=genlogin[_0x388546(0x224)](profileNameId,currentPage,'mainframe',0x7d0);if(!currentPage){log(profileNameId,'['+botName+_0x388546(0x226),![]);throw new Error(_0x388546(0x1e6));}return currentPage;}catch(error){return log(profileNameId,'['+botName+_0x388546(0x1c7)+error,![]),null;}}async function click(xpath){const _0x55d164=_0x359180;try{await delay(0x3e8);const clicked=await genlogin[_0x55d164(0x1d6)](profileNameId,subframe,{'xpath':xpath,'mainframe':currentPage,'browser':browser},0x7d0);await delay(0x3e8);if(!clicked)return log(profileNameId,'['+botName+'][click]Không\x20click\x20được\x20vào\x20'+xpath,null,![]),!![];return log(profileNameId,'['+botName+_0x55d164(0x23b)+xpath+'\x20OK'),clicked;}catch(error){return log(profileNameId,'['+botName+_0x55d164(0x239)+error,null,![]),null;}}async function clickM(xpath){const _0x4aff10=_0x359180;try{await delay(0x3e8);const clicked=await genlogin[_0x4aff10(0x1d6)](profileNameId,currentPage,{'xpath':xpath,'mainframe':currentPage,'browser':browser},0x3e8);await delay(0x3e8);if(!clicked)return log(profileNameId,'['+botName+_0x4aff10(0x1d9)+xpath,null,![]),null;return log(profileNameId,'['+botName+_0x4aff10(0x23b)+xpath+_0x4aff10(0x1d0)),clicked;}catch(error){return log(profileNameId,'['+botName+_0x4aff10(0x239)+error,null,![]),null;}}async function getCoin(){const _0xb3b9c9=_0x359180;try{let coinValue=0x0,xpathCoin=xpath['coin'];log(profileNameId,'['+botName+_0xb3b9c9(0x240));const kqCoin=await genlogin['elementExistsByXPath'](profileNameId,subframe,xpathCoin,0x3e8);if(!kqCoin)return log(profileNameId,'['+botName+_0xb3b9c9(0x21e),null,![]),null;else{log(profileNameId,'['+botName+_0xb3b9c9(0x242));const coinText=await genlogin[_0xb3b9c9(0x235)](profileNameId,subframe,xpathCoin);log(profileNameId,'['+botName+'][getCoin]:\x20coinText:\x20'+coinText),coinValue=coinText;}return coinValue;}catch(error){return log(profileNameId,'['+botName+_0xb3b9c9(0x20e)+error,null,![]),null;}}async function finalStep(){const _0x21d860=_0x359180;try{await checkQuayLaiXpath(xpath['home']),await backToHome();const coin=await getCoin();!coin?log(profileNameId,'['+botName+_0x21d860(0x249),![]):(await http['updateData'](profileNameId,profileNameId,dataId,null,null,coin),log(profileNameId,'['+botName+']Tìm\x20thấy\x20coin:\x20'+coin));const remainT=await xuLyhoiGianConLai();return!remainT&&log(profileNameId,'['+botName+_0x21d860(0x24e),null,![]),log(profileNameId,'['+botName+_0x21d860(0x233)),log(profileNameId,'['+botName+_0x21d860(0x215)+remainT[_0x21d860(0x223)]),{'status':!![],'coin':coin,'nextRun':remainT['NextRun'],'nextRunStamp':remainT[_0x21d860(0x1d7)]};}catch(error){return log(profileNameId,'['+botName+'][finalStep]\x20Lỗi\x20trong\x20quá\x20trình\x20xử\x20lý\x20cuối\x20cùng:\x20'+error['message'],null,![]),{'status':![],'coin':null,'nextRun':null,'nextRunStamp':null};}}async function xuLyhoiGianConLai(){const _0x18a0e7=_0x359180;try{let timeleft=[_0x18a0e7(0x24a),0x0],timeleft1=[_0x18a0e7(0x24a),0x0],demLoop=0x0;const maxDemLoop=0x5;while(demLoop<maxDemLoop){demLoop++;if(timeleft[0x1]===0x1)log(profileNameId,'['+botName+_0x18a0e7(0x24c)+timeleft[0x0]);else{const kqCkTime=await genlogin[_0x18a0e7(0x1db)](profileNameId,subframe,xpath[_0x18a0e7(0x1d5)],0x3e8);if(!kqCkTime)log(profileNameId,'['+botName+_0x18a0e7(0x1f7),null,![]);else{const kqGetTime=await genlogin[_0x18a0e7(0x235)](profileNameId,subframe,xpath[_0x18a0e7(0x1d5)],0x3e8);!kqGetTime&&log(profileNameId,'['+botName+']Không\x20tìm\x20thấy\x20thoigian\x20con\x20lai',null,![]);log(profileNameId,'['+botName+_0x18a0e7(0x1f0)+kqGetTime);const regex=/(\d+)h\s+(\d+)m/,match=kqGetTime[_0x18a0e7(0x230)](regex);match&&(timeleft[0x0]=parseInt(match[0x1],0xa)+':'+parseInt(match[0x2],0xa)+_0x18a0e7(0x22e),timeleft[0x1]=0x1);}}if(timeleft1[0x1]===0x1)log(profileNameId,'['+botName+']\x20đã\x20get\x20timeleft1\x20ok\x20trước\x20đó\x20'+timeleft1[0x0]);else{const kqCkTimeleft1=await genlogin['elementExistsByXPath'](profileNameId,subframe,xpath[_0x18a0e7(0x23c)],0x3e8);if(!kqCkTimeleft1){log(profileNameId,'['+botName+_0x18a0e7(0x21b),null,![]);const kqShowTimeleft1=await genlogin[_0x18a0e7(0x1db)](profileNameId,subframe,xpath['showTimeleft1'],0x3e8);if(kqShowTimeleft1){await click(xpath[_0x18a0e7(0x1e5)]),await delay(0x3e8),log(profileNameId,'['+botName+_0x18a0e7(0x207));continue;}}else{const kqGetTimeleft1=await genlogin[_0x18a0e7(0x235)](profileNameId,subframe,xpath['timeleft1'],0x3e8);if(!kqGetTimeleft1)log(profileNameId,'['+botName+_0x18a0e7(0x21b),null,![]);else{log(profileNameId,'['+botName+_0x18a0e7(0x20b)+kqGetTimeleft1);const regex=/(\d+)h\s+(\d+)m/,match=kqGetTimeleft1[_0x18a0e7(0x230)](regex);match&&(timeleft1[0x0]=parseInt(match[0x1],0xa)+':'+parseInt(match[0x2],0xa)+':00',timeleft1[0x1]=0x1);}}}}return await thoigianconlai(timeleft[0x0],timeleft1[0x0]);}catch(error){return log(profileNameId,'['+botName+_0x18a0e7(0x21a)+error['message'],null,![]),{'NextRun':0x0,'NextRunStamp':0x0};}}async function thoigianconlai(...listOfTimes){const _0x18d71a=_0x359180;try{log(profileNameId,'['+botName+_0x18d71a(0x22c));const totalSecondsList=listOfTimes[_0x18d71a(0x1f3)](timeStr=>{const _0x1b02a3=_0x18d71a;log(profileNameId,'['+botName+'][thoigianconlai]'+timeStr);const parts=timeStr[_0x1b02a3(0x1f5)](':'),hours=parseInt(parts[0x0],0xa)||0x0,minutes=parseInt(parts[0x1],0xa)||0x0,seconds=parseInt(parts[0x2],0xa)||0x0;return hours*0xe10+minutes*0x3c+seconds;}),minTotalSeconds=Math[_0x18d71a(0x23f)](...totalSecondsList),unixTime=Math['floor'](Date[_0x18d71a(0x246)]()/0x3e8),newUnixTime=unixTime+minTotalSeconds,newDate=new Date(newUnixTime*0x3e8),formattedDate=newDate[_0x18d71a(0x229)](),formattedTime=newDate['toLocaleTimeString'](_0x18d71a(0x213),{'hour12':![]}),NextRun=formattedDate+'\x20'+formattedTime;return{'NextRun':NextRun,'NextRunStamp':newUnixTime};}catch(error){return log(profileNameId,'['+botName+_0x18d71a(0x1eb)+error,null,![]),null;}}async function AdsGramDetect(){const _0x392e71=_0x359180;try{const xpathAdsGram=_0x392e71(0x1f9);let kqAdsGram=await genlogin[_0x392e71(0x1db)](profileNameId,subframe,xpathAdsGram,0x3e8);if(kqAdsGram){let demLoop=0x0;const maxDemLoop=0x3c;while(demLoop<maxDemLoop){demLoop++,kqAdsGram=await genlogin['elementExistsByXPath'](profileNameId,subframe,xpathAdsGram,0x3e8),log(profileNameId,'['+botName+_0x392e71(0x203)+demLoop+'/'+maxDemLoop,null,'i');if(!kqAdsGram){log(profileNameId,'['+botName+_0x392e71(0x200),null,'i');break;}await choMs(0x7d0);}return!![];}else{const kqAdsGram2=await genlogin[_0x392e71(0x1db)](profileNameId,currentPage,getAks[_0x392e71(0x1d4)],0x3e8);if(kqAdsGram2)return await clickM(getAks[_0x392e71(0x1d4)]),!![];return null;}}catch(error){return log(profileNameId,'['+botName+_0x392e71(0x22a)+error,null,![]),null;}}async function delay(ms){return new Promise(async resolve=>{setTimeout(resolve,ms);});}async function cTimeout(){if(Atomics['load'](tasksData,taskIndex)===0x1)return!![];return![];}};
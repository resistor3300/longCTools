(function(_0x21b5a7,_0x45bfb9){const _0xfde05c=a0_0x3ba8,_0x2550d0=_0x21b5a7();while(!![]){try{const _0x287ccd=-parseInt(_0xfde05c(0x23c))/0x1*(-parseInt(_0xfde05c(0x21c))/0x2)+-parseInt(_0xfde05c(0x1f7))/0x3+-parseInt(_0xfde05c(0x24c))/0x4*(parseInt(_0xfde05c(0x1da))/0x5)+parseInt(_0xfde05c(0x1df))/0x6*(parseInt(_0xfde05c(0x231))/0x7)+parseInt(_0xfde05c(0x21b))/0x8+-parseInt(_0xfde05c(0x1f0))/0x9+-parseInt(_0xfde05c(0x221))/0xa;if(_0x287ccd===_0x45bfb9)break;else _0x2550d0['push'](_0x2550d0['shift']());}catch(_0x3ab293){_0x2550d0['push'](_0x2550d0['shift']());}}}(a0_0x3ae5,0x79ae4));function a0_0x3ae5(){const _0x5b7b44=[']Không\x20tìm\x20thấy\x20iframe','][lamTask]Click\x20task\x20OK','][lamTask]Click\x20home\x20OK','toLocaleTimeString','(//div[contains(@class,\x27_balance_\x27)])[4]','][checkClosePopup]Tìm\x20thấy\x20nutX','//img[contains(@src,\x27/assets/task\x27)\x20and\x20contains(@alt,\x27navigation\x27)]','][town]Tìm\x20thấy\x20town','//button[text()=\x27Watch\x27]','buy','][checkQuayLaiXpath]\x20Lỗi\x20khi\x20đóng\x20tab\x20mới','6860fRTLhR',']không\x20Tìm\x20thấy\x20coinTag','builder','][checkQuayLaiXpath]\x20Không\x20phát\x20hiện\x20tab\x20mới','][town]Tìm\x20thấy\x20home','watch','][lamTask]Không\x20click\x20dc\x20inputCode',']Lôi\x20Town','countOpenTabs','taskTitle','][lamTask]Làm\x20Task\x20nè','][click]Click\x20',']Không\x20tìm\x20thấy\x20main\x20frame','][lamTask]Không\x20click\x20là\x20startMission','NextRun','][checkQuayLaiXpath]\x20Kiểm\x20tra\x20lần\x20quay\x20lại:\x20','updateData',']Ra\x20game\x20nè','//div[contains(@class,\x27_listContainer_\x27)]//div[contains(@class,\x27_container_\x27)]','//button[contains(@class,\x27_crosBtn_\x27)]','][town]Tìm\x20thấy\x20getIt','//img[contains(@src,\x27/assets/town\x27)]','][checkQuayLaiXpath]\x20Tìm\x20thấy\x20backXpath','][lamTask]Click\x20claim2tr\x20OK','dialogClose','][lamTask]Tìm\x20thấy\x20code:\x20','][checkQuayLaiXpath]\x20quay\x20lại\x20tasks\x20thành\x20công','//button[text()=\x27Check\x27]','][lamTask]Không\x20tìm\x20thấy\x20code','botSet','][lamTask]Tìm\x20thấy\x20claim','][town]Tìm\x20thấy\x20worker','][town]Không\x20click\x20được\x20vào\x20builder',']Done\x20lamTask','Không\x20tìm\x20thấy\x20iframe','475lnQAeK','][checkClosePopup]Tìm\x20thấy\x20getIt','][lamTask]Không\x20tìm\x20thất\x20finishMission','//img[contains(@src,\x27/assets/coin_\x27)\x20and\x20contains(@alt,\x27navigation\x27)]','][town]Không\x20tìm\x20thấy\x20builder','12nJBSDP','getTextByXPath','][checkQuayLaiXpath]\x20Tìm\x20thấy\x20currentPage','(//div[contains(@class,\x27_balance_\x27)])[2]','walletClose',']nextRunAt:\x20','click','getCode','][lamTask]Tìm\x20thất\x20taskTitle:\x20','getCurrentPage','home','][click][Lỗi]:\x20','][town]Tìm\x20thấy\x20mua\x20',']không\x20xử\x20lý\x20được\x20thoigianconlai','//button[text()=\x27Buy\x27]','getIt','toLocaleDateString','659709nRbJZz','][lamTask]Click\x20watch\x20OK','task','][checkQuayLaiXpath]\x20Phát\x20hiện\x20tab\x20mới','][thoigianconlai]:Xử\x20lý\x20gian\x20còn\x20lại\x20nè','][checkQuayLaiXpath]\x20Lỗi\x20trong\x20quá\x20trình\x20kiểm\x20tra:\x20','typeText','2256831lfDibf','][lamTask]Click\x20submit\x20OK','][lamTask]Click\x20inputCode\x20OK','upgrade',']Vào\x20game\x20nè',']Không\x20tìm\x20thấy\x20coin','value','(//div[contains(@class,\x27_balance_\x27)])[1]','][lamTask]Type\x20code\x20','submit','][checkClosePopup]\x20checkClosePopup\x20nè',']Tìm\x20thấy\x20coinTag','][town]Không\x20click\x20được\x20vào\x20nutX','now',']Đã\x20tìm\x20thấy\x20iframe','][lamTask]Không\x20click\x20dc\x20checkBtn','\x20OK','listBuilder','][checkQuayLaiXpath]\x20Vào\x20game\x20thành\x20công','closeTab','startMission','][town]Tìm\x20thấy\x20nâng\x20cấp\x20',']Vào\x20game\x20OK','replace','][Lỗi]:\x20','][lamTask]Không\x20quay\x20lại\x20được\x20tasks','][checkQuayLaiXpath]\x20Đóng\x20tab\x20mới\x20thành\x20công','message','town','][lamTask]Không\x20click\x20dc\x20watch','inputCode','elementExistsByXPath','][lamTask]Click\x20finishMission\x20OK','switchFrame','en-GB','][town]Tìm\x20thấy\x20relax:\x20','5162240mMStrk','421414FPSRkq','floor','//img[contains(@src,\x27/assets/builder_\x27)]','][lamTask]Không\x20click\x20được\x20vào\x20task','//div[contains(@class,\x27_actionContent_\x27)]//button[text()=\x27Get\x20it!\x27]','1945030ERRtHg','][town]Tìm\x20thấy\x20nutX','][checkQuayLaiXpath]\x20Chỉ\x20có\x20','][lamTask]Không\x20click\x20dc\x20finishMission','nutX','//button[text()=\x27Claim\x27]',']Lôi\x20lamTask','xpathBackTask','][lamTask]Tìm\x20thất\x20finishMission','][lamTask]:\x20','//button[normalize-space(text())=\x27Claim\x27\x20and\x20not(@disabled)]','//button[text()=\x27Start\x20mission\x27]','soLuotlamTask','CloseGame','][lamTask]Tìm\x20thấy\x20checkBtn:\x20','][lamTask]Không\x20tìm\x20thất\x20task','2151506FOVBEe','finishMission','(//div[contains(@class,\x27_balance_\x27)])[3]','coin',']Done\x20Town','//div[contains(@class,\x27_building_\x27)]//img[contains(@src,\x27/assets/b_\x27)\x20and\x20not(ancestor::div[contains(@class,\x27_building_\x27)]//div[contains(@class,\x27_content_\x27)]//div[contains(@data-text,\x2720\x27)])]','popupBackBtn','claim','][click]Không\x20click\x20được\x20vào\x20','//img[contains(@alt,\x27right\x20chevron\x27)]','checkBtn','2HfxUca','][thoigianconlai]:\x20','][lamTask]Tìm\x20thất\x20startMission','][checkQuayLaiXpath]\x20Không\x20tìm\x20thấy\x20currentPage','match'];a0_0x3ae5=function(){return _0x5b7b44;};return a0_0x3ae5();}import{log,json}from'../modules/logger.js';export default async function (context,signal){const _0x5375b6=a0_0x3ba8,choMs=ms=>new Promise(resolve=>setTimeout(resolve,ms)),{firstPage,bot,profileNameId,getAks,genlogin,http,browser,dataId,screenDataBuffer2,tasksDataBuffer2,taskIndex}=context;let currentPage=firstPage,subframe;const botName=bot['name'];let screenData=new Int32Array(screenDataBuffer2),tasksData=new Int32Array(tasksDataBuffer2),demLoop=0x0,remainTime,soLuotlamTask=0x5;bot[_0x5375b6(0x1d4)][_0x5375b6(0x22d)][_0x5375b6(0x1fd)]&&(parseInt(bot[_0x5375b6(0x1d4)]['soLuotlamTask'][_0x5375b6(0x1fd)])>0x0&&(soLuotlamTask=parseInt(bot['botSet'][_0x5375b6(0x22d)][_0x5375b6(0x1fd)])));const xpath={'nutX':_0x5375b6(0x1ca),'coin':_0x5375b6(0x1fe),'coinBlock':_0x5375b6(0x1e2),'coinDiamond':_0x5375b6(0x233),'coinPlay':_0x5375b6(0x245),'getIt':_0x5375b6(0x220),'home':_0x5375b6(0x1dd),'task':_0x5375b6(0x247)};try{subframe=await vaoGame();if(!subframe){log(profileNameId,'['+botName+']Không\x20tìm\x20thấy\x20iframe',null,![]);throw new Error(_0x5375b6(0x1d9));}log(profileNameId,'['+botName+_0x5375b6(0x20d)),await delay(0x3e8);const closePopup=await checkClosePopup();await delay(0x3e8);if(bot['botSet'][_0x5375b6(0x213)][_0x5375b6(0x1fd)]==='y'){const kqTown=await checkTown();!kqTown&&log(profileNameId,'['+botName+_0x5375b6(0x253),null,![]),log(profileNameId,'['+botName+_0x5375b6(0x235)),await delay(0x7d0);}if(bot[_0x5375b6(0x1d4)]['autoLamTask'][_0x5375b6(0x1fd)]==='y'){const kqlamTask=await lamTask();!kqlamTask&&log(profileNameId,'['+botName+_0x5375b6(0x227),null,![]),log(profileNameId,'['+botName+_0x5375b6(0x1d8));}const coinTag=await genlogin[_0x5375b6(0x216)](profileNameId,subframe,xpath[_0x5375b6(0x234)],0x3e8);!coinTag&&log(profileNameId,'['+botName+_0x5375b6(0x24d));log(profileNameId,'['+botName+_0x5375b6(0x202));const coin=await genlogin[_0x5375b6(0x1e0)](profileNameId,subframe,xpath[_0x5375b6(0x234)],0x7d0);!coin&&log(profileNameId,'['+botName+_0x5375b6(0x1fc),null,![]);await http[_0x5375b6(0x1c7)](profileNameId,profileNameId,dataId,null,coin),log(profileNameId,'['+botName+']Tìm\x20thấy\x20coin:\x20'+coin);const remainT=await thoigianconlai('01h\x2000m');return!remainT&&log(profileNameId,'['+botName+_0x5375b6(0x1ec),null,![]),log(profileNameId,'['+botName+']Xử\x20lý\x20thoigianconlai\x20OK'),log(profileNameId,'['+botName+_0x5375b6(0x1e4)+remainT[_0x5375b6(0x25a)]),{'status':!![],'coin':coin,'nextRun':remainT[_0x5375b6(0x25a)],'nextRunStamp':remainT['NextRunStamp']};}catch(error){log(profileNameId,'['+botName+_0x5375b6(0x20f)+error,null,![]);}async function vaoGame(){const _0x4ea06b=_0x5375b6;try{log(profileNameId,'['+botName+_0x4ea06b(0x1fb));const subframe0=await genlogin[_0x4ea06b(0x218)](profileNameId,currentPage,getAks['Iframe'],0x2710);if(!subframe0){log(profileNameId,'['+botName+_0x4ea06b(0x241),null,![]);throw new Error(_0x4ea06b(0x1d9));}return log(profileNameId,'['+botName+_0x4ea06b(0x205)),subframe0;}catch(error){return log(profileNameId,'['+botName+_0x4ea06b(0x20f)+error,null,![]),null;}}async function raGame(){const _0x11712e=_0x5375b6;try{log(profileNameId,'['+botName+_0x11712e(0x1c8)),currentPage=genlogin[_0x11712e(0x218)](profileNameId,currentPage,'mainframe',0x7d0);if(!currentPage){log(profileNameId,'['+botName+_0x11712e(0x258),null,![]);throw new Error('Không\x20tìm\x20thấy\x20main\x20frame');}return currentPage;}catch(error){return log(profileNameId,'['+botName+_0x11712e(0x20f)+error,null,![]),null;}}async function click(xpath,tagClick=![]){const _0x556bd9=_0x5375b6;try{await delay(0x3e8);const clicked=await genlogin[_0x556bd9(0x1e5)](profileNameId,subframe,{'xpath':xpath,'mainframe':currentPage,'browser':browser,'tagClick':tagClick},0x7d0);await delay(0x3e8);if(!clicked)return log(profileNameId,'['+botName+'][click]Không\x20click\x20được\x20vào\x20'+xpath,null,![]),!![];return log(profileNameId,'['+botName+_0x556bd9(0x257)+xpath+'\x20OK'),clicked;}catch(error){return log(profileNameId,'['+botName+_0x556bd9(0x1ea)+error,null,![]),null;}}async function clickM(xpath){const _0x850b68=_0x5375b6;try{await delay(0x3e8);const clicked=await genlogin[_0x850b68(0x1e5)](profileNameId,currentPage,{'xpath':xpath,'mainframe':currentPage,'browser':browser},0x3e8);await delay(0x3e8);if(!clicked)return log(profileNameId,'['+botName+_0x850b68(0x239)+xpath,null,![]),null;return log(profileNameId,'['+botName+'][click]Click\x20'+xpath+_0x850b68(0x207)),clicked;}catch(error){return log(profileNameId,'['+botName+_0x850b68(0x1ea)+error,null,![]),null;}}async function checkClosePopup(){const _0x485019=_0x5375b6;try{log(profileNameId,'['+botName+_0x485019(0x201));let demLoop=0x0,maxDemLoop=0xa;while(demLoop<maxDemLoop){demLoop++;const kqGetIt=await genlogin[_0x485019(0x216)](profileNameId,subframe,xpath['getIt'],0x7d0);if(kqGetIt){log(profileNameId,'['+botName+_0x485019(0x1db)),await click(xpath[_0x485019(0x1ee)]),await delay(0x3e8);const kqNeedBack=await genlogin[_0x485019(0x216)](profileNameId,currentPage,getAks[_0x485019(0x237)],0x7d0);kqNeedBack&&(log(profileNameId,'['+botName+'][checkClosePopup]Tìm\x20thấy\x20popupBackBtn'),await clickM(getAks[_0x485019(0x237)]),await delay(0x3e8));continue;}else{const kqNutX=await genlogin[_0x485019(0x216)](profileNameId,subframe,xpath['nutX'],0x7d0);if(kqNutX){log(profileNameId,'['+botName+_0x485019(0x246)),await click(xpath[_0x485019(0x225)],!![]),await delay(0x3e8);const kqNeedBack1=await genlogin['elementExistsByXPath'](profileNameId,currentPage,getAks[_0x485019(0x237)],0x7d0);kqNeedBack1&&(log(profileNameId,'['+botName+'][checkClosePopup]Tìm\x20thấy\x20popupBackBtn'),await clickM(getAks['popupBackBtn']),await delay(0x3e8));continue;}}await delay(0x3e8);break;}}catch(e){return log(profileNameId,'['+botName+'][checkClosePopup]\x20error:\x20'+e[_0x485019(0x212)],null,![]),null;}}async function checkTown(){const _0xd7d999=_0x5375b6;try{const xpathTown={'getIt':_0xd7d999(0x220),'town':_0xd7d999(0x1cc),'builder':_0xd7d999(0x21e),'builderRelax':'//h6[contains(text(),\x27relaxing\x27)]','listBuilder':_0xd7d999(0x236),'buy':_0xd7d999(0x1ed),'upgrade':'//button[text()=\x27Upgrade\x27]'};let kqRelax=0x0;const kqVaoTown=await genlogin[_0xd7d999(0x216)](profileNameId,subframe,xpathTown[_0xd7d999(0x213)],0x7d0);kqVaoTown&&(log(profileNameId,'['+botName+_0xd7d999(0x248)),await click(xpathTown[_0xd7d999(0x213)]),await delay(0x3e8));const kqGetIt=await genlogin['elementExistsByXPath'](profileNameId,subframe,xpathTown[_0xd7d999(0x1ee)],0x7d0);kqGetIt&&(log(profileNameId,'['+botName+_0xd7d999(0x1cb)),await click(xpathTown['getIt']),await delay(0x3e8));const kqBuilder=await genlogin[_0xd7d999(0x216)](profileNameId,subframe,xpathTown[_0xd7d999(0x24e)],0x7d0);if(kqBuilder){log(profileNameId,'['+botName+_0xd7d999(0x1d6)),await click(xpathTown[_0xd7d999(0x24e)]),await delay(0x3e8),kqRelax=await genlogin['countXpath'](profileNameId,subframe,xpathTown['builderRelax'],0x7d0),log(profileNameId,'['+botName+_0xd7d999(0x21a)+json(kqRelax));const kqNutX=await genlogin[_0xd7d999(0x216)](profileNameId,subframe,xpath[_0xd7d999(0x225)],0x7d0);if(kqNutX){log(profileNameId,'['+botName+_0xd7d999(0x222));const kqnutx0=await click(xpath[_0xd7d999(0x225)],!![]);if(!kqnutx0)return log(profileNameId,'['+botName+_0xd7d999(0x203),null,![]),null;await delay(0x3e8);}}if(kqRelax>0x0){let demLoop=0x0,maxDemLoop=0x14,demLoopnangCap=kqRelax;while(demLoop<maxDemLoop){demLoop++,await delay(0x3e8),log(profileNameId,'['+botName+'][town]Loop:\x20'+demLoop+'/'+maxDemLoop);if(demLoopnangCap<=0x0)break;const tagbuilder='('+xpathTown[_0xd7d999(0x208)]+')['+demLoop+']',kqBuilder=await genlogin[_0xd7d999(0x216)](profileNameId,subframe,tagbuilder,0x7d0);if(!kqBuilder){log(profileNameId,'['+botName+_0xd7d999(0x1de),null,![]);continue;}await genlogin['scroll'](profileNameId,subframe,{'xpath':tagbuilder},0xbb8),await delay(0x3e8);const kqclick=await click(tagbuilder);if(!kqclick){log(profileNameId,'['+botName+_0xd7d999(0x1d7),null,![]);continue;}else{log(profileNameId,'['+botName+'][town]Click\x20builder\x20OK');const kqNangCap=await genlogin[_0xd7d999(0x216)](profileNameId,subframe,xpathTown[_0xd7d999(0x1fa)],0x3e8);if(kqNangCap){log(profileNameId,'['+botName+_0xd7d999(0x20c)+demLoopnangCap+'/'+kqRelax),await click(xpathTown['upgrade']),await delay(0x3e8),await click(xpath['nutX'],!![]),await delay(0x3e8),demLoopnangCap--;continue;}else{const kqBuy=await genlogin[_0xd7d999(0x216)](profileNameId,subframe,xpathTown[_0xd7d999(0x24a)],0x3e8);if(kqBuy){log(profileNameId,'['+botName+_0xd7d999(0x1eb)+demLoopnangCap+'/'+kqRelax),await click(xpathTown[_0xd7d999(0x24a)]),await delay(0x3e8),await click(xpath['nutX'],!![]),await delay(0x3e8),demLoopnangCap--;continue;}}}const kqNutX=await genlogin[_0xd7d999(0x216)](profileNameId,subframe,xpath[_0xd7d999(0x225)],0x3e8);kqNutX&&(log(profileNameId,'['+botName+_0xd7d999(0x222)),await click(xpath['nutX'],!![]),await delay(0x3e8));}}const kqHome=await genlogin['elementExistsByXPath'](profileNameId,subframe,xpath[_0xd7d999(0x1e9)],0x3e8);return kqHome&&(log(profileNameId,'['+botName+_0xd7d999(0x250)),await click(xpath[_0xd7d999(0x1e9)]),await delay(0x3e8)),!![];}catch(e){log(profileNameId,'['+botName+'][checkTown]\x20error:\x20'+e[_0xd7d999(0x212)],null,![]);}}async function lamTask(){const _0x83ea19=_0x5375b6;try{const taskXpath={'claim':_0x83ea19(0x22b),'task':_0x83ea19(0x23a),'startMission':_0x83ea19(0x22c),'watch':_0x83ea19(0x249),'inputCode':'//input[contains(@placeholder,\x27Provide\x20an\x20answer\x27)]','submit':'//button[text()=\x27Submit\x27]','taskTitle':'//h3[contains(@class,\x27_h3_\x27)]','finishMission':'//button[normalize-space(text())=\x27Finish\x20mission\x27\x20and\x20not(@disabled)]','claim':_0x83ea19(0x226),'xpathBackTask':_0x83ea19(0x1c9),'checkBtn':_0x83ea19(0x1d2)};log(profileNameId,'['+botName+_0x83ea19(0x256));const kqVaoTask=await genlogin['elementExistsByXPath'](profileNameId,subframe,xpath[_0x83ea19(0x1f2)],0x7d0);if(!kqVaoTask)return log(profileNameId,'['+botName+'][lamTask]Không\x20tìm\x20thất\x20task',null,![]),![];const kqClickTask=await click(xpath[_0x83ea19(0x1f2)]);if(!kqClickTask)return log(profileNameId,'['+botName+'][lamTask]Không\x20click\x20được\x20vào\x20task',null,![]),![];log(profileNameId,'['+botName+_0x83ea19(0x242));let demLoop=0x0,maxDemLoop=soLuotlamTask;while(demLoop<maxDemLoop){demLoop++,await delay(0x3e8);const tagTask='('+taskXpath[_0x83ea19(0x1f2)]+')['+demLoop+']',kqCheckTask=await genlogin['elementExistsByXPath'](profileNameId,subframe,tagTask,0x3e8);if(!kqCheckTask){log(profileNameId,'['+botName+_0x83ea19(0x230),null,![]);continue;}const kqClickTask=await click(tagTask);if(!kqClickTask){log(profileNameId,'['+botName+_0x83ea19(0x21f),null,![]);continue;}log(profileNameId,'['+botName+'][lamTask]Click\x20task\x20OK'),await delay(0x3e8);const kqStartMission=await genlogin['elementExistsByXPath'](profileNameId,subframe,taskXpath[_0x83ea19(0x20b)],0x7d0);if(kqStartMission){log(profileNameId,'['+botName+_0x83ea19(0x23e));const kqClickStartMission=await click(taskXpath[_0x83ea19(0x20b)]);!kqClickStartMission?log(profileNameId,'['+botName+_0x83ea19(0x259),null,![]):log(profileNameId,'['+botName+'][lamTask]Click\x20startMission\x20OK');await delay(0x7d0);const kqWatch=await genlogin[_0x83ea19(0x216)](profileNameId,subframe,taskXpath[_0x83ea19(0x251)],0x7d0);if(kqWatch){log(profileNameId,'['+botName+'][lamTask]Tìm\x20thấy\x20watch');const kqClickWatch=await click(taskXpath[_0x83ea19(0x251)]);!kqClickWatch?log(profileNameId,'['+botName+_0x83ea19(0x214),null,![]):log(profileNameId,'['+botName+_0x83ea19(0x1f1));}await checkQuayLaiXpath(taskXpath[_0x83ea19(0x228)]);continue;}const kqtaskTitle=await genlogin[_0x83ea19(0x1e0)](profileNameId,subframe,taskXpath[_0x83ea19(0x255)],0x7d0);if(kqtaskTitle){log(profileNameId,'['+botName+_0x83ea19(0x1e7)+kqtaskTitle);const kqCkCheckBtn=await genlogin[_0x83ea19(0x1e0)](profileNameId,subframe,taskXpath[_0x83ea19(0x23b)],0x3e8);if(kqCkCheckBtn){log(profileNameId,'['+botName+_0x83ea19(0x22f)+kqCkCheckBtn);const kqClickCkCheckBtn=await click(taskXpath[_0x83ea19(0x23b)]);!kqClickCkCheckBtn?log(profileNameId,'['+botName+_0x83ea19(0x206),null,![]):log(profileNameId,'['+botName+'][lamTask]Click\x20checkBtn\x20OK');}else{const kqInput=await genlogin[_0x83ea19(0x216)](profileNameId,subframe,taskXpath[_0x83ea19(0x215)],0xbb8);if(kqInput){const kqCode=await http[_0x83ea19(0x1e6)](profileNameId,profileNameId,botName,kqtaskTitle,0x0);if(kqCode[_0x83ea19(0x1fd)])log(profileNameId,'['+botName+_0x83ea19(0x1d0)+kqCode[_0x83ea19(0x1fd)]);else{log(profileNameId,'['+botName+_0x83ea19(0x1d3),null,![]);const checkBack=await checkQuayLaiXpath(taskXpath[_0x83ea19(0x228)]);if(!checkBack){log(profileNameId,'['+botName+_0x83ea19(0x210),![]);break;}continue;}log(profileNameId,'['+botName+'][lamTask]Tìm\x20thất\x20inputCode');const kqClickInput=await click(taskXpath['inputCode']);!kqClickInput?log(profileNameId,'['+botName+_0x83ea19(0x252),null,![]):log(profileNameId,'['+botName+_0x83ea19(0x1f9));await delay(0x3e8);const kqType=await genlogin[_0x83ea19(0x1f6)](profileNameId,currentPage,taskXpath[_0x83ea19(0x215)],kqCode[_0x83ea19(0x1fd)],0x1,0xbb8);if(kqType){log(profileNameId,'['+botName+_0x83ea19(0x1ff)+kqCode[_0x83ea19(0x1fd)]+_0x83ea19(0x207)),await delay(0x3e8);const kqClick1=await click(taskXpath[_0x83ea19(0x200)]);kqClick1&&(log(profileNameId,'['+botName+_0x83ea19(0x1f8)),await delay(0x3e8));}}}const kqCheckDone=await genlogin[_0x83ea19(0x216)](profileNameId,subframe,taskXpath[_0x83ea19(0x232)],0x7d0);if(kqCheckDone){log(profileNameId,'['+botName+_0x83ea19(0x229));const kqClickDone=await click(taskXpath[_0x83ea19(0x232)]);kqClickDone?log(profileNameId,'['+botName+_0x83ea19(0x217)):log(profileNameId,'['+botName+_0x83ea19(0x224),null,![]);const kqClaim=await genlogin[_0x83ea19(0x216)](profileNameId,subframe,taskXpath['claim'],0x7d0);if(kqClaim){log(profileNameId,'['+botName+_0x83ea19(0x1d5));const kqClickClaim=await click(taskXpath[_0x83ea19(0x238)]);kqClickClaim&&(log(profileNameId,'['+botName+'][lamTask]Click\x20claim\x20OK'),await checkQuayLaiXpath(taskXpath[_0x83ea19(0x228)]));}}else{log(profileNameId,'['+botName+_0x83ea19(0x1dc),null,![]);const checkBack2=await checkQuayLaiXpath(taskXpath['xpathBackTask']);}}const kqClaim2tr=await genlogin['elementExistsByXPath'](profileNameId,subframe,taskXpath[_0x83ea19(0x238)],0x3e8);if(kqClaim2tr){log(profileNameId,'['+botName+'][lamTask]Tìm\x20thất\x20claim2tr');const kqClickClaim2tr=await click(taskXpath[_0x83ea19(0x238)]);kqClickClaim2tr&&log(profileNameId,'['+botName+_0x83ea19(0x1ce));}}await checkQuayLaiXpath(taskXpath[_0x83ea19(0x228)]);const kqHome=await genlogin[_0x83ea19(0x216)](profileNameId,subframe,xpath['home'],0x7d0);if(kqHome){log(profileNameId,'['+botName+'][lamTask]Tìm\x20thấy\x20home');const clickedHome=await click(xpath[_0x83ea19(0x1e9)]);clickedHome&&(log(profileNameId,'['+botName+_0x83ea19(0x243)),await delay(0x3e8));}return!![];}catch(error){return log(profileNameId,'['+botName+_0x83ea19(0x22a)+error,null,![]),null;}}async function checkQuayLaiXpath(backXpath){const _0x56faf3=_0x5375b6;try{const maxattemptCQ=0xa;let attemptCQ=0x0;const loopBack={'walletClose':'(//div[contains(@data-tc-modal,\x27true\x27)]//button[contains(@data-tc-icon-button,\x27true\x27)])[1]','dialogClose':'(//dialog//button[contains(@class,\x27close-btn\x27)])[1]'};while(attemptCQ<maxattemptCQ){attemptCQ++,await delay(0x3e8),log(profileNameId,'['+botName+'][checkQuayLaiXpath]\x20Kiểm\x20tra\x20lần:\x20'+attemptCQ);const currentPage=await genlogin[_0x56faf3(0x1e8)](profileNameId,browser);if(!currentPage){log(profileNameId,'['+botName+_0x56faf3(0x23f),null,![]);continue;}log(profileNameId,'['+botName+_0x56faf3(0x1e1));const kqTelePage=await genlogin['elementExistsByXPath'](profileNameId,currentPage,getAks[_0x56faf3(0x22e)],0x7d0);if(!kqTelePage){log(profileNameId,'['+botName+_0x56faf3(0x1f3));const countTab=await genlogin[_0x56faf3(0x254)](profileNameId,browser);if(countTab<=0x1){log(profileNameId,'['+botName+_0x56faf3(0x223)+countTab+'\x20tab\x20đang\x20mở');break;}const closeTab=await genlogin[_0x56faf3(0x20a)](profileNameId,browser,countTab-0x1,0xbb8);if(!closeTab){log(profileNameId,'['+botName+_0x56faf3(0x24b),null,![]);continue;}log(profileNameId,'['+botName+_0x56faf3(0x211)),await delay(0xbb8);continue;}log(profileNameId,'['+botName+_0x56faf3(0x24f)),subframe=await vaoGame();if(!subframe){log(profileNameId,'['+botName+'][checkQuayLaiXpath]\x20Không\x20tìm\x20thấy\x20iframe',null,![]);continue;}log(profileNameId,'['+botName+_0x56faf3(0x209));const kqbackXpath=await genlogin[_0x56faf3(0x216)](profileNameId,subframe,backXpath,0x7d0);if(kqbackXpath){log(profileNameId,'['+botName+_0x56faf3(0x1cd));break;}if(!![]){let attemptBack=0x0,maxAttempBack=0xa,kqBack=![];while(attemptBack<maxAttempBack){attemptBack++,log(profileNameId,'['+botName+_0x56faf3(0x1c6)+attemptBack);const kqbackXpath=await genlogin[_0x56faf3(0x216)](profileNameId,subframe,backXpath,0x7d0);if(kqbackXpath){log(profileNameId,'['+botName+_0x56faf3(0x1cd));break;}const kqb0=await genlogin[_0x56faf3(0x216)](profileNameId,currentPage,getAks[_0x56faf3(0x237)],0x3e8);if(kqb0){await clickM(getAks['popupBackBtn']);continue;}await delay(0x3e8);}return!![];}}let attemptW=0x0,maxAttemptsW=0x5;while(attemptW<maxAttemptsW){attemptW++;const checkWalletClose=await genlogin['elementExistsByXPath'](profileNameId,subframe,loopBack[_0x56faf3(0x1e3)],0x1f4);checkWalletClose&&await click(loopBack['walletClose']);const checkdialogClose=await genlogin[_0x56faf3(0x216)](profileNameId,subframe,loopBack[_0x56faf3(0x1cf)],0x1f4);checkdialogClose&&await click(loopBack[_0x56faf3(0x1cf)]);if(!checkWalletClose&&!checkdialogClose)break;}return log(profileNameId,'['+botName+_0x56faf3(0x1d1)),!![];}catch(error){return log(profileNameId,'['+botName+_0x56faf3(0x1f5)+error[_0x56faf3(0x212)],null,![]),null;}}async function thoigianconlai(thoigianconlai){const _0x4c0342=_0x5375b6;try{log(profileNameId,'['+botName+_0x4c0342(0x1f4));let hour0,minute0,timeleft0=thoigianconlai,timeleft=timeleft0[_0x4c0342(0x20e)]('\x20','')['trim'](),matches=timeleft[_0x4c0342(0x240)](/(\d+)h(\d+)m/);matches?(hour0=matches[0x1],minute0=matches[0x2]):(hour0=0x1,minute0=0x0);let hours=parseInt(hour0),minutes=parseInt(minute0),seconds=parseInt(0x0),totalSeconds=parseInt(hours*0xe10+minutes*0x3c+seconds);const unixTime=Math[_0x4c0342(0x21d)](Date[_0x4c0342(0x204)]()/0x3e8),newUnixTime=unixTime+totalSeconds,newDate=new Date(newUnixTime*0x3e8),formattedDate=newDate[_0x4c0342(0x1ef)](),formattedTime=newDate[_0x4c0342(0x244)](_0x4c0342(0x219),{'hour12':![]});let NextRun=formattedDate+'\x20'+formattedTime;return{'NextRun':NextRun,'NextRunStamp':newUnixTime};}catch(error){return log(profileNameId,'['+botName+_0x4c0342(0x23d)+error,null,![]),null;}}async function delay(ms){return new Promise(async resolve=>{setTimeout(resolve,ms);});}async function cTimeout(){if(Atomics['load'](tasksData,taskIndex)===0x1)return!![];return![];}}function a0_0x3ba8(_0x385838,_0xa37dae){const _0x3ae571=a0_0x3ae5();return a0_0x3ba8=function(_0x3ba838,_0xb6363b){_0x3ba838=_0x3ba838-0x1c6;let _0x38054d=_0x3ae571[_0x3ba838];return _0x38054d;},a0_0x3ba8(_0x385838,_0xa37dae);};
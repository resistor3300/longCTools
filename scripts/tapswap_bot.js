function a0_0x1650(){const _0x19c930=['2629067zXiiqB','][checkClosePopup]\x20checkClosePopup\x20nè','][lamTask]Click\x20task\x20OK','][lamTask]Click\x20submit\x20OK','value','3dwcyhC','getTextByXPath','][town]Loop:\x20','][lamTask]Click\x20finishMission\x20OK','task','][lamTask]Không\x20tìm\x20thấy\x20finishMission','elementExistsByXPath','dialogClose','][lamTask]check\x20task\x20:\x20','(//div[contains(@class,\x27_balance_\x27)])[4]','NextRunStamp','][checkQuayLaiXpath]\x20Vào\x20game\x20thành\x20công','getCurrentPage','][lamTask]Click\x20claim2tr\x20OK','toLocaleTimeString','buy','][town]Không\x20tìm\x20thấy\x20builder','602816qsYpCP','claim','][town]Không\x20click\x20được\x20vào\x20nutX','][town]Tìm\x20thấy\x20mua\x20','5400630KgUsGe','//h3[contains(@class,\x27_h3_\x27)]','][lamTask]Tìm\x20thấy\x20claim2tr','switchFrame','xpathBackTask','finishMission','//button[text()=\x27Check\x27]','][click][Lỗi]:\x20','nutX','//input[contains(@placeholder,\x27Provide\x20an\x20answer\x27)]','CloseGame','trim','][lamTask]Type\x20code\x20','name','checkBtn',']Ra\x20game\x20nè','][lamTask]Không\x20tìm\x20thấy\x20task','][lamTask]Click\x20claim\x20OK','match','getCode','NextRun','][lamTask]Không\x20click\x20được\x20vào\x20task','updateData',']Tìm\x20thấy\x20coinTag','//div[contains(@class,\x27_actionContent_\x27)]//button[text()=\x27Get\x20it!\x27]','][lamTask]Tìm\x20thấy\x20startMission','][checkQuayLaiXpath]\x20Chỉ\x20có\x20','][checkClosePopup]Tìm\x20thấy\x20popupBackBtn','//button[normalize-space(text())=\x27Claim\x27\x20and\x20not(@disabled)]','][lamTask]Không\x20click\x20dc\x20inputCode',']Vào\x20game\x20nè',']Không\x20tìm\x20thấy\x20iframe',']Tìm\x20thấy\x20coin:\x20','load','][checkQuayLaiXpath]\x20Kiểm\x20tra\x20lần\x20quay\x20lại:\x20','][lamTask]:\x20','(//div[contains(@class,\x27_balance_\x27)])[3]','startMission','message','\x20OK','listBuilder','autoLamTask','][checkQuayLaiXpath]\x20Kiểm\x20tra\x20lần:\x20','][lamTask]Tìm\x20thấy\x20inputCode','][checkClosePopup]Tìm\x20thấy\x20nutX',']Done\x20Town','en-GB','][lamTask]Làm\x20Task\x20nè','toLocaleDateString','][town]Tìm\x20thấy\x20home','][Lỗi]:\x20','][town]Click\x20builder\x20OK','][lamTask]Tìm\x20thấy\x20code:\x20','inputCode','][checkQuayLaiXpath]\x20Lỗi\x20khi\x20đóng\x20tab\x20mới',']Done\x20lamTask',']không\x20xử\x20lý\x20được\x20thoigianconlai','//button[contains(@class,\x27_crosBtn_\x27)]','][town]Tìm\x20thấy\x20nâng\x20cấp\x20','//button[normalize-space(text())=\x27Finish\x20mission\x27\x20and\x20not(@disabled)]','upgrade','town',']Vào\x20game\x20OK','builder','][town]Tìm\x20thấy\x20town','2036250HljZiA','//button[text()=\x27Upgrade\x27]',']Đã\x20tìm\x20thấy\x20iframe','][town]Tìm\x20thấy\x20nutX',']Lôi\x20lamTask','][lamTask]Click\x20inputCode\x20OK','][lamTask]Tìm\x20thấy\x20home','][checkQuayLaiXpath]\x20Không\x20phát\x20hiện\x20tab\x20mới','6XcLyeR','soLuotlamTask','//button[text()=\x27Start\x20mission\x27]','//img[contains(@src,\x27/assets/town\x27)]','][thoigianconlai]:Xử\x20lý\x20gian\x20còn\x20lại\x20nè','//div[contains(@class,\x27_listContainer_\x27)]//div[contains(@class,\x27_container_\x27)]','coin','//div[contains(@class,\x27_building_\x27)]//img[contains(@src,\x27/assets/b_\x27)\x20and\x20not(ancestor::div[contains(@class,\x27_building_\x27)]//div[contains(@class,\x27_content_\x27)]//div[contains(@data-text,\x2720\x27)])]','][checkQuayLaiXpath]\x20Tìm\x20thấy\x20currentPage','][click]Click\x20','//img[contains(@alt,\x27right\x20chevron\x27)]','click','][town]Tìm\x20thấy\x20worker','mainframe','floor','submit','][lamTask]Không\x20quay\x20lại\x20được\x20tasks','][checkClosePopup]\x20error:\x20',']Xử\x20lý\x20thoigianconlai\x20OK','(//dialog//button[contains(@class,\x27close-btn\x27)])[1]','][town]Tìm\x20thấy\x20relax:\x20','3374163ZiXTqC','countXpath','//img[contains(@src,\x27/assets/coin_\x27)\x20and\x20contains(@alt,\x27navigation\x27)]',']Lôi\x20Town','//img[contains(@src,\x27/assets/builder_\x27)]','][checkQuayLaiXpath]\x20Lỗi\x20trong\x20quá\x20trình\x20kiểm\x20tra:\x20','closeTab','][click]Không\x20click\x20được\x20vào\x20','][thoigianconlai]:\x20',']không\x20Tìm\x20thấy\x20coinTag','][lamTask]Click\x20startMission\x20OK','296VimHzG','][lamTask]Click\x20home\x20OK','][checkQuayLaiXpath]\x20Tìm\x20thấy\x20backXpath','scroll','getIt','][lamTask]Không\x20click\x20dc\x20finishMission','//button[text()=\x27Claim\x27]','walletClose','Không\x20tìm\x20thấy\x20iframe','\x20tab\x20đang\x20mở','//h6[contains(text(),\x27relaxing\x27)]','home','saveCode','popupBackBtn','1966CFePzl','][checkQuayLaiXpath]\x20Không\x20tìm\x20thấy\x20iframe','(//div[contains(@class,\x27_balance_\x27)])[1]','//img[contains(@src,\x27/assets/task\x27)\x20and\x20contains(@alt,\x27navigation\x27)]','3134240fkPHyk','botSet','(//div[contains(@data-tc-modal,\x27true\x27)]//button[contains(@data-tc-icon-button,\x27true\x27)])[1]','Iframe','][town]Tìm\x20thấy\x20getIt',']Không\x20tìm\x20thấy\x20main\x20frame',']Không\x20tìm\x20thấy\x20coin','//button[text()=\x27Watch\x27]'];a0_0x1650=function(){return _0x19c930;};return a0_0x1650();}function a0_0x21f7(_0x5849b0,_0x49f3fa){const _0x165065=a0_0x1650();return a0_0x21f7=function(_0x21f7e1,_0x2e387f){_0x21f7e1=_0x21f7e1-0xa7;let _0x30d548=_0x165065[_0x21f7e1];return _0x30d548;},a0_0x21f7(_0x5849b0,_0x49f3fa);}(function(_0x1bbe7e,_0x191a87){const _0x5b0317=a0_0x21f7,_0x36fe5b=_0x1bbe7e();while(!![]){try{const _0x32c37a=-parseInt(_0x5b0317(0x13b))/0x1*(parseInt(_0x5b0317(0xac))/0x2)+-parseInt(_0x5b0317(0xbd))/0x3*(-parseInt(_0x5b0317(0xce))/0x4)+-parseInt(_0x5b0317(0x113))/0x5+parseInt(_0x5b0317(0x11b))/0x6*(parseInt(_0x5b0317(0xb8))/0x7)+parseInt(_0x5b0317(0xb0))/0x8+-parseInt(_0x5b0317(0x130))/0x9+parseInt(_0x5b0317(0xd2))/0xa;if(_0x32c37a===_0x191a87)break;else _0x36fe5b['push'](_0x36fe5b['shift']());}catch(_0x56afae){_0x36fe5b['push'](_0x36fe5b['shift']());}}}(a0_0x1650,0x5dfeb));import{log,json}from'../modules/logger.js';export default async function (context,signal){const _0x156407=a0_0x21f7,choMs=ms=>new Promise(resolve=>setTimeout(resolve,ms)),{firstPage,bot,profileNameId,getAks,genlogin,http,browser,dataId,screenDataBuffer2,tasksDataBuffer2,taskIndex}=context;let currentPage=firstPage,subframe;const botName=bot[_0x156407(0xdf)];let screenData=new Int32Array(screenDataBuffer2),tasksData=new Int32Array(tasksDataBuffer2),demLoop=0x0,remainTime,soLuotlamTask=0x5;bot[_0x156407(0xb1)][_0x156407(0x11c)][_0x156407(0xbc)]&&(parseInt(bot[_0x156407(0xb1)][_0x156407(0x11c)][_0x156407(0xbc)])>0x0&&(soLuotlamTask=parseInt(bot['botSet'][_0x156407(0x11c)][_0x156407(0xbc)])));const xpath={'nutX':_0x156407(0x10b),'coin':_0x156407(0xae),'coinBlock':'(//div[contains(@class,\x27_balance_\x27)])[2]','coinDiamond':_0x156407(0xf6),'coinPlay':_0x156407(0xc6),'getIt':_0x156407(0xea),'home':_0x156407(0x132),'task':_0x156407(0xaf)};try{subframe=await vaoGame();if(!subframe){log(profileNameId,'['+botName+_0x156407(0xf1),null,![]);throw new Error(_0x156407(0x143));}log(profileNameId,'['+botName+_0x156407(0x110)),await delay(0x3e8);const closePopup=await checkClosePopup();await delay(0x3e8);if(bot[_0x156407(0xb1)][_0x156407(0x10f)]['value']==='y'){const kqTown=await checkTown();!kqTown&&log(profileNameId,'['+botName+_0x156407(0x133),null,![]),log(profileNameId,'['+botName+_0x156407(0xff)),await delay(0x7d0);}if(bot[_0x156407(0xb1)][_0x156407(0xfb)][_0x156407(0xbc)]==='y'){const kqlamTask=await lamTask();!kqlamTask&&log(profileNameId,'['+botName+_0x156407(0x117),null,![]),log(profileNameId,'['+botName+_0x156407(0x109));}const coinTag=await genlogin[_0x156407(0xc3)](profileNameId,subframe,xpath[_0x156407(0x121)],0x3e8);!coinTag&&log(profileNameId,'['+botName+_0x156407(0x139));log(profileNameId,'['+botName+_0x156407(0xe9));const coin=await genlogin[_0x156407(0xbe)](profileNameId,subframe,xpath['coin'],0x7d0);!coin&&log(profileNameId,'['+botName+_0x156407(0xb6),null,![]);await http[_0x156407(0xe8)](profileNameId,profileNameId,dataId,null,coin),log(profileNameId,'['+botName+_0x156407(0xf2)+coin);const remainT=await thoigianconlai('01h\x2000m');return!remainT&&log(profileNameId,'['+botName+_0x156407(0x10a),null,![]),log(profileNameId,'['+botName+_0x156407(0x12d)),log(profileNameId,'['+botName+']nextRunAt:\x20'+remainT['NextRun']),{'status':!![],'coin':coin,'nextRun':remainT[_0x156407(0xe6)],'nextRunStamp':remainT[_0x156407(0xc7)]};}catch(error){log(profileNameId,'['+botName+_0x156407(0x104)+error,null,![]);}async function vaoGame(){const _0x308483=_0x156407;try{log(profileNameId,'['+botName+_0x308483(0xf0));const subframe0=await genlogin[_0x308483(0xd5)](profileNameId,currentPage,getAks[_0x308483(0xb3)],0x2710);if(!subframe0){log(profileNameId,'['+botName+_0x308483(0xf1),null,![]);throw new Error(_0x308483(0x143));}return log(profileNameId,'['+botName+_0x308483(0x115)),subframe0;}catch(error){return log(profileNameId,'['+botName+_0x308483(0x104)+error,null,![]),null;}}async function raGame(){const _0x3e2fce=_0x156407;try{log(profileNameId,'['+botName+_0x3e2fce(0xe1)),currentPage=genlogin[_0x3e2fce(0xd5)](profileNameId,currentPage,_0x3e2fce(0x128),0x7d0);if(!currentPage){log(profileNameId,'['+botName+_0x3e2fce(0xb5),null,![]);throw new Error('Không\x20tìm\x20thấy\x20main\x20frame');}return currentPage;}catch(error){return log(profileNameId,'['+botName+_0x3e2fce(0x104)+error,null,![]),null;}}async function click(xpath,tagClick=![]){const _0x4d9c6e=_0x156407;try{await delay(0x3e8);const clicked=await genlogin[_0x4d9c6e(0x126)](profileNameId,subframe,{'xpath':xpath,'mainframe':currentPage,'browser':browser,'tagClick':tagClick},0x7d0);await delay(0x3e8);if(!clicked)return log(profileNameId,'['+botName+_0x4d9c6e(0x137)+xpath,null,![]),!![];return log(profileNameId,'['+botName+_0x4d9c6e(0x124)+xpath+_0x4d9c6e(0xf9)),clicked;}catch(error){return log(profileNameId,'['+botName+_0x4d9c6e(0xd9)+error,null,![]),null;}}async function clickM(xpath){const _0x57eff6=_0x156407;try{await delay(0x3e8);const clicked=await genlogin[_0x57eff6(0x126)](profileNameId,currentPage,{'xpath':xpath,'mainframe':currentPage,'browser':browser},0x3e8);await delay(0x3e8);if(!clicked)return log(profileNameId,'['+botName+_0x57eff6(0x137)+xpath,null,![]),null;return log(profileNameId,'['+botName+_0x57eff6(0x124)+xpath+_0x57eff6(0xf9)),clicked;}catch(error){return log(profileNameId,'['+botName+'][click][Lỗi]:\x20'+error,null,![]),null;}}async function checkClosePopup(){const _0x4d0932=_0x156407;try{log(profileNameId,'['+botName+_0x4d0932(0xb9));let demLoop=0x0,maxDemLoop=0xa;while(demLoop<maxDemLoop){demLoop++;const kqGetIt=await genlogin[_0x4d0932(0xc3)](profileNameId,subframe,xpath[_0x4d0932(0x13f)],0x7d0);if(kqGetIt){log(profileNameId,'['+botName+'][checkClosePopup]Tìm\x20thấy\x20getIt'),await click(xpath[_0x4d0932(0x13f)]),await delay(0x3e8);const kqNeedBack=await genlogin['elementExistsByXPath'](profileNameId,currentPage,getAks['popupBackBtn'],0x7d0);kqNeedBack&&(log(profileNameId,'['+botName+_0x4d0932(0xed)),await clickM(getAks[_0x4d0932(0xab)]),await delay(0x3e8));continue;}else{const kqNutX=await genlogin[_0x4d0932(0xc3)](profileNameId,subframe,xpath[_0x4d0932(0xda)],0x7d0);if(kqNutX){log(profileNameId,'['+botName+_0x4d0932(0xfe)),await click(xpath[_0x4d0932(0xda)],!![]),await delay(0x3e8);const kqNeedBack1=await genlogin['elementExistsByXPath'](profileNameId,currentPage,getAks['popupBackBtn'],0x7d0);kqNeedBack1&&(log(profileNameId,'['+botName+_0x4d0932(0xed)),await clickM(getAks[_0x4d0932(0xab)]),await delay(0x3e8));continue;}}await delay(0x3e8);break;}}catch(e){return log(profileNameId,'['+botName+_0x4d0932(0x12c)+e[_0x4d0932(0xf8)],null,![]),null;}}async function checkTown(){const _0x189cdc=_0x156407;try{const xpathTown={'getIt':_0x189cdc(0xea),'town':_0x189cdc(0x11e),'builder':_0x189cdc(0x134),'builderRelax':_0x189cdc(0xa8),'listBuilder':_0x189cdc(0x122),'buy':'//button[text()=\x27Buy\x27]','upgrade':_0x189cdc(0x114)};let kqRelax=0x0;const kqVaoTown=await genlogin[_0x189cdc(0xc3)](profileNameId,subframe,xpathTown[_0x189cdc(0x10f)],0x7d0);kqVaoTown&&(log(profileNameId,'['+botName+_0x189cdc(0x112)),await click(xpathTown[_0x189cdc(0x10f)]),await delay(0x3e8));const kqGetIt=await genlogin[_0x189cdc(0xc3)](profileNameId,subframe,xpathTown[_0x189cdc(0x13f)],0x7d0);kqGetIt&&(log(profileNameId,'['+botName+_0x189cdc(0xb4)),await click(xpathTown['getIt']),await delay(0x3e8));const kqBuilder=await genlogin['elementExistsByXPath'](profileNameId,subframe,xpathTown[_0x189cdc(0x111)],0x7d0);if(kqBuilder){log(profileNameId,'['+botName+_0x189cdc(0x127)),await click(xpathTown[_0x189cdc(0x111)]),await delay(0x3e8),kqRelax=await genlogin[_0x189cdc(0x131)](profileNameId,subframe,xpathTown['builderRelax'],0x7d0),log(profileNameId,'['+botName+_0x189cdc(0x12f)+json(kqRelax));const kqNutX=await genlogin['elementExistsByXPath'](profileNameId,subframe,xpath[_0x189cdc(0xda)],0x7d0);if(kqNutX){log(profileNameId,'['+botName+_0x189cdc(0x116));const kqnutx0=await click(xpath[_0x189cdc(0xda)],!![]);if(!kqnutx0)return log(profileNameId,'['+botName+_0x189cdc(0xd0),null,![]),null;await delay(0x3e8);}}if(kqRelax>0x0){let demLoop=0x0,maxDemLoop=0x14,demLoopnangCap=kqRelax;while(demLoop<maxDemLoop){demLoop++,await delay(0x3e8),log(profileNameId,'['+botName+_0x189cdc(0xbf)+demLoop+'/'+maxDemLoop);if(demLoopnangCap<=0x0)break;const tagbuilder='('+xpathTown[_0x189cdc(0xfa)]+')['+demLoop+']',kqBuilder=await genlogin[_0x189cdc(0xc3)](profileNameId,subframe,tagbuilder,0x7d0);if(!kqBuilder){log(profileNameId,'['+botName+_0x189cdc(0xcd),null,![]);continue;}await genlogin[_0x189cdc(0x13e)](profileNameId,subframe,{'xpath':tagbuilder},0xbb8),await delay(0x3e8);const kqclick=await click(tagbuilder);if(!kqclick){log(profileNameId,'['+botName+'][town]Không\x20click\x20được\x20vào\x20builder',null,![]);continue;}else{log(profileNameId,'['+botName+_0x189cdc(0x105));const kqNangCap=await genlogin[_0x189cdc(0xc3)](profileNameId,subframe,xpathTown['upgrade'],0x3e8);if(kqNangCap){log(profileNameId,'['+botName+_0x189cdc(0x10c)+demLoopnangCap+'/'+kqRelax),await click(xpathTown[_0x189cdc(0x10e)]),await delay(0x3e8),await click(xpath[_0x189cdc(0xda)],!![]),await delay(0x3e8),demLoopnangCap--;continue;}else{const kqBuy=await genlogin[_0x189cdc(0xc3)](profileNameId,subframe,xpathTown[_0x189cdc(0xcc)],0x3e8);if(kqBuy){log(profileNameId,'['+botName+_0x189cdc(0xd1)+demLoopnangCap+'/'+kqRelax),await click(xpathTown[_0x189cdc(0xcc)]),await delay(0x3e8),await click(xpath[_0x189cdc(0xda)],!![]),await delay(0x3e8),demLoopnangCap--;continue;}}}const kqNutX=await genlogin['elementExistsByXPath'](profileNameId,subframe,xpath[_0x189cdc(0xda)],0x3e8);kqNutX&&(log(profileNameId,'['+botName+_0x189cdc(0x116)),await click(xpath[_0x189cdc(0xda)],!![]),await delay(0x3e8));}}const kqHome=await genlogin[_0x189cdc(0xc3)](profileNameId,subframe,xpath[_0x189cdc(0xa9)],0x3e8);return kqHome&&(log(profileNameId,'['+botName+_0x189cdc(0x103)),await click(xpath[_0x189cdc(0xa9)]),await delay(0x3e8)),!![];}catch(e){log(profileNameId,'['+botName+'][checkTown]\x20error:\x20'+e[_0x189cdc(0xf8)],null,![]);}}async function lamTask(){const _0x520dfc=_0x156407;try{const taskXpath={'claim':_0x520dfc(0xee),'task':_0x520dfc(0x125),'startMission':_0x520dfc(0x11d),'watch':_0x520dfc(0xb7),'inputCode':_0x520dfc(0xdb),'submit':'//button[text()=\x27Submit\x27]','taskTitle':_0x520dfc(0xd3),'finishMission':_0x520dfc(0x10d),'claim':_0x520dfc(0x141),'xpathBackTask':_0x520dfc(0x120),'checkBtn':_0x520dfc(0xd8)};let kqCode;log(profileNameId,'['+botName+_0x520dfc(0x101));const kqVaoTask=await genlogin[_0x520dfc(0xc3)](profileNameId,subframe,xpath['task'],0x7d0);if(!kqVaoTask)return log(profileNameId,'['+botName+_0x520dfc(0xe2),null,![]),![];const kqClickTask=await click(xpath[_0x520dfc(0xc1)]);if(!kqClickTask)return log(profileNameId,'['+botName+_0x520dfc(0xe7),null,![]),![];log(profileNameId,'['+botName+_0x520dfc(0xba));let demLoop=0x0,maxDemLoop=soLuotlamTask;while(demLoop<maxDemLoop){demLoop++,await delay(0x3e8),log(profileNameId,'['+botName+_0x520dfc(0xc5)+demLoop+'/'+maxDemLoop,null,'i','-');const tagTask='('+taskXpath[_0x520dfc(0xc1)]+')['+demLoop+']',kqCheckTask=await genlogin[_0x520dfc(0xc3)](profileNameId,subframe,tagTask,0x3e8);if(!kqCheckTask){log(profileNameId,'['+botName+_0x520dfc(0xe2),null,![]);continue;}const kqClickTask=await click(tagTask);if(!kqClickTask){log(profileNameId,'['+botName+'][lamTask]Không\x20click\x20được\x20vào\x20task',null,![]);continue;}log(profileNameId,'['+botName+_0x520dfc(0xba)),await delay(0x3e8);const kqStartMission=await genlogin[_0x520dfc(0xc3)](profileNameId,subframe,taskXpath[_0x520dfc(0xf7)],0x7d0);if(kqStartMission){log(profileNameId,'['+botName+_0x520dfc(0xeb));const kqClickStartMission=await click(taskXpath[_0x520dfc(0xf7)]);!kqClickStartMission?log(profileNameId,'['+botName+'][lamTask]Không\x20click\x20là\x20startMission',null,![]):log(profileNameId,'['+botName+_0x520dfc(0x13a));await delay(0x7d0);const kqWatch=await genlogin['elementExistsByXPath'](profileNameId,subframe,taskXpath['watch'],0x7d0);if(kqWatch){log(profileNameId,'['+botName+'][lamTask]Tìm\x20thấy\x20watch');const kqClickWatch=await click(taskXpath['watch']);!kqClickWatch?log(profileNameId,'['+botName+'][lamTask]Không\x20click\x20dc\x20watch',null,![]):log(profileNameId,'['+botName+'][lamTask]Click\x20watch\x20OK');}await checkQuayLaiXpath(taskXpath[_0x520dfc(0xd6)]);continue;}const kqtaskTitle=await genlogin[_0x520dfc(0xbe)](profileNameId,subframe,taskXpath['taskTitle'],0x7d0);if(kqtaskTitle){log(profileNameId,'['+botName+'][lamTask]Tìm\x20thấy\x20taskTitle:\x20'+kqtaskTitle);const kqCkCheckBtn=await genlogin[_0x520dfc(0xbe)](profileNameId,subframe,taskXpath['checkBtn'],0x3e8);if(kqCkCheckBtn){log(profileNameId,'['+botName+'][lamTask]Tìm\x20thấy\x20checkBtn:\x20'+kqCkCheckBtn);const kqClickCkCheckBtn=await click(taskXpath[_0x520dfc(0xe0)]);!kqClickCkCheckBtn?log(profileNameId,'['+botName+'][lamTask]Không\x20click\x20dc\x20checkBtn',null,![]):log(profileNameId,'['+botName+'][lamTask]Click\x20checkBtn\x20OK');}else{const kqInput=await genlogin[_0x520dfc(0xc3)](profileNameId,subframe,taskXpath[_0x520dfc(0x107)],0xbb8);if(kqInput){kqCode=await http[_0x520dfc(0xe5)](profileNameId,profileNameId,botName,kqtaskTitle,0x0);if(kqCode[_0x520dfc(0xbc)])log(profileNameId,'['+botName+_0x520dfc(0x106)+kqCode[_0x520dfc(0xbc)]);else{log(profileNameId,'['+botName+'][lamTask]Không\x20tìm\x20thấy\x20code',null,![]);const checkBack=await checkQuayLaiXpath(taskXpath['xpathBackTask']);if(!checkBack){log(profileNameId,'['+botName+_0x520dfc(0x12b),![]);break;}continue;}log(profileNameId,'['+botName+_0x520dfc(0xfd));const kqClickInput=await click(taskXpath[_0x520dfc(0x107)]);!kqClickInput?log(profileNameId,'['+botName+_0x520dfc(0xef),null,![]):log(profileNameId,'['+botName+_0x520dfc(0x118));await delay(0x3e8);const kqType=await genlogin['typeText'](profileNameId,currentPage,taskXpath[_0x520dfc(0x107)],kqCode[_0x520dfc(0xbc)],0x1,0xbb8);if(kqType){log(profileNameId,'['+botName+_0x520dfc(0xde)+kqCode[_0x520dfc(0xbc)]+_0x520dfc(0xf9)),await delay(0x3e8);const kqClick1=await click(taskXpath[_0x520dfc(0x12a)]);kqClick1&&(log(profileNameId,'['+botName+_0x520dfc(0xbb)),await delay(0x3e8));}}}const kqCheckDone=await genlogin[_0x520dfc(0xc3)](profileNameId,subframe,taskXpath[_0x520dfc(0xd7)],0x7d0);if(kqCheckDone){log(profileNameId,'['+botName+'][lamTask]Tìm\x20thấy\x20finishMission');const kqClickDone=await click(taskXpath[_0x520dfc(0xd7)]);kqClickDone?log(profileNameId,'['+botName+_0x520dfc(0xc0)):log(profileNameId,'['+botName+_0x520dfc(0x140),null,![]);const kqClaim=await genlogin[_0x520dfc(0xc3)](profileNameId,subframe,taskXpath['claim'],0x7d0);if(kqClaim){log(profileNameId,'['+botName+'][lamTask]Tìm\x20thấy\x20claim');const kqClickClaim=await click(taskXpath[_0x520dfc(0xcf)]);kqClickClaim&&(log(profileNameId,'['+botName+_0x520dfc(0xe3)),await checkQuayLaiXpath(taskXpath[_0x520dfc(0xd6)]));}}else{log(profileNameId,'['+botName+_0x520dfc(0xc2),null,![]);const kqSaveCode=await http[_0x520dfc(0xaa)](profileNameId,botName,kqCode['cid'],botName,kqtaskTitle,0x0),checkBack2=await checkQuayLaiXpath(taskXpath[_0x520dfc(0xd6)]);}}const kqClaim2tr=await genlogin[_0x520dfc(0xc3)](profileNameId,subframe,taskXpath[_0x520dfc(0xcf)],0x3e8);if(kqClaim2tr){log(profileNameId,'['+botName+_0x520dfc(0xd4));const kqClickClaim2tr=await click(taskXpath[_0x520dfc(0xcf)]);kqClickClaim2tr&&log(profileNameId,'['+botName+_0x520dfc(0xca));}}await checkQuayLaiXpath(taskXpath['xpathBackTask']);const kqHome=await genlogin[_0x520dfc(0xc3)](profileNameId,subframe,xpath[_0x520dfc(0xa9)],0x7d0);if(kqHome){log(profileNameId,'['+botName+_0x520dfc(0x119));const clickedHome=await click(xpath['home']);clickedHome&&(log(profileNameId,'['+botName+_0x520dfc(0x13c)),await delay(0x3e8));}return!![];}catch(error){return log(profileNameId,'['+botName+_0x520dfc(0xf5)+error,null,![]),null;}}async function checkQuayLaiXpath(backXpath){const _0x31df43=_0x156407;try{const maxattemptCQ=0xa;let attemptCQ=0x0;const loopBack={'walletClose':_0x31df43(0xb2),'dialogClose':_0x31df43(0x12e)};while(attemptCQ<maxattemptCQ){attemptCQ++,await delay(0x3e8),log(profileNameId,'['+botName+_0x31df43(0xfc)+attemptCQ);const currentPage=await genlogin[_0x31df43(0xc9)](profileNameId,browser);if(!currentPage){log(profileNameId,'['+botName+'][checkQuayLaiXpath]\x20Không\x20tìm\x20thấy\x20currentPage',null,![]);continue;}log(profileNameId,'['+botName+_0x31df43(0x123));const kqTelePage=await genlogin[_0x31df43(0xc3)](profileNameId,currentPage,getAks[_0x31df43(0xdc)],0x7d0);if(!kqTelePage){log(profileNameId,'['+botName+'][checkQuayLaiXpath]\x20Phát\x20hiện\x20tab\x20mới');const countTab=await genlogin['countOpenTabs'](profileNameId,browser);if(countTab<=0x1){log(profileNameId,'['+botName+_0x31df43(0xec)+countTab+_0x31df43(0xa7));break;}const closeTab=await genlogin[_0x31df43(0x136)](profileNameId,browser,countTab-0x1,0xbb8);if(!closeTab){log(profileNameId,'['+botName+_0x31df43(0x108),null,![]);continue;}log(profileNameId,'['+botName+'][checkQuayLaiXpath]\x20Đóng\x20tab\x20mới\x20thành\x20công'),await delay(0xbb8);continue;}log(profileNameId,'['+botName+_0x31df43(0x11a)),subframe=await vaoGame();if(!subframe){log(profileNameId,'['+botName+_0x31df43(0xad),null,![]);continue;}log(profileNameId,'['+botName+_0x31df43(0xc8));const kqbackXpath=await genlogin[_0x31df43(0xc3)](profileNameId,subframe,backXpath,0x7d0);if(kqbackXpath){log(profileNameId,'['+botName+_0x31df43(0x13d));break;}if(!![]){let attemptBack=0x0,maxAttempBack=0xa,kqBack=![];while(attemptBack<maxAttempBack){attemptBack++,log(profileNameId,'['+botName+_0x31df43(0xf4)+attemptBack);const kqbackXpath=await genlogin[_0x31df43(0xc3)](profileNameId,subframe,backXpath,0x7d0);if(kqbackXpath){log(profileNameId,'['+botName+_0x31df43(0x13d));break;}const kqb0=await genlogin[_0x31df43(0xc3)](profileNameId,currentPage,getAks[_0x31df43(0xab)],0x3e8);if(kqb0){await clickM(getAks[_0x31df43(0xab)]);continue;}await delay(0x3e8);}return!![];}}let attemptW=0x0,maxAttemptsW=0x5;while(attemptW<maxAttemptsW){attemptW++;const checkWalletClose=await genlogin[_0x31df43(0xc3)](profileNameId,subframe,loopBack['walletClose'],0x1f4);checkWalletClose&&await click(loopBack[_0x31df43(0x142)]);const checkdialogClose=await genlogin[_0x31df43(0xc3)](profileNameId,subframe,loopBack[_0x31df43(0xc4)],0x1f4);checkdialogClose&&await click(loopBack['dialogClose']);if(!checkWalletClose&&!checkdialogClose)break;}return log(profileNameId,'['+botName+'][checkQuayLaiXpath]\x20quay\x20lại\x20tasks\x20thành\x20công'),!![];}catch(error){return log(profileNameId,'['+botName+_0x31df43(0x135)+error[_0x31df43(0xf8)],null,![]),null;}}async function thoigianconlai(thoigianconlai){const _0x8f338a=_0x156407;try{log(profileNameId,'['+botName+_0x8f338a(0x11f));let hour0,minute0,timeleft0=thoigianconlai,timeleft=timeleft0['replace']('\x20','')[_0x8f338a(0xdd)](),matches=timeleft[_0x8f338a(0xe4)](/(\d+)h(\d+)m/);matches?(hour0=matches[0x1],minute0=matches[0x2]):(hour0=0x1,minute0=0x0);let hours=parseInt(hour0),minutes=parseInt(minute0),seconds=parseInt(0x0),totalSeconds=parseInt(hours*0xe10+minutes*0x3c+seconds);const unixTime=Math[_0x8f338a(0x129)](Date['now']()/0x3e8),newUnixTime=unixTime+totalSeconds,newDate=new Date(newUnixTime*0x3e8),formattedDate=newDate[_0x8f338a(0x102)](),formattedTime=newDate[_0x8f338a(0xcb)](_0x8f338a(0x100),{'hour12':![]});let NextRun=formattedDate+'\x20'+formattedTime;return{'NextRun':NextRun,'NextRunStamp':newUnixTime};}catch(error){return log(profileNameId,'['+botName+_0x8f338a(0x138)+error,null,![]),null;}}async function delay(ms){return new Promise(async resolve=>{setTimeout(resolve,ms);});}async function cTimeout(){const _0x2cb5de=_0x156407;if(Atomics[_0x2cb5de(0xf3)](tasksData,taskIndex)===0x1)return!![];return![];}};
function a0_0x24b2(){const _0x56b025=['][town]Không\x20tìm\x20thấy\x20builder','][lamTask]Không\x20tìm\x20thấy\x20task','][checkQuayLaiXpath]\x20Tìm\x20thấy\x20backXpath','][Lỗi]:\x20','810612UdvIZZ','(//div[contains(@data-tc-modal,\x27true\x27)]//button[contains(@data-tc-icon-button,\x27true\x27)])[1]','576564QldIEG','match','][lamTask]Tìm\x20thấy\x20code:\x20','click','getTextByXPath','//button[normalize-space(text())=\x27Finish\x20mission\x27\x20and\x20not(@disabled)]','builder','home','][checkQuayLaiXpath]\x20Kiểm\x20tra\x20lần\x20quay\x20lại:\x20','buy',']Lôi\x20Town','scroll',']Không\x20tìm\x20thấy\x20main\x20frame','][lamTask]Không\x20tìm\x20thấy\x20finishMission','//div[contains(@class,\x27_actionContent_\x27)]//button[text()=\x27Get\x20it!\x27]','][town]Tìm\x20thấy\x20nâng\x20cấp\x20','][town]Tìm\x20thấy\x20worker','getCode','nutX','][lamTask]Không\x20quay\x20lại\x20được\x20tasks','][town]Tìm\x20thấy\x20mua\x20','countOpenTabs','][checkQuayLaiXpath]\x20Chỉ\x20có\x20','walletClose','][checkClosePopup]\x20error:\x20','][lamTask]Click\x20inputCode\x20OK',']Tìm\x20thấy\x20coinTag','7580814JBIyvU','(//div[contains(@class,\x27_balance_\x27)])[2]','//button[text()=\x27Check\x27]','][lamTask]Click\x20home\x20OK','//div[contains(@class,\x27_building_\x27)]//img[contains(@src,\x27/assets/b_\x27)\x20and\x20not(ancestor::div[contains(@class,\x27_building_\x27)]//div[contains(@class,\x27_content_\x27)]//div[contains(@data-text,\x2720\x27)])]','//img[contains(@alt,\x27right\x20chevron\x27)]','CloseGame','][lamTask]Click\x20watch\x20OK','][town]Tìm\x20thấy\x20getIt','checkBtn','\x20tab\x20đang\x20mở','][lamTask]Click\x20task\x20OK','][lamTask]Click\x20claim\x20OK','builderRelax','mainframe','][lamTask]Click\x20claim2tr\x20OK','//img[contains(@src,\x27/assets/town\x27)]','//button[text()=\x27Watch\x27]','Không\x20tìm\x20thấy\x20iframe','1429965STJMLq','21452606Nospef','][click][Lỗi]:\x20','][thoigianconlai]:\x20','\x20OK','(//div[contains(@class,\x27_balance_\x27)])[1]','popupBackBtn','(//dialog//button[contains(@class,\x27close-btn\x27)])[1]','elementExistsByXPath','][checkQuayLaiXpath]\x20Vào\x20game\x20thành\x20công','//button[normalize-space(text())=\x27Claim\x27\x20and\x20not(@disabled)]','NextRunStamp','][checkClosePopup]Tìm\x20thấy\x20nutX','claim','watch','][lamTask]Làm\x20Task\x20nè',']Ra\x20game\x20nè','][lamTask]Không\x20click\x20dc\x20inputCode',']không\x20Tìm\x20thấy\x20coinTag','][lamTask]Không\x20click\x20dc\x20finishMission','//button[text()=\x27Claim\x27]','][click]Không\x20click\x20được\x20vào\x20',']Vào\x20game\x20nè','town','//img[contains(@src,\x27/assets/task\x27)\x20and\x20contains(@alt,\x27navigation\x27)]','message','1729422UfAmrm','cid','][click]Click\x20','][checkTown]\x20error:\x20','en-GB','//button[text()=\x27Start\x20mission\x27]',']Xử\x20lý\x20thoigianconlai\x20OK','][lamTask]:\x20','][lamTask]Không\x20click\x20được\x20vào\x20task','][lamTask]Tìm\x20thấy\x20inputCode','toLocaleDateString','value','//input[contains(@placeholder,\x27Provide\x20an\x20answer\x27)]','xpathBackTask','saveCode','][checkQuayLaiXpath]\x20quay\x20lại\x20tasks\x20thành\x20công','//h6[contains(text(),\x27relaxing\x27)]','switchFrame','][lamTask]Tìm\x20thấy\x20home','soLuotlamTask','countXpath','2964740ERzJAk','getIt','dialogClose','startMission',']nextRunAt:\x20','][lamTask]Tìm\x20thấy\x20finishMission','Không\x20tìm\x20thấy\x20main\x20frame','][checkClosePopup]\x20checkClosePopup\x20nè',']Đã\x20tìm\x20thấy\x20iframe',']Không\x20tìm\x20thấy\x20iframe','listBuilder','inputCode','//button[text()=\x27Upgrade\x27]','taskTitle','01h\x2000m','][checkQuayLaiXpath]\x20Kiểm\x20tra\x20lần:\x20','//button[text()=\x27Buy\x27]','][town]Tìm\x20thấy\x20relax:\x20','][lamTask]check\x20task\x20:\x20','upgrade','][town]Tìm\x20thấy\x20nutX','toLocaleTimeString','botSet','][checkClosePopup]Tìm\x20thấy\x20popupBackBtn','][checkClosePopup]Tìm\x20thấy\x20getIt','//img[contains(@src,\x27/assets/coin_\x27)\x20and\x20contains(@alt,\x27navigation\x27)]','(//div[contains(@class,\x27_balance_\x27)])[3]','getCurrentPage','finishMission','NextRun','Iframe','autoLamTask','][town]Tìm\x20thấy\x20home','][lamTask]Tìm\x20thấy\x20checkBtn:\x20','typeText','][lamTask]Tìm\x20thấy\x20claim','][checkQuayLaiXpath]\x20Phát\x20hiện\x20tab\x20mới','task'];a0_0x24b2=function(){return _0x56b025;};return a0_0x24b2();}(function(_0x3a9719,_0x12f11f){const _0x2a4eb8=a0_0x1737,_0x29dee8=_0x3a9719();while(!![]){try{const _0x2a3f92=-parseInt(_0x2a4eb8(0xd5))/0x1+parseInt(_0x2a4eb8(0x11f))/0x2+-parseInt(_0x2a4eb8(0xd7))/0x3+-parseInt(_0x2a4eb8(0x134))/0x4+-parseInt(_0x2a4eb8(0x105))/0x5+-parseInt(_0x2a4eb8(0xf2))/0x6+parseInt(_0x2a4eb8(0x106))/0x7;if(_0x2a3f92===_0x12f11f)break;else _0x29dee8['push'](_0x29dee8['shift']());}catch(_0x53c42e){_0x29dee8['push'](_0x29dee8['shift']());}}}(a0_0x24b2,0x9b412));import{log,json}from'../modules/logger.js';export default async function (context,signal){const _0x5205c5=a0_0x1737,choMs=ms=>new Promise(resolve=>setTimeout(resolve,ms)),{firstPage,bot,profileNameId,getAks,genlogin,http,browser,dataId,screenDataBuffer2,tasksDataBuffer2,taskIndex}=context;let currentPage=firstPage,subframe;const botName=bot['name'];let screenData=new Int32Array(screenDataBuffer2),tasksData=new Int32Array(tasksDataBuffer2),demLoop=0x0,remainTime,soLuotlamTask=0x5;bot[_0x5205c5(0x14a)][_0x5205c5(0x132)][_0x5205c5(0x12a)]&&(parseInt(bot[_0x5205c5(0x14a)][_0x5205c5(0x132)][_0x5205c5(0x12a)])>0x0&&(soLuotlamTask=parseInt(bot[_0x5205c5(0x14a)]['soLuotlamTask']['value'])));const xpath={'nutX':'//button[contains(@class,\x27_crosBtn_\x27)]','coin':_0x5205c5(0x10a),'coinBlock':_0x5205c5(0xf3),'coinDiamond':_0x5205c5(0x14e),'coinPlay':'(//div[contains(@class,\x27_balance_\x27)])[4]','getIt':'//div[contains(@class,\x27_actionContent_\x27)]//button[text()=\x27Get\x20it!\x27]','home':_0x5205c5(0x14d),'task':_0x5205c5(0x11d)};try{subframe=await vaoGame();if(!subframe){log(profileNameId,'['+botName+_0x5205c5(0x13d),null,![]);throw new Error(_0x5205c5(0x104));}log(profileNameId,'['+botName+']Vào\x20game\x20OK'),await delay(0x3e8);const closePopup=await checkClosePopup();await delay(0x3e8);if(bot[_0x5205c5(0x14a)][_0x5205c5(0x11c)][_0x5205c5(0x12a)]==='y'){const kqTown=await checkTown();!kqTown&&log(profileNameId,'['+botName+_0x5205c5(0xe1),null,![]),log(profileNameId,'['+botName+']Done\x20Town'),await delay(0x7d0);}if(bot['botSet'][_0x5205c5(0xca)][_0x5205c5(0x12a)]==='y'){const kqlamTask=await lamTask();!kqlamTask&&log(profileNameId,'['+botName+']Lôi\x20lamTask',null,![]),log(profileNameId,'['+botName+']Done\x20lamTask');}const coinTag=await genlogin[_0x5205c5(0x10d)](profileNameId,subframe,xpath['coin'],0x3e8);!coinTag&&log(profileNameId,'['+botName+_0x5205c5(0x117));log(profileNameId,'['+botName+_0x5205c5(0xf1));const coin=await genlogin[_0x5205c5(0xdb)](profileNameId,subframe,xpath['coin'],0x7d0);!coin&&log(profileNameId,'['+botName+']Không\x20tìm\x20thấy\x20coin',null,![]);await http['updateData'](profileNameId,profileNameId,dataId,null,coin),log(profileNameId,'['+botName+']Tìm\x20thấy\x20coin:\x20'+coin);const remainT=await thoigianconlai(_0x5205c5(0x142));return!remainT&&log(profileNameId,'['+botName+']không\x20xử\x20lý\x20được\x20thoigianconlai',null,![]),log(profileNameId,'['+botName+_0x5205c5(0x125)),log(profileNameId,'['+botName+_0x5205c5(0x138)+remainT[_0x5205c5(0xc8)]),{'status':!![],'coin':coin,'nextRun':remainT[_0x5205c5(0xc8)],'nextRunStamp':remainT[_0x5205c5(0x110)]};}catch(error){log(profileNameId,'['+botName+_0x5205c5(0xd4)+error,null,![]);}async function vaoGame(){const _0x26ec38=_0x5205c5;try{log(profileNameId,'['+botName+_0x26ec38(0x11b));const subframe0=await genlogin[_0x26ec38(0x130)](profileNameId,currentPage,getAks[_0x26ec38(0xc9)],0x2710);if(!subframe0){log(profileNameId,'['+botName+_0x26ec38(0x13d),null,![]);throw new Error(_0x26ec38(0x104));}return log(profileNameId,'['+botName+_0x26ec38(0x13c)),subframe0;}catch(error){return log(profileNameId,'['+botName+'][Lỗi]:\x20'+error,null,![]),null;}}async function raGame(){const _0x4722b6=_0x5205c5;try{log(profileNameId,'['+botName+_0x4722b6(0x115)),currentPage=genlogin[_0x4722b6(0x130)](profileNameId,currentPage,_0x4722b6(0x100),0x7d0);if(!currentPage){log(profileNameId,'['+botName+_0x4722b6(0xe3),null,![]);throw new Error(_0x4722b6(0x13a));}return currentPage;}catch(error){return log(profileNameId,'['+botName+_0x4722b6(0xd4)+error,null,![]),null;}}async function click(xpath,tagClick=![]){const _0x16729a=_0x5205c5;try{await delay(0x3e8);const clicked=await genlogin[_0x16729a(0xda)](profileNameId,subframe,{'xpath':xpath,'mainframe':currentPage,'browser':browser,'tagClick':tagClick},0x7d0);await delay(0x3e8);if(!clicked)return log(profileNameId,'['+botName+_0x16729a(0x11a)+xpath,null,![]),!![];return log(profileNameId,'['+botName+_0x16729a(0x121)+xpath+_0x16729a(0x109)),clicked;}catch(error){return log(profileNameId,'['+botName+_0x16729a(0x107)+error,null,![]),null;}}async function clickM(xpath){const _0x55da7f=_0x5205c5;try{await delay(0x3e8);const clicked=await genlogin['click'](profileNameId,currentPage,{'xpath':xpath,'mainframe':currentPage,'browser':browser},0x3e8);await delay(0x3e8);if(!clicked)return log(profileNameId,'['+botName+'][click]Không\x20click\x20được\x20vào\x20'+xpath,null,![]),null;return log(profileNameId,'['+botName+_0x55da7f(0x121)+xpath+_0x55da7f(0x109)),clicked;}catch(error){return log(profileNameId,'['+botName+'][click][Lỗi]:\x20'+error,null,![]),null;}}async function checkClosePopup(){const _0xd50b34=_0x5205c5;try{log(profileNameId,'['+botName+_0xd50b34(0x13b));let demLoop=0x0,maxDemLoop=0xa;while(demLoop<maxDemLoop){demLoop++;const kqGetIt=await genlogin[_0xd50b34(0x10d)](profileNameId,subframe,xpath['getIt'],0x7d0);if(kqGetIt){log(profileNameId,'['+botName+_0xd50b34(0x14c)),await click(xpath[_0xd50b34(0x135)]),await delay(0x3e8);const kqNeedBack=await genlogin[_0xd50b34(0x10d)](profileNameId,currentPage,getAks[_0xd50b34(0x10b)],0x7d0);kqNeedBack&&(log(profileNameId,'['+botName+_0xd50b34(0x14b)),await clickM(getAks['popupBackBtn']),await delay(0x3e8));continue;}else{const kqNutX=await genlogin[_0xd50b34(0x10d)](profileNameId,subframe,xpath[_0xd50b34(0xe9)],0x7d0);if(kqNutX){log(profileNameId,'['+botName+_0xd50b34(0x111)),await click(xpath['nutX'],!![]),await delay(0x3e8);const kqNeedBack1=await genlogin[_0xd50b34(0x10d)](profileNameId,currentPage,getAks[_0xd50b34(0x10b)],0x7d0);kqNeedBack1&&(log(profileNameId,'['+botName+_0xd50b34(0x14b)),await clickM(getAks[_0xd50b34(0x10b)]),await delay(0x3e8));continue;}}await delay(0x3e8);break;}}catch(e){return log(profileNameId,'['+botName+_0xd50b34(0xef)+e[_0xd50b34(0x11e)],null,![]),null;}}async function checkTown(){const _0xcce7ce=_0x5205c5;try{const xpathTown={'getIt':_0xcce7ce(0xe5),'town':_0xcce7ce(0x102),'builder':'//img[contains(@src,\x27/assets/builder_\x27)]','builderRelax':_0xcce7ce(0x12f),'listBuilder':_0xcce7ce(0xf6),'buy':_0xcce7ce(0x144),'upgrade':_0xcce7ce(0x140)};let kqRelax=0x0;const kqVaoTown=await genlogin['elementExistsByXPath'](profileNameId,subframe,xpathTown['town'],0x7d0);kqVaoTown&&(log(profileNameId,'['+botName+'][town]Tìm\x20thấy\x20town'),await click(xpathTown['town']),await delay(0x3e8));const kqGetIt=await genlogin[_0xcce7ce(0x10d)](profileNameId,subframe,xpathTown[_0xcce7ce(0x135)],0x7d0);kqGetIt&&(log(profileNameId,'['+botName+_0xcce7ce(0xfa)),await click(xpathTown[_0xcce7ce(0x135)]),await delay(0x3e8));const kqBuilder=await genlogin[_0xcce7ce(0x10d)](profileNameId,subframe,xpathTown[_0xcce7ce(0xdd)],0x7d0);if(kqBuilder){log(profileNameId,'['+botName+_0xcce7ce(0xe7)),await click(xpathTown[_0xcce7ce(0xdd)]),await delay(0x3e8),kqRelax=await genlogin[_0xcce7ce(0x133)](profileNameId,subframe,xpathTown[_0xcce7ce(0xff)],0x7d0),log(profileNameId,'['+botName+_0xcce7ce(0x145)+json(kqRelax));const kqNutX=await genlogin[_0xcce7ce(0x10d)](profileNameId,subframe,xpath['nutX'],0x7d0);if(kqNutX){log(profileNameId,'['+botName+_0xcce7ce(0x148));const kqnutx0=await click(xpath[_0xcce7ce(0xe9)],!![]);if(!kqnutx0)return log(profileNameId,'['+botName+'][town]Không\x20click\x20được\x20vào\x20nutX',null,![]),null;await delay(0x3e8);}}if(kqRelax>0x0){let demLoop=0x0,maxDemLoop=0x14,demLoopnangCap=kqRelax;while(demLoop<maxDemLoop){demLoop++,await delay(0x3e8),log(profileNameId,'['+botName+'][town]Loop:\x20'+demLoop+'/'+maxDemLoop);if(demLoopnangCap<=0x0)break;const tagbuilder='('+xpathTown[_0xcce7ce(0x13e)]+')['+demLoop+']',kqBuilder=await genlogin[_0xcce7ce(0x10d)](profileNameId,subframe,tagbuilder,0x7d0);if(!kqBuilder){log(profileNameId,'['+botName+_0xcce7ce(0xd1),null,![]);continue;}await genlogin[_0xcce7ce(0xe2)](profileNameId,subframe,{'xpath':tagbuilder},0xbb8),await delay(0x3e8);const kqclick=await click(tagbuilder);if(!kqclick){log(profileNameId,'['+botName+'][town]Không\x20click\x20được\x20vào\x20builder',null,![]);continue;}else{log(profileNameId,'['+botName+'][town]Click\x20builder\x20OK');const kqNangCap=await genlogin[_0xcce7ce(0x10d)](profileNameId,subframe,xpathTown['upgrade'],0x3e8);if(kqNangCap){log(profileNameId,'['+botName+_0xcce7ce(0xe6)+demLoopnangCap+'/'+kqRelax),await click(xpathTown[_0xcce7ce(0x147)]),await delay(0x3e8),await click(xpath[_0xcce7ce(0xe9)],!![]),await delay(0x3e8),demLoopnangCap--;continue;}else{const kqBuy=await genlogin[_0xcce7ce(0x10d)](profileNameId,subframe,xpathTown[_0xcce7ce(0xe0)],0x3e8);if(kqBuy){log(profileNameId,'['+botName+_0xcce7ce(0xeb)+demLoopnangCap+'/'+kqRelax),await click(xpathTown[_0xcce7ce(0xe0)]),await delay(0x3e8),await click(xpath[_0xcce7ce(0xe9)],!![]),await delay(0x3e8),demLoopnangCap--;continue;}}}const kqNutX=await genlogin[_0xcce7ce(0x10d)](profileNameId,subframe,xpath[_0xcce7ce(0xe9)],0x3e8);kqNutX&&(log(profileNameId,'['+botName+_0xcce7ce(0x148)),await click(xpath[_0xcce7ce(0xe9)],!![]),await delay(0x3e8));}}const kqHome=await genlogin['elementExistsByXPath'](profileNameId,subframe,xpath[_0xcce7ce(0xde)],0x3e8);return kqHome&&(log(profileNameId,'['+botName+_0xcce7ce(0xcb)),await click(xpath['home']),await delay(0x3e8)),!![];}catch(e){log(profileNameId,'['+botName+_0xcce7ce(0x122)+e[_0xcce7ce(0x11e)],null,![]);}}async function lamTask(){const _0x17090a=_0x5205c5;try{const taskXpath={'claim':_0x17090a(0x10f),'task':_0x17090a(0xf7),'startMission':_0x17090a(0x124),'watch':_0x17090a(0x103),'inputCode':_0x17090a(0x12b),'submit':'//button[text()=\x27Submit\x27]','taskTitle':'//h3[contains(@class,\x27_h3_\x27)]','finishMission':_0x17090a(0xdc),'claim':_0x17090a(0x119),'xpathBackTask':'//div[contains(@class,\x27_listContainer_\x27)]//div[contains(@class,\x27_container_\x27)]','checkBtn':_0x17090a(0xf4)};let kqCode;log(profileNameId,'['+botName+_0x17090a(0x114));const kqVaoTask=await genlogin[_0x17090a(0x10d)](profileNameId,subframe,xpath[_0x17090a(0xd0)],0x7d0);if(!kqVaoTask)return log(profileNameId,'['+botName+_0x17090a(0xd2),null,![]),![];const kqClickTask=await click(xpath[_0x17090a(0xd0)]);if(!kqClickTask)return log(profileNameId,'['+botName+_0x17090a(0x127),null,![]),![];log(profileNameId,'['+botName+_0x17090a(0xfd));let demLoop=0x0,maxDemLoop=soLuotlamTask;while(demLoop<maxDemLoop){demLoop++,await delay(0x3e8),log(profileNameId,'['+botName+_0x17090a(0x146)+demLoop+'/'+maxDemLoop,null,'i','-');const tagTask='('+taskXpath[_0x17090a(0xd0)]+')['+demLoop+']',kqCheckTask=await genlogin[_0x17090a(0x10d)](profileNameId,subframe,tagTask,0x3e8);if(!kqCheckTask){log(profileNameId,'['+botName+_0x17090a(0xd2),null,![]);continue;}const kqClickTask=await click(tagTask);if(!kqClickTask){log(profileNameId,'['+botName+_0x17090a(0x127),null,![]);continue;}log(profileNameId,'['+botName+_0x17090a(0xfd)),await delay(0x3e8);const kqStartMission=await genlogin['elementExistsByXPath'](profileNameId,subframe,taskXpath[_0x17090a(0x137)],0x7d0);if(kqStartMission){log(profileNameId,'['+botName+'][lamTask]Tìm\x20thấy\x20startMission');const kqClickStartMission=await click(taskXpath[_0x17090a(0x137)]);!kqClickStartMission?log(profileNameId,'['+botName+'][lamTask]Không\x20click\x20là\x20startMission',null,![]):log(profileNameId,'['+botName+'][lamTask]Click\x20startMission\x20OK');await delay(0x7d0);const kqWatch=await genlogin[_0x17090a(0x10d)](profileNameId,subframe,taskXpath[_0x17090a(0x113)],0x7d0);if(kqWatch){log(profileNameId,'['+botName+'][lamTask]Tìm\x20thấy\x20watch');const kqClickWatch=await click(taskXpath['watch']);!kqClickWatch?log(profileNameId,'['+botName+'][lamTask]Không\x20click\x20dc\x20watch',null,![]):log(profileNameId,'['+botName+_0x17090a(0xf9));}await checkQuayLaiXpath(taskXpath[_0x17090a(0x12c)]);continue;}const kqtaskTitle=await genlogin[_0x17090a(0xdb)](profileNameId,subframe,taskXpath[_0x17090a(0x141)],0x7d0);if(kqtaskTitle){log(profileNameId,'['+botName+'][lamTask]Tìm\x20thấy\x20taskTitle:\x20'+kqtaskTitle);const kqCkCheckBtn=await genlogin[_0x17090a(0xdb)](profileNameId,subframe,taskXpath[_0x17090a(0xfb)],0x3e8);if(kqCkCheckBtn){log(profileNameId,'['+botName+_0x17090a(0xcc)+kqCkCheckBtn);const kqClickCkCheckBtn=await click(taskXpath[_0x17090a(0xfb)]);!kqClickCkCheckBtn?log(profileNameId,'['+botName+'][lamTask]Không\x20click\x20dc\x20checkBtn',null,![]):log(profileNameId,'['+botName+'][lamTask]Click\x20checkBtn\x20OK');}else{const kqInput=await genlogin[_0x17090a(0x10d)](profileNameId,subframe,taskXpath[_0x17090a(0x13f)],0xbb8);if(kqInput){kqCode=await http[_0x17090a(0xe8)](profileNameId,profileNameId,botName,kqtaskTitle,0x0);if(kqCode['value'])log(profileNameId,'['+botName+_0x17090a(0xd9)+kqCode[_0x17090a(0x12a)]);else{log(profileNameId,'['+botName+'][lamTask]Không\x20tìm\x20thấy\x20code',null,![]);const checkBack=await checkQuayLaiXpath(taskXpath[_0x17090a(0x12c)]);if(!checkBack){log(profileNameId,'['+botName+_0x17090a(0xea),![]);break;}continue;}log(profileNameId,'['+botName+_0x17090a(0x128));const kqClickInput=await click(taskXpath[_0x17090a(0x13f)]);!kqClickInput?log(profileNameId,'['+botName+_0x17090a(0x116),null,![]):log(profileNameId,'['+botName+_0x17090a(0xf0));await delay(0x3e8);const kqType=await genlogin[_0x17090a(0xcd)](profileNameId,currentPage,taskXpath[_0x17090a(0x13f)],kqCode['value'],0x1,0xbb8);if(kqType){log(profileNameId,'['+botName+'][lamTask]Type\x20code\x20'+kqCode[_0x17090a(0x12a)]+_0x17090a(0x109)),await delay(0x3e8);const kqClick1=await click(taskXpath['submit']);kqClick1&&(log(profileNameId,'['+botName+'][lamTask]Click\x20submit\x20OK'),await delay(0x3e8));}}}const kqCheckDone=await genlogin['elementExistsByXPath'](profileNameId,subframe,taskXpath[_0x17090a(0xc7)],0x7d0);if(kqCheckDone){log(profileNameId,'['+botName+_0x17090a(0x139));const kqClickDone=await click(taskXpath[_0x17090a(0xc7)]);kqClickDone?log(profileNameId,'['+botName+'][lamTask]Click\x20finishMission\x20OK'):log(profileNameId,'['+botName+_0x17090a(0x118),null,![]);const kqClaim=await genlogin['elementExistsByXPath'](profileNameId,subframe,taskXpath[_0x17090a(0x112)],0x7d0);if(kqClaim){log(profileNameId,'['+botName+_0x17090a(0xce));const kqClickClaim=await click(taskXpath['claim']);kqClickClaim&&(log(profileNameId,'['+botName+_0x17090a(0xfe)),await checkQuayLaiXpath(taskXpath[_0x17090a(0x12c)]));}}else{log(profileNameId,'['+botName+_0x17090a(0xe4),null,![]);const kqSaveCode=await http[_0x17090a(0x12d)](profileNameId,profileNameId,kqCode[_0x17090a(0x120)],botName,kqtaskTitle,0x0),checkBack2=await checkQuayLaiXpath(taskXpath[_0x17090a(0x12c)]);}}const kqClaim2tr=await genlogin[_0x17090a(0x10d)](profileNameId,subframe,taskXpath[_0x17090a(0x112)],0x3e8);if(kqClaim2tr){log(profileNameId,'['+botName+'][lamTask]Tìm\x20thấy\x20claim2tr');const kqClickClaim2tr=await click(taskXpath[_0x17090a(0x112)]);kqClickClaim2tr&&log(profileNameId,'['+botName+_0x17090a(0x101));}}await checkQuayLaiXpath(taskXpath[_0x17090a(0x12c)]);const kqHome=await genlogin[_0x17090a(0x10d)](profileNameId,subframe,xpath[_0x17090a(0xde)],0x7d0);if(kqHome){log(profileNameId,'['+botName+_0x17090a(0x131));const clickedHome=await click(xpath['home']);clickedHome&&(log(profileNameId,'['+botName+_0x17090a(0xf5)),await delay(0x3e8));}return!![];}catch(error){return log(profileNameId,'['+botName+_0x17090a(0x126)+error,null,![]),null;}}async function checkQuayLaiXpath(backXpath){const _0x5b60ac=_0x5205c5;try{const maxattemptCQ=0xa;let attemptCQ=0x0;const loopBack={'walletClose':_0x5b60ac(0xd6),'dialogClose':_0x5b60ac(0x10c)};while(attemptCQ<maxattemptCQ){attemptCQ++,await delay(0x3e8),log(profileNameId,'['+botName+_0x5b60ac(0x143)+attemptCQ);const currentPage=await genlogin[_0x5b60ac(0xc6)](profileNameId,browser);if(!currentPage){log(profileNameId,'['+botName+'][checkQuayLaiXpath]\x20Không\x20tìm\x20thấy\x20currentPage',null,![]);continue;}log(profileNameId,'['+botName+'][checkQuayLaiXpath]\x20Tìm\x20thấy\x20currentPage');const kqTelePage=await genlogin[_0x5b60ac(0x10d)](profileNameId,currentPage,getAks[_0x5b60ac(0xf8)],0x7d0);if(!kqTelePage){log(profileNameId,'['+botName+_0x5b60ac(0xcf));const countTab=await genlogin[_0x5b60ac(0xec)](profileNameId,browser);if(countTab<=0x1){log(profileNameId,'['+botName+_0x5b60ac(0xed)+countTab+_0x5b60ac(0xfc));break;}const closeTab=await genlogin['closeTab'](profileNameId,browser,countTab-0x1,0xbb8);if(!closeTab){log(profileNameId,'['+botName+'][checkQuayLaiXpath]\x20Lỗi\x20khi\x20đóng\x20tab\x20mới',null,![]);continue;}log(profileNameId,'['+botName+'][checkQuayLaiXpath]\x20Đóng\x20tab\x20mới\x20thành\x20công'),await delay(0xbb8);continue;}log(profileNameId,'['+botName+'][checkQuayLaiXpath]\x20Không\x20phát\x20hiện\x20tab\x20mới'),subframe=await vaoGame();if(!subframe){log(profileNameId,'['+botName+'][checkQuayLaiXpath]\x20Không\x20tìm\x20thấy\x20iframe',null,![]);continue;}log(profileNameId,'['+botName+_0x5b60ac(0x10e));const kqbackXpath=await genlogin[_0x5b60ac(0x10d)](profileNameId,subframe,backXpath,0x7d0);if(kqbackXpath){log(profileNameId,'['+botName+_0x5b60ac(0xd3));break;}if(!![]){let attemptBack=0x0,maxAttempBack=0xa,kqBack=![];while(attemptBack<maxAttempBack){attemptBack++,log(profileNameId,'['+botName+_0x5b60ac(0xdf)+attemptBack);const kqbackXpath=await genlogin['elementExistsByXPath'](profileNameId,subframe,backXpath,0x7d0);if(kqbackXpath){log(profileNameId,'['+botName+_0x5b60ac(0xd3));break;}const kqb0=await genlogin[_0x5b60ac(0x10d)](profileNameId,currentPage,getAks[_0x5b60ac(0x10b)],0x3e8);if(kqb0){await clickM(getAks['popupBackBtn']);continue;}await delay(0x3e8);}return!![];}}let attemptW=0x0,maxAttemptsW=0x5;while(attemptW<maxAttemptsW){attemptW++;const checkWalletClose=await genlogin[_0x5b60ac(0x10d)](profileNameId,subframe,loopBack[_0x5b60ac(0xee)],0x1f4);checkWalletClose&&await click(loopBack[_0x5b60ac(0xee)]);const checkdialogClose=await genlogin[_0x5b60ac(0x10d)](profileNameId,subframe,loopBack[_0x5b60ac(0x136)],0x1f4);checkdialogClose&&await click(loopBack[_0x5b60ac(0x136)]);if(!checkWalletClose&&!checkdialogClose)break;}return log(profileNameId,'['+botName+_0x5b60ac(0x12e)),!![];}catch(error){return log(profileNameId,'['+botName+'][checkQuayLaiXpath]\x20Lỗi\x20trong\x20quá\x20trình\x20kiểm\x20tra:\x20'+error[_0x5b60ac(0x11e)],null,![]),null;}}async function thoigianconlai(thoigianconlai){const _0x3aa82b=_0x5205c5;try{log(profileNameId,'['+botName+'][thoigianconlai]:Xử\x20lý\x20gian\x20còn\x20lại\x20nè');let hour0,minute0,timeleft0=thoigianconlai,timeleft=timeleft0['replace']('\x20','')['trim'](),matches=timeleft[_0x3aa82b(0xd8)](/(\d+)h(\d+)m/);matches?(hour0=matches[0x1],minute0=matches[0x2]):(hour0=0x1,minute0=0x0);let hours=parseInt(hour0),minutes=parseInt(minute0),seconds=parseInt(0x0),totalSeconds=parseInt(hours*0xe10+minutes*0x3c+seconds);const unixTime=Math['floor'](Date['now']()/0x3e8),newUnixTime=unixTime+totalSeconds,newDate=new Date(newUnixTime*0x3e8),formattedDate=newDate[_0x3aa82b(0x129)](),formattedTime=newDate[_0x3aa82b(0x149)](_0x3aa82b(0x123),{'hour12':![]});let NextRun=formattedDate+'\x20'+formattedTime;return{'NextRun':NextRun,'NextRunStamp':newUnixTime};}catch(error){return log(profileNameId,'['+botName+_0x3aa82b(0x108)+error,null,![]),null;}}async function delay(ms){return new Promise(async resolve=>{setTimeout(resolve,ms);});}async function cTimeout(){if(Atomics['load'](tasksData,taskIndex)===0x1)return!![];return![];}}function a0_0x1737(_0x28ba9c,_0x21edef){const _0x24b2a7=a0_0x24b2();return a0_0x1737=function(_0x173771,_0x322b80){_0x173771=_0x173771-0xc6;let _0x5b6395=_0x24b2a7[_0x173771];return _0x5b6395;},a0_0x1737(_0x28ba9c,_0x21edef);};
function a0_0x1dcf(){const _0xd23f91=['2905914GUmLsZ','][choDoMinXong]Không\x20click\x20được\x20vào\x20playAgain','][lamQuest]Click\x20quest\x20OK',']Không\x20tìm\x20thấy\x20coin','//button[contains(@class,\x20\x27_closeButton_\x27)]','][closePopup]Không\x20click\x20được\x20vào\x20play','][closePopup]Click\x20next\x20OK',']Tìm\x20thấy\x20coinTag','4386815anNnjG','3890776WJKTWf','click','split','[getFile]\x20error:\x20','name','Không\x20tìm\x20thấy\x20coinTag','][closePopup]Tìm\x20thấy\x20play','path','utf8','][closePopup]Không\x20tìm\x20thấy\x20next','join','play',']không\x20xử\x20lý\x20được\x20thoigianconlai','quest','\x20lần','elementExistsByXPath','][lamQuest]Tìm\x20thấy\x20quest','][choDoMinXong]\x20Đã\x20click\x20vào\x20playAgain',']nextRunAt:\x20','][choDoMinXong]\x20Đã\x20chơi\x20xong\x20','Không\x20tìm\x20thấy\x20quest','Không\x20tìm\x20thấy\x20main\x20frame','value',']không\x20Tìm\x20thấy\x20coinTag','][autoDoMin]:\x20',']Tìm\x20thấy\x20coin:\x20','Iframe',']Ra\x20game\x20nè','(//span[contains(text(),\x20\x27Sweep\x27)])[last()]','botSet','getTextByXPath','-autoTap','][closePopup][Lỗi]:\x20','playAgain','updateData',']autoDoMin\x20OK',']Không\x20tìm\x20thấy\x20main\x20frame',']có\x20vấn\x20đề\x20gì\x20đó\x20với\x20autoDoMin','playNow',']Vào\x20game\x20nè','][Lỗi]:\x20','toLocaleDateString','1743780aSGKcw','promises','][autoDoMin]Auto\x20dò\x20mìn\x20nè','][closePopup]Không\x20tìm\x20thấy\x20playNow','switchFrame','NextRunStamp','//button[text()=\x27Leave\x27]','message','11900538EPvmHh',']Xử\x20lý\x20thoigianconlai\x20OK','readFile','//h6[text()=\x27Start\x20Game\x27]','load','][closePopup]Click\x20playNow\x20OK','mainframe','56aEnJvN',']Vào\x20game\x20OK','1654437TeQoxl',']Không\x20tìm\x20thấy\x20iframe','][closePopup]Tìm\x20thấy\x20playNow','(//button[contains(text(),\x20\x27Next\x27)])[last()]','][lamQuest]Không\x20click\x20được\x20vào\x20quest','//button[text()=\x27Play\x20Now\x27]','Không\x20tìm\x20thấy\x20iframe','][autoTap]:\x20',']Đã\x20tìm\x20thấy\x20iframe','//h6[text()=\x27Next\x27]','][click][Lỗi]:\x20','38942mIBbmu','][lamQuest]:\x20','javascript','NextRun','][autoDoMin]Auto\x20dò\x20mìn\x20OK','\x20OK','][closePopup]Không\x20tìm\x20thấy\x20play','en-GB','coin','7mTTIkU','][click]Click\x20','][thoigianconlai]:Xử\x20lý\x20gian\x20còn\x20lại\x20nè'];a0_0x1dcf=function(){return _0xd23f91;};return a0_0x1dcf();}(function(_0x5a13a3,_0x369cfc){const _0x3b6036=a0_0x3cfc,_0x3c0552=_0x5a13a3();while(!![]){try{const _0x3abef6=-parseInt(_0x3b6036(0x1fb))/0x1*(-parseInt(_0x3b6036(0x1ee))/0x2)+-parseInt(_0x3b6036(0x1f0))/0x3+-parseInt(_0x3b6036(0x1df))/0x4+-parseInt(_0x3b6036(0x20f))/0x5+parseInt(_0x3b6036(0x207))/0x6*(-parseInt(_0x3b6036(0x204))/0x7)+parseInt(_0x3b6036(0x210))/0x8+parseInt(_0x3b6036(0x1e7))/0x9;if(_0x3abef6===_0x369cfc)break;else _0x3c0552['push'](_0x3c0552['shift']());}catch(_0x2326aa){_0x3c0552['push'](_0x3c0552['shift']());}}}(a0_0x1dcf,0x8640b));import{log,json}from'../modules/logger.js';function a0_0x3cfc(_0x36bb92,_0x3ebe88){const _0x1dcfc3=a0_0x1dcf();return a0_0x3cfc=function(_0x3cfcd6,_0x1bd1f3){_0x3cfcd6=_0x3cfcd6-0x1dd;let _0x2857fa=_0x1dcfc3[_0x3cfcd6];return _0x2857fa;},a0_0x3cfc(_0x36bb92,_0x3ebe88);}export default async function (context,signal){const _0x19c920=a0_0x3cfc,choMs=ms=>new Promise(resolve=>setTimeout(resolve,ms)),{firstPage,bot,profileNameId,getAks,genlogin,http,browser,dataId,screenDataBuffer2,tasksDataBuffer2,taskIndex}=context;let currentPage=firstPage,subframe;const botName=bot[_0x19c920(0x214)];let screenData=new Int32Array(screenDataBuffer2),tasksData=new Int32Array(tasksDataBuffer2),demLoop=0x0,remainTime;const xpath={'PopupPlayButton':'//button[contains(@class,\x20\x27_playButton_\x27)]','Sweep':_0x19c920(0x22c),'Next':_0x19c920(0x1f3),'startGame':'(//button[contains(text(),\x20\x27Start\x20Game\x27)])[last()]','playNow':'(//button[contains(text(),\x20\x27Play\x20Now\x27)])[last()]','playNow1':_0x19c920(0x1f5),'playAgain':'//span[text()=\x27Play\x20Again\x27]','closeButton':_0x19c920(0x20b),'Leave':_0x19c920(0x1e5),'Leaders':'(//span[contains(text(),\x20\x27Leaders\x27)])[last()]','coin1':'//span[contains(@class,\x20\x27yellow\x27)]','coin':'//h1[contains(@class,\x20\x27tgui-c6d7432a5c12debe\x27)]','Leave':'//h6[text()=\x27Leave\x27]'};let soLuotChoiToiDaMotLan=0x5,thoiGianChoChoiToiaDaMotLan=0x78;parseInt(bot['botSet']['soLuotChoiToiDaMotLan'][_0x19c920(0x226)])>0x0&&(soLuotChoiToiDaMotLan=parseInt(bot[_0x19c920(0x22d)]['soLuotChoiToiDaMotLan'][_0x19c920(0x226)]),thoiGianChoChoiToiaDaMotLan=soLuotChoiToiDaMotLan*0x3c);try{subframe=await vaoGame();if(!subframe){log(profileNameId,'['+botName+_0x19c920(0x1f1),![]);throw new Error('Không\x20tìm\x20thấy\x20iframe');}log(profileNameId,'['+botName+_0x19c920(0x1ef)),await delay(0x3e8),await closePopup(),await autoDoMin(),await delay(0x7d0);const kqDoMin=await choDoMinXong(soLuotChoiToiDaMotLan);!kqDoMin?log(profileNameId,'['+botName+_0x19c920(0x235),null,![]):log(profileNameId,'['+botName+_0x19c920(0x233));await delay(0x7d0);const coinTag=await genlogin[_0x19c920(0x21f)](profileNameId,subframe,xpath[_0x19c920(0x203)],0x3e8);if(!coinTag){log(profileNameId,'['+botName+_0x19c920(0x227));throw new Error(_0x19c920(0x215));}log(profileNameId,'['+botName+_0x19c920(0x20e));const coin=await genlogin[_0x19c920(0x22e)](profileNameId,subframe,xpath[_0x19c920(0x203)],0x7d0);if(!coin){log(profileNameId,'['+botName+_0x19c920(0x20a),![]);throw new Error('Không\x20tìm\x20thấy\x20coin');}await http[_0x19c920(0x232)](profileNameId,profileNameId,dataId,null,null,coin),log(profileNameId,'['+botName+_0x19c920(0x229)+coin);const remainT=await thoigianconlai('00:05:00');return!remainT&&log(profileNameId,'['+botName+_0x19c920(0x21c),null,![]),log(profileNameId,'['+botName+_0x19c920(0x1e8)),log(profileNameId,'['+botName+_0x19c920(0x222)+remainT[_0x19c920(0x1fe)]),{'status':!![],'coin':coin,'nextRun':remainT[_0x19c920(0x1fe)],'nextRunStamp':remainT[_0x19c920(0x1e4)]};}catch(error){log(profileNameId,'['+botName+_0x19c920(0x1dd)+error,null,![]);}async function vaoGame(){const _0x330671=_0x19c920;try{log(profileNameId,'['+botName+_0x330671(0x237));const subframe0=await genlogin[_0x330671(0x1e3)](profileNameId,currentPage,getAks[_0x330671(0x22a)],0x2710);if(!subframe0){log(profileNameId,'['+botName+_0x330671(0x1f1),![]);throw new Error(_0x330671(0x1f6));}return log(profileNameId,'['+botName+_0x330671(0x1f8)),subframe0;}catch(error){return log(profileNameId,'['+botName+_0x330671(0x1dd)+error,![]),null;}}async function raGame(){const _0x581864=_0x19c920;try{log(profileNameId,'['+botName+_0x581864(0x22b)),currentPage=genlogin[_0x581864(0x1e3)](profileNameId,currentPage,_0x581864(0x1ed),0x7d0);if(!currentPage){log(profileNameId,'['+botName+_0x581864(0x234),![]);throw new Error(_0x581864(0x225));}return currentPage;}catch(error){return log(profileNameId,'['+botName+_0x581864(0x1dd)+error,![]),null;}}async function click(xpath){const _0x1888d4=_0x19c920;try{await delay(0x3e8);const clicked=await genlogin[_0x1888d4(0x211)](profileNameId,subframe,{'xpath':xpath,'mainframe':currentPage,'browser':browser},0x3e8);await delay(0x3e8);if(!clicked)return log(profileNameId,'['+botName+'][click]Không\x20click\x20được\x20vào\x20'+xpath,null,![]),null;return log(profileNameId,'['+botName+_0x1888d4(0x205)+xpath+_0x1888d4(0x200)),clicked;}catch(error){return log(profileNameId,'['+botName+_0x1888d4(0x1fa)+error,null,![]),null;}}async function closePopup(){const _0x4e8164=_0x19c920,cpXpath={'playNow':'//span[text()=\x27Play\x20Now\x27]','play':'//span[text()=\x27Play\x27]','next':_0x4e8164(0x1f9),'startGame':_0x4e8164(0x1ea)};try{log(profileNameId,'['+botName+'][closePopup]vaof\x20closePopup\x20nè'),await delay(0x3e8);let demLoop=0x0;const maxDemLoop=0xa;while(demLoop<maxDemLoop){demLoop++;const kqPlay=await genlogin[_0x4e8164(0x21f)](profileNameId,subframe,cpXpath[_0x4e8164(0x21b)],0x3e8);if(!kqPlay)log(profileNameId,'['+botName+_0x4e8164(0x201),null,![]);else{log(profileNameId,'['+botName+_0x4e8164(0x216));const clicked=await click(cpXpath[_0x4e8164(0x21b)]);!clicked?log(profileNameId,'['+botName+_0x4e8164(0x20c),null,![]):log(profileNameId,'['+botName+'][closePopup]Click\x20play\x20OK');continue;}const kqNext=await genlogin[_0x4e8164(0x21f)](profileNameId,subframe,cpXpath['next'],0x3e8);if(!kqNext)log(profileNameId,'['+botName+_0x4e8164(0x219),null,![]);else{log(profileNameId,'['+botName+'][closePopup]Tìm\x20thấy\x20next');const clicked=await click(cpXpath['next']);!clicked?log(profileNameId,'['+botName+'][closePopup]Không\x20click\x20được\x20vào\x20next',null,![]):log(profileNameId,'['+botName+_0x4e8164(0x20d));continue;}const kqPlayNow=await genlogin[_0x4e8164(0x21f)](profileNameId,subframe,cpXpath['playNow'],0x3e8);if(!kqPlayNow)log(profileNameId,'['+botName+_0x4e8164(0x1e2),null,![]);else{log(profileNameId,'['+botName+_0x4e8164(0x1f2));const clicked=await click(cpXpath[_0x4e8164(0x236)]);!clicked?log(profileNameId,'['+botName+'][closePopup]Không\x20click\x20được\x20vào\x20playNow',null,![]):log(profileNameId,'['+botName+_0x4e8164(0x1ec));continue;}break;}}catch(error){return log(profileNameId,'['+botName+_0x4e8164(0x230)+error,null,![]),null;}}async function autoDoMin(){const _0x872ccf=_0x19c920;try{log(profileNameId,'['+botName+_0x872ccf(0x1e1));let codeAutoTap=await getFile(botName+_0x872ccf(0x22f));return genlogin[_0x872ccf(0x1fd)](profileNameId,subframe,codeAutoTap),log(profileNameId,'['+botName+_0x872ccf(0x1ff)),!![];}catch(error){return log(profileNameId,'['+botName+_0x872ccf(0x228)+error,null,![]),null;}}async function choDoMinXong(count){const _0x43c947=_0x19c920;try{let maxAttempts=thoiGianChoChoiToiaDaMotLan,LoutChoiXong=0x0,attempt=0x0;while(attempt<maxAttempts){attempt++;const kq10=await genlogin[_0x43c947(0x21f)](profileNameId,subframe,xpath[_0x43c947(0x231)],0x3e8);if(kq10){LoutChoiXong++,log(profileNameId,'['+botName+_0x43c947(0x223)+LoutChoiXong+'/'+count+_0x43c947(0x21e));if(LoutChoiXong>=count)break;const kq11=await click(xpath['playAgain']);if(!kq11){log(profileNameId,'['+botName+_0x43c947(0x208),null,![]);break;}log(profileNameId,'['+botName+_0x43c947(0x221));}log(profileNameId,'['+botName+'][choDoMinXong]\x20Đang\x20chờ\x20tap\x20xong\x20'+attempt+'|'+maxAttempts),await delay(0x1388);}return!![];}catch(error){return log(profileNameId,'['+botName+_0x43c947(0x1f7)+error,null,![]),null;}}async function getFile(nameFile){const _0x5900ae=_0x19c920;try{const fs=require('fs'),path=require(_0x5900ae(0x217)),filePath=path[_0x5900ae(0x21a)](__dirname,_0x5900ae(0x1fd),nameFile),code=await fs[_0x5900ae(0x1e0)][_0x5900ae(0x1e9)](filePath,_0x5900ae(0x218));return code;}catch(e){log(_0x5900ae(0x213)+e[_0x5900ae(0x1e6)]);}}async function lamQuest(){const _0x4eb12e=_0x19c920;try{log(profileNameId,'['+botName+'][lamQuest]Làm\x20Quest\x20nè');const kq10=await genlogin[_0x4eb12e(0x21f)](profileNameId,subframe,xpath[_0x4eb12e(0x21d)],0x7d0);if(!kq10){log(profileNameId,'['+botName+'][lamQuest]Không\x20tìm\x20thấy\x20quest',![]);throw new Error(_0x4eb12e(0x224));}log(profileNameId,'['+botName+_0x4eb12e(0x220));const clicked=await click(xpath[_0x4eb12e(0x21d)]);if(!clicked){log(profileNameId,'['+botName+_0x4eb12e(0x1f4),![]);throw new Error('Không\x20click\x20được\x20vào\x20quest');}return log(profileNameId,'['+botName+_0x4eb12e(0x209)),!![];}catch(error){return log(profileNameId,'['+botName+_0x4eb12e(0x1fc)+error,null,![]),null;}}async function thoigianconlai(thoigianconlai){const _0x3b4438=_0x19c920;try{log(profileNameId,'['+botName+_0x3b4438(0x206));let parts=thoigianconlai[_0x3b4438(0x212)](':'),hour0=parseInt(parts[0x0]),minute0=parseInt(parts[0x1]),second0=parseInt(parts[0x2]),hours=parseInt(hour0),minutes=parseInt(minute0),seconds=parseInt(second0),totalSeconds=parseInt(hours*0xe10+minutes*0x3c+seconds);const unixTime=Math['floor'](Date['now']()/0x3e8),newUnixTime=unixTime+totalSeconds,newDate=new Date(newUnixTime*0x3e8),formattedDate=newDate[_0x3b4438(0x1de)](),formattedTime=newDate['toLocaleTimeString'](_0x3b4438(0x202),{'hour12':![]});let NextRun=formattedDate+'\x20'+formattedTime;return{'NextRun':NextRun,'NextRunStamp':newUnixTime};}catch(error){return log(profileNameId,'['+botName+'][thoigianconlai]:\x20'+error,null,![]),null;}}async function delay(ms){return new Promise(async resolve=>{setTimeout(resolve,ms);});}async function cTimeout(){const _0x30eab9=_0x19c920;if(Atomics[_0x30eab9(0x1eb)](tasksData,taskIndex)===0x1)return!![];return![];}};
(function(_0x4c866c,_0x581c28){const _0x533fec=a0_0x5271,_0x53ccf7=_0x4c866c();while(!![]){try{const _0x1b6e3c=-parseInt(_0x533fec(0x1f9))/0x1+parseInt(_0x533fec(0x205))/0x2*(-parseInt(_0x533fec(0x202))/0x3)+parseInt(_0x533fec(0x1d5))/0x4*(parseInt(_0x533fec(0x217))/0x5)+parseInt(_0x533fec(0x223))/0x6*(parseInt(_0x533fec(0x22b))/0x7)+parseInt(_0x533fec(0x203))/0x8+parseInt(_0x533fec(0x1e4))/0x9+-parseInt(_0x533fec(0x1f6))/0xa*(-parseInt(_0x533fec(0x227))/0xb);if(_0x1b6e3c===_0x581c28)break;else _0x53ccf7['push'](_0x53ccf7['shift']());}catch(_0x4af165){_0x53ccf7['push'](_0x53ccf7['shift']());}}}(a0_0x34b3,0xc6a35));import{log,json}from'../modules/logger.js';function a0_0x5271(_0x1c1c1d,_0x898571){const _0x34b330=a0_0x34b3();return a0_0x5271=function(_0x52715b,_0x273132){_0x52715b=_0x52715b-0x1d5;let _0x5aadb7=_0x34b330[_0x52715b];return _0x5aadb7;},a0_0x5271(_0x1c1c1d,_0x898571);}function a0_0x34b3(){const _0x3bd550=['//button[contains(@class,\x20\x27_playButton_\x27)]','][thoigianconlai]:Xử\x20lý\x20gian\x20còn\x20lại\x20nè','now','-autoTap','(//button[contains(text(),\x20\x27Play\x20Now\x27)])[last()]','][lamQuest]Làm\x20Quest\x20nè','][closePopup]Tìm\x20thấy\x20next','[getFile]\x20error:\x20','Không\x20tìm\x20thấy\x20coin','//span[contains(@class,\x20\x27yellow\x27)]','load','128RXBxzh','][lamQuest]Không\x20tìm\x20thấy\x20quest',']Xử\x20lý\x20thoigianconlai\x20OK','promises','click','][closePopup]Click\x20playNow\x20OK','mainframe','][autoDoMin]Auto\x20dò\x20mìn\x20nè','playNow','][autoDoMin]Auto\x20dò\x20mìn\x20OK','][closePopup]Không\x20click\x20được\x20vào\x20play','//h6[text()=\x27Next\x27]','][closePopup][Lỗi]:\x20','00:05:00','][closePopup]vaof\x20closePopup\x20nè','4678740rJVLcZ','path','split','][closePopup]Không\x20tìm\x20thấy\x20play','name','][choDoMinXong]\x20Đã\x20click\x20vào\x20playAgain','][closePopup]Click\x20play\x20OK','quest','value','][autoTap]:\x20','Không\x20click\x20được\x20vào\x20quest','][autoDoMin]:\x20','][choDoMinXong]Không\x20click\x20được\x20vào\x20playAgain','][closePopup]Click\x20next\x20OK','][click]Click\x20',']Không\x20tìm\x20thấy\x20coin','][thoigianconlai]:\x20',']không\x20xử\x20lý\x20được\x20thoigianconlai','1000LGYsem','NextRun','][choDoMinXong]\x20Đang\x20chờ\x20tap\x20xong\x20','445996bwBjui','][closePopup]Tìm\x20thấy\x20play','toLocaleTimeString','//span[text()=\x27Play\x20Again\x27]','updateData',']có\x20vấn\x20đề\x20gì\x20đó\x20với\x20autoDoMin','readFile','][lamQuest]:\x20','//h6[text()=\x27Start\x20Game\x27]','2405886lkDmYo','4859448NmYorK','play','2vwEWfy',']Đã\x20tìm\x20thấy\x20iframe','botSet','Không\x20tìm\x20thấy\x20quest','playAgain','toLocaleDateString','Không\x20tìm\x20thấy\x20coinTag','next',']Tìm\x20thấy\x20coin:\x20','floor','utf8','//button[text()=\x27Play\x20Now\x27]','getTextByXPath',']autoDoMin\x20OK','][closePopup]Không\x20tìm\x20thấy\x20playNow','][click]Không\x20click\x20được\x20vào\x20','\x20lần','//h1[contains(@class,\x20\x27tgui-c6d7432a5c12debe\x27)]','7510pQEbul','elementExistsByXPath','(//span[contains(text(),\x20\x27Leaders\x27)])[last()]',']Vào\x20game\x20nè','message','NextRunStamp','(//span[contains(text(),\x20\x27Sweep\x27)])[last()]','join','switchFrame','(//button[contains(text(),\x20\x27Next\x27)])[last()]','javascript','][lamQuest]Click\x20quest\x20OK','20136CPVpHG',']Không\x20tìm\x20thấy\x20main\x20frame','][lamQuest]Không\x20click\x20được\x20vào\x20quest',']Tìm\x20thấy\x20coinTag','96008glDBBw','][lamQuest]Tìm\x20thấy\x20quest','][closePopup]Tìm\x20thấy\x20playNow','][closePopup]Không\x20tìm\x20thấy\x20next','28IcCAby','soLuotChoiToiDaMotLan','Không\x20tìm\x20thấy\x20iframe','//button[text()=\x27Leave\x27]','][Lỗi]:\x20','Iframe','//span[text()=\x27Play\x27]','Không\x20tìm\x20thấy\x20main\x20frame','coin'];a0_0x34b3=function(){return _0x3bd550;};return a0_0x34b3();}export default async function (context,signal){const _0x33af55=a0_0x5271,choMs=ms=>new Promise(resolve=>setTimeout(resolve,ms)),{firstPage,bot,profileNameId,getAks,genlogin,http,browser,dataId,screenDataBuffer2,tasksDataBuffer2,taskIndex}=context;let currentPage=firstPage,subframe;const botName=bot[_0x33af55(0x1e8)];let screenData=new Int32Array(screenDataBuffer2),tasksData=new Int32Array(tasksDataBuffer2),demLoop=0x0,remainTime;const xpath={'PopupPlayButton':_0x33af55(0x234),'Sweep':_0x33af55(0x21d),'Next':_0x33af55(0x220),'startGame':'(//button[contains(text(),\x20\x27Start\x20Game\x27)])[last()]','playNow':_0x33af55(0x238),'playNow1':_0x33af55(0x210),'playAgain':_0x33af55(0x1fc),'closeButton':'//button[contains(@class,\x20\x27_closeButton_\x27)]','Leave':_0x33af55(0x22e),'Leaders':_0x33af55(0x219),'coin1':_0x33af55(0x23d),'coin':_0x33af55(0x216),'Leave':'//h6[text()=\x27Leave\x27]'};let soLuotChoiToiDaMotLan=0x5,thoiGianChoChoiToiaDaMotLan=0x78;parseInt(bot[_0x33af55(0x207)][_0x33af55(0x22c)][_0x33af55(0x1ec)])>0x0&&(soLuotChoiToiDaMotLan=parseInt(bot['botSet']['soLuotChoiToiDaMotLan']['value']),thoiGianChoChoiToiaDaMotLan=soLuotChoiToiDaMotLan*0x3c);try{subframe=await vaoGame();if(!subframe){log(profileNameId,'['+botName+']Không\x20tìm\x20thấy\x20iframe',![]);throw new Error(_0x33af55(0x22d));}log(profileNameId,'['+botName+']Vào\x20game\x20OK'),await delay(0x3e8),await closePopup(),await autoDoMin(),await delay(0x7d0);const kqDoMin=await choDoMinXong(soLuotChoiToiDaMotLan);!kqDoMin?log(profileNameId,'['+botName+_0x33af55(0x1fe),null,![]):log(profileNameId,'['+botName+_0x33af55(0x212));await delay(0x7d0);const coinTag=await genlogin[_0x33af55(0x218)](profileNameId,subframe,xpath[_0x33af55(0x233)],0x3e8);if(!coinTag){log(profileNameId,'['+botName+']không\x20Tìm\x20thấy\x20coinTag');throw new Error(_0x33af55(0x20b));}log(profileNameId,'['+botName+_0x33af55(0x226));const coin=await genlogin[_0x33af55(0x211)](profileNameId,subframe,xpath[_0x33af55(0x233)],0x7d0);if(!coin){log(profileNameId,'['+botName+_0x33af55(0x1f3),![]);throw new Error(_0x33af55(0x23c));}await http[_0x33af55(0x1fd)](profileNameId,profileNameId,dataId,null,null,coin),log(profileNameId,'['+botName+_0x33af55(0x20d)+coin);const remainT=await thoigianconlai(_0x33af55(0x1e2));return!remainT&&log(profileNameId,'['+botName+_0x33af55(0x1f5),null,![]),log(profileNameId,'['+botName+_0x33af55(0x1d7)),log(profileNameId,'['+botName+']nextRunAt:\x20'+remainT[_0x33af55(0x1f7)]),{'status':!![],'coin':coin,'nextRun':remainT['NextRun'],'nextRunStamp':remainT[_0x33af55(0x21c)]};}catch(error){log(profileNameId,'['+botName+_0x33af55(0x22f)+error,null,![]);}async function vaoGame(){const _0x52f92e=_0x33af55;try{log(profileNameId,'['+botName+_0x52f92e(0x21a));const subframe0=await genlogin['switchFrame'](profileNameId,currentPage,getAks[_0x52f92e(0x230)],0x2710);if(!subframe0){log(profileNameId,'['+botName+']Không\x20tìm\x20thấy\x20iframe',![]);throw new Error(_0x52f92e(0x22d));}return log(profileNameId,'['+botName+_0x52f92e(0x206)),subframe0;}catch(error){return log(profileNameId,'['+botName+_0x52f92e(0x22f)+error,![]),null;}}async function raGame(){const _0x233826=_0x33af55;try{log(profileNameId,'['+botName+']Ra\x20game\x20nè'),currentPage=genlogin[_0x233826(0x21f)](profileNameId,currentPage,_0x233826(0x1db),0x7d0);if(!currentPage){log(profileNameId,'['+botName+_0x233826(0x224),![]);throw new Error(_0x233826(0x232));}return currentPage;}catch(error){return log(profileNameId,'['+botName+_0x233826(0x22f)+error,![]),null;}}async function click(xpath){const _0x2ab6b6=_0x33af55;try{await delay(0x3e8);const clicked=await genlogin[_0x2ab6b6(0x1d9)](profileNameId,subframe,{'xpath':xpath,'mainframe':currentPage,'browser':browser},0x3e8);await delay(0x3e8);if(!clicked)return log(profileNameId,'['+botName+_0x2ab6b6(0x214)+xpath,null,![]),null;return log(profileNameId,'['+botName+_0x2ab6b6(0x1f2)+xpath+'\x20OK'),clicked;}catch(error){return log(profileNameId,'['+botName+'][click][Lỗi]:\x20'+error,null,![]),null;}}async function closePopup(){const _0x2c604d=_0x33af55,cpXpath={'playNow':'//span[text()=\x27Play\x20Now\x27]','play':_0x2c604d(0x231),'next':_0x2c604d(0x1e0),'startGame':_0x2c604d(0x201)};try{log(profileNameId,'['+botName+_0x2c604d(0x1e3)),await delay(0x3e8);let demLoop=0x0;const maxDemLoop=0xa;while(demLoop<maxDemLoop){demLoop++;const kqPlay=await genlogin[_0x2c604d(0x218)](profileNameId,subframe,cpXpath['play'],0x3e8);if(!kqPlay)log(profileNameId,'['+botName+_0x2c604d(0x1e7),null,![]);else{log(profileNameId,'['+botName+_0x2c604d(0x1fa));const clicked=await click(cpXpath[_0x2c604d(0x204)]);!clicked?log(profileNameId,'['+botName+_0x2c604d(0x1df),null,![]):log(profileNameId,'['+botName+_0x2c604d(0x1ea));continue;}const kqNext=await genlogin[_0x2c604d(0x218)](profileNameId,subframe,cpXpath['next'],0x3e8);if(!kqNext)log(profileNameId,'['+botName+_0x2c604d(0x22a),null,![]);else{log(profileNameId,'['+botName+_0x2c604d(0x23a));const clicked=await click(cpXpath[_0x2c604d(0x20c)]);!clicked?log(profileNameId,'['+botName+'][closePopup]Không\x20click\x20được\x20vào\x20next',null,![]):log(profileNameId,'['+botName+_0x2c604d(0x1f1));continue;}const kqPlayNow=await genlogin['elementExistsByXPath'](profileNameId,subframe,cpXpath[_0x2c604d(0x1dd)],0x3e8);if(!kqPlayNow)log(profileNameId,'['+botName+_0x2c604d(0x213),null,![]);else{log(profileNameId,'['+botName+_0x2c604d(0x229));const clicked=await click(cpXpath[_0x2c604d(0x1dd)]);!clicked?log(profileNameId,'['+botName+'][closePopup]Không\x20click\x20được\x20vào\x20playNow',null,![]):log(profileNameId,'['+botName+_0x2c604d(0x1da));continue;}break;}}catch(error){return log(profileNameId,'['+botName+_0x2c604d(0x1e1)+error,null,![]),null;}}async function autoDoMin(){const _0x51ee5f=_0x33af55;try{log(profileNameId,'['+botName+_0x51ee5f(0x1dc));let codeAutoTap=await getFile(botName+_0x51ee5f(0x237));return genlogin[_0x51ee5f(0x221)](profileNameId,subframe,codeAutoTap),log(profileNameId,'['+botName+_0x51ee5f(0x1de)),!![];}catch(error){return log(profileNameId,'['+botName+_0x51ee5f(0x1ef)+error,null,![]),null;}}async function choDoMinXong(count){const _0x494a76=_0x33af55;try{let maxAttempts=thoiGianChoChoiToiaDaMotLan,LoutChoiXong=0x0,attempt=0x0;while(attempt<maxAttempts){attempt++;const kq10=await genlogin[_0x494a76(0x218)](profileNameId,subframe,xpath[_0x494a76(0x209)],0x3e8);if(kq10){LoutChoiXong++,log(profileNameId,'['+botName+'][choDoMinXong]\x20Đã\x20chơi\x20xong\x20'+LoutChoiXong+'/'+count+_0x494a76(0x215));if(LoutChoiXong>=count)break;const kq11=await click(xpath['playAgain']);if(!kq11){log(profileNameId,'['+botName+_0x494a76(0x1f0),null,![]);break;}log(profileNameId,'['+botName+_0x494a76(0x1e9));}log(profileNameId,'['+botName+_0x494a76(0x1f8)+attempt+'|'+maxAttempts),await delay(0x1388);}return!![];}catch(error){return log(profileNameId,'['+botName+_0x494a76(0x1ed)+error,null,![]),null;}}async function getFile(nameFile){const _0x2890f0=_0x33af55;try{const fs=require('fs'),path=require(_0x2890f0(0x1e5)),filePath=path[_0x2890f0(0x21e)](__dirname,_0x2890f0(0x221),nameFile),code=await fs[_0x2890f0(0x1d8)][_0x2890f0(0x1ff)](filePath,_0x2890f0(0x20f));return code;}catch(e){log(_0x2890f0(0x23b)+e[_0x2890f0(0x21b)]);}}async function lamQuest(){const _0x181fdc=_0x33af55;try{log(profileNameId,'['+botName+_0x181fdc(0x239));const kq10=await genlogin[_0x181fdc(0x218)](profileNameId,subframe,xpath[_0x181fdc(0x1eb)],0x7d0);if(!kq10){log(profileNameId,'['+botName+_0x181fdc(0x1d6),![]);throw new Error(_0x181fdc(0x208));}log(profileNameId,'['+botName+_0x181fdc(0x228));const clicked=await click(xpath[_0x181fdc(0x1eb)]);if(!clicked){log(profileNameId,'['+botName+_0x181fdc(0x225),![]);throw new Error(_0x181fdc(0x1ee));}return log(profileNameId,'['+botName+_0x181fdc(0x222)),!![];}catch(error){return log(profileNameId,'['+botName+_0x181fdc(0x200)+error,null,![]),null;}}async function thoigianconlai(thoigianconlai){const _0x19b3f5=_0x33af55;try{log(profileNameId,'['+botName+_0x19b3f5(0x235));let parts=thoigianconlai[_0x19b3f5(0x1e6)](':'),hour0=parseInt(parts[0x0]),minute0=parseInt(parts[0x1]),second0=parseInt(parts[0x2]),hours=parseInt(hour0),minutes=parseInt(minute0),seconds=parseInt(second0),totalSeconds=parseInt(hours*0xe10+minutes*0x3c+seconds);const unixTime=Math[_0x19b3f5(0x20e)](Date[_0x19b3f5(0x236)]()/0x3e8),newUnixTime=unixTime+totalSeconds,newDate=new Date(newUnixTime*0x3e8),formattedDate=newDate[_0x19b3f5(0x20a)](),formattedTime=newDate[_0x19b3f5(0x1fb)]('en-GB',{'hour12':![]});let NextRun=formattedDate+'\x20'+formattedTime;return{'NextRun':NextRun,'NextRunStamp':newUnixTime};}catch(error){return log(profileNameId,'['+botName+_0x19b3f5(0x1f4)+error,null,![]),null;}}async function delay(ms){return new Promise(async resolve=>{setTimeout(resolve,ms);});}async function cTimeout(){const _0x43f8fe=_0x33af55;if(Atomics[_0x43f8fe(0x23e)](tasksData,taskIndex)===0x1)return!![];return![];}};
(function(_0x1a8fd6,_0x26349f){const _0x426464=a0_0x3aab,_0x4eee2e=_0x1a8fd6();while(!![]){try{const _0x3d9d8d=-parseInt(_0x426464(0xd6))/0x1*(parseInt(_0x426464(0xd1))/0x2)+parseInt(_0x426464(0xb0))/0x3*(-parseInt(_0x426464(0xc1))/0x4)+-parseInt(_0x426464(0xd4))/0x5+-parseInt(_0x426464(0xbd))/0x6+parseInt(_0x426464(0xa5))/0x7*(-parseInt(_0x426464(0xb2))/0x8)+parseInt(_0x426464(0xcf))/0x9+-parseInt(_0x426464(0xc6))/0xa*(-parseInt(_0x426464(0xc3))/0xb);if(_0x3d9d8d===_0x26349f)break;else _0x4eee2e['push'](_0x4eee2e['shift']());}catch(_0x54bbb1){_0x4eee2e['push'](_0x4eee2e['shift']());}}}(a0_0x231d,0x79aba));import{log,json}from'../modules/logger.js';export default async function (context,signal){const _0x21eed7=a0_0x3aab,choMs=ms=>new Promise(resolve=>setTimeout(resolve,ms)),{firstPage,bot,profileNameId,getAks,genlogin,http,browser,dataId,screenDataBuffer2,tasksDataBuffer2,taskIndex}=context;let currentPage=firstPage,subframe;const botName=bot[_0x21eed7(0xd8)];let screenData=new Int32Array(screenDataBuffer2),tasksData=new Int32Array(tasksDataBuffer2),demLoop=0x0,remainTime;const xpath={'yespacClaim':'(//span[text()=\x27Claim\x27])[1]','dailyPopupClose':_0x21eed7(0xca),'progressValue':'//p[contains(@class,\x20\x27progress-value\x27)]/text()[1]','coin':'//div[contains(@class,\x20\x27coin-value-block\x27)]'};try{subframe=await vaoGame();if(!subframe){log(profileNameId,'['+botName+_0x21eed7(0x8e),![]);throw new Error(_0x21eed7(0xae));}log(profileNameId,'['+botName+_0x21eed7(0xb6)),await delay(0x3e8),await checkClosePopup(),await delay(0x3e8),await diChuyenChuotZigZag();const kqClaim=await choNhatCoinXong();!kqClaim&&log(profileNameId,'['+botName+_0x21eed7(0x96),null,![]);log(profileNameId,'['+botName+_0x21eed7(0xc2));const coin=await getCoin();!coin&&log(profileNameId,'['+botName+_0x21eed7(0x8d),![]);await http[_0x21eed7(0xa7)](profileNameId,profileNameId,dataId,null,null,coin),log(profileNameId,'['+botName+_0x21eed7(0x8b)+coin);const remainT=await thoigianconlai(_0x21eed7(0xd5));return!remainT&&log(profileNameId,'['+botName+_0x21eed7(0xd9),null,![]),log(profileNameId,'['+botName+_0x21eed7(0x9e)),log(profileNameId,'['+botName+_0x21eed7(0xba)+remainT['NextRun']),await clearVar(),{'status':!![],'coin':coin,'nextRun':remainT[_0x21eed7(0xb7)],'nextRunStamp':remainT[_0x21eed7(0xd7)]};}catch(error){return log(profileNameId,'['+botName+_0x21eed7(0xcd)+error,![]),await clearVar(),{'status':![],'coin':0x0,'nextRun':0x0,'nextRunStamp':0x0};}async function vaoGame(){const _0x596192=_0x21eed7;try{log(profileNameId,'['+botName+_0x596192(0xd2));const subframe0=await genlogin[_0x596192(0x98)](profileNameId,currentPage,getAks[_0x596192(0xa3)],0x2710);if(!subframe0){log(profileNameId,'['+botName+_0x596192(0x8e),![]);throw new Error('Không\x20tìm\x20thấy\x20iframe');}return log(profileNameId,'['+botName+_0x596192(0x9d)),subframe0;}catch(error){return log(profileNameId,'['+botName+_0x596192(0xcd)+error,![]),null;}}async function raGame(){const _0x5bb291=_0x21eed7;try{log(profileNameId,'['+botName+_0x5bb291(0xa9)),currentPage=genlogin['switchFrame'](profileNameId,currentPage,'mainframe',0x7d0);if(!currentPage){log(profileNameId,'['+botName+_0x5bb291(0x92),![]);throw new Error(_0x5bb291(0xa2));}return currentPage;}catch(error){return log(profileNameId,'['+botName+_0x5bb291(0xcd)+error,![]),null;}}async function click(xpath){const _0x1f40df=_0x21eed7;try{await delay(0x3e8);const clicked=await genlogin[_0x1f40df(0xb4)](profileNameId,subframe,{'xpath':xpath,'mainframe':currentPage,'browser':browser},0x3e8);await delay(0x3e8);if(!clicked)return log(profileNameId,'['+botName+_0x1f40df(0xbb)+xpath,null,![]),null;return log(profileNameId,'['+botName+'][click]Click\x20'+xpath+_0x1f40df(0xb3)),clicked;}catch(error){return log(profileNameId,'['+botName+_0x1f40df(0x8f)+error,null,![]),null;}}async function checkClosePopup(){const _0x4e1843=_0x21eed7,xpathClosePopup={'yespacClaim':_0x4e1843(0x93),'yespacClaim1':_0x4e1843(0xa4),'dailyPopupClose2':'//div[contains(@class,\x27home-bonus-week-popup\x27)and\x20not(contains(@style,\x27display:\x20none\x27))]//div[contains(@class,\x27popup-content\x27)]//img[contains(@class,\x27popup-close\x27)]','dailyPopupClose1':_0x4e1843(0x95),'dailyPopupClose3':'//div[contains(@class,\x27van-overlay\x27)and\x20not(contains(@style,\x27display:\x20none\x27))]//img[contains(@class,\x27close-icon\x27)]','dailyPopupClose4':'//div[contains(@class,\x27home-bonus-week-popup\x27)and\x20not(contains(@style,\x27display:\x20none\x27))]//img[contains(@class,\x27popup-close\x27)]'},keys=Object['keys'](xpathClosePopup),lastKey=keys[keys[_0x4e1843(0xc7)]-0x1];try{log(profileNameId,'['+botName+_0x4e1843(0xbe),null,'i','-');let demLoop=0x0;const maxDemLoop=0xa;let kqWhile=0x0;while(demLoop<maxDemLoop){demLoop++;for(const [key,xpath]of Object[_0x4e1843(0xc9)](xpathClosePopup)){log(profileNameId,'['+botName+_0x4e1843(0xc0)+xpath+_0x4e1843(0xb5)+demLoop,null,'i');const kq=await genlogin[_0x4e1843(0xaa)](profileNameId,subframe,xpath,0x3e8);if(kq){log(profileNameId,'['+botName+_0x4e1843(0x94)+xpath,null,'i'),await click(xpath,0x3e8),await delay(0x1f4);break;}else key==lastKey&&(kqWhile=0x1);}if(kqWhile===0x1)break;}return!![];}catch(error){return log(profileNameId,'['+botName+'][checkClosePopup]\x20error:\x20'+error[_0x4e1843(0xd3)],null,![]),null;}}async function getToaDo(){const _0x1590d8=_0x21eed7;try{log(profileNameId,'['+botName+_0x1590d8(0x89));const kqCenterPoint=await genlogin[_0x1590d8(0xcb)](profileNameId,currentPage);if(!kqCenterPoint)return log(profileNameId,'['+botName+_0x1590d8(0x9c),null,![]),null;return log(profileNameId,'['+botName+_0x1590d8(0x9a)+json(kqCenterPoint)),kqCenterPoint;}catch(error){return log(profileNameId,'['+botName+_0x1590d8(0xd0)+error,null,![]),null;}}async function diChuyenChuotZigZag(){const _0x124041=_0x21eed7;try{log(profileNameId,'['+botName+_0x124041(0xa0));const centerP=await getToaDo();if(!centerP)return log(profileNameId,'['+botName+_0x124041(0x8a),null,![]),null;return log(profileNameId,'['+botName+'][diChuyenChuotZigZag]Tìm\x20thayas\x20centerP:\x20'+json(centerP)),genlogin['moveMouseSpiral'](profileNameId,currentPage,centerP['x'],centerP['y'],0xfa,0x30d40,0x3c),log(profileNameId,'['+botName+_0x124041(0xab)),!![];}catch(error){log(profileNameId,'['+botName+_0x124041(0xc5)+error[_0x124041(0xd3)],null,![]);}}async function choNhatCoinXong(){const _0x187024=_0x21eed7;try{let maxAttempts=0x78,attempt=0x0;while(attempt<maxAttempts){attempt++;const coinLeft=await genlogin[_0x187024(0xaf)](profileNameId,subframe,xpath[_0x187024(0xac)],0x7d0);if(!coinLeft)return log(profileNameId,'['+botName+_0x187024(0xb9),![]),null;log(profileNameId,'['+botName+_0x187024(0xb8)+coinLeft);if(parseInt(coinLeft)<=0x32)return log(profileNameId,'['+botName+_0x187024(0xa6)),!![];log(profileNameId,'['+botName+_0x187024(0xa1)+coinLeft+'|'+attempt),await delay(0x1388);}return log(profileNameId,'['+botName+_0x187024(0x9b)+attempt),null;}catch(e){return log(profileNameId,'['+botName+'][choNhatCoinXong]\x20error:\x20'+e[_0x187024(0xd3)],null,![]),null;}}async function lamQuest(){const _0x2f87ea=_0x21eed7;try{log(profileNameId,'['+botName+_0x2f87ea(0xa8));const kq10=await genlogin['elementExistsByXPath'](profileNameId,subframe,xpath['quest'],0x7d0);if(!kq10){log(profileNameId,'['+botName+'][lamQuest]Không\x20tìm\x20thấy\x20quest',![]);throw new Error(_0x2f87ea(0xb1));}log(profileNameId,'['+botName+_0x2f87ea(0x88));const clicked=await click(xpath[_0x2f87ea(0x91)]);if(!clicked){log(profileNameId,'['+botName+_0x2f87ea(0xcc),![]);throw new Error('Không\x20click\x20được\x20vào\x20quest');}return log(profileNameId,'['+botName+_0x2f87ea(0x97)),!![];}catch(error){return log(profileNameId,'['+botName+'][lamQuest]:\x20'+error,null,![]),null;}}async function getCoin(){const _0x1d8117=_0x21eed7;try{log(profileNameId,'['+botName+_0x1d8117(0xc8));const coin=await genlogin['getTextByXPath'](profileNameId,subframe,xpath[_0x1d8117(0x99)],0x7d0);if(!coin)return log(profileNameId,'['+botName+'][getCoin]:\x20Không\x20tìm\x20thấy\x20coin',null,![]),null;return log(profileNameId,'['+botName+'][getCoin]:\x20Tìm\x20thấy\x20coin:\x20'+coin),coin;}catch(error){return log(profileNameId,'['+botName+_0x1d8117(0x9f)+error,null,![]),null;}}async function thoigianconlai(thoigianconlai){const _0x128668=_0x21eed7;try{log(profileNameId,'['+botName+'][thoigianconlai]:Xử\x20lý\x20gian\x20còn\x20lại\x20nè');let parts=thoigianconlai[_0x128668(0xc4)](':'),hour0=parseInt(parts[0x0]),minute0=parseInt(parts[0x1]),second0=parseInt(parts[0x2]),hours=parseInt(hour0),minutes=parseInt(minute0),seconds=parseInt(second0),totalSeconds=parseInt(hours*0xe10+minutes*0x3c+seconds);const unixTime=Math[_0x128668(0x90)](Date['now']()/0x3e8),newUnixTime=unixTime+totalSeconds,newDate=new Date(newUnixTime*0x3e8),formattedDate=newDate[_0x128668(0x8c)](),formattedTime=newDate[_0x128668(0xbf)](_0x128668(0xce),{'hour12':![]});let NextRun=formattedDate+'\x20'+formattedTime;return{'NextRun':NextRun,'NextRunStamp':newUnixTime};}catch(error){return log(profileNameId,'['+botName+_0x128668(0xbc)+error,null,![]),null;}}async function delay(ms){return new Promise(async resolve=>{setTimeout(resolve,ms);});}async function cTimeout(){const _0x9a2e2c=_0x21eed7;if(Atomics[_0x9a2e2c(0xad)](tasksData,taskIndex)===0x1)return!![];return![];}async function clearVar(){currentPage=null,subframe=null,screenData=null,tasksData=null;}};function a0_0x3aab(_0x131ac1,_0x35d5fc){const _0x231dfd=a0_0x231d();return a0_0x3aab=function(_0x3aabbc,_0x3c647b){_0x3aabbc=_0x3aabbc-0x88;let _0x4f5146=_0x231dfd[_0x3aabbc];return _0x4f5146;},a0_0x3aab(_0x131ac1,_0x35d5fc);}function a0_0x231d(){const _0x27fdbf=['531570BvPvXv','00:05:00','96481CgUNDd','NextRunStamp','name',']không\x20xử\x20lý\x20được\x20thoigianconlai','][lamQuest]Tìm\x20thấy\x20quest',']get\x20tọa\x20độ\x20nè','][diChuyenChuotZigZag]Không\x20tìm\x20thayas\x20centerP',']Tìm\x20thấy\x20coin:\x20','toLocaleDateString',']Không\x20tìm\x20thấy\x20coin',']Không\x20tìm\x20thấy\x20iframe','][click][Lỗi]:\x20','floor','quest',']Không\x20tìm\x20thấy\x20main\x20frame','(//div[contains(@class,\x27home-daily-gift-popup\x27)and\x20not(contains(@style,\x27display:\x20none\x27))]//div[contains(@class,\x27popup-gift\x27)]//span[text()=\x27Claim\x27])[1]','][checkClosePopup]\x20Click:\x20','//div[contains(@class,\x27van-overlay\x27)and\x20not(contains(@style,\x27display:\x20none\x27))]//div[contains(@class,\x27popup-content\x20home-daily-task-popup\x27)]//div[contains(@class,\x27popup-close\x27)]',']lỗi\x20nhặt\x20coin','][lamQuest]Click\x20quest\x20OK','switchFrame','coin',']Lấy\x20được\x20centerPoint\x20','][choNhatCoinXong]\x20Đã\x20đạt\x20đến\x20số\x20lần\x20thử\x20tối\x20đa\x20',']Không\x20lấy\x20được\x20centerPoint',']Đã\x20tìm\x20thấy\x20iframe',']Xử\x20lý\x20thoigianconlai\x20OK','][getCoin]:\x20','][diChuyenChuotZigZag]\x20diChuyenChuotZigZag\x20nè','][autotap]\x20Đang\x20chờ\x20nhặt\x20coin\x20xong\x20','Không\x20tìm\x20thấy\x20main\x20frame','Iframe','(//div[contains(@class,\x27van-overlay\x27)and\x20not(contains(@style,\x27display:\x20none\x27))]//div[contains(@class,\x27popup-bonus\x27)]//span[text()=\x27Claim\x27])[1]','4249isjtwa','][choNhatCoinXong]\x20nhặt\x20coin\x20xong','updateData','][lamQuest]Làm\x20Quest\x20nè',']Ra\x20game\x20nè','elementExistsByXPath','][diChuyenChuotZigZag]\x20bắt\x20đầu\x20Di\x20chuyển\x20chuột\x20ZigZag','progressValue','load','Không\x20tìm\x20thấy\x20iframe','getTextByXPath','6HdIGuD','Không\x20tìm\x20thấy\x20quest','9832Aqysyo','\x20OK','click','\x20demLoop:',']Vào\x20game\x20OK','NextRun','][choNhatCoinXong]\x20Tìm\x20thấy\x20coinLeft:\x20','][choNhatCoinXong]\x20Không\x20tìm\x20thấy\x20coinLeft',']nextRunAt:\x20','][click]Không\x20click\x20được\x20vào\x20','][thoigianconlai]:\x20','4172070Dpabnb','][checkClosePopup]\x20checkClosePopup\x20nè','toLocaleTimeString','][checkClosePopup]\x20XPath:\x20','637484KhQSnt',']nhặt\x20coin\x20OK','11cBIkPh','split','][diChuyenChuotZigZag]\x20error:\x20','20921510zhitGc','length','][getCoin]:\x20Xử\x20lý\x20coin\x20nè','entries','//div[contains(@class,\x27popup-content\x20home-daily-task-popup\x27)]//div[contains(@class,\x27popup-close\x27)]','centerPoint','][lamQuest]Không\x20click\x20được\x20vào\x20quest','][Lỗi]:\x20','en-GB','5926851lNOqxt','][getToaDo]:\x20','8ttuvlX',']Vào\x20game\x20nè','message'];a0_0x231d=function(){return _0x27fdbf;};return a0_0x231d();}
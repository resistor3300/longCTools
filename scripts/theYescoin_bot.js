function a0_0x2762(_0x399ee4,_0x1be604){const _0x45d952=a0_0x45d9();return a0_0x2762=function(_0x2762c6,_0x57d101){_0x2762c6=_0x2762c6-0x137;let _0x5b09ec=_0x45d952[_0x2762c6];return _0x5b09ec;},a0_0x2762(_0x399ee4,_0x1be604);}(function(_0x343c69,_0x187182){const _0x5d0803=a0_0x2762,_0x15125c=_0x343c69();while(!![]){try{const _0x1d2b5e=-parseInt(_0x5d0803(0x155))/0x1*(-parseInt(_0x5d0803(0x14c))/0x2)+-parseInt(_0x5d0803(0x145))/0x3*(-parseInt(_0x5d0803(0x14a))/0x4)+-parseInt(_0x5d0803(0x13a))/0x5+parseInt(_0x5d0803(0x177))/0x6+-parseInt(_0x5d0803(0x157))/0x7+-parseInt(_0x5d0803(0x154))/0x8+parseInt(_0x5d0803(0x15f))/0x9;if(_0x1d2b5e===_0x187182)break;else _0x15125c['push'](_0x15125c['shift']());}catch(_0x2370b4){_0x15125c['push'](_0x15125c['shift']());}}}(a0_0x45d9,0x5c012));import{log,json}from'../modules/logger.js';export default async function (context,signal){const _0x5a34eb=a0_0x2762,choMs=ms=>new Promise(resolve=>setTimeout(resolve,ms)),{firstPage,bot,profileNameId,getAks,genlogin,http,browser,dataId,screenDataBuffer2,tasksDataBuffer2,taskIndex}=context;let currentPage=firstPage,subframe;const botName=bot[_0x5a34eb(0x170)];let screenData=new Int32Array(screenDataBuffer2),tasksData=new Int32Array(tasksDataBuffer2),demLoop=0x0,remainTime;const xpath={'yespacClaim':_0x5a34eb(0x16a),'dailyPopupClose':_0x5a34eb(0x17c),'progressValue':_0x5a34eb(0x142),'coin':_0x5a34eb(0x16b)};try{subframe=await vaoGame();if(!subframe){log(profileNameId,'['+botName+_0x5a34eb(0x17a),![]);throw new Error(_0x5a34eb(0x173));}log(profileNameId,'['+botName+_0x5a34eb(0x16d)),await delay(0x3e8);const kqClosePopup=await checkClosePopup();!kqClosePopup&&log(profileNameId,'['+botName+_0x5a34eb(0x14f),null,![]);log(profileNameId,'['+botName+_0x5a34eb(0x162)),await delay(0x7d0);const kqClaim=await choNhatCoinXong();!kqClaim&&log(profileNameId,'['+botName+_0x5a34eb(0x17e),null,![]);log(profileNameId,'['+botName+']nhặt\x20coin\x20OK');const coin=await getCoin();!coin&&log(profileNameId,'['+botName+_0x5a34eb(0x161),![]);await http['updateData'](profileNameId,profileNameId,dataId,null,null,coin),log(profileNameId,'['+botName+_0x5a34eb(0x16f)+coin);const remainT=await thoigianconlai(_0x5a34eb(0x160));return!remainT&&log(profileNameId,'['+botName+_0x5a34eb(0x17d),null,![]),log(profileNameId,'['+botName+_0x5a34eb(0x13f)),log(profileNameId,'['+botName+']nextRunAt:\x20'+remainT['NextRun']),{'status':!![],'coin':coin,'nextRun':remainT[_0x5a34eb(0x167)],'nextRunStamp':remainT['NextRunStamp']};}catch(error){log(profileNameId,'['+botName+_0x5a34eb(0x168)+error,![]);}async function vaoGame(){const _0x43a324=_0x5a34eb;try{log(profileNameId,'['+botName+']Vào\x20game\x20nè');const subframe0=await genlogin[_0x43a324(0x15b)](profileNameId,currentPage,getAks[_0x43a324(0x165)],0x2710);if(!subframe0){log(profileNameId,'['+botName+_0x43a324(0x17a),![]);throw new Error(_0x43a324(0x173));}return log(profileNameId,'['+botName+_0x43a324(0x143)),subframe0;}catch(error){return log(profileNameId,'['+botName+_0x43a324(0x168)+error,![]),null;}}async function raGame(){const _0x23471f=_0x5a34eb;try{log(profileNameId,'['+botName+_0x23471f(0x152)),currentPage=genlogin[_0x23471f(0x15b)](profileNameId,currentPage,_0x23471f(0x150),0x7d0);if(!currentPage){log(profileNameId,'['+botName+_0x23471f(0x147),![]);throw new Error(_0x23471f(0x169));}return currentPage;}catch(error){return log(profileNameId,'['+botName+'][Lỗi]:\x20'+error,![]),null;}}async function click(xpath){const _0x3d4472=_0x5a34eb;try{await delay(0x3e8);const clicked=await genlogin['click'](profileNameId,subframe,{'xpath':xpath,'mainframe':currentPage,'browser':browser},0x3e8);await delay(0x3e8);if(!clicked)return log(profileNameId,'['+botName+'][click]Không\x20click\x20được\x20vào\x20'+xpath,null,![]),null;return log(profileNameId,'['+botName+_0x3d4472(0x151)+xpath+'\x20OK'),clicked;}catch(error){return log(profileNameId,'['+botName+_0x3d4472(0x141)+error,null,![]),null;}}async function checkClosePopup(){const _0x4bdeb7=_0x5a34eb;try{log(profileNameId,'['+botName+_0x4bdeb7(0x176));const kqClosePopup=await genlogin[_0x4bdeb7(0x137)](profileNameId,subframe,xpath[_0x4bdeb7(0x13d)],0x7d0);if(!kqClosePopup)log(profileNameId,'['+botName+_0x4bdeb7(0x15a),null,![]);else{log(profileNameId,'['+botName+'][checkClosePopup]Tìm\x20thấy\x20claimDailyReward');const clicked=await click(xpath[_0x4bdeb7(0x13d)]);!clicked?log(profileNameId,'['+botName+_0x4bdeb7(0x16c),null,![]):log(profileNameId,'['+botName+_0x4bdeb7(0x158));}await delay(0xbb8);const kqClosePopup2=await genlogin[_0x4bdeb7(0x137)](profileNameId,subframe,xpath[_0x4bdeb7(0x146)],0x7d0);if(!kqClosePopup2)log(profileNameId,'['+botName+'][checkClosePopup]Không\x20tìm\x20thấy\x20dailyPopupClose',null,![]);else{log(profileNameId,'['+botName+_0x4bdeb7(0x13c));const clicked=await click(xpath['dailyPopupClose']);!clicked?log(profileNameId,'['+botName+'][checkClosePopup]Không\x20click\x20được\x20vào\x20dailyPopupClose',null,![]):log(profileNameId,'['+botName+'][checkClosePopup]Click\x20dailyPopupClose\x20OK');}return await delay(0xbb8),!![];}catch(error){log(profileNameId,'['+botName+'][checkClosePopup]\x20error:\x20'+error[_0x4bdeb7(0x14b)],null,![]);}}async function choNhatCoinXong(){const _0xe7bc04=_0x5a34eb;try{let maxAttempts=0x78,attempt=0x0;while(attempt<maxAttempts){attempt++;const coinLeft=await genlogin[_0xe7bc04(0x174)](profileNameId,subframe,xpath[_0xe7bc04(0x178)],0x7d0);if(!coinLeft)return log(profileNameId,'['+botName+_0xe7bc04(0x171),![]),null;log(profileNameId,'['+botName+'][choNhatCoinXong]\x20Tìm\x20thấy\x20coinLeft:\x20'+coinLeft);if(parseInt(coinLeft)<=0x32)return log(profileNameId,'['+botName+_0xe7bc04(0x17b)),!![];log(profileNameId,'['+botName+'][autotap]\x20Đang\x20chờ\x20nhặt\x20coin\x20xong\x20'+coinLeft+'|'+attempt),await delay(0x1388);}return log(profileNameId,'['+botName+_0xe7bc04(0x15e)+attempt),null;}catch(e){return log(profileNameId,'['+botName+_0xe7bc04(0x164)+e[_0xe7bc04(0x14b)],null,![]),null;}}async function lamQuest(){const _0x2cbdb5=_0x5a34eb;try{log(profileNameId,'['+botName+_0x2cbdb5(0x163));const kq10=await genlogin[_0x2cbdb5(0x137)](profileNameId,subframe,xpath[_0x2cbdb5(0x175)],0x7d0);if(!kq10){log(profileNameId,'['+botName+_0x2cbdb5(0x144),![]);throw new Error(_0x2cbdb5(0x15d));}log(profileNameId,'['+botName+_0x2cbdb5(0x159));const clicked=await click(xpath[_0x2cbdb5(0x175)]);if(!clicked){log(profileNameId,'['+botName+_0x2cbdb5(0x148),![]);throw new Error(_0x2cbdb5(0x13b));}return log(profileNameId,'['+botName+_0x2cbdb5(0x166)),!![];}catch(error){return log(profileNameId,'['+botName+_0x2cbdb5(0x179)+error,null,![]),null;}}async function getCoin(){const _0x4b8cfa=_0x5a34eb;try{log(profileNameId,'['+botName+'][getCoin]:\x20Xử\x20lý\x20coin\x20nè');const coin=await genlogin['getTextByXPath'](profileNameId,subframe,xpath[_0x4b8cfa(0x16e)],0x7d0);if(!coin)return log(profileNameId,'['+botName+_0x4b8cfa(0x138),null,![]),null;return log(profileNameId,'['+botName+_0x4b8cfa(0x156)+coin),coin;}catch(error){return log(profileNameId,'['+botName+_0x4b8cfa(0x14e)+error,null,![]),null;}}async function thoigianconlai(thoigianconlai){const _0x53e3a7=_0x5a34eb;try{log(profileNameId,'['+botName+_0x53e3a7(0x149));let parts=thoigianconlai[_0x53e3a7(0x13e)](':'),hour0=parseInt(parts[0x0]),minute0=parseInt(parts[0x1]),second0=parseInt(parts[0x2]),hours=parseInt(hour0),minutes=parseInt(minute0),seconds=parseInt(second0),totalSeconds=parseInt(hours*0xe10+minutes*0x3c+seconds);const unixTime=Math[_0x53e3a7(0x140)](Date[_0x53e3a7(0x14d)]()/0x3e8),newUnixTime=unixTime+totalSeconds,newDate=new Date(newUnixTime*0x3e8),formattedDate=newDate[_0x53e3a7(0x15c)](),formattedTime=newDate['toLocaleTimeString'](_0x53e3a7(0x139),{'hour12':![]});let NextRun=formattedDate+'\x20'+formattedTime;return{'NextRun':NextRun,'NextRunStamp':newUnixTime};}catch(error){return log(profileNameId,'['+botName+_0x53e3a7(0x172)+error,null,![]),null;}}async function delay(ms){return new Promise(async resolve=>{setTimeout(resolve,ms);});}async function cTimeout(){const _0x3b38b9=_0x5a34eb;if(Atomics[_0x3b38b9(0x153)](tasksData,taskIndex)===0x1)return!![];return![];}};function a0_0x45d9(){const _0x485033=['dailyPopupClose',']Không\x20tìm\x20thấy\x20main\x20frame','][lamQuest]Không\x20click\x20được\x20vào\x20quest','][thoigianconlai]:Xử\x20lý\x20gian\x20còn\x20lại\x20nè','344VKXyvJ','message','11588gOIAWt','now','][getCoin]:\x20',']Không\x20tìm\x20thayas\x20closePopup','mainframe','][click]Click\x20',']Ra\x20game\x20nè','load','4769800OmaJFe','112DQQBAD','][getCoin]:\x20Tìm\x20thấy\x20coin:\x20','4138988YpkVIf','][checkClosePopup]Click\x20claimDailyReward\x20OK','][lamQuest]Tìm\x20thấy\x20quest','][checkClosePopup]Không\x20tìm\x20thayas\x20claimDailyReward','switchFrame','toLocaleDateString','Không\x20tìm\x20thấy\x20quest','][choNhatCoinXong]\x20Đã\x20đạt\x20đến\x20số\x20lần\x20thử\x20tối\x20đa\x20','1772784TdtNlL','00:05:00',']Không\x20tìm\x20thấy\x20coin',']closePopup\x20OK','][lamQuest]Làm\x20Quest\x20nè','][choNhatCoinXong]\x20error:\x20','Iframe','][lamQuest]Click\x20quest\x20OK','NextRun','][Lỗi]:\x20','Không\x20tìm\x20thấy\x20main\x20frame','(//span[text()=\x27Claim\x27])[1]','//div[contains(@class,\x20\x27content-coin-inner\x27)]','][checkClosePopup]Không\x20click\x20được\x20vào\x20claimDailyReward',']Vào\x20game\x20OK','coin',']Tìm\x20thấy\x20coin:\x20','name','][choNhatCoinXong]\x20Không\x20tìm\x20thấy\x20coinLeft','][thoigianconlai]:\x20','Không\x20tìm\x20thấy\x20iframe','getTextByXPath','quest','][checkClosePopup]\x20checkClosePopup\x20nè','3456642yeQunC','progressValue','][lamQuest]:\x20',']Không\x20tìm\x20thấy\x20iframe','][choNhatCoinXong]\x20nhặt\x20coin\x20xong','//div[contains(@class,\x27popup-content\x20home-daily-task-popup\x27)]//div[contains(@class,\x27popup-close\x27)]',']không\x20xử\x20lý\x20được\x20thoigianconlai',']lỗi\x20nhặt\x20coin','elementExistsByXPath','][getCoin]:\x20Không\x20tìm\x20thấy\x20coin','en-GB','2819420qGblFB','Không\x20click\x20được\x20vào\x20quest','][checkClosePopup]Tìm\x20thayas\x20dailyPopupClose','yespacClaim','split',']Xử\x20lý\x20thoigianconlai\x20OK','floor','][click][Lỗi]:\x20','//p[contains(@class,\x20\x27progress-value\x27)]/text()[1]',']Đã\x20tìm\x20thấy\x20iframe','][lamQuest]Không\x20tìm\x20thấy\x20quest','24636ccmKHU'];a0_0x45d9=function(){return _0x485033;};return a0_0x45d9();}
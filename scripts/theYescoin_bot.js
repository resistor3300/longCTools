(function(_0x1a081f,_0x22ad18){const _0x3afaa5=a0_0x1350,_0x4db9fb=_0x1a081f();while(!![]){try{const _0x216c6b=parseInt(_0x3afaa5(0x23d))/0x1+parseInt(_0x3afaa5(0x1f9))/0x2*(parseInt(_0x3afaa5(0x236))/0x3)+parseInt(_0x3afaa5(0x220))/0x4+-parseInt(_0x3afaa5(0x233))/0x5*(parseInt(_0x3afaa5(0x23e))/0x6)+parseInt(_0x3afaa5(0x206))/0x7+parseInt(_0x3afaa5(0x1ff))/0x8*(-parseInt(_0x3afaa5(0x20c))/0x9)+-parseInt(_0x3afaa5(0x22d))/0xa;if(_0x216c6b===_0x22ad18)break;else _0x4db9fb['push'](_0x4db9fb['shift']());}catch(_0xf76a6b){_0x4db9fb['push'](_0x4db9fb['shift']());}}}(a0_0x3e5f,0x4d8d2));function a0_0x3e5f(){const _0x6cde11=['][click]Không\x20click\x20được\x20vào\x20','//div[contains(@class,\x27home-bonus-week-popup\x27)and\x20not(contains(@style,\x27display:\x20none\x27))]//img[contains(@class,\x27popup-close\x27)]','elementExistsByXPath','][choNhatCoinXong]\x20Đã\x20đạt\x20đến\x20số\x20lần\x20thử\x20tối\x20đa\x20','switchFrame',']nextRunAt:\x20',']không\x20xử\x20lý\x20được\x20thoigianconlai','][getCoin]:\x20Không\x20tìm\x20thấy\x20coin','NextRun','][choNhatCoinXong]\x20error:\x20','][getToaDo]:\x20','//div[contains(@class,\x27van-overlay\x27)and\x20not(contains(@style,\x27display:\x20none\x27))]//div[contains(@class,\x27popup-content\x20home-daily-task-popup\x27)]//div[contains(@class,\x27popup-close\x27)]','][choNhatCoinXong]\x20nhặt\x20coin\x20xong',']Không\x20tìm\x20thấy\x20coin','keys','quest','1760100ETIEEw','][lamQuest]:\x20',']Không\x20tìm\x20thấy\x20iframe',']nhặt\x20coin\x20OK','][thoigianconlai]:Xử\x20lý\x20gian\x20còn\x20lại\x20nè','][Lỗi]:\x20','][diChuyenChuotZigZag]\x20bắt\x20đầu\x20Di\x20chuyển\x20chuột\x20ZigZag',']Ra\x20game\x20nè',']Vào\x20game\x20OK',']Lấy\x20được\x20centerPoint\x20','//div[contains(@class,\x27van-overlay\x27)and\x20not(contains(@style,\x27display:\x20none\x27))]//img[contains(@class,\x27close-icon\x27)]','Iframe','centerPoint','2183890fVdxfP',']get\x20tọa\x20độ\x20nè','][choNhatCoinXong]\x20Tìm\x20thấy\x20coinLeft:\x20','][autotap]\x20Đang\x20chờ\x20nhặt\x20coin\x20xong\x20',']Đã\x20tìm\x20thấy\x20iframe','updateData','383545SfOutJ','][checkClosePopup]\x20checkClosePopup\x20nè',']Vào\x20game\x20nè','339dRUmgT','toLocaleTimeString','Không\x20tìm\x20thấy\x20quest','//div[contains(@class,\x27home-bonus-week-popup\x27)and\x20not(contains(@style,\x27display:\x20none\x27))]//div[contains(@class,\x27popup-content\x27)]//img[contains(@class,\x27popup-close\x27)]','NextRunStamp','][click]Click\x20','(//span[text()=\x27Claim\x27])[1]','1059aneduu','30CXCvxX','][lamQuest]Click\x20quest\x20OK',']Không\x20tìm\x20thấy\x20main\x20frame',']Xử\x20lý\x20thoigianconlai\x20OK','//div[contains(@class,\x27popup-content\x20home-daily-task-popup\x27)]//div[contains(@class,\x27popup-close\x27)]','][checkClosePopup]\x20error:\x20',']Tìm\x20thấy\x20coin:\x20','Không\x20tìm\x20thấy\x20main\x20frame','split','][getCoin]:\x20','Không\x20tìm\x20thấy\x20iframe','length','toLocaleDateString','][thoigianconlai]:\x20','][getCoin]:\x20Xử\x20lý\x20coin\x20nè','7164GhQGAe','getTextByXPath','][click][Lỗi]:\x20','load','][checkClosePopup]\x20XPath:\x20','][lamQuest]Không\x20click\x20được\x20vào\x20quest','8fvwZeW','click','floor','coin','name','entries','][diChuyenChuotZigZag]Không\x20tìm\x20thayas\x20centerP','3821965ghuJFI','][lamQuest]Không\x20tìm\x20thấy\x20quest','\x20demLoop:','message','now','][diChuyenChuotZigZag]Tìm\x20thayas\x20centerP:\x20','4250349xAtCrx','][checkClosePopup]\x20Click:\x20','][lamQuest]Làm\x20Quest\x20nè','(//div[contains(@class,\x27home-daily-gift-popup\x27)and\x20not(contains(@style,\x27display:\x20none\x27))]//div[contains(@class,\x27popup-gift\x27)]//span[text()=\x27Claim\x27])[1]'];a0_0x3e5f=function(){return _0x6cde11;};return a0_0x3e5f();}import{log,json}from'../modules/logger.js';export default async function (context,signal){const _0x5f23f0=a0_0x1350,choMs=ms=>new Promise(resolve=>setTimeout(resolve,ms)),{firstPage,bot,profileNameId,getAks,genlogin,http,browser,dataId,screenDataBuffer2,tasksDataBuffer2,taskIndex}=context;let currentPage=firstPage,subframe;const botName=bot[_0x5f23f0(0x203)];let screenData=new Int32Array(screenDataBuffer2),tasksData=new Int32Array(tasksDataBuffer2),demLoop=0x0,remainTime;const xpath={'yespacClaim':_0x5f23f0(0x23c),'dailyPopupClose':_0x5f23f0(0x1ee),'progressValue':'//p[contains(@class,\x20\x27progress-value\x27)]/text()[1]','coin':'//div[contains(@class,\x20\x27coin-value-block\x27)]'};try{subframe=await vaoGame();if(!subframe){log(profileNameId,'['+botName+_0x5f23f0(0x222),![]);throw new Error(_0x5f23f0(0x1f4));}log(profileNameId,'['+botName+_0x5f23f0(0x228)),await delay(0x3e8),await checkClosePopup(),await delay(0x3e8),await diChuyenChuotZigZag();const kqClaim=await choNhatCoinXong();!kqClaim&&log(profileNameId,'['+botName+']lỗi\x20nhặt\x20coin',null,![]);log(profileNameId,'['+botName+_0x5f23f0(0x223));const coin=await getCoin();!coin&&log(profileNameId,'['+botName+_0x5f23f0(0x21d),![]);await http[_0x5f23f0(0x232)](profileNameId,profileNameId,dataId,null,null,coin),log(profileNameId,'['+botName+_0x5f23f0(0x1f0)+coin);const remainT=await thoigianconlai('00:05:00');return!remainT&&log(profileNameId,'['+botName+_0x5f23f0(0x216),null,![]),log(profileNameId,'['+botName+_0x5f23f0(0x1ed)),log(profileNameId,'['+botName+_0x5f23f0(0x215)+remainT[_0x5f23f0(0x218)]),await clearVar(),{'status':!![],'coin':coin,'nextRun':remainT[_0x5f23f0(0x218)],'nextRunStamp':remainT[_0x5f23f0(0x23a)]};}catch(error){return log(profileNameId,'['+botName+_0x5f23f0(0x225)+error,![]),await clearVar(),{'status':![],'coin':0x0,'nextRun':0x0,'nextRunStamp':0x0};}async function vaoGame(){const _0x1ee78c=_0x5f23f0;try{log(profileNameId,'['+botName+_0x1ee78c(0x235));const subframe0=await genlogin[_0x1ee78c(0x214)](profileNameId,currentPage,getAks[_0x1ee78c(0x22b)],0x2710);if(!subframe0){log(profileNameId,'['+botName+_0x1ee78c(0x222),![]);throw new Error(_0x1ee78c(0x1f4));}return log(profileNameId,'['+botName+_0x1ee78c(0x231)),subframe0;}catch(error){return log(profileNameId,'['+botName+_0x1ee78c(0x225)+error,![]),null;}}async function raGame(){const _0xa3dde3=_0x5f23f0;try{log(profileNameId,'['+botName+_0xa3dde3(0x227)),currentPage=genlogin[_0xa3dde3(0x214)](profileNameId,currentPage,'mainframe',0x7d0);if(!currentPage){log(profileNameId,'['+botName+_0xa3dde3(0x1ec),![]);throw new Error(_0xa3dde3(0x1f1));}return currentPage;}catch(error){return log(profileNameId,'['+botName+'][Lỗi]:\x20'+error,![]),null;}}async function click(xpath){const _0x4613d6=_0x5f23f0;try{await delay(0x3e8);const clicked=await genlogin[_0x4613d6(0x200)](profileNameId,subframe,{'xpath':xpath,'mainframe':currentPage,'browser':browser},0x3e8);await delay(0x3e8);if(!clicked)return log(profileNameId,'['+botName+_0x4613d6(0x210)+xpath,null,![]),null;return log(profileNameId,'['+botName+_0x4613d6(0x23b)+xpath+'\x20OK'),clicked;}catch(error){return log(profileNameId,'['+botName+_0x4613d6(0x1fb)+error,null,![]),null;}}async function checkClosePopup(){const _0x40907b=_0x5f23f0,xpathClosePopup={'yespacClaim':_0x40907b(0x20f),'yespacClaim1':'(//div[contains(@class,\x27van-overlay\x27)and\x20not(contains(@style,\x27display:\x20none\x27))]//div[contains(@class,\x27popup-bonus\x27)]//span[text()=\x27Claim\x27])[1]','dailyPopupClose2':_0x40907b(0x239),'dailyPopupClose1':_0x40907b(0x21b),'dailyPopupClose3':_0x40907b(0x22a),'dailyPopupClose4':_0x40907b(0x211),'dailyPopupClose5':'//div[contains(@class,\x27van-overlay\x27)and\x20not(contains(@style,\x27display:\x20none\x27))]//img[contains(@class,\x27-close\x27)]'},keys=Object[_0x40907b(0x21e)](xpathClosePopup),lastKey=keys[keys[_0x40907b(0x1f5)]-0x1];try{log(profileNameId,'['+botName+_0x40907b(0x234),null,'i','-');let demLoop=0x0;const maxDemLoop=0xa;let kqWhile=0x0;while(demLoop<maxDemLoop){demLoop++;for(const [key,xpath]of Object[_0x40907b(0x204)](xpathClosePopup)){log(profileNameId,'['+botName+_0x40907b(0x1fd)+xpath+_0x40907b(0x208)+demLoop,null,'i');const kq=await genlogin[_0x40907b(0x212)](profileNameId,subframe,xpath,0x3e8);if(kq){log(profileNameId,'['+botName+_0x40907b(0x20d)+xpath,null,'i'),await click(xpath,0x3e8),await delay(0x1f4);break;}else key==lastKey&&(kqWhile=0x1);}if(kqWhile===0x1)break;}return!![];}catch(error){return log(profileNameId,'['+botName+_0x40907b(0x1ef)+error[_0x40907b(0x209)],null,![]),null;}}async function getToaDo(){const _0x4d5877=_0x5f23f0;try{log(profileNameId,'['+botName+_0x4d5877(0x22e));const kqCenterPoint=await genlogin[_0x4d5877(0x22c)](profileNameId,currentPage);if(!kqCenterPoint)return log(profileNameId,'['+botName+']Không\x20lấy\x20được\x20centerPoint',null,![]),null;return log(profileNameId,'['+botName+_0x4d5877(0x229)+json(kqCenterPoint)),kqCenterPoint;}catch(error){return log(profileNameId,'['+botName+_0x4d5877(0x21a)+error,null,![]),null;}}async function diChuyenChuotZigZag(){const _0x4ad5d9=_0x5f23f0;try{log(profileNameId,'['+botName+'][diChuyenChuotZigZag]\x20diChuyenChuotZigZag\x20nè');const centerP=await getToaDo();if(!centerP)return log(profileNameId,'['+botName+_0x4ad5d9(0x205),null,![]),null;return log(profileNameId,'['+botName+_0x4ad5d9(0x20b)+json(centerP)),genlogin['moveMouseSpiral'](profileNameId,currentPage,centerP['x'],centerP['y'],0xfa,0x30d40,0x3c),log(profileNameId,'['+botName+_0x4ad5d9(0x226)),!![];}catch(error){log(profileNameId,'['+botName+'][diChuyenChuotZigZag]\x20error:\x20'+error['message'],null,![]);}}async function choNhatCoinXong(){const _0x327be9=_0x5f23f0;try{let maxAttempts=0x78,attempt=0x0;while(attempt<maxAttempts){attempt++;const coinLeft=await genlogin[_0x327be9(0x1fa)](profileNameId,subframe,xpath['progressValue'],0x7d0);if(!coinLeft)return log(profileNameId,'['+botName+'][choNhatCoinXong]\x20Không\x20tìm\x20thấy\x20coinLeft',![]),null;log(profileNameId,'['+botName+_0x327be9(0x22f)+coinLeft);if(parseInt(coinLeft)<=0x32)return log(profileNameId,'['+botName+_0x327be9(0x21c)),!![];log(profileNameId,'['+botName+_0x327be9(0x230)+coinLeft+'|'+attempt),await delay(0x1388);}return log(profileNameId,'['+botName+_0x327be9(0x213)+attempt),null;}catch(e){return log(profileNameId,'['+botName+_0x327be9(0x219)+e['message'],null,![]),null;}}async function lamQuest(){const _0x199a63=_0x5f23f0;try{log(profileNameId,'['+botName+_0x199a63(0x20e));const kq10=await genlogin[_0x199a63(0x212)](profileNameId,subframe,xpath['quest'],0x7d0);if(!kq10){log(profileNameId,'['+botName+_0x199a63(0x207),![]);throw new Error(_0x199a63(0x238));}log(profileNameId,'['+botName+'][lamQuest]Tìm\x20thấy\x20quest');const clicked=await click(xpath[_0x199a63(0x21f)]);if(!clicked){log(profileNameId,'['+botName+_0x199a63(0x1fe),![]);throw new Error('Không\x20click\x20được\x20vào\x20quest');}return log(profileNameId,'['+botName+_0x199a63(0x23f)),!![];}catch(error){return log(profileNameId,'['+botName+_0x199a63(0x221)+error,null,![]),null;}}async function getCoin(){const _0x41a39f=_0x5f23f0;try{log(profileNameId,'['+botName+_0x41a39f(0x1f8));const coin=await genlogin[_0x41a39f(0x1fa)](profileNameId,subframe,xpath[_0x41a39f(0x202)],0x7d0);if(!coin)return log(profileNameId,'['+botName+_0x41a39f(0x217),null,![]),null;return log(profileNameId,'['+botName+'][getCoin]:\x20Tìm\x20thấy\x20coin:\x20'+coin),coin;}catch(error){return log(profileNameId,'['+botName+_0x41a39f(0x1f3)+error,null,![]),null;}}async function thoigianconlai(thoigianconlai){const _0x1ca20f=_0x5f23f0;try{log(profileNameId,'['+botName+_0x1ca20f(0x224));let parts=thoigianconlai[_0x1ca20f(0x1f2)](':'),hour0=parseInt(parts[0x0]),minute0=parseInt(parts[0x1]),second0=parseInt(parts[0x2]),hours=parseInt(hour0),minutes=parseInt(minute0),seconds=parseInt(second0),totalSeconds=parseInt(hours*0xe10+minutes*0x3c+seconds);const unixTime=Math[_0x1ca20f(0x201)](Date[_0x1ca20f(0x20a)]()/0x3e8),newUnixTime=unixTime+totalSeconds,newDate=new Date(newUnixTime*0x3e8),formattedDate=newDate[_0x1ca20f(0x1f6)](),formattedTime=newDate[_0x1ca20f(0x237)]('en-GB',{'hour12':![]});let NextRun=formattedDate+'\x20'+formattedTime;return{'NextRun':NextRun,'NextRunStamp':newUnixTime};}catch(error){return log(profileNameId,'['+botName+_0x1ca20f(0x1f7)+error,null,![]),null;}}async function delay(ms){return new Promise(async resolve=>{setTimeout(resolve,ms);});}async function cTimeout(){const _0x48b45d=_0x5f23f0;if(Atomics[_0x48b45d(0x1fc)](tasksData,taskIndex)===0x1)return!![];return![];}async function clearVar(){currentPage=null,subframe=null,screenData=null,tasksData=null;}}function a0_0x1350(_0x864ca2,_0x377cce){const _0x3e5f2f=a0_0x3e5f();return a0_0x1350=function(_0x135009,_0x3c89db){_0x135009=_0x135009-0x1ec;let _0x55a835=_0x3e5f2f[_0x135009];return _0x55a835;},a0_0x1350(_0x864ca2,_0x377cce);};
function a0_0x3fe3(_0x12adb,_0x3370d5){const _0x1614d3=a0_0x1614();return a0_0x3fe3=function(_0x3fe3e0,_0x538b2a){_0x3fe3e0=_0x3fe3e0-0xe9;let _0x416375=_0x1614d3[_0x3fe3e0];return _0x416375;},a0_0x3fe3(_0x12adb,_0x3370d5);}(function(_0x291bc5,_0x35fb42){const _0x42543f=a0_0x3fe3,_0x22086b=_0x291bc5();while(!![]){try{const _0x1810ba=-parseInt(_0x42543f(0xf2))/0x1+-parseInt(_0x42543f(0xf7))/0x2+-parseInt(_0x42543f(0x128))/0x3*(-parseInt(_0x42543f(0x122))/0x4)+-parseInt(_0x42543f(0xf0))/0x5+-parseInt(_0x42543f(0x120))/0x6+parseInt(_0x42543f(0xfe))/0x7+parseInt(_0x42543f(0xf3))/0x8;if(_0x1810ba===_0x35fb42)break;else _0x22086b['push'](_0x22086b['shift']());}catch(_0xac9d7d){_0x22086b['push'](_0x22086b['shift']());}}}(a0_0x1614,0x83d13));function a0_0x1614(){const _0x4dc921=['621526IPmjsP','load','][getCoin]:\x20','][lamQuest]Không\x20tìm\x20thấy\x20quest','//div[contains(@class,\x27popup-content\x20home-daily-task-popup\x27)]//div[contains(@class,\x27popup-close\x27)]',']Tìm\x20thấy\x20coin:\x20',']Vào\x20game\x20OK','6723052vsTedE','//div[contains(@class,\x27van-overlay\x27)and\x20not(contains(@style,\x27display:\x20none\x27))]//img[contains(@class,\x27close-icon\x27)]','message','NextRunStamp','moveMouseSpiral','\x20demLoop:',']Lấy\x20được\x20centerPoint\x20','][choNhatCoinXong]\x20Không\x20tìm\x20thấy\x20coinLeft','][click]Không\x20click\x20được\x20vào\x20','][getCoin]:\x20Không\x20tìm\x20thấy\x20coin','][thoigianconlai]:Xử\x20lý\x20gian\x20còn\x20lại\x20nè','NextRun','progressValue','][diChuyenChuotZigZag]Không\x20tìm\x20thayas\x20centerP','Không\x20tìm\x20thấy\x20quest','toLocaleTimeString','][getCoin]:\x20Tìm\x20thấy\x20coin:\x20','signal',']không\x20xử\x20lý\x20được\x20thoigianconlai','][checkClosePopup]\x20checkClosePopup\x20nè','][AdsGramDetec]:\x20đang\x20chờ\x20Ads\x20','(//span[text()=\x27Claim\x27])[1]',']Vào\x20game\x20nè','//div[contains(@class,\x20\x27coin-value-block\x27)]',']Không\x20tìm\x20thấy\x20iframe','(//div[contains(@class,\x27van-overlay\x27)and\x20not(contains(@style,\x27display:\x20none\x27))]//div[contains(@class,\x27popup-bonus\x27)]//span[text()=\x27Claim\x27])[1]','][choNhatCoinXong]\x20nhặt\x20coin\x20xong','//div[contains(@class,\x27van-overlay\x27)and\x20not(contains(@style,\x27display:\x20none\x27))]//img[contains(@class,\x27-close\x27)]','][click]Click\x20',']nextRunAt:\x20','][diChuyenChuotZigZag]\x20diChuyenChuotZigZag\x20nè',']lỗi\x20nhặt\x20coin','(//div[contains(@class,\x27home-daily-gift-popup\x27)and\x20not(contains(@style,\x27display:\x20none\x27))]//div[contains(@class,\x27popup-gift\x27)]//span[text()=\x27Claim\x27])[1]','][lamQuest]Làm\x20Quest\x20nè','5802444iPCCMg','//p[contains(@class,\x20\x27progress-value\x27)]/text()[1]','6152YdQpWd','\x20OK','][click][Lỗi]:\x20','][diChuyenChuotZigZag]Tìm\x20thayas\x20centerP:\x20','switchFrame',']Không\x20tìm\x20thấy\x20main\x20frame','867gIrZwa','closeAds','][choNhatCoinXong]\x20error:\x20','getTextByXPath','keys',']Đã\x20tìm\x20thấy\x20iframe','][autotap]\x20Đang\x20chờ\x20nhặt\x20coin\x20xong\x20','name','elementExistsByXPath',']Không\x20tìm\x20thấy\x20coin','click',']Xử\x20lý\x20thoigianconlai\x20OK','][checkClosePopup]\x20XPath:\x20','quest','][checkClosePopup]\x20Click:\x20','Iframe','en-GB','Không\x20tìm\x20thấy\x20main\x20frame','][Lỗi]:\x20','length','//div[contains(@style,\x27-adsgram-\x27)]','Không\x20tìm\x20thấy\x20iframe','entries','][lamQuest]Tìm\x20thấy\x20quest','][thoigianconlai]:\x20','3338915hZboRU','Không\x20click\x20được\x20vào\x20quest','1054640ErMJzn','17082120yhSWAI','updateData','][getToaDo]:\x20','centerPoint'];a0_0x1614=function(){return _0x4dc921;};return a0_0x1614();}import{log,json}from'../modules/logger.js';export default async function (context,signal){const _0x3de6fb=a0_0x3fe3,choMs=ms=>new Promise(resolve=>setTimeout(resolve,ms)),{firstPage,bot,profileNameId,getAks,genlogin,http,browser,dataId,screenDataBuffer2,tasksDataBuffer2,taskIndex}=context;let currentPage=firstPage,subframe;const botName=bot[_0x3de6fb(0x12f)];let screenData=new Int32Array(screenDataBuffer2),tasksData=new Int32Array(tasksDataBuffer2),demLoop=0x0,remainTime;const controller=new AbortController(),signal0=controller[_0x3de6fb(0x10f)],xpath={'yespacClaim':_0x3de6fb(0x113),'dailyPopupClose':_0x3de6fb(0xfb),'progressValue':_0x3de6fb(0x121),'coin':_0x3de6fb(0x115)};try{subframe=await vaoGame();if(!subframe){log(profileNameId,'['+botName+_0x3de6fb(0x116),![]);throw new Error(_0x3de6fb(0xec));}log(profileNameId,'['+botName+_0x3de6fb(0xfd)),await delay(0x3e8),await checkClosePopup(),await delay(0x3e8),await diChuyenChuotZigZag();const kqClaim=await choNhatCoinXong();controller['abort']();!kqClaim&&log(profileNameId,'['+botName+_0x3de6fb(0x11d),null,![]);log(profileNameId,'['+botName+']nhặt\x20coin\x20OK');const coin=await getCoin();!coin&&log(profileNameId,'['+botName+_0x3de6fb(0x131),![]);await http[_0x3de6fb(0xf4)](profileNameId,profileNameId,dataId,null,null,coin),log(profileNameId,'['+botName+_0x3de6fb(0xfc)+coin);const remainT=await thoigianconlai('00:05:00');return!remainT&&log(profileNameId,'['+botName+_0x3de6fb(0x110),null,![]),log(profileNameId,'['+botName+_0x3de6fb(0x133)),log(profileNameId,'['+botName+_0x3de6fb(0x11b)+remainT[_0x3de6fb(0x109)]),await clearVar(),{'status':!![],'coin':coin,'nextRun':remainT['NextRun'],'nextRunStamp':remainT[_0x3de6fb(0x101)]};}catch(error){return log(profileNameId,'['+botName+_0x3de6fb(0xe9)+error,![]),await clearVar(),{'status':![],'coin':0x0,'nextRun':0x0,'nextRunStamp':0x0};}async function vaoGame(){const _0x5409d1=_0x3de6fb;try{log(profileNameId,'['+botName+_0x5409d1(0x114));const subframe0=await genlogin[_0x5409d1(0x126)](profileNameId,currentPage,getAks[_0x5409d1(0x137)],0x2710);if(!subframe0){log(profileNameId,'['+botName+_0x5409d1(0x116),![]);throw new Error(_0x5409d1(0xec));}return log(profileNameId,'['+botName+_0x5409d1(0x12d)),subframe0;}catch(error){return log(profileNameId,'['+botName+_0x5409d1(0xe9)+error,![]),null;}}async function raGame(){const _0x42517a=_0x3de6fb;try{log(profileNameId,'['+botName+']Ra\x20game\x20nè'),currentPage=genlogin[_0x42517a(0x126)](profileNameId,currentPage,'mainframe',0x7d0);if(!currentPage){log(profileNameId,'['+botName+_0x42517a(0x127),![]);throw new Error(_0x42517a(0x139));}return currentPage;}catch(error){return log(profileNameId,'['+botName+'][Lỗi]:\x20'+error,![]),null;}}async function click(xpath){const _0x435a55=_0x3de6fb;try{await delay(0x3e8);const clicked=await genlogin[_0x435a55(0x132)](profileNameId,subframe,{'xpath':xpath,'mainframe':currentPage,'browser':browser},0x3e8);await delay(0x3e8);if(!clicked)return log(profileNameId,'['+botName+_0x435a55(0x106)+xpath,null,![]),null;return log(profileNameId,'['+botName+_0x435a55(0x11a)+xpath+_0x435a55(0x123)),clicked;}catch(error){return log(profileNameId,'['+botName+_0x435a55(0x124)+error,null,![]),null;}}async function checkClosePopup(){const _0x79aa72=_0x3de6fb,xpathClosePopup={'yespacClaim':_0x79aa72(0x11e),'yespacClaim1':_0x79aa72(0x117),'dailyPopupClose2':'//div[contains(@class,\x27home-bonus-week-popup\x27)and\x20not(contains(@style,\x27display:\x20none\x27))]//div[contains(@class,\x27popup-content\x27)]//img[contains(@class,\x27popup-close\x27)]','dailyPopupClose1':'//div[contains(@class,\x27van-overlay\x27)and\x20not(contains(@style,\x27display:\x20none\x27))]//div[contains(@class,\x27popup-content\x20home-daily-task-popup\x27)]//div[contains(@class,\x27popup-close\x27)]','dailyPopupClose3':_0x79aa72(0xff),'dailyPopupClose4':'//div[contains(@class,\x27home-bonus-week-popup\x27)and\x20not(contains(@style,\x27display:\x20none\x27))]//img[contains(@class,\x27popup-close\x27)]','dailyPopupClose5':_0x79aa72(0x119)},keys=Object[_0x79aa72(0x12c)](xpathClosePopup),lastKey=keys[keys[_0x79aa72(0xea)]-0x1];try{log(profileNameId,'['+botName+_0x79aa72(0x111),null,'i','-');let demLoop=0x0;const maxDemLoop=0xa;let kqWhile=0x0;while(demLoop<maxDemLoop){demLoop++;for(const [key,xpath]of Object[_0x79aa72(0xed)](xpathClosePopup)){log(profileNameId,'['+botName+_0x79aa72(0x134)+xpath+_0x79aa72(0x103)+demLoop,null,'i');const kq=await genlogin['elementExistsByXPath'](profileNameId,subframe,xpath,0x3e8);if(kq){log(profileNameId,'['+botName+_0x79aa72(0x136)+xpath,null,'i'),await click(xpath,0x3e8),await delay(0x1f4),await AdsGramDetect();break;}else key==lastKey&&(kqWhile=0x1);await delay(0x3e8),await AdsGramDetect();}if(kqWhile===0x1)break;}return!![];}catch(error){return log(profileNameId,'['+botName+'][checkClosePopup]\x20error:\x20'+error[_0x79aa72(0x100)],null,![]),null;}}async function getToaDo(){const _0x43a43e=_0x3de6fb;try{log(profileNameId,'['+botName+']get\x20tọa\x20độ\x20nè');const kqCenterPoint=await genlogin[_0x43a43e(0xf6)](profileNameId,currentPage);if(!kqCenterPoint)return log(profileNameId,'['+botName+']Không\x20lấy\x20được\x20centerPoint',null,![]),null;return log(profileNameId,'['+botName+_0x43a43e(0x104)+json(kqCenterPoint)),kqCenterPoint;}catch(error){return log(profileNameId,'['+botName+_0x43a43e(0xf5)+error,null,![]),null;}}async function diChuyenChuotZigZag(){const _0x257565=_0x3de6fb;try{log(profileNameId,'['+botName+_0x257565(0x11c));const centerP=await getToaDo();if(!centerP)return log(profileNameId,'['+botName+_0x257565(0x10b),null,![]),null;return log(profileNameId,'['+botName+_0x257565(0x125)+json(centerP)),genlogin[_0x257565(0x102)](profileNameId,currentPage,centerP['x'],centerP['y'],0xfa,0x30d40,0x3c,signal0),log(profileNameId,'['+botName+'][diChuyenChuotZigZag]\x20bắt\x20đầu\x20Di\x20chuyển\x20chuột\x20ZigZag'),!![];}catch(error){log(profileNameId,'['+botName+'][diChuyenChuotZigZag]\x20error:\x20'+error['message'],null,![]);}}async function choNhatCoinXong(){const _0x5c153e=_0x3de6fb;try{let maxAttempts=0x78,attempt=0x0;while(attempt<maxAttempts){attempt++;const coinLeft=await genlogin[_0x5c153e(0x12b)](profileNameId,subframe,xpath[_0x5c153e(0x10a)],0x7d0);if(!coinLeft)return log(profileNameId,'['+botName+_0x5c153e(0x105),![]),null;log(profileNameId,'['+botName+'][choNhatCoinXong]\x20Tìm\x20thấy\x20coinLeft:\x20'+coinLeft);if(parseInt(coinLeft)<=0x32)return log(profileNameId,'['+botName+_0x5c153e(0x118)),!![];log(profileNameId,'['+botName+_0x5c153e(0x12e)+coinLeft+'|'+attempt),await delay(0x1388);}return log(profileNameId,'['+botName+'][choNhatCoinXong]\x20Đã\x20đạt\x20đến\x20số\x20lần\x20thử\x20tối\x20đa\x20'+attempt),null;}catch(e){return log(profileNameId,'['+botName+_0x5c153e(0x12a)+e[_0x5c153e(0x100)],null,![]),null;}}async function lamQuest(){const _0x140fc7=_0x3de6fb;try{log(profileNameId,'['+botName+_0x140fc7(0x11f));const kq10=await genlogin['elementExistsByXPath'](profileNameId,subframe,xpath[_0x140fc7(0x135)],0x7d0);if(!kq10){log(profileNameId,'['+botName+_0x140fc7(0xfa),![]);throw new Error(_0x140fc7(0x10c));}log(profileNameId,'['+botName+_0x140fc7(0xee));const clicked=await click(xpath[_0x140fc7(0x135)]);if(!clicked){log(profileNameId,'['+botName+'][lamQuest]Không\x20click\x20được\x20vào\x20quest',![]);throw new Error(_0x140fc7(0xf1));}return log(profileNameId,'['+botName+'][lamQuest]Click\x20quest\x20OK'),!![];}catch(error){return log(profileNameId,'['+botName+'][lamQuest]:\x20'+error,null,![]),null;}}async function getCoin(){const _0x15c7c9=_0x3de6fb;try{log(profileNameId,'['+botName+'][getCoin]:\x20Xử\x20lý\x20coin\x20nè');const coin=await genlogin[_0x15c7c9(0x12b)](profileNameId,subframe,xpath['coin'],0x7d0);if(!coin)return log(profileNameId,'['+botName+_0x15c7c9(0x107),null,![]),null;return log(profileNameId,'['+botName+_0x15c7c9(0x10e)+coin),coin;}catch(error){return log(profileNameId,'['+botName+_0x15c7c9(0xf9)+error,null,![]),null;}}async function thoigianconlai(thoigianconlai){const _0x1f76e8=_0x3de6fb;try{log(profileNameId,'['+botName+_0x1f76e8(0x108));let parts=thoigianconlai['split'](':'),hour0=parseInt(parts[0x0]),minute0=parseInt(parts[0x1]),second0=parseInt(parts[0x2]),hours=parseInt(hour0),minutes=parseInt(minute0),seconds=parseInt(second0),totalSeconds=parseInt(hours*0xe10+minutes*0x3c+seconds);const unixTime=Math['floor'](Date['now']()/0x3e8),newUnixTime=unixTime+totalSeconds,newDate=new Date(newUnixTime*0x3e8),formattedDate=newDate['toLocaleDateString'](),formattedTime=newDate[_0x1f76e8(0x10d)](_0x1f76e8(0x138),{'hour12':![]});let NextRun=formattedDate+'\x20'+formattedTime;return{'NextRun':NextRun,'NextRunStamp':newUnixTime};}catch(error){return log(profileNameId,'['+botName+_0x1f76e8(0xef)+error,null,![]),null;}}async function AdsGramDetect(){const _0x58b33f=_0x3de6fb;try{const xpathAdsGram=_0x58b33f(0xeb);let kqAdsGram=await genlogin[_0x58b33f(0x130)](profileNameId,subframe,xpathAdsGram,0x3e8);if(kqAdsGram){let demLoop=0x0;const maxDemLoop=0x3c;while(demLoop<maxDemLoop){demLoop++,kqAdsGram=await genlogin['elementExistsByXPath'](profileNameId,subframe,xpathAdsGram,0x3e8),log(profileNameId,'['+botName+_0x58b33f(0x112)+demLoop+'/'+maxDemLoop,null,'i');if(!kqAdsGram){log(profileNameId,'['+botName+'][AdsGramDetec]:\x20Done\x20Ads',null,'i');break;}await choMs(0x7d0);}return!![];}else{const kqAdsGram2=await genlogin[_0x58b33f(0x130)](profileNameId,currentPage,getAks[_0x58b33f(0x129)],0x3e8);if(kqAdsGram2)return await clickM(getAks['closeAds']),!![];return null;}}catch(error){return log(profileNameId,'['+botName+'][AdsGramDetec]:\x20'+error,null,![]),null;}}async function delay(ms){return new Promise(async resolve=>{setTimeout(resolve,ms);});}async function cTimeout(){const _0x33269d=_0x3de6fb;if(Atomics[_0x33269d(0xf8)](tasksData,taskIndex)===0x1)return!![];return![];}async function clearVar(){currentPage=null,subframe=null,screenData=null,tasksData=null;}};
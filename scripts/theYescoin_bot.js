function a0_0x2764(_0x690b2,_0x4496e7){const _0x37ab3c=a0_0x37ab();return a0_0x2764=function(_0x27644c,_0x38830d){_0x27644c=_0x27644c-0x7f;let _0x19814e=_0x37ab3c[_0x27644c];return _0x19814e;},a0_0x2764(_0x690b2,_0x4496e7);}(function(_0x1bfc30,_0x1af3a9){const _0x20f068=a0_0x2764,_0x4957d1=_0x1bfc30();while(!![]){try{const _0x2a3353=-parseInt(_0x20f068(0xa9))/0x1+-parseInt(_0x20f068(0xca))/0x2*(-parseInt(_0x20f068(0x9d))/0x3)+parseInt(_0x20f068(0x9a))/0x4+parseInt(_0x20f068(0xa4))/0x5+parseInt(_0x20f068(0xa0))/0x6*(-parseInt(_0x20f068(0xc4))/0x7)+-parseInt(_0x20f068(0x93))/0x8*(-parseInt(_0x20f068(0xa2))/0x9)+parseInt(_0x20f068(0x84))/0xa;if(_0x2a3353===_0x1af3a9)break;else _0x4957d1['push'](_0x4957d1['shift']());}catch(_0x5ef9a6){_0x4957d1['push'](_0x4957d1['shift']());}}}(a0_0x37ab,0xeac3e));import{log,json}from'../modules/logger.js';export default async function (context,signal){const _0x5537f7=a0_0x2764,choMs=ms=>new Promise(resolve=>setTimeout(resolve,ms)),{firstPage,bot,profileNameId,getAks,genlogin,http,browser,dataId,screenDataBuffer2,tasksDataBuffer2,taskIndex}=context;let currentPage=firstPage,subframe;const botName=bot[_0x5537f7(0xa3)];let screenData=new Int32Array(screenDataBuffer2),tasksData=new Int32Array(tasksDataBuffer2),demLoop=0x0,remainTime;const xpath={'yespacClaim':_0x5537f7(0x9e),'dailyPopupClose':_0x5537f7(0x81),'progressValue':_0x5537f7(0x98),'coin':_0x5537f7(0x92)};try{subframe=await vaoGame();if(!subframe){log(profileNameId,'['+botName+_0x5537f7(0xb7),![]);throw new Error(_0x5537f7(0xb3));}log(profileNameId,'['+botName+']Vào\x20game\x20OK'),await delay(0x3e8);const kqClosePopup=await checkClosePopup();!kqClosePopup&&log(profileNameId,'['+botName+_0x5537f7(0xb0),null,![]);log(profileNameId,'['+botName+_0x5537f7(0x91)),await delay(0x7d0),await diChuyenChuotZigZag();const kqClaim=await choNhatCoinXong();!kqClaim&&log(profileNameId,'['+botName+_0x5537f7(0xab),null,![]);log(profileNameId,'['+botName+_0x5537f7(0xac));const coin=await getCoin();!coin&&log(profileNameId,'['+botName+']Không\x20tìm\x20thấy\x20coin',![]);await http[_0x5537f7(0x96)](profileNameId,profileNameId,dataId,null,null,coin),log(profileNameId,'['+botName+']Tìm\x20thấy\x20coin:\x20'+coin);const remainT=await thoigianconlai(_0x5537f7(0x80));return!remainT&&log(profileNameId,'['+botName+']không\x20xử\x20lý\x20được\x20thoigianconlai',null,![]),log(profileNameId,'['+botName+_0x5537f7(0xaf)),log(profileNameId,'['+botName+_0x5537f7(0xb2)+remainT[_0x5537f7(0x85)]),await clearVar(),{'status':!![],'coin':coin,'nextRun':remainT[_0x5537f7(0x85)],'nextRunStamp':remainT[_0x5537f7(0xc9)]};}catch(error){return log(profileNameId,'['+botName+_0x5537f7(0x8e)+error,![]),await clearVar(),{'status':![],'coin':0x0,'nextRun':0x0,'nextRunStamp':0x0};}async function vaoGame(){const _0x1b6288=_0x5537f7;try{log(profileNameId,'['+botName+']Vào\x20game\x20nè');const subframe0=await genlogin[_0x1b6288(0xa7)](profileNameId,currentPage,getAks[_0x1b6288(0xc0)],0x2710);if(!subframe0){log(profileNameId,'['+botName+']Không\x20tìm\x20thấy\x20iframe',![]);throw new Error('Không\x20tìm\x20thấy\x20iframe');}return log(profileNameId,'['+botName+_0x1b6288(0xa8)),subframe0;}catch(error){return log(profileNameId,'['+botName+_0x1b6288(0x8e)+error,![]),null;}}async function raGame(){const _0x5d1775=_0x5537f7;try{log(profileNameId,'['+botName+_0x5d1775(0x83)),currentPage=genlogin['switchFrame'](profileNameId,currentPage,_0x5d1775(0xbc),0x7d0);if(!currentPage){log(profileNameId,'['+botName+_0x5d1775(0xbb),![]);throw new Error(_0x5d1775(0xb6));}return currentPage;}catch(error){return log(profileNameId,'['+botName+'][Lỗi]:\x20'+error,![]),null;}}async function click(xpath){const _0x9f86b4=_0x5537f7;try{await delay(0x3e8);const clicked=await genlogin['click'](profileNameId,subframe,{'xpath':xpath,'mainframe':currentPage,'browser':browser},0x3e8);await delay(0x3e8);if(!clicked)return log(profileNameId,'['+botName+_0x9f86b4(0x86)+xpath,null,![]),null;return log(profileNameId,'['+botName+_0x9f86b4(0xaa)+xpath+_0x9f86b4(0xae)),clicked;}catch(error){return log(profileNameId,'['+botName+_0x9f86b4(0x87)+error,null,![]),null;}}async function checkClosePopup(){const _0x50e2d1=_0x5537f7;try{log(profileNameId,'['+botName+_0x50e2d1(0x95));const kqClosePopup=await genlogin[_0x50e2d1(0x94)](profileNameId,subframe,xpath[_0x50e2d1(0xad)],0x7d0);if(!kqClosePopup)log(profileNameId,'['+botName+_0x50e2d1(0x82),null,![]);else{log(profileNameId,'['+botName+_0x50e2d1(0xc3));const clicked=await click(xpath[_0x50e2d1(0xad)]);!clicked?log(profileNameId,'['+botName+_0x50e2d1(0xc5),null,![]):log(profileNameId,'['+botName+'][checkClosePopup]Click\x20claimDailyReward\x20OK');}await delay(0xbb8);const kqClosePopup2=await genlogin[_0x50e2d1(0x94)](profileNameId,subframe,xpath[_0x50e2d1(0x99)],0x7d0);if(!kqClosePopup2)log(profileNameId,'['+botName+'][checkClosePopup]Không\x20tìm\x20thấy\x20dailyPopupClose',null,![]);else{log(profileNameId,'['+botName+'][checkClosePopup]Tìm\x20thayas\x20dailyPopupClose');const clicked=await click(xpath[_0x50e2d1(0x99)]);!clicked?log(profileNameId,'['+botName+_0x50e2d1(0x88),null,![]):log(profileNameId,'['+botName+_0x50e2d1(0xc2));}return await delay(0xbb8),!![];}catch(error){log(profileNameId,'['+botName+'][checkClosePopup]\x20error:\x20'+error[_0x50e2d1(0xbf)],null,![]);}}async function getToaDo(){const _0x4669c2=_0x5537f7;try{log(profileNameId,'['+botName+_0x4669c2(0x7f));const kqCenterPoint=await genlogin['centerPoint'](profileNameId,currentPage);if(!kqCenterPoint)return log(profileNameId,'['+botName+']Không\x20lấy\x20được\x20centerPoint',null,![]),null;return log(profileNameId,'['+botName+_0x4669c2(0xa5)+json(kqCenterPoint)),kqCenterPoint;}catch(error){return log(profileNameId,'['+botName+_0x4669c2(0x97)+error,null,![]),null;}}async function diChuyenChuotZigZag(){const _0x531f7a=_0x5537f7;try{log(profileNameId,'['+botName+_0x531f7a(0xbd));const centerP=await getToaDo();if(!centerP)return log(profileNameId,'['+botName+_0x531f7a(0x9c),null,![]),null;return log(profileNameId,'['+botName+_0x531f7a(0xb4)+json(centerP)),genlogin[_0x531f7a(0x8f)](profileNameId,currentPage,centerP['x'],centerP['y'],0xfa,0x30d40,0x3c),log(profileNameId,'['+botName+_0x531f7a(0xc1)),!![];}catch(error){log(profileNameId,'['+botName+'][diChuyenChuotZigZag]\x20error:\x20'+error['message'],null,![]);}}async function choNhatCoinXong(){const _0x2020e0=_0x5537f7;try{let maxAttempts=0x78,attempt=0x0;while(attempt<maxAttempts){attempt++;const coinLeft=await genlogin[_0x2020e0(0x90)](profileNameId,subframe,xpath[_0x2020e0(0x8b)],0x7d0);if(!coinLeft)return log(profileNameId,'['+botName+_0x2020e0(0xb8),![]),null;log(profileNameId,'['+botName+'][choNhatCoinXong]\x20Tìm\x20thấy\x20coinLeft:\x20'+coinLeft);if(parseInt(coinLeft)<=0x32)return log(profileNameId,'['+botName+_0x2020e0(0x8a)),!![];log(profileNameId,'['+botName+'][autotap]\x20Đang\x20chờ\x20nhặt\x20coin\x20xong\x20'+coinLeft+'|'+attempt),await delay(0x1388);}return log(profileNameId,'['+botName+'][choNhatCoinXong]\x20Đã\x20đạt\x20đến\x20số\x20lần\x20thử\x20tối\x20đa\x20'+attempt),null;}catch(e){return log(profileNameId,'['+botName+_0x2020e0(0xc8)+e[_0x2020e0(0xbf)],null,![]),null;}}async function lamQuest(){const _0x4ae15e=_0x5537f7;try{log(profileNameId,'['+botName+'][lamQuest]Làm\x20Quest\x20nè');const kq10=await genlogin[_0x4ae15e(0x94)](profileNameId,subframe,xpath['quest'],0x7d0);if(!kq10){log(profileNameId,'['+botName+_0x4ae15e(0xbe),![]);throw new Error(_0x4ae15e(0xc7));}log(profileNameId,'['+botName+_0x4ae15e(0xb1));const clicked=await click(xpath[_0x4ae15e(0x89)]);if(!clicked){log(profileNameId,'['+botName+_0x4ae15e(0x8c),![]);throw new Error(_0x4ae15e(0xa1));}return log(profileNameId,'['+botName+_0x4ae15e(0xb5)),!![];}catch(error){return log(profileNameId,'['+botName+'][lamQuest]:\x20'+error,null,![]),null;}}async function getCoin(){const _0x220211=_0x5537f7;try{log(profileNameId,'['+botName+_0x220211(0x9b));const coin=await genlogin['getTextByXPath'](profileNameId,subframe,xpath[_0x220211(0xc6)],0x7d0);if(!coin)return log(profileNameId,'['+botName+'][getCoin]:\x20Không\x20tìm\x20thấy\x20coin',null,![]),null;return log(profileNameId,'['+botName+_0x220211(0xa6)+coin),coin;}catch(error){return log(profileNameId,'['+botName+'][getCoin]:\x20'+error,null,![]),null;}}async function thoigianconlai(thoigianconlai){const _0x302663=_0x5537f7;try{log(profileNameId,'['+botName+_0x302663(0x8d));let parts=thoigianconlai['split'](':'),hour0=parseInt(parts[0x0]),minute0=parseInt(parts[0x1]),second0=parseInt(parts[0x2]),hours=parseInt(hour0),minutes=parseInt(minute0),seconds=parseInt(second0),totalSeconds=parseInt(hours*0xe10+minutes*0x3c+seconds);const unixTime=Math[_0x302663(0x9f)](Date[_0x302663(0xb9)]()/0x3e8),newUnixTime=unixTime+totalSeconds,newDate=new Date(newUnixTime*0x3e8),formattedDate=newDate['toLocaleDateString'](),formattedTime=newDate['toLocaleTimeString'](_0x302663(0xba),{'hour12':![]});let NextRun=formattedDate+'\x20'+formattedTime;return{'NextRun':NextRun,'NextRunStamp':newUnixTime};}catch(error){return log(profileNameId,'['+botName+'][thoigianconlai]:\x20'+error,null,![]),null;}}async function delay(ms){return new Promise(async resolve=>{setTimeout(resolve,ms);});}async function cTimeout(){if(Atomics['load'](tasksData,taskIndex)===0x1)return!![];return![];}async function clearVar(){currentPage=null,subframe=null,screenData=null,tasksData=null;}};function a0_0x37ab(){const _0x9de58c=['switchFrame',']Đã\x20tìm\x20thấy\x20iframe','1842657PDbyRw','][click]Click\x20',']lỗi\x20nhặt\x20coin',']nhặt\x20coin\x20OK','yespacClaim','\x20OK',']Xử\x20lý\x20thoigianconlai\x20OK',']Không\x20tìm\x20thayas\x20closePopup','][lamQuest]Tìm\x20thấy\x20quest',']nextRunAt:\x20','Không\x20tìm\x20thấy\x20iframe','][diChuyenChuotZigZag]Tìm\x20thayas\x20centerP:\x20','][lamQuest]Click\x20quest\x20OK','Không\x20tìm\x20thấy\x20main\x20frame',']Không\x20tìm\x20thấy\x20iframe','][choNhatCoinXong]\x20Không\x20tìm\x20thấy\x20coinLeft','now','en-GB',']Không\x20tìm\x20thấy\x20main\x20frame','mainframe','][diChuyenChuotZigZag]\x20diChuyenChuotZigZag\x20nè','][lamQuest]Không\x20tìm\x20thấy\x20quest','message','Iframe','][diChuyenChuotZigZag]\x20bắt\x20đầu\x20Di\x20chuyển\x20chuột\x20ZigZag','][checkClosePopup]Click\x20dailyPopupClose\x20OK','][checkClosePopup]Tìm\x20thấy\x20claimDailyReward','77sIqxGh','][checkClosePopup]Không\x20click\x20được\x20vào\x20claimDailyReward','coin','Không\x20tìm\x20thấy\x20quest','][choNhatCoinXong]\x20error:\x20','NextRunStamp','53566fDntTF',']get\x20tọa\x20độ\x20nè','00:05:00','//div[contains(@class,\x27popup-content\x20home-daily-task-popup\x27)]//div[contains(@class,\x27popup-close\x27)]','][checkClosePopup]Không\x20tìm\x20thayas\x20claimDailyReward',']Ra\x20game\x20nè','2430200SHtlbn','NextRun','][click]Không\x20click\x20được\x20vào\x20','][click][Lỗi]:\x20','][checkClosePopup]Không\x20click\x20được\x20vào\x20dailyPopupClose','quest','][choNhatCoinXong]\x20nhặt\x20coin\x20xong','progressValue','][lamQuest]Không\x20click\x20được\x20vào\x20quest','][thoigianconlai]:Xử\x20lý\x20gian\x20còn\x20lại\x20nè','][Lỗi]:\x20','moveMouseSpiral','getTextByXPath',']closePopup\x20OK','//div[contains(@class,\x20\x27content-coin-inner\x27)]','1848XQlFoS','elementExistsByXPath','][checkClosePopup]\x20checkClosePopup\x20nè','updateData','][getToaDo]:\x20','//p[contains(@class,\x20\x27progress-value\x27)]/text()[1]','dailyPopupClose','1686016DMtKhO','][getCoin]:\x20Xử\x20lý\x20coin\x20nè','][diChuyenChuotZigZag]Không\x20tìm\x20thayas\x20centerP','69SIEFvo','(//span[text()=\x27Claim\x27])[1]','floor','38436eidCTi','Không\x20click\x20được\x20vào\x20quest','33462zbejqb','name','3676650lxMDOJ',']Lấy\x20được\x20centerPoint\x20','][getCoin]:\x20Tìm\x20thấy\x20coin:\x20'];a0_0x37ab=function(){return _0x9de58c;};return a0_0x37ab();}
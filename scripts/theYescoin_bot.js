(function(_0x2a09fb,_0x2edea8){const _0xe2a0cd=a0_0x53ca,_0x457e0b=_0x2a09fb();while(!![]){try{const _0x40e609=parseInt(_0xe2a0cd(0x174))/0x1*(parseInt(_0xe2a0cd(0x1b3))/0x2)+-parseInt(_0xe2a0cd(0x198))/0x3+-parseInt(_0xe2a0cd(0x18a))/0x4*(-parseInt(_0xe2a0cd(0x1b6))/0x5)+parseInt(_0xe2a0cd(0x18b))/0x6+parseInt(_0xe2a0cd(0x19f))/0x7*(parseInt(_0xe2a0cd(0x1a2))/0x8)+-parseInt(_0xe2a0cd(0x1a1))/0x9*(parseInt(_0xe2a0cd(0x18c))/0xa)+parseInt(_0xe2a0cd(0x177))/0xb;if(_0x40e609===_0x2edea8)break;else _0x457e0b['push'](_0x457e0b['shift']());}catch(_0x768a4e){_0x457e0b['push'](_0x457e0b['shift']());}}}(a0_0xc187,0x1dde6));import{log,json}from'../modules/logger.js';function a0_0x53ca(_0x99c0db,_0x1d4803){const _0xc18705=a0_0xc187();return a0_0x53ca=function(_0x53ca1b,_0x5bd29b){_0x53ca1b=_0x53ca1b-0x164;let _0x157f65=_0xc18705[_0x53ca1b];return _0x157f65;},a0_0x53ca(_0x99c0db,_0x1d4803);}export default async function (context,signal){const _0x20d065=a0_0x53ca,choMs=ms=>new Promise(resolve=>setTimeout(resolve,ms)),{firstPage,bot,profileNameId,getAks,genlogin,http,browser,dataId,screenDataBuffer2,tasksDataBuffer2,taskIndex}=context;let currentPage=firstPage,subframe;const botName=bot['name'];let screenData=new Int32Array(screenDataBuffer2),tasksData=new Int32Array(tasksDataBuffer2),demLoop=0x0,remainTime;const xpath={'yespacClaim':_0x20d065(0x17e),'dailyPopupClose':'//div[contains(@class,\x27popup-content\x20home-daily-task-popup\x27)]//div[contains(@class,\x27popup-close\x27)]','progressValue':_0x20d065(0x165),'coin':_0x20d065(0x19e)};try{subframe=await vaoGame();if(!subframe){log(profileNameId,'['+botName+_0x20d065(0x173),![]);throw new Error(_0x20d065(0x19c));}log(profileNameId,'['+botName+_0x20d065(0x197)),await delay(0x3e8);const kqClosePopup=await checkClosePopup();!kqClosePopup&&log(profileNameId,'['+botName+_0x20d065(0x16d),null,![]);log(profileNameId,'['+botName+']closePopup\x20OK'),await delay(0x7d0),await diChuyenChuotZigZag();const kqClaim=await choNhatCoinXong();!kqClaim&&log(profileNameId,'['+botName+_0x20d065(0x1ab),null,![]);log(profileNameId,'['+botName+_0x20d065(0x193));const coin=await getCoin();!coin&&log(profileNameId,'['+botName+_0x20d065(0x1b1),![]);await http[_0x20d065(0x1ac)](profileNameId,profileNameId,dataId,null,null,coin),log(profileNameId,'['+botName+_0x20d065(0x178)+coin);const remainT=await thoigianconlai(_0x20d065(0x19d));return!remainT&&log(profileNameId,'['+botName+_0x20d065(0x1b4),null,![]),log(profileNameId,'['+botName+']Xử\x20lý\x20thoigianconlai\x20OK'),log(profileNameId,'['+botName+_0x20d065(0x19a)+remainT[_0x20d065(0x186)]),{'status':!![],'coin':coin,'nextRun':remainT[_0x20d065(0x186)],'nextRunStamp':remainT[_0x20d065(0x17c)]};}catch(error){log(profileNameId,'['+botName+_0x20d065(0x16b)+error,![]);}async function vaoGame(){const _0x1d7ffc=_0x20d065;try{log(profileNameId,'['+botName+_0x1d7ffc(0x170));const subframe0=await genlogin[_0x1d7ffc(0x1a9)](profileNameId,currentPage,getAks[_0x1d7ffc(0x17f)],0x2710);if(!subframe0){log(profileNameId,'['+botName+_0x1d7ffc(0x173),![]);throw new Error(_0x1d7ffc(0x19c));}return log(profileNameId,'['+botName+']Đã\x20tìm\x20thấy\x20iframe'),subframe0;}catch(error){return log(profileNameId,'['+botName+'][Lỗi]:\x20'+error,![]),null;}}async function raGame(){const _0x3fec96=_0x20d065;try{log(profileNameId,'['+botName+_0x3fec96(0x179)),currentPage=genlogin['switchFrame'](profileNameId,currentPage,_0x3fec96(0x1a7),0x7d0);if(!currentPage){log(profileNameId,'['+botName+_0x3fec96(0x169),![]);throw new Error(_0x3fec96(0x16a));}return currentPage;}catch(error){return log(profileNameId,'['+botName+_0x3fec96(0x16b)+error,![]),null;}}async function click(xpath){const _0x503154=_0x20d065;try{await delay(0x3e8);const clicked=await genlogin[_0x503154(0x192)](profileNameId,subframe,{'xpath':xpath,'mainframe':currentPage,'browser':browser},0x3e8);await delay(0x3e8);if(!clicked)return log(profileNameId,'['+botName+_0x503154(0x1a5)+xpath,null,![]),null;return log(profileNameId,'['+botName+_0x503154(0x1af)+xpath+_0x503154(0x1ad)),clicked;}catch(error){return log(profileNameId,'['+botName+_0x503154(0x1b5)+error,null,![]),null;}}async function checkClosePopup(){const _0x529d13=_0x20d065;try{log(profileNameId,'['+botName+_0x529d13(0x166));const kqClosePopup=await genlogin[_0x529d13(0x1a4)](profileNameId,subframe,xpath[_0x529d13(0x19b)],0x7d0);if(!kqClosePopup)log(profileNameId,'['+botName+'][checkClosePopup]Không\x20tìm\x20thayas\x20claimDailyReward',null,![]);else{log(profileNameId,'['+botName+'][checkClosePopup]Tìm\x20thấy\x20claimDailyReward');const clicked=await click(xpath[_0x529d13(0x19b)]);!clicked?log(profileNameId,'['+botName+_0x529d13(0x181),null,![]):log(profileNameId,'['+botName+_0x529d13(0x190));}await delay(0xbb8);const kqClosePopup2=await genlogin[_0x529d13(0x1a4)](profileNameId,subframe,xpath['dailyPopupClose'],0x7d0);if(!kqClosePopup2)log(profileNameId,'['+botName+_0x529d13(0x167),null,![]);else{log(profileNameId,'['+botName+_0x529d13(0x183));const clicked=await click(xpath[_0x529d13(0x16c)]);!clicked?log(profileNameId,'['+botName+'][checkClosePopup]Không\x20click\x20được\x20vào\x20dailyPopupClose',null,![]):log(profileNameId,'['+botName+_0x529d13(0x171));}return await delay(0xbb8),!![];}catch(error){log(profileNameId,'['+botName+'][checkClosePopup]\x20error:\x20'+error[_0x529d13(0x172)],null,![]);}}async function getToaDo(){const _0x3a6e46=_0x20d065;try{log(profileNameId,'['+botName+']get\x20tọa\x20độ\x20nè');const kqCenterPoint=await genlogin[_0x3a6e46(0x176)](profileNameId,currentPage);if(!kqCenterPoint)return log(profileNameId,'['+botName+']Không\x20lấy\x20được\x20centerPoint',null,![]),null;return log(profileNameId,'['+botName+_0x3a6e46(0x196)+json(kqCenterPoint)),kqCenterPoint;}catch(error){return log(profileNameId,'['+botName+_0x3a6e46(0x18e)+error,null,![]),null;}}async function diChuyenChuotZigZag(){const _0xdfe751=_0x20d065;try{log(profileNameId,'['+botName+_0xdfe751(0x16f));const centerP=await getToaDo();if(!centerP)return log(profileNameId,'['+botName+'][diChuyenChuotZigZag]Không\x20tìm\x20thayas\x20centerP',null,![]),null;return log(profileNameId,'['+botName+'][diChuyenChuotZigZag]Tìm\x20thayas\x20centerP:\x20'+json(centerP)),genlogin[_0xdfe751(0x195)](profileNameId,currentPage,centerP['x'],centerP['y'],0xfa,0x30d40,0x3c),log(profileNameId,'['+botName+_0xdfe751(0x180)),!![];}catch(error){log(profileNameId,'['+botName+_0xdfe751(0x1a6)+error['message'],null,![]);}}async function choNhatCoinXong(){const _0x35b187=_0x20d065;try{let maxAttempts=0x78,attempt=0x0;while(attempt<maxAttempts){attempt++;const coinLeft=await genlogin['getTextByXPath'](profileNameId,subframe,xpath[_0x35b187(0x1aa)],0x7d0);if(!coinLeft)return log(profileNameId,'['+botName+'][choNhatCoinXong]\x20Không\x20tìm\x20thấy\x20coinLeft',![]),null;log(profileNameId,'['+botName+_0x35b187(0x1a3)+coinLeft);if(parseInt(coinLeft)<=0x32)return log(profileNameId,'['+botName+_0x35b187(0x191)),!![];log(profileNameId,'['+botName+_0x35b187(0x187)+coinLeft+'|'+attempt),await delay(0x1388);}return log(profileNameId,'['+botName+_0x35b187(0x1b2)+attempt),null;}catch(e){return log(profileNameId,'['+botName+_0x35b187(0x1ae)+e[_0x35b187(0x172)],null,![]),null;}}async function lamQuest(){const _0x1c3be0=_0x20d065;try{log(profileNameId,'['+botName+'][lamQuest]Làm\x20Quest\x20nè');const kq10=await genlogin[_0x1c3be0(0x1a4)](profileNameId,subframe,xpath['quest'],0x7d0);if(!kq10){log(profileNameId,'['+botName+_0x1c3be0(0x18d),![]);throw new Error(_0x1c3be0(0x175));}log(profileNameId,'['+botName+_0x1c3be0(0x164));const clicked=await click(xpath[_0x1c3be0(0x17b)]);if(!clicked){log(profileNameId,'['+botName+_0x1c3be0(0x1a8),![]);throw new Error(_0x1c3be0(0x199));}return log(profileNameId,'['+botName+_0x1c3be0(0x18f)),!![];}catch(error){return log(profileNameId,'['+botName+_0x1c3be0(0x16e)+error,null,![]),null;}}async function getCoin(){const _0x405271=_0x20d065;try{log(profileNameId,'['+botName+_0x405271(0x188));const coin=await genlogin[_0x405271(0x185)](profileNameId,subframe,xpath[_0x405271(0x168)],0x7d0);if(!coin)return log(profileNameId,'['+botName+_0x405271(0x184),null,![]),null;return log(profileNameId,'['+botName+_0x405271(0x194)+coin),coin;}catch(error){return log(profileNameId,'['+botName+_0x405271(0x17a)+error,null,![]),null;}}async function thoigianconlai(thoigianconlai){const _0x3f5dfb=_0x20d065;try{log(profileNameId,'['+botName+_0x3f5dfb(0x189));let parts=thoigianconlai[_0x3f5dfb(0x17d)](':'),hour0=parseInt(parts[0x0]),minute0=parseInt(parts[0x1]),second0=parseInt(parts[0x2]),hours=parseInt(hour0),minutes=parseInt(minute0),seconds=parseInt(second0),totalSeconds=parseInt(hours*0xe10+minutes*0x3c+seconds);const unixTime=Math[_0x3f5dfb(0x182)](Date[_0x3f5dfb(0x1a0)]()/0x3e8),newUnixTime=unixTime+totalSeconds,newDate=new Date(newUnixTime*0x3e8),formattedDate=newDate['toLocaleDateString'](),formattedTime=newDate[_0x3f5dfb(0x1b0)]('en-GB',{'hour12':![]});let NextRun=formattedDate+'\x20'+formattedTime;return{'NextRun':NextRun,'NextRunStamp':newUnixTime};}catch(error){return log(profileNameId,'['+botName+'][thoigianconlai]:\x20'+error,null,![]),null;}}async function delay(ms){return new Promise(async resolve=>{setTimeout(resolve,ms);});}async function cTimeout(){const _0x36904e=_0x20d065;if(Atomics[_0x36904e(0x1b7)](tasksData,taskIndex)===0x1)return!![];return![];}};function a0_0xc187(){const _0x57e8ee=['\x20OK','][choNhatCoinXong]\x20error:\x20','][click]Click\x20','toLocaleTimeString',']Không\x20tìm\x20thấy\x20coin','][choNhatCoinXong]\x20Đã\x20đạt\x20đến\x20số\x20lần\x20thử\x20tối\x20đa\x20','4HJnLsi',']không\x20xử\x20lý\x20được\x20thoigianconlai','][click][Lỗi]:\x20','1195CEjETl','load','][lamQuest]Tìm\x20thấy\x20quest','//p[contains(@class,\x20\x27progress-value\x27)]/text()[1]','][checkClosePopup]\x20checkClosePopup\x20nè','][checkClosePopup]Không\x20tìm\x20thấy\x20dailyPopupClose','coin',']Không\x20tìm\x20thấy\x20main\x20frame','Không\x20tìm\x20thấy\x20main\x20frame','][Lỗi]:\x20','dailyPopupClose',']Không\x20tìm\x20thayas\x20closePopup','][lamQuest]:\x20','][diChuyenChuotZigZag]\x20diChuyenChuotZigZag\x20nè',']Vào\x20game\x20nè','][checkClosePopup]Click\x20dailyPopupClose\x20OK','message',']Không\x20tìm\x20thấy\x20iframe','31817gDxZXv','Không\x20tìm\x20thấy\x20quest','centerPoint','1150435ugwOix',']Tìm\x20thấy\x20coin:\x20',']Ra\x20game\x20nè','][getCoin]:\x20','quest','NextRunStamp','split','(//span[text()=\x27Claim\x27])[1]','Iframe','][diChuyenChuotZigZag]\x20bắt\x20đầu\x20Di\x20chuyển\x20chuột\x20ZigZag','][checkClosePopup]Không\x20click\x20được\x20vào\x20claimDailyReward','floor','][checkClosePopup]Tìm\x20thayas\x20dailyPopupClose','][getCoin]:\x20Không\x20tìm\x20thấy\x20coin','getTextByXPath','NextRun','][autotap]\x20Đang\x20chờ\x20nhặt\x20coin\x20xong\x20','][getCoin]:\x20Xử\x20lý\x20coin\x20nè','][thoigianconlai]:Xử\x20lý\x20gian\x20còn\x20lại\x20nè','1208dENNAH','253428oWNVts','20690EgBFwW','][lamQuest]Không\x20tìm\x20thấy\x20quest','][getToaDo]:\x20','][lamQuest]Click\x20quest\x20OK','][checkClosePopup]Click\x20claimDailyReward\x20OK','][choNhatCoinXong]\x20nhặt\x20coin\x20xong','click',']nhặt\x20coin\x20OK','][getCoin]:\x20Tìm\x20thấy\x20coin:\x20','moveMouseSpiral',']Lấy\x20được\x20centerPoint\x20',']Vào\x20game\x20OK','237954zQFejs','Không\x20click\x20được\x20vào\x20quest',']nextRunAt:\x20','yespacClaim','Không\x20tìm\x20thấy\x20iframe','00:05:00','//div[contains(@class,\x20\x27content-coin-inner\x27)]','5047TMsPmM','now','738GNrpyh','984RLfUeA','][choNhatCoinXong]\x20Tìm\x20thấy\x20coinLeft:\x20','elementExistsByXPath','][click]Không\x20click\x20được\x20vào\x20','][diChuyenChuotZigZag]\x20error:\x20','mainframe','][lamQuest]Không\x20click\x20được\x20vào\x20quest','switchFrame','progressValue',']lỗi\x20nhặt\x20coin','updateData'];a0_0xc187=function(){return _0x57e8ee;};return a0_0xc187();}
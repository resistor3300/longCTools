function a0_0x1cb8(_0x5236e0,_0x115093){const _0x5d4955=a0_0x5d49();return a0_0x1cb8=function(_0x1cb885,_0x3d752a){_0x1cb885=_0x1cb885-0x1ca;let _0x1b0d91=_0x5d4955[_0x1cb885];return _0x1b0d91;},a0_0x1cb8(_0x5236e0,_0x115093);}(function(_0x4e3a1e,_0x114b47){const _0x1df1ff=a0_0x1cb8,_0x721602=_0x4e3a1e();while(!![]){try{const _0x1b88fc=parseInt(_0x1df1ff(0x1e1))/0x1+parseInt(_0x1df1ff(0x207))/0x2+parseInt(_0x1df1ff(0x1dd))/0x3+-parseInt(_0x1df1ff(0x1e8))/0x4*(parseInt(_0x1df1ff(0x21a))/0x5)+parseInt(_0x1df1ff(0x1ff))/0x6*(-parseInt(_0x1df1ff(0x1f4))/0x7)+parseInt(_0x1df1ff(0x1fe))/0x8*(-parseInt(_0x1df1ff(0x217))/0x9)+-parseInt(_0x1df1ff(0x1f3))/0xa*(parseInt(_0x1df1ff(0x213))/0xb);if(_0x1b88fc===_0x114b47)break;else _0x721602['push'](_0x721602['shift']());}catch(_0x17951d){_0x721602['push'](_0x721602['shift']());}}}(a0_0x5d49,0x2c58d));import{log,json}from'../modules/logger.js';export default async function (context,signal){const _0x12e298=a0_0x1cb8,choMs=ms=>new Promise(resolve=>setTimeout(resolve,ms)),{firstPage,bot,profileNameId,getAks,genlogin,http,browser,dataId,screenDataBuffer2,tasksDataBuffer2,taskIndex}=context;let currentPage=firstPage,subframe;const botName=bot[_0x12e298(0x1cc)];let screenData=new Int32Array(screenDataBuffer2),tasksData=new Int32Array(tasksDataBuffer2),demLoop=0x0,remainTime;const xpath={'yespacClaim':_0x12e298(0x205),'dailyPopupClose':_0x12e298(0x1d7),'progressValue':_0x12e298(0x1d0),'coin':_0x12e298(0x1e6)};try{subframe=await vaoGame();if(!subframe){log(profileNameId,'['+botName+']Không\x20tìm\x20thấy\x20iframe',![]);throw new Error(_0x12e298(0x1ee));}log(profileNameId,'['+botName+']Vào\x20game\x20OK'),await delay(0x3e8),await checkClosePopup(),await delay(0x3e8),await diChuyenChuotZigZag();const kqClaim=await choNhatCoinXong();!kqClaim&&log(profileNameId,'['+botName+']lỗi\x20nhặt\x20coin',null,![]);log(profileNameId,'['+botName+_0x12e298(0x219));const coin=await getCoin();!coin&&log(profileNameId,'['+botName+_0x12e298(0x1f8),![]);await http[_0x12e298(0x1de)](profileNameId,profileNameId,dataId,null,null,coin),log(profileNameId,'['+botName+']Tìm\x20thấy\x20coin:\x20'+coin);const remainT=await thoigianconlai(_0x12e298(0x1f6));return!remainT&&log(profileNameId,'['+botName+_0x12e298(0x206),null,![]),log(profileNameId,'['+botName+']Xử\x20lý\x20thoigianconlai\x20OK'),log(profileNameId,'['+botName+_0x12e298(0x208)+remainT['NextRun']),await clearVar(),{'status':!![],'coin':coin,'nextRun':remainT[_0x12e298(0x1df)],'nextRunStamp':remainT['NextRunStamp']};}catch(error){return log(profileNameId,'['+botName+'][Lỗi]:\x20'+error,![]),await clearVar(),{'status':![],'coin':0x0,'nextRun':0x0,'nextRunStamp':0x0};}async function vaoGame(){const _0x56ba6c=_0x12e298;try{log(profileNameId,'['+botName+_0x56ba6c(0x20d));const subframe0=await genlogin[_0x56ba6c(0x1db)](profileNameId,currentPage,getAks[_0x56ba6c(0x1cd)],0x2710);if(!subframe0){log(profileNameId,'['+botName+']Không\x20tìm\x20thấy\x20iframe',![]);throw new Error(_0x56ba6c(0x1ee));}return log(profileNameId,'['+botName+_0x56ba6c(0x1f0)),subframe0;}catch(error){return log(profileNameId,'['+botName+_0x56ba6c(0x1d3)+error,![]),null;}}async function raGame(){const _0x28e9b6=_0x12e298;try{log(profileNameId,'['+botName+']Ra\x20game\x20nè'),currentPage=genlogin['switchFrame'](profileNameId,currentPage,_0x28e9b6(0x1fa),0x7d0);if(!currentPage){log(profileNameId,'['+botName+']Không\x20tìm\x20thấy\x20main\x20frame',![]);throw new Error(_0x28e9b6(0x1fb));}return currentPage;}catch(error){return log(profileNameId,'['+botName+_0x28e9b6(0x1d3)+error,![]),null;}}async function click(xpath){const _0x25e7c9=_0x12e298;try{await delay(0x3e8);const clicked=await genlogin[_0x25e7c9(0x1ea)](profileNameId,subframe,{'xpath':xpath,'mainframe':currentPage,'browser':browser},0x3e8);await delay(0x3e8);if(!clicked)return log(profileNameId,'['+botName+_0x25e7c9(0x20f)+xpath,null,![]),null;return log(profileNameId,'['+botName+_0x25e7c9(0x1e0)+xpath+_0x25e7c9(0x1ce)),clicked;}catch(error){return log(profileNameId,'['+botName+_0x25e7c9(0x1dc)+error,null,![]),null;}}async function checkClosePopup(){const _0x323ffe=_0x12e298,xpathClosePopup={'yespacClaim':'(//div[contains(@class,\x27home-daily-gift-popup\x27)and\x20not(contains(@style,\x27display:\x20none\x27))]//div[contains(@class,\x27popup-gift\x27)]//span[text()=\x27Claim\x27])[1]','yespacClaim1':_0x323ffe(0x1fc),'dailyPopupClose2':_0x323ffe(0x20a),'dailyPopupClose1':_0x323ffe(0x202),'dailyPopupClose3':_0x323ffe(0x1cf),'dailyPopupClose4':_0x323ffe(0x1e9),'dailyPopupClose5':_0x323ffe(0x1d8)},keys=Object[_0x323ffe(0x1f1)](xpathClosePopup),lastKey=keys[keys[_0x323ffe(0x20b)]-0x1];try{log(profileNameId,'['+botName+_0x323ffe(0x1ec),null,'i','-');let demLoop=0x0;const maxDemLoop=0xa;let kqWhile=0x0;while(demLoop<maxDemLoop){demLoop++;for(const [key,xpath]of Object[_0x323ffe(0x1d6)](xpathClosePopup)){log(profileNameId,'['+botName+'][checkClosePopup]\x20XPath:\x20'+xpath+_0x323ffe(0x1f5)+demLoop,null,'i');const kq=await genlogin['elementExistsByXPath'](profileNameId,subframe,xpath,0x3e8);if(kq){log(profileNameId,'['+botName+_0x323ffe(0x1d1)+xpath,null,'i'),await click(xpath,0x3e8),await delay(0x1f4);break;}else key==lastKey&&(kqWhile=0x1);await delay(0x3e8),await AdsGramDetect();}if(kqWhile===0x1)break;}return!![];}catch(error){return log(profileNameId,'['+botName+_0x323ffe(0x201)+error[_0x323ffe(0x1d2)],null,![]),null;}}async function getToaDo(){const _0x51e9e0=_0x12e298;try{log(profileNameId,'['+botName+']get\x20tọa\x20độ\x20nè');const kqCenterPoint=await genlogin[_0x51e9e0(0x1fd)](profileNameId,currentPage);if(!kqCenterPoint)return log(profileNameId,'['+botName+']Không\x20lấy\x20được\x20centerPoint',null,![]),null;return log(profileNameId,'['+botName+_0x51e9e0(0x1e7)+json(kqCenterPoint)),kqCenterPoint;}catch(error){return log(profileNameId,'['+botName+'][getToaDo]:\x20'+error,null,![]),null;}}async function diChuyenChuotZigZag(){const _0xed13e6=_0x12e298;try{log(profileNameId,'['+botName+_0xed13e6(0x1e4));const centerP=await getToaDo();if(!centerP)return log(profileNameId,'['+botName+_0xed13e6(0x210),null,![]),null;return log(profileNameId,'['+botName+'][diChuyenChuotZigZag]Tìm\x20thayas\x20centerP:\x20'+json(centerP)),genlogin[_0xed13e6(0x1d9)](profileNameId,currentPage,centerP['x'],centerP['y'],0xfa,0x30d40,0x3c),log(profileNameId,'['+botName+'][diChuyenChuotZigZag]\x20bắt\x20đầu\x20Di\x20chuyển\x20chuột\x20ZigZag'),!![];}catch(error){log(profileNameId,'['+botName+_0xed13e6(0x1da)+error['message'],null,![]);}}async function choNhatCoinXong(){const _0x10e0f1=_0x12e298;try{let maxAttempts=0x78,attempt=0x0;while(attempt<maxAttempts){attempt++;const coinLeft=await genlogin[_0x10e0f1(0x20e)](profileNameId,subframe,xpath[_0x10e0f1(0x211)],0x7d0);if(!coinLeft)return log(profileNameId,'['+botName+_0x10e0f1(0x212),![]),null;log(profileNameId,'['+botName+'][choNhatCoinXong]\x20Tìm\x20thấy\x20coinLeft:\x20'+coinLeft);if(parseInt(coinLeft)<=0x32)return log(profileNameId,'['+botName+_0x10e0f1(0x214)),!![];log(profileNameId,'['+botName+_0x10e0f1(0x216)+coinLeft+'|'+attempt),await delay(0x1388);}return log(profileNameId,'['+botName+_0x10e0f1(0x1ef)+attempt),null;}catch(e){return log(profileNameId,'['+botName+'][choNhatCoinXong]\x20error:\x20'+e[_0x10e0f1(0x1d2)],null,![]),null;}}async function lamQuest(){const _0xb18e23=_0x12e298;try{log(profileNameId,'['+botName+_0xb18e23(0x21b));const kq10=await genlogin['elementExistsByXPath'](profileNameId,subframe,xpath[_0xb18e23(0x1e5)],0x7d0);if(!kq10){log(profileNameId,'['+botName+_0xb18e23(0x1e2),![]);throw new Error('Không\x20tìm\x20thấy\x20quest');}log(profileNameId,'['+botName+_0xb18e23(0x20c));const clicked=await click(xpath[_0xb18e23(0x1e5)]);if(!clicked){log(profileNameId,'['+botName+'][lamQuest]Không\x20click\x20được\x20vào\x20quest',![]);throw new Error(_0xb18e23(0x1d4));}return log(profileNameId,'['+botName+_0xb18e23(0x1ed)),!![];}catch(error){return log(profileNameId,'['+botName+_0xb18e23(0x215)+error,null,![]),null;}}async function getCoin(){const _0x47dc39=_0x12e298;try{log(profileNameId,'['+botName+'][getCoin]:\x20Xử\x20lý\x20coin\x20nè');const coin=await genlogin[_0x47dc39(0x20e)](profileNameId,subframe,xpath[_0x47dc39(0x1f7)],0x7d0);if(!coin)return log(profileNameId,'['+botName+_0x47dc39(0x200),null,![]),null;return log(profileNameId,'['+botName+'][getCoin]:\x20Tìm\x20thấy\x20coin:\x20'+coin),coin;}catch(error){return log(profileNameId,'['+botName+_0x47dc39(0x218)+error,null,![]),null;}}async function thoigianconlai(thoigianconlai){const _0x5db127=_0x12e298;try{log(profileNameId,'['+botName+'][thoigianconlai]:Xử\x20lý\x20gian\x20còn\x20lại\x20nè');let parts=thoigianconlai[_0x5db127(0x1ca)](':'),hour0=parseInt(parts[0x0]),minute0=parseInt(parts[0x1]),second0=parseInt(parts[0x2]),hours=parseInt(hour0),minutes=parseInt(minute0),seconds=parseInt(second0),totalSeconds=parseInt(hours*0xe10+minutes*0x3c+seconds);const unixTime=Math[_0x5db127(0x1e3)](Date[_0x5db127(0x1f2)]()/0x3e8),newUnixTime=unixTime+totalSeconds,newDate=new Date(newUnixTime*0x3e8),formattedDate=newDate[_0x5db127(0x1d5)](),formattedTime=newDate['toLocaleTimeString']('en-GB',{'hour12':![]});let NextRun=formattedDate+'\x20'+formattedTime;return{'NextRun':NextRun,'NextRunStamp':newUnixTime};}catch(error){return log(profileNameId,'['+botName+_0x5db127(0x1cb)+error,null,![]),null;}}async function AdsGramDetect(){const _0x59dafb=_0x12e298;try{const xpathAdsGram=_0x59dafb(0x204);let kqAdsGram=await genlogin[_0x59dafb(0x209)](profileNameId,subframe,xpathAdsGram,0x3e8);if(kqAdsGram){let demLoop=0x0;const maxDemLoop=0x3c;while(demLoop<maxDemLoop){demLoop++,kqAdsGram=await genlogin[_0x59dafb(0x209)](profileNameId,subframe,xpathAdsGram,0x3e8),log(profileNameId,'['+botName+_0x59dafb(0x1eb)+demLoop+'/'+maxDemLoop,null,'i');if(!kqAdsGram){log(profileNameId,'['+botName+'][AdsGramDetec]:\x20Done\x20Ads',null,'i');break;}await choMs(0x7d0);}return!![];}else{const kqAdsGram2=await genlogin['elementExistsByXPath'](profileNameId,currentPage,getAks[_0x59dafb(0x1f9)],0x3e8);if(kqAdsGram2)return await clickM(getAks[_0x59dafb(0x1f9)]),!![];return null;}}catch(error){return log(profileNameId,'['+botName+_0x59dafb(0x203)+error,null,![]),null;}}async function delay(ms){return new Promise(async resolve=>{setTimeout(resolve,ms);});}async function cTimeout(){if(Atomics['load'](tasksData,taskIndex)===0x1)return!![];return![];}async function clearVar(){currentPage=null,subframe=null,screenData=null,tasksData=null;}};function a0_0x5d49(){const _0x330ba2=['305787aIWzgr','updateData','NextRun','][click]Click\x20','264598RyNfjB','][lamQuest]Không\x20tìm\x20thấy\x20quest','floor','][diChuyenChuotZigZag]\x20diChuyenChuotZigZag\x20nè','quest','//div[contains(@class,\x20\x27coin-value-block\x27)]',']Lấy\x20được\x20centerPoint\x20','4HRcyxY','//div[contains(@class,\x27home-bonus-week-popup\x27)and\x20not(contains(@style,\x27display:\x20none\x27))]//img[contains(@class,\x27popup-close\x27)]','click','][AdsGramDetec]:\x20đang\x20chờ\x20Ads\x20','][checkClosePopup]\x20checkClosePopup\x20nè','][lamQuest]Click\x20quest\x20OK','Không\x20tìm\x20thấy\x20iframe','][choNhatCoinXong]\x20Đã\x20đạt\x20đến\x20số\x20lần\x20thử\x20tối\x20đa\x20',']Đã\x20tìm\x20thấy\x20iframe','keys','now','43060YxdhAS','1813dbFldz','\x20demLoop:','00:05:00','coin',']Không\x20tìm\x20thấy\x20coin','closeAds','mainframe','Không\x20tìm\x20thấy\x20main\x20frame','(//div[contains(@class,\x27van-overlay\x27)and\x20not(contains(@style,\x27display:\x20none\x27))]//div[contains(@class,\x27popup-bonus\x27)]//span[text()=\x27Claim\x27])[1]','centerPoint','8vnbZBX','372PFfFda','][getCoin]:\x20Không\x20tìm\x20thấy\x20coin','][checkClosePopup]\x20error:\x20','//div[contains(@class,\x27van-overlay\x27)and\x20not(contains(@style,\x27display:\x20none\x27))]//div[contains(@class,\x27popup-content\x20home-daily-task-popup\x27)]//div[contains(@class,\x27popup-close\x27)]','][AdsGramDetec]:\x20','//div[contains(@style,\x27-adsgram-\x27)]','(//span[text()=\x27Claim\x27])[1]',']không\x20xử\x20lý\x20được\x20thoigianconlai','291968QrMFAu',']nextRunAt:\x20','elementExistsByXPath','//div[contains(@class,\x27home-bonus-week-popup\x27)and\x20not(contains(@style,\x27display:\x20none\x27))]//div[contains(@class,\x27popup-content\x27)]//img[contains(@class,\x27popup-close\x27)]','length','][lamQuest]Tìm\x20thấy\x20quest',']Vào\x20game\x20nè','getTextByXPath','][click]Không\x20click\x20được\x20vào\x20','][diChuyenChuotZigZag]Không\x20tìm\x20thayas\x20centerP','progressValue','][choNhatCoinXong]\x20Không\x20tìm\x20thấy\x20coinLeft','231fLWHlk','][choNhatCoinXong]\x20nhặt\x20coin\x20xong','][lamQuest]:\x20','][autotap]\x20Đang\x20chờ\x20nhặt\x20coin\x20xong\x20','424989Fteurj','][getCoin]:\x20',']nhặt\x20coin\x20OK','885805jJhIWb','][lamQuest]Làm\x20Quest\x20nè','split','][thoigianconlai]:\x20','name','Iframe','\x20OK','//div[contains(@class,\x27van-overlay\x27)and\x20not(contains(@style,\x27display:\x20none\x27))]//img[contains(@class,\x27close-icon\x27)]','//p[contains(@class,\x20\x27progress-value\x27)]/text()[1]','][checkClosePopup]\x20Click:\x20','message','][Lỗi]:\x20','Không\x20click\x20được\x20vào\x20quest','toLocaleDateString','entries','//div[contains(@class,\x27popup-content\x20home-daily-task-popup\x27)]//div[contains(@class,\x27popup-close\x27)]','//div[contains(@class,\x27van-overlay\x27)and\x20not(contains(@style,\x27display:\x20none\x27))]//img[contains(@class,\x27-close\x27)]','moveMouseSpiral','][diChuyenChuotZigZag]\x20error:\x20','switchFrame','][click][Lỗi]:\x20'];a0_0x5d49=function(){return _0x330ba2;};return a0_0x5d49();}
function a0_0x250d(){const _0x444411=['length','elementExistsByXPath','][choNhatCoinXong]\x20Tìm\x20thấy\x20coinLeft:\x20','(//span[text()=\x27Claim\x27])[1]','moveMouseSpiral','][diChuyenChuotZigZag]\x20diChuyenChuotZigZag\x20nè','][lamQuest]Tìm\x20thấy\x20quest','22825629JmiFbn','87660HgtiEM','][lamQuest]Làm\x20Quest\x20nè','quest','][getCoin]:\x20Xử\x20lý\x20coin\x20nè','\x20demLoop:',']Ra\x20game\x20nè','][getCoin]:\x20Không\x20tìm\x20thấy\x20coin','click','//div[contains(@class,\x27popup-content\x20home-daily-task-popup\x27)]//div[contains(@class,\x27popup-close\x27)]','Iframe','8vdVrgt','318yZeZtW','//div[contains(@class,\x20\x27coin-value-block\x27)]','][Lỗi]:\x20','updateData','\x20OK','][lamQuest]Không\x20click\x20được\x20vào\x20quest','9116heLUyL','centerPoint','progressValue','5592336AXFcZw','][choNhatCoinXong]\x20nhặt\x20coin\x20xong','][checkClosePopup]\x20Click:\x20',']không\x20xử\x20lý\x20được\x20thoigianconlai','NextRun',']lỗi\x20nhặt\x20coin','][choNhatCoinXong]\x20Đã\x20đạt\x20đến\x20số\x20lần\x20thử\x20tối\x20đa\x20','name','en-GB','message',']nextRunAt:\x20','switchFrame','Không\x20tìm\x20thấy\x20iframe','toLocaleDateString','9149982DiJieY','][diChuyenChuotZigZag]\x20bắt\x20đầu\x20Di\x20chuyển\x20chuột\x20ZigZag',']Xử\x20lý\x20thoigianconlai\x20OK',']Vào\x20game\x20OK','5233039GNCOmm','keys','getTextByXPath','][checkClosePopup]\x20error:\x20','][getToaDo]:\x20',']Không\x20lấy\x20được\x20centerPoint','//div[contains(@class,\x27van-overlay\x27)and\x20not(contains(@style,\x27display:\x20none\x27))]//img[contains(@class,\x27rebate-close\x27)]','][lamQuest]:\x20','][autotap]\x20Đang\x20chờ\x20nhặt\x20coin\x20xong\x20',']Không\x20tìm\x20thấy\x20iframe',']get\x20tọa\x20độ\x20nè','][thoigianconlai]:Xử\x20lý\x20gian\x20còn\x20lại\x20nè','][click]Click\x20','][checkClosePopup]\x20XPath:\x20','][choNhatCoinXong]\x20error:\x20','now','load','//div[contains(@class,\x27popup-content\x27)]//img[contains(@class,\x27popup-close\x27)]','][lamQuest]Click\x20quest\x20OK','split','//p[contains(@class,\x20\x27progress-value\x27)]/text()[1]','][thoigianconlai]:\x20','Không\x20tìm\x20thấy\x20main\x20frame','][diChuyenChuotZigZag]\x20error:\x20','][click][Lỗi]:\x20',']Không\x20tìm\x20thấy\x20main\x20frame','Không\x20tìm\x20thấy\x20quest','6153HHYItZ','10OwKpQW','][lamQuest]Không\x20tìm\x20thấy\x20quest'];a0_0x250d=function(){return _0x444411;};return a0_0x250d();}(function(_0x325fff,_0x10d2d1){const _0x18efac=a0_0x12df,_0x57fc05=_0x325fff();while(!![]){try{const _0x25c7c0=parseInt(_0x18efac(0x180))/0x1+-parseInt(_0x18efac(0x150))/0x2*(-parseInt(_0x18efac(0x14a))/0x3)+-parseInt(_0x18efac(0x153))/0x4+parseInt(_0x18efac(0x18b))/0x5+-parseInt(_0x18efac(0x161))/0x6+-parseInt(_0x18efac(0x165))/0x7*(-parseInt(_0x18efac(0x149))/0x8)+parseInt(_0x18efac(0x18a))/0x9*(parseInt(_0x18efac(0x181))/0xa);if(_0x25c7c0===_0x10d2d1)break;else _0x57fc05['push'](_0x57fc05['shift']());}catch(_0x1b5ff3){_0x57fc05['push'](_0x57fc05['shift']());}}}(a0_0x250d,0xd3cb6));import{log,json}from'../modules/logger.js';function a0_0x12df(_0x2b5b11,_0x593b3e){const _0x250dce=a0_0x250d();return a0_0x12df=function(_0x12df45,_0x2fdd6e){_0x12df45=_0x12df45-0x147;let _0x2269c8=_0x250dce[_0x12df45];return _0x2269c8;},a0_0x12df(_0x2b5b11,_0x593b3e);}export default async function (context,signal){const _0x162a94=a0_0x12df,choMs=ms=>new Promise(resolve=>setTimeout(resolve,ms)),{firstPage,bot,profileNameId,getAks,genlogin,http,browser,dataId,screenDataBuffer2,tasksDataBuffer2,taskIndex}=context;let currentPage=firstPage,subframe;const botName=bot[_0x162a94(0x15a)];let screenData=new Int32Array(screenDataBuffer2),tasksData=new Int32Array(tasksDataBuffer2),demLoop=0x0,remainTime;const xpath={'yespacClaim':_0x162a94(0x186),'dailyPopupClose':_0x162a94(0x147),'progressValue':_0x162a94(0x179),'coin':_0x162a94(0x14b)};try{subframe=await vaoGame();if(!subframe){log(profileNameId,'['+botName+']Không\x20tìm\x20thấy\x20iframe',![]);throw new Error(_0x162a94(0x15f));}log(profileNameId,'['+botName+_0x162a94(0x164)),await delay(0x3e8),await checkClosePopup(),await delay(0x3e8),await diChuyenChuotZigZag();const kqClaim=await choNhatCoinXong();!kqClaim&&log(profileNameId,'['+botName+_0x162a94(0x158),null,![]);log(profileNameId,'['+botName+']nhặt\x20coin\x20OK');const coin=await getCoin();!coin&&log(profileNameId,'['+botName+']Không\x20tìm\x20thấy\x20coin',![]);await http[_0x162a94(0x14d)](profileNameId,profileNameId,dataId,null,null,coin),log(profileNameId,'['+botName+']Tìm\x20thấy\x20coin:\x20'+coin);const remainT=await thoigianconlai('00:05:00');return!remainT&&log(profileNameId,'['+botName+_0x162a94(0x156),null,![]),log(profileNameId,'['+botName+_0x162a94(0x163)),log(profileNameId,'['+botName+_0x162a94(0x15d)+remainT[_0x162a94(0x157)]),await clearVar(),{'status':!![],'coin':coin,'nextRun':remainT[_0x162a94(0x157)],'nextRunStamp':remainT['NextRunStamp']};}catch(error){return log(profileNameId,'['+botName+_0x162a94(0x14c)+error,![]),await clearVar(),{'status':![],'coin':0x0,'nextRun':0x0,'nextRunStamp':0x0};}async function vaoGame(){const _0x7b7588=_0x162a94;try{log(profileNameId,'['+botName+']Vào\x20game\x20nè');const subframe0=await genlogin[_0x7b7588(0x15e)](profileNameId,currentPage,getAks[_0x7b7588(0x148)],0x2710);if(!subframe0){log(profileNameId,'['+botName+_0x7b7588(0x16e),![]);throw new Error('Không\x20tìm\x20thấy\x20iframe');}return log(profileNameId,'['+botName+']Đã\x20tìm\x20thấy\x20iframe'),subframe0;}catch(error){return log(profileNameId,'['+botName+'][Lỗi]:\x20'+error,![]),null;}}async function raGame(){const _0x3efe90=_0x162a94;try{log(profileNameId,'['+botName+_0x3efe90(0x190)),currentPage=genlogin[_0x3efe90(0x15e)](profileNameId,currentPage,'mainframe',0x7d0);if(!currentPage){log(profileNameId,'['+botName+_0x3efe90(0x17e),![]);throw new Error(_0x3efe90(0x17b));}return currentPage;}catch(error){return log(profileNameId,'['+botName+'][Lỗi]:\x20'+error,![]),null;}}async function click(xpath){const _0x4706c2=_0x162a94;try{await delay(0x3e8);const clicked=await genlogin[_0x4706c2(0x192)](profileNameId,subframe,{'xpath':xpath,'mainframe':currentPage,'browser':browser},0x3e8);await delay(0x3e8);if(!clicked)return log(profileNameId,'['+botName+'][click]Không\x20click\x20được\x20vào\x20'+xpath,null,![]),null;return log(profileNameId,'['+botName+_0x4706c2(0x171)+xpath+_0x4706c2(0x14e)),clicked;}catch(error){return log(profileNameId,'['+botName+_0x4706c2(0x17d)+error,null,![]),null;}}async function checkClosePopup(){const _0x24e41b=_0x162a94,xpathClosePopup={'yespacClaim':'(//span[text()=\x27Claim\x27])[1]','dailyPopupClose':_0x24e41b(0x147),'dailyPopupClose1':_0x24e41b(0x16b),'dailyPopupClose2':_0x24e41b(0x176)},keys=Object[_0x24e41b(0x166)](xpathClosePopup),lastKey=keys[keys[_0x24e41b(0x183)]-0x1];try{log(profileNameId,'['+botName+'][checkClosePopup]\x20checkClosePopup\x20nè',null,'i','-');let demLoop=0x0;const maxDemLoop=0xa;let kqWhile=0x0;while(demLoop<maxDemLoop){demLoop++;for(const [key,xpath]of Object['entries'](xpathClosePopup)){log(profileNameId,'['+botName+_0x24e41b(0x172)+xpath+_0x24e41b(0x18f)+demLoop,null,'i');const kq=await genlogin[_0x24e41b(0x184)](profileNameId,subframe,xpath,0x3e8);if(kq){log(profileNameId,'['+botName+_0x24e41b(0x155)+xpath,null,'i'),await click(xpath,0x3e8),await delay(0x1f4);break;}else key==lastKey&&(kqWhile=0x1);}if(kqWhile===0x1)break;}return!![];}catch(error){return log(profileNameId,'['+botName+_0x24e41b(0x168)+error[_0x24e41b(0x15c)],null,![]),null;}}async function getToaDo(){const _0x29856a=_0x162a94;try{log(profileNameId,'['+botName+_0x29856a(0x16f));const kqCenterPoint=await genlogin[_0x29856a(0x151)](profileNameId,currentPage);if(!kqCenterPoint)return log(profileNameId,'['+botName+_0x29856a(0x16a),null,![]),null;return log(profileNameId,'['+botName+']Lấy\x20được\x20centerPoint\x20'+json(kqCenterPoint)),kqCenterPoint;}catch(error){return log(profileNameId,'['+botName+_0x29856a(0x169)+error,null,![]),null;}}async function diChuyenChuotZigZag(){const _0x1040cb=_0x162a94;try{log(profileNameId,'['+botName+_0x1040cb(0x188));const centerP=await getToaDo();if(!centerP)return log(profileNameId,'['+botName+'][diChuyenChuotZigZag]Không\x20tìm\x20thayas\x20centerP',null,![]),null;return log(profileNameId,'['+botName+'][diChuyenChuotZigZag]Tìm\x20thayas\x20centerP:\x20'+json(centerP)),genlogin[_0x1040cb(0x187)](profileNameId,currentPage,centerP['x'],centerP['y'],0xfa,0x30d40,0x3c),log(profileNameId,'['+botName+_0x1040cb(0x162)),!![];}catch(error){log(profileNameId,'['+botName+_0x1040cb(0x17c)+error[_0x1040cb(0x15c)],null,![]);}}async function choNhatCoinXong(){const _0x3747c5=_0x162a94;try{let maxAttempts=0x78,attempt=0x0;while(attempt<maxAttempts){attempt++;const coinLeft=await genlogin[_0x3747c5(0x167)](profileNameId,subframe,xpath[_0x3747c5(0x152)],0x7d0);if(!coinLeft)return log(profileNameId,'['+botName+'][choNhatCoinXong]\x20Không\x20tìm\x20thấy\x20coinLeft',![]),null;log(profileNameId,'['+botName+_0x3747c5(0x185)+coinLeft);if(parseInt(coinLeft)<=0x32)return log(profileNameId,'['+botName+_0x3747c5(0x154)),!![];log(profileNameId,'['+botName+_0x3747c5(0x16d)+coinLeft+'|'+attempt),await delay(0x1388);}return log(profileNameId,'['+botName+_0x3747c5(0x159)+attempt),null;}catch(e){return log(profileNameId,'['+botName+_0x3747c5(0x173)+e[_0x3747c5(0x15c)],null,![]),null;}}async function lamQuest(){const _0x5a9d3a=_0x162a94;try{log(profileNameId,'['+botName+_0x5a9d3a(0x18c));const kq10=await genlogin['elementExistsByXPath'](profileNameId,subframe,xpath[_0x5a9d3a(0x18d)],0x7d0);if(!kq10){log(profileNameId,'['+botName+_0x5a9d3a(0x182),![]);throw new Error(_0x5a9d3a(0x17f));}log(profileNameId,'['+botName+_0x5a9d3a(0x189));const clicked=await click(xpath[_0x5a9d3a(0x18d)]);if(!clicked){log(profileNameId,'['+botName+_0x5a9d3a(0x14f),![]);throw new Error('Không\x20click\x20được\x20vào\x20quest');}return log(profileNameId,'['+botName+_0x5a9d3a(0x177)),!![];}catch(error){return log(profileNameId,'['+botName+_0x5a9d3a(0x16c)+error,null,![]),null;}}async function getCoin(){const _0x1bea24=_0x162a94;try{log(profileNameId,'['+botName+_0x1bea24(0x18e));const coin=await genlogin['getTextByXPath'](profileNameId,subframe,xpath['coin'],0x7d0);if(!coin)return log(profileNameId,'['+botName+_0x1bea24(0x191),null,![]),null;return log(profileNameId,'['+botName+'][getCoin]:\x20Tìm\x20thấy\x20coin:\x20'+coin),coin;}catch(error){return log(profileNameId,'['+botName+'][getCoin]:\x20'+error,null,![]),null;}}async function thoigianconlai(thoigianconlai){const _0x106a7e=_0x162a94;try{log(profileNameId,'['+botName+_0x106a7e(0x170));let parts=thoigianconlai[_0x106a7e(0x178)](':'),hour0=parseInt(parts[0x0]),minute0=parseInt(parts[0x1]),second0=parseInt(parts[0x2]),hours=parseInt(hour0),minutes=parseInt(minute0),seconds=parseInt(second0),totalSeconds=parseInt(hours*0xe10+minutes*0x3c+seconds);const unixTime=Math['floor'](Date[_0x106a7e(0x174)]()/0x3e8),newUnixTime=unixTime+totalSeconds,newDate=new Date(newUnixTime*0x3e8),formattedDate=newDate[_0x106a7e(0x160)](),formattedTime=newDate['toLocaleTimeString'](_0x106a7e(0x15b),{'hour12':![]});let NextRun=formattedDate+'\x20'+formattedTime;return{'NextRun':NextRun,'NextRunStamp':newUnixTime};}catch(error){return log(profileNameId,'['+botName+_0x106a7e(0x17a)+error,null,![]),null;}}async function delay(ms){return new Promise(async resolve=>{setTimeout(resolve,ms);});}async function cTimeout(){const _0x34c2cf=_0x162a94;if(Atomics[_0x34c2cf(0x175)](tasksData,taskIndex)===0x1)return!![];return![];}async function clearVar(){currentPage=null,subframe=null,screenData=null,tasksData=null;}};
function a0_0x4286(){const _0x371448=['switchFrame','][lamQuest]Click\x20quest\x20OK',']Đã\x20tìm\x20thấy\x20iframe',']Vào\x20game\x20nè',']không\x20Tìm\x20thấy\x20farming','][Lỗi]:\x20',']không\x20click\x20được\x20vào\x20kqClickReload','Iframe',']Click\x20kqClickReload\x20OK','farming','pupupThreeDotBtn',']Click\x20kqClickReload2\x20OK','1h00m',']Không\x20tìm\x20thấy\x20main\x20frame',']Tìm\x20thấy\x20coinTag','4714405UuVEum',']Không\x20click\x20được\x20vào\x20startFarming','-autoTap','floor','trim',']Xử\x20lý\x20thoigianconlai\x20OK','][lamQuest]Không\x20click\x20được\x20vào\x20quest',']không\x20Tìm\x20thấy\x20remainTTag',']không\x20Tìm\x20thấy\x20kqThreDot','//a[contains(@href,\x20\x27/farming\x27)]','coin','javascript','readFile','//span[contains(@class,\x20\x27text--3pg4pp0\x20size_3--3pg4ppd\x20block\x27)]//div[contains(@class,\x20\x27flex--1xns6ui0\x20size_2--1xns6ui3\x27)]','NextRunStamp',']Auto\x20tap\x20',']Click\x20farming\x20OK','][thoigianconlai]:\x20','elementExistsByXPath','1508826uxLkjy','length','Không\x20tìm\x20thấy\x20quest',']Click\x20claim\x20OK','412336NXXQcH',']tìm\x20thấy\x20closePopup',']không\x20Tìm\x20thấy\x20startFarming','path',']Click\x20closePopup\x20OK','load',']Vào\x20game\x20OK','startFarming',']Ra\x20game\x20nè','606nawKie','click',']không\x20Tìm\x20thấy\x20claim','586668GjfdKY','quest',']Click\x20startFarming\x20OK',']không\x20Tìm\x20thấy\x20coinTag',']không\x20xử\x20lý\x20được\x20thoigianconlai','][click]Không\x20click\x20được\x20vào\x20','][lamQuest]Làm\x20Quest\x20nè',']Không\x20click\x20được\x20vào\x20closePopup',']Tìm\x20thấy\x20coin:\x20','][xuLyFullHp]:\x20','38843ZgPHMo','][lamQuest]:\x20','thoigianconlai','][click]Click\x20','1283643sIgwQK','][autoTap]:\x20','closePopup','name','//span[text()=\x27Start\x20farming\x27]',']Tìm\x20thấy\x20startFarming','NextRun',']Tìm\x20thấy\x20remainTText:\x20','][thoigianconlai]:Xử\x20lý\x20gian\x20còn\x20lại\x20nè','][lamQuest]Tìm\x20thấy\x20quest','mainframe','join','popupReloadBtn','maxday',']không\x20tìm\x20thấy\x20remainTText',']Không\x20click\x20được\x20vào\x20claim',']Tìm\x20thấy\x20farming','Không\x20tìm\x20thấy\x20iframe','\x20OK','toLocaleTimeString',']Không\x20click\x20được\x20vào\x20farming','message','[getFile]\x20error:\x20','getTextByXPath','\x20nè','//span[text()=\x27Ok\x27]',']Không\x20tìm\x20thấy\x20iframe','split','claim',']Tìm\x20thấy\x20claim','8036901arOUJE','4iXAkoQ','][lamQuest]Không\x20tìm\x20thấy\x20quest','][click][Lỗi]:\x20','Không\x20click\x20được\x20vào\x20quest'];a0_0x4286=function(){return _0x371448;};return a0_0x4286();}function a0_0x295a(_0x33091a,_0x32d1fc){const _0x4286bb=a0_0x4286();return a0_0x295a=function(_0x295a70,_0xcaa4ca){_0x295a70=_0x295a70-0x1e5;let _0x52d4ff=_0x4286bb[_0x295a70];return _0x52d4ff;},a0_0x295a(_0x33091a,_0x32d1fc);}(function(_0x17bf1c,_0x3cad9e){const _0x3c14a6=a0_0x295a,_0x29f156=_0x17bf1c();while(!![]){try{const _0x2b1d1a=-parseInt(_0x3c14a6(0x22a))/0x1+-parseInt(_0x3c14a6(0x21a))/0x2+-parseInt(_0x3c14a6(0x238))/0x3+-parseInt(_0x3c14a6(0x1f4))/0x4*(-parseInt(_0x3c14a6(0x207))/0x5)+-parseInt(_0x3c14a6(0x227))/0x6*(-parseInt(_0x3c14a6(0x234))/0x7)+-parseInt(_0x3c14a6(0x21e))/0x8+parseInt(_0x3c14a6(0x1f3))/0x9;if(_0x2b1d1a===_0x3cad9e)break;else _0x29f156['push'](_0x29f156['shift']());}catch(_0x19d62d){_0x29f156['push'](_0x29f156['shift']());}}}(a0_0x4286,0x8c947));import{log,json}from'../modules/logger.js';export default async function (context,signal){const _0x4ee95b=a0_0x295a,choMs=ms=>new Promise(resolve=>setTimeout(resolve,ms)),{firstPage,bot,profileNameId,getAks,genlogin,http,browser,dataId,screenDataBuffer2,tasksDataBuffer2,taskIndex}=context;let currentPage=firstPage,subframe;const botName=bot[_0x4ee95b(0x23b)];let screenData=new Int32Array(screenDataBuffer2),tasksData=new Int32Array(tasksDataBuffer2),demLoop=0x0;const xpath={'closePopup':_0x4ee95b(0x1ee),'farming':_0x4ee95b(0x210),'claim':'//span[text()=\x27Claim\x27]','startFarming':_0x4ee95b(0x23c),'coin':'//div[contains(@class,\x20\x27flex--1xns6ui0\x20size_1--1xns6ui2\x20block\x27)]//span[contains(@class,\x20\x27_1a8kbji0\x20__className_420ce8\x27)]','thoigianconlai':_0x4ee95b(0x214)};try{subframe=await vaoGame();if(!subframe){log(profileNameId,'['+botName+_0x4ee95b(0x1ef),![]);throw new Error(_0x4ee95b(0x1e6));}log(profileNameId,'['+botName+_0x4ee95b(0x224)),await delay(0x3e8);const closePopup=await genlogin[_0x4ee95b(0x219)](profileNameId,subframe,xpath[_0x4ee95b(0x23a)],0x3e8);if(closePopup){log(profileNameId,'['+botName+_0x4ee95b(0x21f)),await delay(0x3e8);const clicked=await click(xpath['closePopup']);!clicked&&log(profileNameId,'['+botName+_0x4ee95b(0x231),null,![]),log(profileNameId,'['+botName+_0x4ee95b(0x222));}const farming=await genlogin['elementExistsByXPath'](profileNameId,subframe,xpath['farming'],0x3e8);!farming?log(profileNameId,'['+botName+_0x4ee95b(0x1fc),null,![]):log(profileNameId,'['+botName+_0x4ee95b(0x1e5));const clickedFarming=await click(xpath[_0x4ee95b(0x201)]);!clickedFarming&&log(profileNameId,'['+botName+_0x4ee95b(0x1e9),null,![]);log(profileNameId,'['+botName+_0x4ee95b(0x217));const kqThreDot=await genlogin[_0x4ee95b(0x219)](profileNameId,currentPage,getAks['pupupThreeDotBtn'],0x3e8);!kqThreDot&&log(profileNameId,'['+botName+_0x4ee95b(0x20f),null,![]);const kqClickReload=await clickM(getAks[_0x4ee95b(0x202)]);!kqClickReload&&log(profileNameId,'['+botName+_0x4ee95b(0x1fe),null,![]);log(profileNameId,'['+botName+_0x4ee95b(0x200));const kqClickReload2=await clickM(getAks[_0x4ee95b(0x244)]);!kqClickReload2&&log(profileNameId,'['+botName+']không\x20click\x20được\x20vào\x20kqClickReload2',null,![]);log(profileNameId,'['+botName+_0x4ee95b(0x203)),await delay(0x7d0);const closePopup2=await genlogin[_0x4ee95b(0x219)](profileNameId,subframe,xpath['closePopup'],0x3e8);if(closePopup2){log(profileNameId,'['+botName+_0x4ee95b(0x21f)),await delay(0x3e8);const clicked=await click(xpath[_0x4ee95b(0x23a)]);!clicked&&log(profileNameId,'['+botName+']Không\x20click\x20được\x20vào\x20closePopup',null,![]),log(profileNameId,'['+botName+_0x4ee95b(0x222));}const claim=await genlogin[_0x4ee95b(0x219)](profileNameId,subframe,xpath[_0x4ee95b(0x1f1)],0x3e8);!claim?log(profileNameId,'['+botName+_0x4ee95b(0x229),null,![]):log(profileNameId,'['+botName+_0x4ee95b(0x1f2));if(claim){const clicked=await click(xpath[_0x4ee95b(0x1f1)]);!clicked?log(profileNameId,'['+botName+_0x4ee95b(0x247),null,![]):log(profileNameId,'['+botName+_0x4ee95b(0x21d)),await delay(0x1388);}const startFarming=await genlogin['elementExistsByXPath'](profileNameId,subframe,xpath['startFarming'],0x3e8);!startFarming?log(profileNameId,'['+botName+_0x4ee95b(0x220),null,![]):log(profileNameId,'['+botName+_0x4ee95b(0x23d));if(startFarming){const clicked1=await click(xpath[_0x4ee95b(0x225)]);!clicked1&&log(profileNameId,'['+botName+_0x4ee95b(0x208),null,![]),log(profileNameId,'['+botName+_0x4ee95b(0x22c));}await delay(0x7d0);const coinTag=await genlogin[_0x4ee95b(0x219)](profileNameId,subframe,xpath['coin'],0x3e8);!coinTag&&log(profileNameId,'['+botName+_0x4ee95b(0x22d),null,![]);log(profileNameId,'['+botName+_0x4ee95b(0x206));const coin=await genlogin[_0x4ee95b(0x1ec)](profileNameId,subframe,xpath[_0x4ee95b(0x211)],0x7d0);!coin&&log(profileNameId,'['+botName+']Không\x20tìm\x20thấy\x20coin',null,![]);log(profileNameId,'['+botName+_0x4ee95b(0x232)+coin);const remainTTag=await genlogin[_0x4ee95b(0x219)](profileNameId,subframe,xpath[_0x4ee95b(0x236)],0x7d0);!remainTTag&&log(profileNameId,'['+botName+_0x4ee95b(0x20e),null,![]);log(profileNameId,'['+botName+']Tìm\x20thấy\x20remainTTag');let remainTText=await genlogin[_0x4ee95b(0x1ec)](profileNameId,subframe,xpath[_0x4ee95b(0x236)],0x7d0);!remainTText&&(log(profileNameId,'['+botName+_0x4ee95b(0x246),null,![]),remainTText=_0x4ee95b(0x204));log(profileNameId,'['+botName+_0x4ee95b(0x23f)+remainTText);const remainT=await thoigianconlai(remainTText);return!remainT&&log(profileNameId,'['+botName+_0x4ee95b(0x22e),null,![]),log(profileNameId,'['+botName+_0x4ee95b(0x20c)),log(profileNameId,'['+botName+']nextRunAt:\x20'+remainT[_0x4ee95b(0x23e)]),{'status':!![],'coin':coin,'nextRun':remainT[_0x4ee95b(0x23e)],'nextRunStamp':remainT[_0x4ee95b(0x215)]};}catch(error){log(profileNameId,'['+botName+_0x4ee95b(0x1fd)+error,null,![]);}async function vaoGame(){const _0x354614=_0x4ee95b;try{log(profileNameId,'['+botName+_0x354614(0x1fb));const subframe0=await genlogin[_0x354614(0x1f8)](profileNameId,currentPage,getAks[_0x354614(0x1ff)],0x2710);if(!subframe0){log(profileNameId,'['+botName+_0x354614(0x1ef),![]);throw new Error(_0x354614(0x1e6));}return log(profileNameId,'['+botName+_0x354614(0x1fa)),subframe0;}catch(error){return log(profileNameId,'['+botName+_0x354614(0x1fd)+error,![]),null;}}async function raGame(){const _0x566b71=_0x4ee95b;try{log(profileNameId,'['+botName+_0x566b71(0x226)),currentPage=genlogin[_0x566b71(0x1f8)](profileNameId,currentPage,_0x566b71(0x242),0x7d0);if(!currentPage){log(profileNameId,'['+botName+_0x566b71(0x205),![]);throw new Error('Không\x20tìm\x20thấy\x20main\x20frame');}return currentPage;}catch(error){return log(profileNameId,'['+botName+_0x566b71(0x1fd)+error,![]),null;}}async function click(xpath){const _0x518887=_0x4ee95b;try{const clicked=await genlogin[_0x518887(0x228)](profileNameId,subframe,{'xpath':xpath,'mainframe':currentPage,'browser':browser},0x3e8);await delay(0x3e8);if(!clicked)return log(profileNameId,'['+botName+_0x518887(0x22f)+xpath,null,![]),null;return log(profileNameId,'['+botName+_0x518887(0x237)+xpath+_0x518887(0x1e7)),clicked;}catch(error){return log(profileNameId,'['+botName+_0x518887(0x1f6)+error,null,![]),null;}}async function clickM(xpath){const _0x153c05=_0x4ee95b;try{await delay(0x3e8);const clicked=await genlogin['click'](profileNameId,currentPage,{'xpath':xpath,'mainframe':currentPage,'browser':browser},0x3e8);await delay(0x3e8);if(!clicked)return log(profileNameId,'['+botName+_0x153c05(0x22f)+xpath,null,![]),null;return log(profileNameId,'['+botName+'][click]Click\x20'+xpath+_0x153c05(0x1e7)),clicked;}catch(error){return log(profileNameId,'['+botName+_0x153c05(0x1f6)+error,null,![]),null;}}async function xuLyFullHp(fullHp){const _0x1fc507=_0x4ee95b;try{let fullhp0=fullHp[_0x1fc507(0x20b)]()['replace'](/,/g,''),parts=fullhp0['split']('\x20'),tapCountPart=parts[_0x1fc507(0x21b)]>=0x3?parseInt(parts[parts[_0x1fc507(0x21b)]-0x3]):null,dayleft=parts[_0x1fc507(0x21b)]>=0x4?parseInt(parts[0x3]):null,daylimit=parts['length']>=0x6?parseInt(parts[0x5]):null,tapElement=tapCountPart;return dayleft!==null&&dayleft<=0x0&&(tapElement=_0x1fc507(0x245)),{'tapElement':tapElement,'dayleft':dayleft,'daylimit':daylimit};}catch(error){return log(profileNameId,'['+botName+_0x1fc507(0x233)+error,null,![]),null;}}async function autoTap(tapElement){const _0x33fcb6=_0x4ee95b;try{log(profileNameId,'['+botName+_0x33fcb6(0x216)+tapElement+_0x33fcb6(0x1ed));let codeAutoTap=await getFile(botName+_0x33fcb6(0x209));return genlogin[_0x33fcb6(0x212)](profileNameId,subframe,codeAutoTap),log(profileNameId,'['+botName+']Auto\x20tap\x20'+tapElement+'\x20OK'),!![];}catch(error){return log(profileNameId,'['+botName+_0x33fcb6(0x239)+error,null,![]),null;}}async function getFile(nameFile){const _0xa47523=_0x4ee95b;try{const fs=require('fs'),path=require(_0xa47523(0x221)),filePath=path[_0xa47523(0x243)](__dirname,_0xa47523(0x212),nameFile),code=await fs['promises'][_0xa47523(0x213)](filePath,'utf8');return code;}catch(e){log(_0xa47523(0x1eb)+e[_0xa47523(0x1ea)]);}}async function lamQuest(){const _0x4be6d3=_0x4ee95b;try{log(profileNameId,'['+botName+_0x4be6d3(0x230));const kq10=await genlogin['elementExistsByXPath'](profileNameId,subframe,xpath[_0x4be6d3(0x22b)],0x7d0);if(!kq10){log(profileNameId,'['+botName+_0x4be6d3(0x1f5),![]);throw new Error(_0x4be6d3(0x21c));}log(profileNameId,'['+botName+_0x4be6d3(0x241));const clicked=await click(xpath['quest']);if(!clicked){log(profileNameId,'['+botName+_0x4be6d3(0x20d),![]);throw new Error(_0x4be6d3(0x1f7));}return log(profileNameId,'['+botName+_0x4be6d3(0x1f9)),!![];}catch(error){return log(profileNameId,'['+botName+_0x4be6d3(0x235)+error,null,![]),null;}}async function thoigianconlai(thoigianconlai){const _0x15e3f2=_0x4ee95b;try{log(profileNameId,'['+botName+_0x15e3f2(0x240));let hour0=thoigianconlai[_0x15e3f2(0x1f0)]('h')[0x0],minute0=thoigianconlai['split']('h')[0x1][_0x15e3f2(0x1f0)]('m')[0x0],hour=parseInt(hour0),minutes=parseInt(minute0),seconds=parseInt(0x0),newtime=hour+':'+minutes+':'+seconds,totalSeconds=parseInt(hour*0xe10+minutes*0x3c+seconds);const unixTime=Math[_0x15e3f2(0x20a)](Date['now']()/0x3e8),newUnixTime=unixTime+totalSeconds,newDate=new Date(newUnixTime*0x3e8),formattedDate=newDate['toLocaleDateString'](),formattedTime=newDate[_0x15e3f2(0x1e8)]('en-GB',{'hour12':![]});let NextRun=formattedDate+'\x20'+formattedTime;return{'NextRun':NextRun,'NextRunStamp':newUnixTime};}catch(error){return log(profileNameId,'['+botName+_0x15e3f2(0x218)+error,null,![]),null;}}async function delay(ms){return new Promise(async resolve=>{setTimeout(resolve,ms);});}async function cTimeout(){const _0x2a8208=_0x4ee95b;if(Atomics[_0x2a8208(0x223)](tasksData,taskIndex)===0x1)return!![];return![];}};
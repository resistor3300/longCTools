function a0_0x37c9(_0x3996a0,_0x51db3e){const _0x3b0bc4=a0_0x3b0b();return a0_0x37c9=function(_0x37c99c,_0x45c5f5){_0x37c99c=_0x37c99c-0x136;let _0x24ddeb=_0x3b0bc4[_0x37c99c];return _0x24ddeb;},a0_0x37c9(_0x3996a0,_0x51db3e);}(function(_0x55606d,_0x5ee2a5){const _0x458e6d=a0_0x37c9,_0x3540c0=_0x55606d();while(!![]){try{const _0x4db62c=-parseInt(_0x458e6d(0x161))/0x1*(-parseInt(_0x458e6d(0x17b))/0x2)+-parseInt(_0x458e6d(0x15b))/0x3*(parseInt(_0x458e6d(0x157))/0x4)+-parseInt(_0x458e6d(0x188))/0x5+parseInt(_0x458e6d(0x156))/0x6*(-parseInt(_0x458e6d(0x171))/0x7)+-parseInt(_0x458e6d(0x158))/0x8*(parseInt(_0x458e6d(0x141))/0x9)+parseInt(_0x458e6d(0x149))/0xa+parseInt(_0x458e6d(0x13f))/0xb;if(_0x4db62c===_0x5ee2a5)break;else _0x3540c0['push'](_0x3540c0['shift']());}catch(_0x1084d1){_0x3540c0['push'](_0x3540c0['shift']());}}}(a0_0x3b0b,0x2df3d));import{log,json}from'../modules/logger.js';export default async function (context,signal){const _0x49d4f3=a0_0x37c9,choMs=ms=>new Promise(resolve=>setTimeout(resolve,ms)),{firstPage,bot,profileNameId,getAks,genlogin,http,browser,dataId,screenDataBuffer2,tasksDataBuffer2,taskIndex}=context;let currentPage=firstPage,subframe;const botName=bot[_0x49d4f3(0x190)];let screenData=new Int32Array(screenDataBuffer2),tasksData=new Int32Array(tasksDataBuffer2),demLoop=0x0;const xpath={'closePopup':_0x49d4f3(0x159),'farming':'//a[contains(@href,\x20\x27/farming\x27)]','claim':_0x49d4f3(0x15a),'startFarming':_0x49d4f3(0x146),'coin':_0x49d4f3(0x17c),'thoigianconlai':_0x49d4f3(0x16a)};try{subframe=await vaoGame();if(!subframe){log(profileNameId,'['+botName+_0x49d4f3(0x172),![]);throw new Error(_0x49d4f3(0x14e));}log(profileNameId,'['+botName+_0x49d4f3(0x160)),await delay(0x3e8);const closePopup=await genlogin[_0x49d4f3(0x16f)](profileNameId,subframe,xpath['closePopup'],0x3e8);if(closePopup){log(profileNameId,'['+botName+_0x49d4f3(0x17f)),await delay(0x3e8);const clicked=await click(xpath[_0x49d4f3(0x15d)]);!clicked&&log(profileNameId,'['+botName+_0x49d4f3(0x14f),null,![]),log(profileNameId,'['+botName+']Click\x20closePopup\x20OK');}const farming=await genlogin[_0x49d4f3(0x16f)](profileNameId,subframe,xpath['farming'],0x3e8);!farming?log(profileNameId,'['+botName+_0x49d4f3(0x155),null,![]):log(profileNameId,'['+botName+_0x49d4f3(0x14d));const clickedFarming=await click(xpath[_0x49d4f3(0x138)]);!clickedFarming&&log(profileNameId,'['+botName+_0x49d4f3(0x14c),null,![]);log(profileNameId,'['+botName+']Click\x20farming\x20OK');const kqThreDot=await genlogin['elementExistsByXPath'](profileNameId,currentPage,getAks[_0x49d4f3(0x187)],0x3e8);!kqThreDot&&log(profileNameId,'['+botName+_0x49d4f3(0x136),null,![]);const kqClickReload=await clickM(getAks[_0x49d4f3(0x187)]);!kqClickReload&&log(profileNameId,'['+botName+_0x49d4f3(0x175),null,![]);log(profileNameId,'['+botName+']Click\x20kqClickReload\x20OK');const kqClickReload2=await clickM(getAks[_0x49d4f3(0x142)]);!kqClickReload2&&log(profileNameId,'['+botName+_0x49d4f3(0x15f),null,![]);log(profileNameId,'['+botName+_0x49d4f3(0x162)),await delay(0x7d0);const closePopup2=await genlogin[_0x49d4f3(0x16f)](profileNameId,subframe,xpath['closePopup'],0x3e8);if(closePopup2){log(profileNameId,'['+botName+_0x49d4f3(0x17f)),await delay(0x3e8);const clicked=await click(xpath['closePopup']);!clicked&&log(profileNameId,'['+botName+_0x49d4f3(0x14f),null,![]),log(profileNameId,'['+botName+_0x49d4f3(0x145));}const claim=await genlogin[_0x49d4f3(0x16f)](profileNameId,subframe,xpath[_0x49d4f3(0x154)],0x3e8);!claim?log(profileNameId,'['+botName+_0x49d4f3(0x14a),null,![]):log(profileNameId,'['+botName+_0x49d4f3(0x168));if(claim){const clicked=await click(xpath[_0x49d4f3(0x154)]);!clicked?log(profileNameId,'['+botName+']Không\x20click\x20được\x20vào\x20claim',null,![]):log(profileNameId,'['+botName+_0x49d4f3(0x182)),await delay(0x1388);}const startFarming=await genlogin['elementExistsByXPath'](profileNameId,subframe,xpath[_0x49d4f3(0x164)],0x3e8);!startFarming?log(profileNameId,'['+botName+_0x49d4f3(0x174),null,![]):log(profileNameId,'['+botName+_0x49d4f3(0x151));if(startFarming){const clicked1=await click(xpath[_0x49d4f3(0x164)]);!clicked1&&log(profileNameId,'['+botName+']Không\x20click\x20được\x20vào\x20startFarming',null,![]),log(profileNameId,'['+botName+_0x49d4f3(0x16d));}await delay(0x7d0);const coinTag=await genlogin[_0x49d4f3(0x16f)](profileNameId,subframe,xpath[_0x49d4f3(0x176)],0x3e8);!coinTag&&log(profileNameId,'['+botName+']không\x20Tìm\x20thấy\x20coinTag',null,![]);log(profileNameId,'['+botName+_0x49d4f3(0x13a));const coin=await genlogin['getTextByXPath'](profileNameId,subframe,xpath[_0x49d4f3(0x176)],0x7d0);!coin&&log(profileNameId,'['+botName+_0x49d4f3(0x183),null,![]);log(profileNameId,'['+botName+_0x49d4f3(0x167)+coin);const remainTTag=await genlogin[_0x49d4f3(0x16f)](profileNameId,subframe,xpath[_0x49d4f3(0x13c)],0x7d0);!remainTTag&&log(profileNameId,'['+botName+_0x49d4f3(0x14b),null,![]);log(profileNameId,'['+botName+_0x49d4f3(0x181));let remainTText=await genlogin[_0x49d4f3(0x17d)](profileNameId,subframe,xpath[_0x49d4f3(0x13c)],0x7d0);!remainTText&&(log(profileNameId,'['+botName+_0x49d4f3(0x18b),null,![]),remainTText=_0x49d4f3(0x166));log(profileNameId,'['+botName+_0x49d4f3(0x15e)+remainTText);const remainT=await thoigianconlai(remainTText);return!remainT&&log(profileNameId,'['+botName+']không\x20xử\x20lý\x20được\x20thoigianconlai',null,![]),log(profileNameId,'['+botName+_0x49d4f3(0x144)),log(profileNameId,'['+botName+']nextRunAt:\x20'+remainT[_0x49d4f3(0x170)]),await clearVar(),{'status':!![],'coin':coin,'nextRun':remainT['NextRun'],'nextRunStamp':remainT[_0x49d4f3(0x13d)]};}catch(error){return log(profileNameId,'['+botName+'][Lỗi]:\x20'+error,null,![]),await clearVar(),null;}async function vaoGame(){const _0x4e33c1=_0x49d4f3;try{log(profileNameId,'['+botName+']Vào\x20game\x20nè');const subframe0=await genlogin[_0x4e33c1(0x16b)](profileNameId,currentPage,getAks['Iframe'],0x2710);if(!subframe0){log(profileNameId,'['+botName+_0x4e33c1(0x172),![]);throw new Error('Không\x20tìm\x20thấy\x20iframe');}return log(profileNameId,'['+botName+']Đã\x20tìm\x20thấy\x20iframe'),subframe0;}catch(error){return log(profileNameId,'['+botName+'][Lỗi]:\x20'+error,![]),null;}}async function raGame(){const _0x801b3f=_0x49d4f3;try{log(profileNameId,'['+botName+']Ra\x20game\x20nè'),currentPage=genlogin[_0x801b3f(0x16b)](profileNameId,currentPage,_0x801b3f(0x18e),0x7d0);if(!currentPage){log(profileNameId,'['+botName+']Không\x20tìm\x20thấy\x20main\x20frame',![]);throw new Error(_0x801b3f(0x150));}return currentPage;}catch(error){return log(profileNameId,'['+botName+_0x801b3f(0x184)+error,![]),null;}}async function click(xpath){const _0x5698f6=_0x49d4f3;try{const clicked=await genlogin[_0x5698f6(0x139)](profileNameId,subframe,{'xpath':xpath,'mainframe':currentPage,'browser':browser},0x3e8);await delay(0x3e8);if(!clicked)return log(profileNameId,'['+botName+_0x5698f6(0x17e)+xpath,null,![]),null;return log(profileNameId,'['+botName+'][click]Click\x20'+xpath+'\x20OK'),clicked;}catch(error){return log(profileNameId,'['+botName+_0x5698f6(0x179)+error,null,![]),null;}}async function clickM(xpath){const _0x5544a7=_0x49d4f3;try{await delay(0x3e8);const clicked=await genlogin[_0x5544a7(0x139)](profileNameId,currentPage,{'xpath':xpath,'mainframe':currentPage,'browser':browser},0x3e8);await delay(0x3e8);if(!clicked)return log(profileNameId,'['+botName+_0x5544a7(0x17e)+xpath,null,![]),null;return log(profileNameId,'['+botName+'][click]Click\x20'+xpath+_0x5544a7(0x152)),clicked;}catch(error){return log(profileNameId,'['+botName+_0x5544a7(0x179)+error,null,![]),null;}}async function xuLyFullHp(fullHp){const _0x2b171e=_0x49d4f3;try{let fullhp0=fullHp[_0x2b171e(0x186)]()['replace'](/,/g,''),parts=fullhp0[_0x2b171e(0x18f)]('\x20'),tapCountPart=parts[_0x2b171e(0x13b)]>=0x3?parseInt(parts[parts['length']-0x3]):null,dayleft=parts[_0x2b171e(0x13b)]>=0x4?parseInt(parts[0x3]):null,daylimit=parts['length']>=0x6?parseInt(parts[0x5]):null,tapElement=tapCountPart;return dayleft!==null&&dayleft<=0x0&&(tapElement=_0x2b171e(0x140)),{'tapElement':tapElement,'dayleft':dayleft,'daylimit':daylimit};}catch(error){return log(profileNameId,'['+botName+_0x2b171e(0x180)+error,null,![]),null;}}async function autoTap(tapElement){const _0x5205ef=_0x49d4f3;try{log(profileNameId,'['+botName+_0x5205ef(0x169)+tapElement+'\x20nè');let codeAutoTap=await getFile(botName+'-autoTap');return genlogin[_0x5205ef(0x185)](profileNameId,subframe,codeAutoTap),log(profileNameId,'['+botName+_0x5205ef(0x169)+tapElement+'\x20OK'),!![];}catch(error){return log(profileNameId,'['+botName+_0x5205ef(0x16e)+error,null,![]),null;}}async function getFile(nameFile){const _0x4add9c=_0x49d4f3;try{const fs=require('fs'),path=require(_0x4add9c(0x173)),filePath=path['join'](__dirname,_0x4add9c(0x185),nameFile),code=await fs[_0x4add9c(0x148)][_0x4add9c(0x153)](filePath,_0x4add9c(0x17a));return code;}catch(e){log('[getFile]\x20error:\x20'+e[_0x4add9c(0x143)]);}}async function lamQuest(){const _0x27a271=_0x49d4f3;try{log(profileNameId,'['+botName+_0x27a271(0x18c));const kq10=await genlogin[_0x27a271(0x16f)](profileNameId,subframe,xpath[_0x27a271(0x177)],0x7d0);if(!kq10){log(profileNameId,'['+botName+'][lamQuest]Không\x20tìm\x20thấy\x20quest',![]);throw new Error(_0x27a271(0x189));}log(profileNameId,'['+botName+'][lamQuest]Tìm\x20thấy\x20quest');const clicked=await click(xpath[_0x27a271(0x177)]);if(!clicked){log(profileNameId,'['+botName+_0x27a271(0x15c),![]);throw new Error('Không\x20click\x20được\x20vào\x20quest');}return log(profileNameId,'['+botName+_0x27a271(0x18d)),!![];}catch(error){return log(profileNameId,'['+botName+'][lamQuest]:\x20'+error,null,![]),null;}}async function thoigianconlai(thoigianconlai){const _0x3e957d=_0x49d4f3;try{log(profileNameId,'['+botName+_0x3e957d(0x16c));let hour0=thoigianconlai[_0x3e957d(0x18f)]('h')[0x0],minute0=thoigianconlai[_0x3e957d(0x18f)]('h')[0x1]['split']('m')[0x0],hour=parseInt(hour0),minutes=parseInt(minute0),seconds=parseInt(0x0),newtime=hour+':'+minutes+':'+seconds,totalSeconds=parseInt(hour*0xe10+minutes*0x3c+seconds);const unixTime=Math[_0x3e957d(0x147)](Date[_0x3e957d(0x18a)]()/0x3e8),newUnixTime=unixTime+totalSeconds,newDate=new Date(newUnixTime*0x3e8),formattedDate=newDate[_0x3e957d(0x178)](),formattedTime=newDate[_0x3e957d(0x163)](_0x3e957d(0x137),{'hour12':![]});let NextRun=formattedDate+'\x20'+formattedTime;return{'NextRun':NextRun,'NextRunStamp':newUnixTime};}catch(error){return log(profileNameId,'['+botName+_0x3e957d(0x165)+error,null,![]),null;}}async function delay(ms){return new Promise(async resolve=>{setTimeout(resolve,ms);});}async function cTimeout(){const _0x1eb782=_0x49d4f3;if(Atomics[_0x1eb782(0x13e)](tasksData,taskIndex)===0x1)return!![];return![];}async function clearVar(){currentPage=null,subframe=null,screenData=null,tasksData=null;}};function a0_0x3b0b(){const _0x2ba257=['905180SIKvwy','Không\x20tìm\x20thấy\x20quest','now',']không\x20tìm\x20thấy\x20remainTText','][lamQuest]Làm\x20Quest\x20nè','][lamQuest]Click\x20quest\x20OK','mainframe','split','name',']không\x20Tìm\x20thấy\x20kqThreDot','en-GB','farming','click',']Tìm\x20thấy\x20coinTag','length','thoigianconlai','NextRunStamp','load','6357714djcjmi','maxday','8739pFeOsi','popupReloadBtn','message',']Xử\x20lý\x20thoigianconlai\x20OK',']Click\x20closePopup\x20OK','//span[text()=\x27Start\x20farming\x27]','floor','promises','1563580KSTpGe',']không\x20Tìm\x20thấy\x20claim',']không\x20Tìm\x20thấy\x20remainTTag',']Không\x20click\x20được\x20vào\x20farming',']Tìm\x20thấy\x20farming','Không\x20tìm\x20thấy\x20iframe',']Không\x20click\x20được\x20vào\x20closePopup','Không\x20tìm\x20thấy\x20main\x20frame',']Tìm\x20thấy\x20startFarming','\x20OK','readFile','claim',']không\x20Tìm\x20thấy\x20farming','36678QgBluR','287852VRYsYv','2216FOjZHQ','//span[text()=\x27Ok\x27]','//span[text()=\x27Claim\x27]','3etzqbW','][lamQuest]Không\x20click\x20được\x20vào\x20quest','closePopup',']Tìm\x20thấy\x20remainTText:\x20',']không\x20click\x20được\x20vào\x20kqClickReload2',']Vào\x20game\x20OK','263166tIVbrW',']Click\x20kqClickReload2\x20OK','toLocaleTimeString','startFarming','][thoigianconlai]:\x20','1h00m',']Tìm\x20thấy\x20coin:\x20',']Tìm\x20thấy\x20claim',']Auto\x20tap\x20','//span[contains(@class,\x20\x27text--3pg4pp0\x20size_3--3pg4ppd\x20block\x27)]//div[contains(@class,\x20\x27flex--1xns6ui0\x20size_2--1xns6ui3\x27)]','switchFrame','][thoigianconlai]:Xử\x20lý\x20gian\x20còn\x20lại\x20nè',']Click\x20startFarming\x20OK','][autoTap]:\x20','elementExistsByXPath','NextRun','329VyydLh',']Không\x20tìm\x20thấy\x20iframe','path',']không\x20Tìm\x20thấy\x20startFarming',']không\x20click\x20được\x20vào\x20kqClickReload','coin','quest','toLocaleDateString','][click][Lỗi]:\x20','utf8','2cTXdhB','//div[contains(@class,\x20\x27flex--1xns6ui0\x20size_1--1xns6ui2\x20block\x27)]//span[contains(@class,\x20\x27_1a8kbji0\x20__className_420ce8\x27)]','getTextByXPath','][click]Không\x20click\x20được\x20vào\x20',']tìm\x20thấy\x20closePopup','][xuLyFullHp]:\x20',']Tìm\x20thấy\x20remainTTag',']Click\x20claim\x20OK',']Không\x20tìm\x20thấy\x20coin','][Lỗi]:\x20','javascript','trim','pupupThreeDotBtn'];a0_0x3b0b=function(){return _0x2ba257;};return a0_0x3b0b();}
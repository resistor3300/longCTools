(function(_0x38d8ce,_0x5139a1){const _0x1dc5dc=a0_0x5a16,_0x220dd2=_0x38d8ce();while(!![]){try{const _0x2428cb=-parseInt(_0x1dc5dc(0x1f6))/0x1*(-parseInt(_0x1dc5dc(0x1b6))/0x2)+parseInt(_0x1dc5dc(0x1b8))/0x3*(-parseInt(_0x1dc5dc(0x1e0))/0x4)+-parseInt(_0x1dc5dc(0x1b3))/0x5*(-parseInt(_0x1dc5dc(0x1fa))/0x6)+parseInt(_0x1dc5dc(0x1a5))/0x7*(-parseInt(_0x1dc5dc(0x1d4))/0x8)+parseInt(_0x1dc5dc(0x1a0))/0x9+-parseInt(_0x1dc5dc(0x1f5))/0xa+parseInt(_0x1dc5dc(0x1d3))/0xb;if(_0x2428cb===_0x5139a1)break;else _0x220dd2['push'](_0x220dd2['shift']());}catch(_0x474010){_0x220dd2['push'](_0x220dd2['shift']());}}}(a0_0x3ac5,0x1d8d7));import{log,json}from'../modules/logger.js';function a0_0x5a16(_0x138292,_0x425352){const _0x3ac527=a0_0x3ac5();return a0_0x5a16=function(_0x5a1671,_0x4f3f55){_0x5a1671=_0x5a1671-0x19f;let _0x4275f4=_0x3ac527[_0x5a1671];return _0x4275f4;},a0_0x5a16(_0x138292,_0x425352);}export default async function (context,signal){const _0x520b36=a0_0x5a16,choMs=ms=>new Promise(resolve=>setTimeout(resolve,ms)),{firstPage,bot,profileNameId,getAks,genlogin,http,browser,dataId,screenDataBuffer2,tasksDataBuffer2,taskIndex}=context;let currentPage=firstPage,subframe;const botName=bot[_0x520b36(0x1bd)];let screenData=new Int32Array(screenDataBuffer2),tasksData=new Int32Array(tasksDataBuffer2),demLoop=0x0;const xpath={'closePopup':_0x520b36(0x1a1),'farming':_0x520b36(0x1b4),'claim':_0x520b36(0x1ee),'startFarming':'//span[text()=\x27Start\x20farming\x27]','coin':_0x520b36(0x1c5),'thoigianconlai':_0x520b36(0x1aa)};try{subframe=await vaoGame();if(!subframe){log(profileNameId,'['+botName+_0x520b36(0x1ec),![]);throw new Error(_0x520b36(0x1be));}log(profileNameId,'['+botName+']Vào\x20game\x20OK'),await delay(0x3e8);const closePopup=await genlogin[_0x520b36(0x1f9)](profileNameId,subframe,xpath[_0x520b36(0x1a3)],0x3e8);if(closePopup){log(profileNameId,'['+botName+']tìm\x20thấy\x20closePopup'),await delay(0x3e8);const clicked=await click(xpath[_0x520b36(0x1a3)]);!clicked&&log(profileNameId,'['+botName+_0x520b36(0x19f),null,![]),log(profileNameId,'['+botName+_0x520b36(0x1b5));}const farming=await genlogin[_0x520b36(0x1f9)](profileNameId,subframe,xpath[_0x520b36(0x1e9)],0x3e8);!farming?log(profileNameId,'['+botName+_0x520b36(0x1d6),null,![]):log(profileNameId,'['+botName+']Tìm\x20thấy\x20farming');const clickedFarming=await click(xpath[_0x520b36(0x1e9)]);!clickedFarming&&log(profileNameId,'['+botName+_0x520b36(0x1a2),null,![]);log(profileNameId,'['+botName+_0x520b36(0x1d2));const kqThreDot=await genlogin[_0x520b36(0x1f9)](profileNameId,currentPage,getAks[_0x520b36(0x1ba)],0x3e8);!kqThreDot&&log(profileNameId,'['+botName+_0x520b36(0x1e1),null,![]);const kqClickReload=await clickM(getAks[_0x520b36(0x1ba)]);!kqClickReload&&log(profileNameId,'['+botName+_0x520b36(0x1b1),null,![]);log(profileNameId,'['+botName+']Click\x20kqClickReload\x20OK');const kqClickReload2=await clickM(getAks[_0x520b36(0x1ad)]);!kqClickReload2&&log(profileNameId,'['+botName+_0x520b36(0x1c8),null,![]);log(profileNameId,'['+botName+_0x520b36(0x1ab)),await delay(0x7d0);const closePopup2=await genlogin[_0x520b36(0x1f9)](profileNameId,subframe,xpath[_0x520b36(0x1a3)],0x3e8);if(closePopup2){log(profileNameId,'['+botName+_0x520b36(0x1bb)),await delay(0x3e8);const clicked=await click(xpath['closePopup']);!clicked&&log(profileNameId,'['+botName+_0x520b36(0x19f),null,![]),log(profileNameId,'['+botName+_0x520b36(0x1b5));}const claim=await genlogin[_0x520b36(0x1f9)](profileNameId,subframe,xpath[_0x520b36(0x1f1)],0x3e8);!claim?log(profileNameId,'['+botName+_0x520b36(0x1fd),null,![]):log(profileNameId,'['+botName+']Tìm\x20thấy\x20claim');if(claim){const clicked=await click(xpath[_0x520b36(0x1f1)]);!clicked?log(profileNameId,'['+botName+_0x520b36(0x1a7),null,![]):log(profileNameId,'['+botName+']Click\x20claim\x20OK'),await delay(0x1388);}const startFarming=await genlogin[_0x520b36(0x1f9)](profileNameId,subframe,xpath[_0x520b36(0x1a9)],0x3e8);!startFarming?log(profileNameId,'['+botName+_0x520b36(0x1a4),null,![]):log(profileNameId,'['+botName+']Tìm\x20thấy\x20startFarming');if(startFarming){const clicked1=await click(xpath['startFarming']);!clicked1&&log(profileNameId,'['+botName+_0x520b36(0x1ac),null,![]),log(profileNameId,'['+botName+_0x520b36(0x1c7));}await delay(0x7d0);const coinTag=await genlogin['elementExistsByXPath'](profileNameId,subframe,xpath[_0x520b36(0x1af)],0x3e8);!coinTag&&log(profileNameId,'['+botName+_0x520b36(0x1d1),null,![]);log(profileNameId,'['+botName+']Tìm\x20thấy\x20coinTag');const coin=await genlogin[_0x520b36(0x1c0)](profileNameId,subframe,xpath[_0x520b36(0x1af)],0x7d0);!coin&&log(profileNameId,'['+botName+']Không\x20tìm\x20thấy\x20coin',null,![]);log(profileNameId,'['+botName+_0x520b36(0x1bc)+coin);const remainTTag=await genlogin[_0x520b36(0x1f9)](profileNameId,subframe,xpath[_0x520b36(0x1de)],0x7d0);!remainTTag&&log(profileNameId,'['+botName+_0x520b36(0x1b2),null,![]);log(profileNameId,'['+botName+_0x520b36(0x1db));const remainTText=await genlogin['getTextByXPath'](profileNameId,subframe,xpath[_0x520b36(0x1de)],0x7d0);!remainTText&&log(profileNameId,'['+botName+_0x520b36(0x1b7),null,![]);log(profileNameId,'['+botName+']Tìm\x20thấy\x20remainTText:\x20'+remainTText);const remainT=await thoigianconlai(remainTText);return!remainT&&log(profileNameId,'['+botName+_0x520b36(0x1cb),null,![]),log(profileNameId,'['+botName+_0x520b36(0x1f0)),log(profileNameId,'['+botName+']nextRunAt:\x20'+remainT[_0x520b36(0x1f4)]),{'status':!![],'coin':coin,'nextRun':remainT['NextRun'],'nextRunStamp':remainT[_0x520b36(0x1dc)]};}catch(error){log(profileNameId,'['+botName+'][Lỗi]:\x20'+error,null,![]);}async function vaoGame(){const _0x212361=_0x520b36;try{log(profileNameId,'['+botName+']Vào\x20game\x20nè');const subframe0=await genlogin['switchFrame'](profileNameId,currentPage,getAks[_0x212361(0x1a8)],0x2710);if(!subframe0){log(profileNameId,'['+botName+']Không\x20tìm\x20thấy\x20iframe',![]);throw new Error('Không\x20tìm\x20thấy\x20iframe');}return log(profileNameId,'['+botName+_0x212361(0x1cc)),subframe0;}catch(error){return log(profileNameId,'['+botName+_0x212361(0x1ea)+error,![]),null;}}async function raGame(){const _0x2c8cdb=_0x520b36;try{log(profileNameId,'['+botName+_0x2c8cdb(0x1c4)),currentPage=genlogin[_0x2c8cdb(0x1d7)](profileNameId,currentPage,_0x2c8cdb(0x1ca),0x7d0);if(!currentPage){log(profileNameId,'['+botName+']Không\x20tìm\x20thấy\x20main\x20frame',![]);throw new Error(_0x2c8cdb(0x1c6));}return currentPage;}catch(error){return log(profileNameId,'['+botName+_0x2c8cdb(0x1ea)+error,![]),null;}}async function click(xpath){const _0x54b926=_0x520b36;try{const clicked=await genlogin['click'](profileNameId,subframe,{'xpath':xpath,'mainframe':currentPage,'browser':browser},0x3e8);await delay(0x3e8);if(!clicked)return log(profileNameId,'['+botName+_0x54b926(0x1e2)+xpath,null,![]),null;return log(profileNameId,'['+botName+'][click]Click\x20'+xpath+_0x54b926(0x1dd)),clicked;}catch(error){return log(profileNameId,'['+botName+_0x54b926(0x1f8)+error,null,![]),null;}}async function clickM(xpath){const _0x662db1=_0x520b36;try{await delay(0x3e8);const clicked=await genlogin[_0x662db1(0x1e4)](profileNameId,currentPage,{'xpath':xpath,'mainframe':currentPage,'browser':browser},0x3e8);await delay(0x3e8);if(!clicked)return log(profileNameId,'['+botName+_0x662db1(0x1e2)+xpath,null,![]),null;return log(profileNameId,'['+botName+'][click]Click\x20'+xpath+'\x20OK'),clicked;}catch(error){return log(profileNameId,'['+botName+_0x662db1(0x1f8)+error,null,![]),null;}}async function xuLyFullHp(fullHp){const _0x354445=_0x520b36;try{let fullhp0=fullHp[_0x354445(0x1da)]()[_0x354445(0x1a6)](/,/g,''),parts=fullhp0[_0x354445(0x1ce)]('\x20'),tapCountPart=parts[_0x354445(0x1d5)]>=0x3?parseInt(parts[parts['length']-0x3]):null,dayleft=parts[_0x354445(0x1d5)]>=0x4?parseInt(parts[0x3]):null,daylimit=parts['length']>=0x6?parseInt(parts[0x5]):null,tapElement=tapCountPart;return dayleft!==null&&dayleft<=0x0&&(tapElement=_0x354445(0x1e5)),{'tapElement':tapElement,'dayleft':dayleft,'daylimit':daylimit};}catch(error){return log(profileNameId,'['+botName+_0x354445(0x1fc)+error,null,![]),null;}}async function autoTap(tapElement){const _0x1ebf64=_0x520b36;try{log(profileNameId,'['+botName+_0x1ebf64(0x1ae)+tapElement+_0x1ebf64(0x1c2));let codeAutoTap=await getFile(botName+_0x1ebf64(0x1bf));return genlogin['javascript'](profileNameId,subframe,codeAutoTap),log(profileNameId,'['+botName+_0x1ebf64(0x1ae)+tapElement+_0x1ebf64(0x1dd)),!![];}catch(error){return log(profileNameId,'['+botName+_0x1ebf64(0x1ed)+error,null,![]),null;}}async function getFile(nameFile){const _0x1f98c1=_0x520b36;try{const fs=require('fs'),path=require('path'),filePath=path[_0x1f98c1(0x1e3)](__dirname,_0x1f98c1(0x1fb),nameFile),code=await fs[_0x1f98c1(0x1d8)][_0x1f98c1(0x1c3)](filePath,'utf8');return code;}catch(e){log(_0x1f98c1(0x1f7)+e[_0x1f98c1(0x1cf)]);}}async function lamQuest(){const _0x2b0d29=_0x520b36;try{log(profileNameId,'['+botName+_0x2b0d29(0x1b0));const kq10=await genlogin[_0x2b0d29(0x1f9)](profileNameId,subframe,xpath[_0x2b0d29(0x1eb)],0x7d0);if(!kq10){log(profileNameId,'['+botName+_0x2b0d29(0x1c9),![]);throw new Error(_0x2b0d29(0x1b9));}log(profileNameId,'['+botName+_0x2b0d29(0x1f2));const clicked=await click(xpath[_0x2b0d29(0x1eb)]);if(!clicked){log(profileNameId,'['+botName+_0x2b0d29(0x1e7),![]);throw new Error(_0x2b0d29(0x1e6));}return log(profileNameId,'['+botName+_0x2b0d29(0x1cd)),!![];}catch(error){return log(profileNameId,'['+botName+'][lamQuest]:\x20'+error,null,![]),null;}}async function thoigianconlai(thoigianconlai){const _0x545b4b=_0x520b36;try{log(profileNameId,'['+botName+'][thoigianconlai]:Xử\x20lý\x20gian\x20còn\x20lại\x20nè');let hour0=thoigianconlai[_0x545b4b(0x1ce)]('h')[0x0],minute0=thoigianconlai[_0x545b4b(0x1ce)]('h')[0x1][_0x545b4b(0x1ce)]('m')[0x0],hour=parseInt(hour0),minutes=parseInt(minute0),seconds=parseInt(0x0),newtime=hour+':'+minutes+':'+seconds,totalSeconds=parseInt(hour*0xe10+minutes*0x3c+seconds);const unixTime=Math[_0x545b4b(0x1d0)](Date[_0x545b4b(0x1df)]()/0x3e8),newUnixTime=unixTime+totalSeconds,newDate=new Date(newUnixTime*0x3e8),formattedDate=newDate[_0x545b4b(0x1e8)](),formattedTime=newDate[_0x545b4b(0x1d9)](_0x545b4b(0x1c1),{'hour12':![]});let NextRun=formattedDate+'\x20'+formattedTime;return{'NextRun':NextRun,'NextRunStamp':newUnixTime};}catch(error){return log(profileNameId,'['+botName+_0x545b4b(0x1ef)+error,null,![]),null;}}async function delay(ms){return new Promise(async resolve=>{setTimeout(resolve,ms);});}async function cTimeout(){const _0x52ed00=_0x520b36;if(Atomics[_0x52ed00(0x1f3)](tasksData,taskIndex)===0x1)return!![];return![];}}function a0_0x3ac5(){const _0x2c9132=['//a[contains(@href,\x20\x27/farming\x27)]',']Click\x20closePopup\x20OK','1934izkwPk',']không\x20tìm\x20thấy\x20remainTText','2181GzrdNx','Không\x20tìm\x20thấy\x20quest','pupupThreeDotBtn',']tìm\x20thấy\x20closePopup',']Tìm\x20thấy\x20coin:\x20','name','Không\x20tìm\x20thấy\x20iframe','-autoTap','getTextByXPath','en-GB','\x20nè','readFile',']Ra\x20game\x20nè','//div[contains(@class,\x20\x27flex--1xns6ui0\x20size_1--1xns6ui2\x20block\x27)]//span[contains(@class,\x20\x27_1a8kbji0\x20__className_420ce8\x27)]','Không\x20tìm\x20thấy\x20main\x20frame',']Click\x20startFarming\x20OK',']không\x20click\x20được\x20vào\x20kqClickReload2','][lamQuest]Không\x20tìm\x20thấy\x20quest','mainframe',']không\x20xử\x20lý\x20được\x20thoigianconlai',']Đã\x20tìm\x20thấy\x20iframe','][lamQuest]Click\x20quest\x20OK','split','message','floor',']không\x20Tìm\x20thấy\x20coinTag',']Click\x20farming\x20OK','1981936FGSYQl','8gAZpkP','length',']không\x20Tìm\x20thấy\x20farming','switchFrame','promises','toLocaleTimeString','trim',']Tìm\x20thấy\x20remainTTag','NextRunStamp','\x20OK','thoigianconlai','now','172AXJfPj',']không\x20Tìm\x20thấy\x20kqThreDot','][click]Không\x20click\x20được\x20vào\x20','join','click','maxday','Không\x20click\x20được\x20vào\x20quest','][lamQuest]Không\x20click\x20được\x20vào\x20quest','toLocaleDateString','farming','][Lỗi]:\x20','quest',']Không\x20tìm\x20thấy\x20iframe','][autoTap]:\x20','//span[text()=\x27Claim\x27]','][thoigianconlai]:\x20',']Xử\x20lý\x20thoigianconlai\x20OK','claim','][lamQuest]Tìm\x20thấy\x20quest','load','NextRun','627890BRibVX','65ZwcNwA','[getFile]\x20error:\x20','][click][Lỗi]:\x20','elementExistsByXPath','24AQOXZd','javascript','][xuLyFullHp]:\x20',']không\x20Tìm\x20thấy\x20claim',']Không\x20click\x20được\x20vào\x20closePopup','548568gCRoLJ','//span[text()=\x27Ok\x27]',']Không\x20click\x20được\x20vào\x20farming','closePopup',']không\x20Tìm\x20thấy\x20startFarming','1571794Yysdzc','replace',']Không\x20click\x20được\x20vào\x20claim','Iframe','startFarming','//span[contains(@class,\x20\x27text--3pg4pp0\x20size_3--3pg4ppd\x20block\x27)]//div[contains(@class,\x20\x27flex--1xns6ui0\x20size_2--1xns6ui3\x27)]',']Click\x20kqClickReload2\x20OK',']Không\x20click\x20được\x20vào\x20startFarming','popupReloadBtn',']Auto\x20tap\x20','coin','][lamQuest]Làm\x20Quest\x20nè',']không\x20click\x20được\x20vào\x20kqClickReload',']không\x20Tìm\x20thấy\x20remainTTag','169570xyFvrD'];a0_0x3ac5=function(){return _0x2c9132;};return a0_0x3ac5();};
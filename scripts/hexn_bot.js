(function(_0x5861ef,_0x13f6e1){const _0x291fb4=a0_0x33f9,_0x236b8c=_0x5861ef();while(!![]){try{const _0x170df2=-parseInt(_0x291fb4(0x12c))/0x1+parseInt(_0x291fb4(0x156))/0x2*(parseInt(_0x291fb4(0x144))/0x3)+parseInt(_0x291fb4(0x13d))/0x4*(parseInt(_0x291fb4(0x166))/0x5)+-parseInt(_0x291fb4(0x163))/0x6+-parseInt(_0x291fb4(0x11f))/0x7+parseInt(_0x291fb4(0x14d))/0x8+-parseInt(_0x291fb4(0x162))/0x9*(-parseInt(_0x291fb4(0x178))/0xa);if(_0x170df2===_0x13f6e1)break;else _0x236b8c['push'](_0x236b8c['shift']());}catch(_0x3d91d3){_0x236b8c['push'](_0x236b8c['shift']());}}}(a0_0x3f34,0x2ce90));function a0_0x33f9(_0x410ca1,_0x44df64){const _0x3f3439=a0_0x3f34();return a0_0x33f9=function(_0x33f9aa,_0x102717){_0x33f9aa=_0x33f9aa-0x11d;let _0x4bd5a7=_0x3f3439[_0x33f9aa];return _0x4bd5a7;},a0_0x33f9(_0x410ca1,_0x44df64);}import{log,json}from'../modules/logger.js';export default async function (context,signal){const _0x2baed0=a0_0x33f9,choMs=ms=>new Promise(resolve=>setTimeout(resolve,ms)),{firstPage,bot,profileNameId,getAks,genlogin,http,browser,dataId,screenDataBuffer2,tasksDataBuffer2,taskIndex}=context;let currentPage=firstPage,subframe;const botName=bot['name'];let screenData=new Int32Array(screenDataBuffer2),tasksData=new Int32Array(tasksDataBuffer2),demLoop=0x0;const xpath={'closePopup':'//span[text()=\x27Ok\x27]','farming':_0x2baed0(0x165),'claim':_0x2baed0(0x15a),'startFarming':_0x2baed0(0x138),'coin':_0x2baed0(0x157),'thoigianconlai':_0x2baed0(0x13e)};try{subframe=await vaoGame();if(!subframe){log(profileNameId,'['+botName+_0x2baed0(0x14b),![]);throw new Error('Không\x20tìm\x20thấy\x20iframe');}log(profileNameId,'['+botName+_0x2baed0(0x13c)),await delay(0x3e8);const closePopup=await genlogin[_0x2baed0(0x12b)](profileNameId,subframe,xpath[_0x2baed0(0x146)],0x3e8);if(closePopup){log(profileNameId,'['+botName+_0x2baed0(0x136)),await delay(0x3e8);const clicked=await click(xpath['closePopup']);!clicked&&log(profileNameId,'['+botName+']Không\x20click\x20được\x20vào\x20closePopup',null,![]),log(profileNameId,'['+botName+_0x2baed0(0x129));}const farming=await genlogin[_0x2baed0(0x12b)](profileNameId,subframe,xpath[_0x2baed0(0x161)],0x3e8);!farming?log(profileNameId,'['+botName+_0x2baed0(0x158),null,![]):log(profileNameId,'['+botName+_0x2baed0(0x173));const clickedFarming=await click(xpath[_0x2baed0(0x161)]);!clickedFarming&&log(profileNameId,'['+botName+_0x2baed0(0x15f),null,![]);log(profileNameId,'['+botName+_0x2baed0(0x177));const kqThreDot=await genlogin[_0x2baed0(0x12b)](profileNameId,currentPage,getAks[_0x2baed0(0x124)],0x3e8);!kqThreDot&&log(profileNameId,'['+botName+_0x2baed0(0x176),null,![]);const kqClickReload=await clickM(getAks[_0x2baed0(0x124)]);!kqClickReload&&log(profileNameId,'['+botName+_0x2baed0(0x16c),null,![]);log(profileNameId,'['+botName+_0x2baed0(0x11d));const kqClickReload2=await clickM(getAks['popupReloadBtn']);!kqClickReload2&&log(profileNameId,'['+botName+_0x2baed0(0x15c),null,![]);log(profileNameId,'['+botName+_0x2baed0(0x148)),await delay(0x7d0);const closePopup2=await genlogin[_0x2baed0(0x12b)](profileNameId,subframe,xpath[_0x2baed0(0x146)],0x3e8);if(closePopup2){log(profileNameId,'['+botName+_0x2baed0(0x136)),await delay(0x3e8);const clicked=await click(xpath[_0x2baed0(0x146)]);!clicked&&log(profileNameId,'['+botName+']Không\x20click\x20được\x20vào\x20closePopup',null,![]),log(profileNameId,'['+botName+_0x2baed0(0x129));}const claim=await genlogin[_0x2baed0(0x12b)](profileNameId,subframe,xpath[_0x2baed0(0x174)],0x3e8);!claim?log(profileNameId,'['+botName+']không\x20Tìm\x20thấy\x20claim',null,![]):log(profileNameId,'['+botName+_0x2baed0(0x12e));if(claim){const clicked=await click(xpath[_0x2baed0(0x174)]);!clicked?log(profileNameId,'['+botName+_0x2baed0(0x153),null,![]):log(profileNameId,'['+botName+_0x2baed0(0x159)),await delay(0x1388);}const startFarming=await genlogin[_0x2baed0(0x12b)](profileNameId,subframe,xpath[_0x2baed0(0x131)],0x3e8);!startFarming?log(profileNameId,'['+botName+']không\x20Tìm\x20thấy\x20startFarming',null,![]):log(profileNameId,'['+botName+_0x2baed0(0x175));if(startFarming){const clicked1=await click(xpath[_0x2baed0(0x131)]);!clicked1&&log(profileNameId,'['+botName+_0x2baed0(0x14a),null,![]),log(profileNameId,'['+botName+_0x2baed0(0x122));}await delay(0x7d0);const coinTag=await genlogin[_0x2baed0(0x12b)](profileNameId,subframe,xpath[_0x2baed0(0x13b)],0x3e8);!coinTag&&log(profileNameId,'['+botName+']không\x20Tìm\x20thấy\x20coinTag',null,![]);log(profileNameId,'['+botName+']Tìm\x20thấy\x20coinTag');const coin=await genlogin[_0x2baed0(0x160)](profileNameId,subframe,xpath[_0x2baed0(0x13b)],0x7d0);!coin&&log(profileNameId,'['+botName+_0x2baed0(0x120),null,![]);log(profileNameId,'['+botName+']Tìm\x20thấy\x20coin:\x20'+coin);const remainTTag=await genlogin[_0x2baed0(0x12b)](profileNameId,subframe,xpath[_0x2baed0(0x133)],0x7d0);!remainTTag&&log(profileNameId,'['+botName+_0x2baed0(0x170),null,![]);log(profileNameId,'['+botName+_0x2baed0(0x140));const remainTText=await genlogin[_0x2baed0(0x160)](profileNameId,subframe,xpath[_0x2baed0(0x133)],0x7d0);!remainTText&&log(profileNameId,'['+botName+_0x2baed0(0x11e),null,![]);log(profileNameId,'['+botName+_0x2baed0(0x164)+remainTText);const remainT=await thoigianconlai(remainTText);return!remainT&&log(profileNameId,'['+botName+_0x2baed0(0x14f),null,![]),log(profileNameId,'['+botName+_0x2baed0(0x13f)),log(profileNameId,'['+botName+_0x2baed0(0x16f)+remainT[_0x2baed0(0x134)]),{'status':!![],'coin':coin,'nextRun':remainT[_0x2baed0(0x134)],'nextRunStamp':remainT['NextRunStamp']};}catch(error){log(profileNameId,'['+botName+'][Lỗi]:\x20'+error,null,![]);}async function vaoGame(){const _0x562097=_0x2baed0;try{log(profileNameId,'['+botName+_0x562097(0x16b));const subframe0=await genlogin[_0x562097(0x130)](profileNameId,currentPage,getAks[_0x562097(0x143)],0x2710);if(!subframe0){log(profileNameId,'['+botName+']Không\x20tìm\x20thấy\x20iframe',![]);throw new Error(_0x562097(0x128));}return log(profileNameId,'['+botName+']Đã\x20tìm\x20thấy\x20iframe'),subframe0;}catch(error){return log(profileNameId,'['+botName+_0x562097(0x123)+error,![]),null;}}async function raGame(){const _0x492abf=_0x2baed0;try{log(profileNameId,'['+botName+_0x492abf(0x14e)),currentPage=genlogin[_0x492abf(0x130)](profileNameId,currentPage,'mainframe',0x7d0);if(!currentPage){log(profileNameId,'['+botName+_0x492abf(0x12a),![]);throw new Error(_0x492abf(0x151));}return currentPage;}catch(error){return log(profileNameId,'['+botName+_0x492abf(0x123)+error,![]),null;}}async function click(xpath){const _0x5263b6=_0x2baed0;try{const clicked=await genlogin[_0x5263b6(0x15e)](profileNameId,subframe,{'xpath':xpath,'mainframe':currentPage,'browser':browser},0x3e8);await delay(0x3e8);if(!clicked)return log(profileNameId,'['+botName+_0x5263b6(0x132)+xpath,null,![]),null;return log(profileNameId,'['+botName+'][click]Click\x20'+xpath+_0x5263b6(0x139)),clicked;}catch(error){return log(profileNameId,'['+botName+'][click][Lỗi]:\x20'+error,null,![]),null;}}async function clickM(xpath){const _0x6a3410=_0x2baed0;try{await delay(0x3e8);const clicked=await genlogin[_0x6a3410(0x15e)](profileNameId,currentPage,{'xpath':xpath,'mainframe':currentPage,'browser':browser},0x3e8);await delay(0x3e8);if(!clicked)return log(profileNameId,'['+botName+_0x6a3410(0x132)+xpath,null,![]),null;return log(profileNameId,'['+botName+_0x6a3410(0x172)+xpath+'\x20OK'),clicked;}catch(error){return log(profileNameId,'['+botName+_0x6a3410(0x15b)+error,null,![]),null;}}async function xuLyFullHp(fullHp){const _0x20717f=_0x2baed0;try{let fullhp0=fullHp[_0x20717f(0x155)]()[_0x20717f(0x14c)](/,/g,''),parts=fullhp0[_0x20717f(0x150)]('\x20'),tapCountPart=parts[_0x20717f(0x154)]>=0x3?parseInt(parts[parts[_0x20717f(0x154)]-0x3]):null,dayleft=parts['length']>=0x4?parseInt(parts[0x3]):null,daylimit=parts['length']>=0x6?parseInt(parts[0x5]):null,tapElement=tapCountPart;return dayleft!==null&&dayleft<=0x0&&(tapElement=_0x20717f(0x16a)),{'tapElement':tapElement,'dayleft':dayleft,'daylimit':daylimit};}catch(error){return log(profileNameId,'['+botName+_0x20717f(0x15d)+error,null,![]),null;}}async function autoTap(tapElement){const _0x5cb45d=_0x2baed0;try{log(profileNameId,'['+botName+_0x5cb45d(0x152)+tapElement+_0x5cb45d(0x16d));let codeAutoTap=await getFile(botName+_0x5cb45d(0x16e));return genlogin[_0x5cb45d(0x167)](profileNameId,subframe,codeAutoTap),log(profileNameId,'['+botName+']Auto\x20tap\x20'+tapElement+'\x20OK'),!![];}catch(error){return log(profileNameId,'['+botName+_0x5cb45d(0x125)+error,null,![]),null;}}async function getFile(nameFile){const _0xee8510=_0x2baed0;try{const fs=require('fs'),path=require('path'),filePath=path['join'](__dirname,'javascript',nameFile),code=await fs['promises'][_0xee8510(0x135)](filePath,_0xee8510(0x127));return code;}catch(e){log(_0xee8510(0x171)+e['message']);}}async function lamQuest(){const _0x3fad3d=_0x2baed0;try{log(profileNameId,'['+botName+'][lamQuest]Làm\x20Quest\x20nè');const kq10=await genlogin[_0x3fad3d(0x12b)](profileNameId,subframe,xpath[_0x3fad3d(0x169)],0x7d0);if(!kq10){log(profileNameId,'['+botName+_0x3fad3d(0x121),![]);throw new Error(_0x3fad3d(0x168));}log(profileNameId,'['+botName+_0x3fad3d(0x13a));const clicked=await click(xpath['quest']);if(!clicked){log(profileNameId,'['+botName+_0x3fad3d(0x126),![]);throw new Error('Không\x20click\x20được\x20vào\x20quest');}return log(profileNameId,'['+botName+'][lamQuest]Click\x20quest\x20OK'),!![];}catch(error){return log(profileNameId,'['+botName+_0x3fad3d(0x137)+error,null,![]),null;}}async function thoigianconlai(thoigianconlai){const _0x504722=_0x2baed0;try{log(profileNameId,'['+botName+_0x504722(0x142));let hour0=thoigianconlai['split']('h')[0x0],minute0=thoigianconlai[_0x504722(0x150)]('h')[0x1]['split']('m')[0x0],hour=parseInt(hour0),minutes=parseInt(minute0),seconds=parseInt(0x0),newtime=hour+':'+minutes+':'+seconds,totalSeconds=parseInt(hour*0xe10+minutes*0x3c+seconds);const unixTime=Math[_0x504722(0x147)](Date[_0x504722(0x145)]()/0x3e8),newUnixTime=unixTime+totalSeconds,newDate=new Date(newUnixTime*0x3e8),formattedDate=newDate['toLocaleDateString'](),formattedTime=newDate[_0x504722(0x12f)](_0x504722(0x149),{'hour12':![]});let NextRun=formattedDate+'\x20'+formattedTime;return{'NextRun':NextRun,'NextRunStamp':newUnixTime};}catch(error){return log(profileNameId,'['+botName+_0x504722(0x12d)+error,null,![]),null;}}async function delay(ms){return new Promise(async resolve=>{setTimeout(resolve,ms);});}async function cTimeout(){const _0x5a69d8=_0x2baed0;if(Atomics[_0x5a69d8(0x141)](tasksData,taskIndex)===0x1)return!![];return![];}}function a0_0x3f34(){const _0x512944=['Không\x20tìm\x20thấy\x20iframe',']Click\x20closePopup\x20OK',']Không\x20tìm\x20thấy\x20main\x20frame','elementExistsByXPath','124202bqvEGU','][thoigianconlai]:\x20',']Tìm\x20thấy\x20claim','toLocaleTimeString','switchFrame','startFarming','][click]Không\x20click\x20được\x20vào\x20','thoigianconlai','NextRun','readFile',']tìm\x20thấy\x20closePopup','][lamQuest]:\x20','//span[text()=\x27Start\x20farming\x27]','\x20OK','][lamQuest]Tìm\x20thấy\x20quest','coin',']Vào\x20game\x20OK','420216ZRrqGa','//span[contains(@class,\x20\x27text--3pg4pp0\x20size_3--3pg4ppd\x20block\x27)]//div[contains(@class,\x20\x27flex--1xns6ui0\x20size_2--1xns6ui3\x27)]',']Xử\x20lý\x20thoigianconlai\x20OK',']Tìm\x20thấy\x20remainTTag','load','][thoigianconlai]:Xử\x20lý\x20gian\x20còn\x20lại\x20nè','Iframe','18sgXmxP','now','closePopup','floor',']Click\x20kqClickReload2\x20OK','en-GB',']Không\x20click\x20được\x20vào\x20startFarming',']Không\x20tìm\x20thấy\x20iframe','replace','677656mXOKbB',']Ra\x20game\x20nè',']không\x20xử\x20lý\x20được\x20thoigianconlai','split','Không\x20tìm\x20thấy\x20main\x20frame',']Auto\x20tap\x20',']Không\x20click\x20được\x20vào\x20claim','length','trim','55378anXwrv','//div[contains(@class,\x20\x27flex--1xns6ui0\x20size_1--1xns6ui2\x20block\x27)]//span[contains(@class,\x20\x27_1a8kbji0\x20__className_420ce8\x27)]',']không\x20Tìm\x20thấy\x20farming',']Click\x20claim\x20OK','//span[text()=\x27Claim\x27]','][click][Lỗi]:\x20',']không\x20click\x20được\x20vào\x20kqClickReload2','][xuLyFullHp]:\x20','click',']Không\x20click\x20được\x20vào\x20farming','getTextByXPath','farming','63NvzNRX','1449426fiaxdI',']Tìm\x20thấy\x20remainTText:\x20','//a[contains(@href,\x20\x27/farming\x27)]','15dvxLwl','javascript','Không\x20tìm\x20thấy\x20quest','quest','maxday',']Vào\x20game\x20nè',']không\x20click\x20được\x20vào\x20kqClickReload','\x20nè','-autoTap',']nextRunAt:\x20',']không\x20Tìm\x20thấy\x20remainTTag','[getFile]\x20error:\x20','][click]Click\x20',']Tìm\x20thấy\x20farming','claim',']Tìm\x20thấy\x20startFarming',']không\x20Tìm\x20thấy\x20kqThreDot',']Click\x20farming\x20OK','247640ZriYAz',']Click\x20kqClickReload\x20OK',']không\x20tìm\x20thấy\x20remainTText','1327382LnfYLt',']Không\x20tìm\x20thấy\x20coin','][lamQuest]Không\x20tìm\x20thấy\x20quest',']Click\x20startFarming\x20OK','][Lỗi]:\x20','pupupThreeDotBtn','][autoTap]:\x20','][lamQuest]Không\x20click\x20được\x20vào\x20quest','utf8'];a0_0x3f34=function(){return _0x512944;};return a0_0x3f34();};
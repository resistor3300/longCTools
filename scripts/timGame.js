(function(_0x33153d,_0x5aef71){const _0x15ae06=a0_0x3ef0,_0x329bfa=_0x33153d();while(!![]){try{const _0x3027e3=-parseInt(_0x15ae06(0x25d))/0x1+parseInt(_0x15ae06(0x1f0))/0x2+-parseInt(_0x15ae06(0x277))/0x3+parseInt(_0x15ae06(0x1fa))/0x4*(parseInt(_0x15ae06(0x1c6))/0x5)+-parseInt(_0x15ae06(0x206))/0x6*(parseInt(_0x15ae06(0x26e))/0x7)+-parseInt(_0x15ae06(0x1c3))/0x8*(-parseInt(_0x15ae06(0x225))/0x9)+parseInt(_0x15ae06(0x235))/0xa*(-parseInt(_0x15ae06(0x1fb))/0xb);if(_0x3027e3===_0x5aef71)break;else _0x329bfa['push'](_0x329bfa['shift']());}catch(_0x3564fa){_0x329bfa['push'](_0x329bfa['shift']());}}}(a0_0x1fa7,0x36bb8));import{log,json}from'../modules/logger.js';function a0_0x3ef0(_0x558c4a,_0x4111cf){const _0x1fa781=a0_0x1fa7();return a0_0x3ef0=function(_0x3ef00e,_0x46ad3d){_0x3ef00e=_0x3ef00e-0x1a8;let _0x10c85e=_0x1fa781[_0x3ef00e];return _0x10c85e;},a0_0x3ef0(_0x558c4a,_0x4111cf);}function a0_0x1fa7(){const _0x5d3034=['[timGame][launchConfirm][Lỗi]:\x20','][click]Click\x20','Không\x20start\x20game\x20được','][click]Không\x20click\x20được\x20vào\x20tọa\x20độ\x20','][checkFirstStart]Click\x20SearchRes\x20OK','[timGame][closeAnyway][Lỗi]:\x20','[timGame][TatGame]click\x20CloseGame\x20OK','[timGame][closeAnyway]Không\x20tìm\x20thấy\x20closeAnyway','][checkFirstStart]\x20Tìm\x20thấy\x20ChatInput','][checkFirstStart]Type\x20vào\x20ChatInput\x20OK\x20','getCurrentPage','[timGame][closeAnyway]Tìm\x20thấy\x20closeAnyway','[timGame]Tìm\x20thấy\x20dialogWarnBtn','BtnSend','BackArrow','[timGame][checkLoadGame]\x20Game\x20đã\x20sẵn\x20sàng\x20với\x20tag\x20','switchFrame','sideBarRightClose','][checkFirstStart]Không\x20click\x20được\x20vào\x20InputSearch','ButtonTextLaunch','][dbclick][Lỗi]:\x20','[timGame]Không\x20click\x20được\x20vào\x20inputsearch','[timGame][checkFirstStart]\x20Không\x20thấy\x20inputSearch','[timGame][checkStartGame]\x20Không\x20tìm\x20thấy\x20nút\x20mở\x20game','tagGame1','[timGame][ShowInputSearch]\x20Tìm\x20thấy\x20clearInputSearch','][checkFirstStart]Không\x20click\x20được\x20vào\x20ChatInput','][reCheckClickStart]Click\x20InputSearch\x20OK','[timGame][TatGame]Không\x20click\x20được\x20vào\x20CloseGame','mainFrame','tagGame3','[timGame]\x20Không\x20tìm\x20thấy\x20nút\x20BackArrow','][checkFirstStart]Không\x20type\x20được\x20vào\x20InputSearch','[timGame][checkLoadGame]\x20Không\x20mở\x20link\x20iframe','newTab','][clickM]Click\x20','][clickLinkRef]Không\x20click\x20được\x20vào\x20nút\x20start','[timGame]\x20Tìm\x20thấy\x20nút\x20BackArrow','725616KrVRNl','Không\x20nhập\x20được\x20vào\x20inputsearch','\x20lần\x20thử','[timGame][TatGame]Vào\x20tắt\x20game\x20lần:','SearchRes','[timGame][ShowInputSearch]\x20Không\x20click\x20được\x20vào\x20nút\x20sideBarRightClose','\x20OK','[timGame]\x20click\x20nút\x20sideBarRightClose\x20ok','[timGame][gui][Lỗi]:\x20','[timGame]\x20nhập\x20','1475080jkxgUM','121WsaeUX','[timGame][checkLoadGame]\x20popup\x20mode','[timGame]\x20click\x20inputsearch\x20ok','][clickLinkRef]\x20Tìm\x20thấy\x20iframe','[timGame][checkStartGame]\x20Không\x20click\x20được\x20vào\x20','][reCheckClickStart]Click\x20SearchRes\x20OK','\x20ok','ref','[timGame][launchConfirm]Tìm\x20thấy\x20launchConfirm','][checkFirstStart]Không\x20tìm\x20thấy\x20InputSearch','Không\x20click\x20được\x20vào\x20','50802phIwqI','ChatInput','[timGame][checkStartGame]\x20Click\x20','[timGame][checkLoadGame]\x20Đang\x20kiểm\x20tra\x20tải\x20game','[timGame][gui]\x20Đã\x20thử\x20','][checkFirstStart]Click\x20vào\x20LinkRef\x20ok','[timGame][checkStartGame]\x20Chưa\x20load\x20được\x20game:\x20','][clickLinkRef]Không\x20tìm\x20thấy\x20iframe','][clickLinkRef]Không\x20click\x20được\x20vào\x20LinkRef','InputSearch','[timGame][checkLoadGame]\x20Không\x20tìm\x20thấy\x20iframe','][clickLinkRef]Không\x20đóng\x20iframe','][clickLinkRef]Không\x20tìm\x20thấy\x20LinkRef\x20','openUrl','[timGame][ShowInputSearch]Không\x20click\x20được\x20vào\x20inputsearch','[timGame][launchConfirm]click\x20LaunchConfirm\x20OK','][checkFirstStart]Không\x20type\x20được\x20vào\x20ChatInput','\x20tồn\x20tại','length','[timGame]Gui','[timGame][checkFirstStart]\x20Chạy\x20ref\x20để\x20vào\x20game','[timGame][ShowInputSearch]\x20Không\x20click\x20được\x20vào\x20clearInputSearch','[timGame]Không\x20click\x20được\x20vào\x20SearchRes','][reCheckClickStart]Không\x20tìm\x20thấy\x20SearchRes','][reCheckClickStart]Type\x20vào\x20InputSearch\x20OK','MainOpenButton','[timGame]tìm\x20thấy\x20inputsearch','[timGame][ShowInputSearch]\x20Không\x20tìm\x20thấy\x20nút\x20sideBarRightClose','ForceClosePopup','][reCheckClickStart]\x20Tìm\x20thấy\x20InputSearch','elementExistsByXPath','358686HyCCAP','clearInputSearch','\x27])[last()]','[timGame][checkStartGame]\x20','tagGame4','[timGame][TatGame]Không\x20tắt\x20được\x20game\x20closeAnyway\x20failed','Không\x20tìm\x20thấy\x20iframe','][clickLinkRef]\x20Click\x20launchConfirm\x20OK','[timGame][checkStartGame]\x20Không\x20tìm\x20thấy\x20nút\x20start\x20của\x20new\x20game','[timGame][gui]Không\x20load\x20game\x20được','][reCheckClickStart]\x20Click\x20start\x20OK','[timGame][checkStartGame]\x20Tìm\x20thấy\x20nút\x20start','[timGame][launchConfirm]Không\x20click\x20được\x20vào\x20launchConfirm','[timGame][launchConfirm]Không\x20tìm\x20thấy\x20launchConfirm','][checkFirstStart]click\x20link\x20ref\x20ok','[timGame][checkLoadGame]\x20Lần\x20kiểm\x20tra\x20thứ\x20','619580IWkMpN','[timGame][ShowInputSearch]\x20ShowInputSearch','][checkFirstStart]Không\x20click\x20được\x20vào\x20SearchRes','FirstStartBtn','CloseGame','Không\x20click\x20được\x20vào\x20SearchRes','][clickLinkRef]\x20Tìm\x20thấy\x20nút\x20start','name','\x20lần\x20nhưng\x20vẫn\x20còn\x20game\x20mở','Không\x20click\x20được\x20vào\x20inputsearch','tagGame','[timGame][checkStartGame]\x20Click\x20nút\x20start\x20OK','[timGame]check\x20tắt\x20game\x20đang\x20mở','setTitle','][reCheckClickStart]Không\x20tìm\x20thấy\x20InputSearch','][clickLinkRef]tìm\x20thấy\x20LinkRef','][clickLinkRef]Không\x20tìm\x20thấy\x20nút\x20start','][timGame][ShowInputSearch][Lỗi]:\x20','[timGame]Vào\x20Tìm\x20game\x20','playtag','tagGame2','[timGame]NoGui','Không\x20tắt\x20được\x20game','[timGame][checkFirstStart]\x20Game\x20mới\x20nè\x20bro','[timGame]\x20Không\x20click\x20được\x20vào\x20nút\x20BackArrow','load','[closeIframe]check\x20tắt\x20game\x20đang\x20mở','[closeIframe]TatGame\x20ok','message','][dbClickM]Không\x20click\x20được\x20vào\x20','[timGame]Không\x20tìm\x20thấy\x20SearchRes','mainframe','typeText','][reCheckClickStart]Không\x20type\x20được\x20vào\x20InputSearch','ButtonTextClaim','[timGame][Lỗi]1:\x20','Không\x20load\x20được\x20game','[closeIframe]Không\x20tắt\x20được\x20game','[timGame][checkLoadGame]\x20Không\x20lấy\x20page\x20mới','][reCheckClickStart]Không\x20click\x20được\x20vào\x20SearchRes','97828fKcKvo','[timGame]Tìm\x20Game','hostname','[timGame][checkLoadGame]\x20Chưa\x20load\x20được\x20game','loop','][checkFirstStart]\x20Click\x20BtnSend\x20OK','][clickM]Không\x20click\x20được\x20vào\x20','Không\x20mở\x20link\x20iframe','[timGame][checkLoadGame]\x20Không\x20tìm\x20thấy\x20iframe\x20link','][checkFirstStart]Type\x20vào\x20InputSearch\x20OK\x20\x27Saved\x20Messages\x27','[timGame]Tìm\x20thấy\x20SearchRes\x20ok','][clickLinkRef]\x20Đóng\x20iframe\x20OK','Iframe','[timGame]\x20click\x20SearchRes\x20ok','][reCheckClickStart]Không\x20click\x20được\x20vào\x20nút\x20start','[timGame][closeAnyway]check\x20close\x20anyway','][clickLinkRef]Không\x20click\x20được\x20vào\x20launchConfirm','21NTmQNX','Không\x20load\x20game\x20được','[timGame][ShowInputSearch]tìm\x20thấy\x20inputsearch','[timGame][checkLoadGame]newTab\x20mode','(//a[@href=\x27','[timGame][gui]TatGame\x20ok','ButtonTextMining','[timGame]Không\x20click\x20được\x20vào\x20dialogWarnBtn','[timGame][ShowInputSearch]\x20Tìm\x20thấy\x20nút\x20BackArrow','303501zfhtxN','[timGame]\x20Không\x20tìm\x20thấy\x20nút\x20sideBarRightClose','[timGame][checkStartGame]\x20Bắt\x20đầu\x20kiểm\x20tra\x20Start\x20Game','][dbclick]dbclick\x20','Không\x20mở\x20tab\x20mới','click','][click][Lỗi]:\x20','][checkFirstStart]\x20Click\x20ChatInput\x20OK','ButtonTextStart','[timGame][ShowInputSearch]\x20Không\x20tìm\x20thấy\x20nút\x20BackArrow','[timGame][ShowInputSearch]\x20click\x20clearInputSearch\x20ok','[timGame][checkLoadGame]\x20Không\x20load\x20được\x20game\x20sau\x20','][clickLinkRef][Lỗi]:\x20','Không\x20click\x20được\x20vào\x20ForceClosePopup','xpath','][clickLinkRef]\x20Click\x20start\x20OK','ButtonTextPlay','][dbclick]Không\x20dbclick\x20được\x20vào\x20','][dbClickM][Lỗi]:\x20','][reCheckClickStart]Không\x20click\x20được\x20vào\x20InputSearch','][checkFirstStart]Không\x20tìm\x20thấy\x20SearchRes','dialogWarnBtn','[closeIframe][Lỗi]:\x20','[timGame][TatGame]Tắt\x20game\x20OK','LaunchConfirm','[timGame][gui]Check\x20start\x20Game\x20mới\x20ok\x20,\x20loop\x20lại\x20game\x20nè\x20bro','][reCheckClickStart]\x20Tìm\x20thấy\x20SearchRes','[closeIframe]Đang\x20có\x20game\x20mở','80sejKNo','[timGame][ShowInputSearch]\x20Tìm\x20thấy\x20nút\x20sideBarRightClose','][checkFirstStart][Lỗi]:\x20','5BzSfIX','[timGame][checkLoadGame]\x20Không\x20mở\x20tab\x20mới','][checkFirstStart]\x20Tìm\x20thấy\x20SearchRes','[timGame][ShowInputSearch]Không\x20tìm\x20thấy\x20clearInputSearch'];a0_0x1fa7=function(){return _0x5d3034;};return a0_0x1fa7();}export default async function (context,HostName){const _0xb9003b=a0_0x3ef0,choMs=ms=>new Promise(resolve=>setTimeout(resolve,ms)),{firstPage,bot,profileNameId,getAks,genlogin,http,browser,screenDataBuffer2,tasksDataBuffer2,taskIndex}=context;let currentPage=firstPage;const botName=bot[_0xb9003b(0x23c)];let screenData=new Int32Array(screenDataBuffer2),tasksData=new Int32Array(tasksDataBuffer2),demLoop=0x0,iframeLinkHotsName=null;try{log(profileNameId,_0xb9003b(0x25e),null,'i','=');const kqDialogWarnBtn=await genlogin['elementExistsByXPath'](profileNameId,currentPage,getAks['dialogWarnBtn'],0x1f4);if(kqDialogWarnBtn){log(profileNameId,_0xb9003b(0x1d6),null,'w');const kqClickDialogWarnBtn=await clickM(getAks[_0xb9003b(0x1bc)]);!kqClickDialogWarnBtn&&log(profileNameId,_0xb9003b(0x275),null,![]),log(profileNameId,'[timGame]Click\x20dialogWarnBtn\x20ok');}log(profileNameId,_0xb9003b(0x241),null,'i');let attempts=0x0;const maxAttempts=0x5;while(attempts<maxAttempts){attempts++;const kq5=await genlogin[_0xb9003b(0x224)](profileNameId,currentPage,getAks[_0xb9003b(0x269)],0x3e8);if(kq5){log(profileNameId,'[timGame][gui]Đang\x20có\x20game\x20mở',null,'w'),await delay(0x3e8);const kq6=await TatGame();if(!kq6)throw new Error(_0xb9003b(0x24b));log(profileNameId,_0xb9003b(0x273));}else break;}if(attempts===maxAttempts){log(profileNameId,_0xb9003b(0x20a)+maxAttempts+_0xb9003b(0x23d),null,![]);throw new Error(_0xb9003b(0x24b));}log(profileNameId,_0xb9003b(0x247)+botName,null,'i'),await delay(0x3e8);let demLoop=0x0;const maxDemLoop=0xa;while(demLoop<maxDemLoop){demLoop++;const kqCkSideBarRightClose=await genlogin[_0xb9003b(0x224)](profileNameId,currentPage,getAks[_0xb9003b(0x1db)],0x3e8);if(!kqCkSideBarRightClose)log(profileNameId,_0xb9003b(0x1a8),null,![]);else{log(profileNameId,'[timGame]\x20Tìm\x20thấy\x20nút\x20sideBarRightClose');const kqClickSideBarRightClose=await clickM(getAks[_0xb9003b(0x1db)]);if(!kqClickSideBarRightClose){log(profileNameId,'[timGame]\x20Không\x20click\x20được\x20vào\x20nút\x20sideBarRightClose',![]);continue;}log(profileNameId,_0xb9003b(0x1f7)),await delay(0x3e8);continue;}const kqCkBackArrow=await genlogin['elementExistsByXPath'](profileNameId,currentPage,getAks[_0xb9003b(0x1d8)],0x3e8);if(!kqCkBackArrow)log(profileNameId,_0xb9003b(0x1e9),null,![]);else{log(profileNameId,_0xb9003b(0x1ef));const kqClickBackArrow=await clickM(getAks[_0xb9003b(0x1d8)]);if(!kqClickBackArrow){log(profileNameId,_0xb9003b(0x24d),null,![]);continue;}log(profileNameId,'[timGame]\x20click\x20nút\x20BackArrow\x20ok'),await delay(0x3e8);continue;}const inputsearch=await genlogin[_0xb9003b(0x224)](profileNameId,currentPage,getAks[_0xb9003b(0x20f)],0x3e8);if(inputsearch){log(profileNameId,_0xb9003b(0x220),null);break;}}const kqClearBtn=await genlogin[_0xb9003b(0x224)](profileNameId,currentPage,getAks[_0xb9003b(0x226)],0x3e8);if(!kqClearBtn)log(profileNameId,_0xb9003b(0x1c9),null,![]);else{log(profileNameId,'[timGame][ShowInputSearch]\x20Tìm\x20thấy\x20clearInputSearch');const kqClickClearBtn=await clickM(getAks['clearInputSearch']);!kqClickClearBtn?log(profileNameId,_0xb9003b(0x21b),![]):log(profileNameId,_0xb9003b(0x1b1));}const kq=await dbClickM(getAks['InputSearch']);if(!kq){log(profileNameId,_0xb9003b(0x1df),![]);throw new Error(_0xb9003b(0x23e));}log(profileNameId,_0xb9003b(0x1fd)),await delay(0x3e8);const kq2=await genlogin[_0xb9003b(0x255)](profileNameId,currentPage,getAks[_0xb9003b(0x20f)],botName);await delay(0x3e8);if(!kq2){log(profileNameId,'[timGame]Không\x20nhập\x20được\x20vào\x20inputsearch',![]);throw new Error(_0xb9003b(0x1f1));}log(profileNameId,_0xb9003b(0x1f9)+botName+_0xb9003b(0x201)),await delay(0x1388);const kq3=await genlogin['elementExistsByXPath'](profileNameId,currentPage,getAks['SearchRes']);if(!kq3){log(profileNameId,_0xb9003b(0x253),![]);throw new Error('Không\x20tìm\x20thấy\x20SearchRes');}log(profileNameId,_0xb9003b(0x267)),await delay(0x3e8);const kq4=await clickM(getAks[_0xb9003b(0x1f4)]);if(!kq4){log(profileNameId,_0xb9003b(0x21c),![]);throw new Error(_0xb9003b(0x23a));}log(profileNameId,_0xb9003b(0x26a)),await genlogin[_0xb9003b(0x242)](profileNameId,currentPage,profileNameId);if(bot['gui']==='1'){log(profileNameId,_0xb9003b(0x219)),await delay(0x3e8);const kq10=await gui();if(!kq10)throw new Error('Không\x20check\x20gui\x20được');if(kq10===_0xb9003b(0x261))return log(profileNameId,'[timGame]Gui\x20ok,\x20loop\x20lại\x20game\x20nè\x20bro'),{'status':_0xb9003b(0x261)};return await delay(0x3e8),log(profileNameId,'[timGame]Gui\x20ok'),{'status':!![],'HostName':iframeLinkHotsName};}else return await delay(0x3e8),log(profileNameId,_0xb9003b(0x24a),null,![]),{'status':!![]};}catch(error){return log(profileNameId,_0xb9003b(0x258)+error,null,![]),{'status':![]};}async function gui(){const _0x25202d=_0xb9003b;try{log(profileNameId,'[timGame][gui]Vào\x20Gui\x20mở\x20game\x20lên',null,'i'),await delay(0x3e8);const kqFirstStart=await checkFirstStart();if(kqFirstStart===_0x25202d(0x261))return log(profileNameId,_0x25202d(0x1c0)),'loop';await delay(0x3e8);const kq20=await checkStartGame();if(!kq20){log(profileNameId,'[timGame][gui]Không\x20start\x20game\x20được',![]);throw new Error(_0x25202d(0x1cc));}await delay(0x1388);const kq21=await checkLoadGame();if(!kq21){log(profileNameId,_0x25202d(0x22e),![]);throw new Error(_0x25202d(0x26f));}return await delay(0x3e8),log(profileNameId,'[timGame][gui]start\x20game\x20ok'),!![];}catch(error){return log(profileNameId,_0x25202d(0x1f8)+error,![]),null;}}async function TatGame(){const _0x540626=_0xb9003b;try{log(profileNameId,_0x540626(0x1f3)+demLoop);const kq7=await genlogin['elementExistsByXPath'](profileNameId,currentPage,getAks[_0x540626(0x239)],0x3e8);if(!kq7){await delay(0x3e8);const kq9=await genlogin[_0x540626(0x224)](profileNameId,currentPage,getAks[_0x540626(0x269)],0x3e8);if(kq9){log(profileNameId,'[timGame][TatGame]Phát\x20hiện\x20game\x20đang\x20mở\x20không\x20tắt\x20được');throw new Error('Không\x20tìm\x20thấy\x20CloseGame');}return log(profileNameId,_0x540626(0x1be)),!![];}const kq8=await clickM(getAks[_0x540626(0x239)]);!kq8&&log(profileNameId,_0x540626(0x1e6),null,![]);log(profileNameId,_0x540626(0x1d0)),await delay(0x7d0);const kq11=await closeAnyway();return!kq11&&log(profileNameId,_0x540626(0x22a),![]),!![];}catch(error){return log(profileNameId,'[timGame][TatGame][Lỗi]:\x20'+error,![]),null;}}async function closeAnyway(){const _0x165fe9=_0xb9003b;try{log(profileNameId,_0x165fe9(0x26c));const kq10=await genlogin[_0x165fe9(0x224)](profileNameId,currentPage,getAks[_0x165fe9(0x222)],0x1388);if(!kq10)return log(profileNameId,_0x165fe9(0x1d1),![]),!![];log(profileNameId,_0x165fe9(0x1d5)),await delay(0x7d0);const kq11=await clickM(getAks['ForceClosePopup']);if(!kq11)throw new Error(_0x165fe9(0x1b4));return log(profileNameId,'[timGame][closeAnyway]click\x20ForceClosePopup\x20OK'),await delay(0x7d0),!![];}catch(error){return log(profileNameId,_0x165fe9(0x1cf)+error,![]),null;}}async function launchConfirm(){const _0x294d7d=_0xb9003b;try{log(profileNameId,'[timGame][launchConfirm]check\x20launchConfirm');const kq10=await genlogin[_0x294d7d(0x224)](profileNameId,currentPage,getAks[_0x294d7d(0x1bf)],0xbb8);if(!kq10)return log(profileNameId,_0x294d7d(0x232),null,![]),null;log(profileNameId,_0x294d7d(0x203)),await delay(0x7d0);const kq11=await clickM(getAks['LaunchConfirm']);if(!kq11)return log(profileNameId,_0x294d7d(0x231),null,![]),null;return log(profileNameId,_0x294d7d(0x215)),await delay(0x7d0),!![];}catch(error){return log(profileNameId,_0x294d7d(0x1ca)+error,![]),null;}}async function checkStartGame(){const _0x146aea=_0xb9003b;try{log(profileNameId,_0x146aea(0x1a9),null,'-');const buttons=[{'xpath':bot[_0x146aea(0x248)],'name':'playtag'},{'xpath':getAks[_0x146aea(0x21f)],'name':_0x146aea(0x21f)},{'xpath':getAks[_0x146aea(0x1b7)],'name':_0x146aea(0x1b7)},{'xpath':getAks[_0x146aea(0x257)],'name':_0x146aea(0x257)},{'xpath':getAks[_0x146aea(0x1af)],'name':_0x146aea(0x1af)},{'xpath':getAks['ButtonTextLaunch'],'name':_0x146aea(0x1dd)},{'xpath':getAks[_0x146aea(0x274)],'name':'ButtonTextMining'},{'xpath':getAks['ButtonInChat'],'name':'ButtonInChat'}],kq=await genlogin[_0x146aea(0x224)](profileNameId,currentPage,getAks[_0x146aea(0x238)],0x3e8);if(!kq)log(profileNameId,_0x146aea(0x22d),null,![]);else{log(profileNameId,_0x146aea(0x230)),await delay(0x3e8);const kq1=await clickM(getAks[_0x146aea(0x238)]);!kq1?log(profileNameId,'[timGame][checkStartGame]\x20Không\x20click\x20được\x20vào\x20nút\x20start',null,![]):(log(profileNameId,_0x146aea(0x240)),await delay(0x7d0));}for(let i=0x0;i<buttons['length'];i++){const button=buttons[i];if(!button['xpath'])continue;const exists=await genlogin['elementExistsByXPath'](profileNameId,currentPage,button[_0x146aea(0x1b5)],0x7d0);if(exists){log(profileNameId,_0x146aea(0x228)+button[_0x146aea(0x23c)]+_0x146aea(0x217));const clicked=await clickM(button[_0x146aea(0x1b5)]);!clicked?log(profileNameId,_0x146aea(0x1ff)+button[_0x146aea(0x23c)],null,![]):log(profileNameId,_0x146aea(0x208)+button['name']+_0x146aea(0x1f6));await launchConfirm(),await delay(0x3e8);const kqIframe=await genlogin[_0x146aea(0x224)](profileNameId,currentPage,getAks['Iframe'],0x7d0);if(!kqIframe){log(profileNameId,'[timGame][checkStartGame]\x20Không\x20tìm\x20thấy\x20iframe',null,![]);continue;}return await delay(0x7d0),!![];}}log(profileNameId,_0x146aea(0x1e1),null,![]);throw new Error('Không\x20tìm\x20thấy\x20nút\x20mở\x20game');}catch(error){return log(profileNameId,_0x146aea(0x20c)+error[_0x146aea(0x251)],null,![]),null;}}async function checkLoadGame(){const _0x2eea4c=_0xb9003b;try{log(profileNameId,_0x2eea4c(0x209));const tags=[bot[_0x2eea4c(0x23f)],bot[_0x2eea4c(0x1e2)],bot[_0x2eea4c(0x249)],bot[_0x2eea4c(0x1e8)],bot[_0x2eea4c(0x229)]];if(parseInt(bot['newTab'])===0x1){log(profileNameId,_0x2eea4c(0x271),null,'w','-');const maxAttempts=0x5,iframeLink=await genlogin['getAttributeFromXPath'](profileNameId,currentPage,getAks['Iframe'],'src',0x3e8);await delay(0x3e8);if(!iframeLink){log(profileNameId,_0x2eea4c(0x265),null,![]);throw new Error('Không\x20tìm\x20thấy\x20iframe\x20link');}log(profileNameId,'[timGame][checkLoadGame]tìm\x20thấy\x20iframe\x20link');const kqNewTab=await genlogin[_0x2eea4c(0x1ec)](profileNameId,browser);if(!kqNewTab){log(profileNameId,_0x2eea4c(0x1c7),null,![]);throw new Error(_0x2eea4c(0x1ab));}log(profileNameId,'[timGame][checkLoadGame]\x20Mở\x20tab\x20mới\x20OK');const newPage=await genlogin[_0x2eea4c(0x1d4)](profileNameId,browser);if(!newPage){log(profileNameId,_0x2eea4c(0x25b),null,![]);throw new Error('Không\x20lấy\x20page\x20mới');}const parsedUrl=new URL(iframeLink);iframeLinkHotsName=parsedUrl[_0x2eea4c(0x25f)];const kqOpenLink=await genlogin[_0x2eea4c(0x213)](profileNameId,newPage,iframeLink);if(!kqOpenLink){log(profileNameId,_0x2eea4c(0x1eb),null,![]);throw new Error(_0x2eea4c(0x264));}log(profileNameId,'[timGame][checkLoadGame]\x20Mở\x20link\x20iframe\x20OK'),await delay(0x3e8);for(let attempt=0x1;attempt<=maxAttempts;attempt++){log(profileNameId,_0x2eea4c(0x234)+attempt);for(let i=0x0;i<tags[_0x2eea4c(0x218)];i++){const result=await genlogin[_0x2eea4c(0x224)](profileNameId,newPage,tags[i],0x7d0);if(result)return log(profileNameId,_0x2eea4c(0x1d9)+tags[i],![]),await delay(0x3e8),!![];}attempt<maxAttempts&&await new Promise(resolve=>setTimeout(resolve,0x1388));}log(profileNameId,_0x2eea4c(0x1b2)+maxAttempts+_0x2eea4c(0x1f2));throw new Error(_0x2eea4c(0x259));}else{log(profileNameId,_0x2eea4c(0x1fc),null,'w','-');const maxAttempts=0x5,subframe=await genlogin[_0x2eea4c(0x1da)](profileNameId,currentPage,getAks[_0x2eea4c(0x269)]);await delay(0x3e8);if(!subframe){log(profileNameId,_0x2eea4c(0x210),null,![]);throw new Error(_0x2eea4c(0x22b));}for(let attempt=0x1;attempt<=maxAttempts;attempt++){log(profileNameId,_0x2eea4c(0x234)+attempt);for(let i=0x0;i<tags['length'];i++){const result=await genlogin['elementExistsByXPath'](profileNameId,subframe,tags[i],0x7d0);if(result)return log(profileNameId,_0x2eea4c(0x1d9)+tags[i],![]),await genlogin[_0x2eea4c(0x1da)](profileNameId,currentPage,_0x2eea4c(0x254)),await delay(0x3e8),!![];}attempt<maxAttempts&&await new Promise(resolve=>setTimeout(resolve,0x1388));}log(profileNameId,_0x2eea4c(0x1b2)+maxAttempts+_0x2eea4c(0x1f2));throw new Error(_0x2eea4c(0x259));}}catch(error){return log(profileNameId,_0x2eea4c(0x260),null,![]),await genlogin[_0x2eea4c(0x1da)](profileNameId,currentPage,_0x2eea4c(0x1e7)),await delay(0x3e8),null;}}async function checkFirstStart(){const _0xdef62d=_0xb9003b;try{await delay(0x3e8);const FirstStartBtn=await genlogin[_0xdef62d(0x224)](profileNameId,currentPage,getAks['FirstStartBtn'],0xbb8);if(!FirstStartBtn)return null;log(profileNameId,_0xdef62d(0x24c),null,!![],'-'),log(profileNameId,_0xdef62d(0x21a)),await delay(0x3e8);const kq0=await ShowInputSearch();if(!kq0)return log(profileNameId,_0xdef62d(0x1e0),null,![]),null;await delay(0x3e8);const checkInputSearch=await genlogin[_0xdef62d(0x224)](profileNameId,currentPage,getAks[_0xdef62d(0x20f)],0x7d0);if(!checkInputSearch)return log(profileNameId,'['+botName+_0xdef62d(0x204),null,![]),null;log(profileNameId,'['+botName+'][checkFirstStart]\x20Tìm\x20thấy\x20InputSearch');const clicked=await dbClickM(getAks[_0xdef62d(0x20f)]);if(!clicked)return log(profileNameId,'['+botName+_0xdef62d(0x1dc),null,![]),null;log(profileNameId,'['+botName+'][checkFirstStart]Click\x20InputSearch\x20OK'),await delay(0x3e8);const typeText=await genlogin[_0xdef62d(0x255)](profileNameId,currentPage,getAks[_0xdef62d(0x20f)],'Saved\x20Messages',0x1,0x7d0);if(!typeText)return log(profileNameId,'['+botName+_0xdef62d(0x1ea),null,![]),null;log(profileNameId,'['+botName+_0xdef62d(0x266)),await delay(0x1388);const kqSearchRes=await genlogin[_0xdef62d(0x224)](profileNameId,currentPage,getAks['SearchRes'],0x7d0);if(!kqSearchRes)return log(profileNameId,'['+botName+_0xdef62d(0x1bb),null,![]),null;log(profileNameId,'['+botName+_0xdef62d(0x1c8));const clicked1=await clickM(getAks[_0xdef62d(0x1f4)]);if(!clicked1)return log(profileNameId,'['+botName+_0xdef62d(0x237),null,![]),null;log(profileNameId,'['+botName+_0xdef62d(0x1ce)),await delay(0x7d0);const xpathRef=_0xdef62d(0x272)+bot[_0xdef62d(0x202)]+_0xdef62d(0x227),checkLinkRef=await clickLinkRef(xpathRef);if(checkLinkRef)return log(profileNameId,'['+botName+_0xdef62d(0x233)),await reCheckClickStart(),_0xdef62d(0x261);log(profileNameId,'['+botName+'][checkFirstStart]Không\x20Tìm\x20thấy\x20link\x20ref',null,![]),await delay(0x7d0);const checkChatInput=await genlogin[_0xdef62d(0x224)](profileNameId,currentPage,getAks[_0xdef62d(0x207)],0x7d0);if(!checkChatInput)return log(profileNameId,'['+botName+'][checkFirstStart]Không\x20tìm\x20thấy\x20ChatInput',null,![]),null;log(profileNameId,'['+botName+_0xdef62d(0x1d2));const click2=await dbClickM(getAks[_0xdef62d(0x207)]);!click2?log(profileNameId,'['+botName+_0xdef62d(0x1e4),null,![]):log(profileNameId,'['+botName+_0xdef62d(0x1ae));await delay(0x7d0);const typeText1=await genlogin[_0xdef62d(0x255)](profileNameId,currentPage,getAks[_0xdef62d(0x207)],bot[_0xdef62d(0x202)],0x1,0x1388);await delay(0x3e8);!typeText1?log(profileNameId,'['+botName+_0xdef62d(0x216),null,![]):log(profileNameId,'['+botName+_0xdef62d(0x1d3)+bot['ref']);await delay(0x7d0);const checkBtnSend=await clickM(getAks[_0xdef62d(0x1d7)]);!checkBtnSend?log(profileNameId,'['+botName+'][checkFirstStart]Không\x20click\x20được\x20vào\x20BtnSend',null,![]):log(profileNameId,'['+botName+_0xdef62d(0x262));await delay(0x7d0);const checkLinkRef1=await clickLinkRef(xpathRef);if(checkLinkRef1)return log(profileNameId,'['+botName+_0xdef62d(0x20b)),await reCheckClickStart(),_0xdef62d(0x261);return log(profileNameId,'['+botName+'][checkFirstStart]Không\x20Click\x20được\x20LinkRef'),null;}catch(error){return log(profileNameId,'['+botName+_0xdef62d(0x1c5)+error,null,![]),null;}}async function clickLinkRef(xpathRef){const _0x4fa2d0=_0xb9003b;try{await delay(0x3e8);const checkLinkRef=await genlogin[_0x4fa2d0(0x224)](profileNameId,currentPage,xpathRef,0x2710);if(checkLinkRef){log(profileNameId,'['+botName+_0x4fa2d0(0x244));const clickLinkRef=await clickM(xpathRef,!![]);!clickLinkRef?log(profileNameId,'['+botName+_0x4fa2d0(0x20e),null,![]):log(profileNameId,'['+botName+'][clickLinkRef]\x20Click\x20LinkRef\x20OK');await delay(0x7d0);const checklaunchConfirm=await launchConfirm();!checklaunchConfirm?log(profileNameId,'['+botName+_0x4fa2d0(0x26d),null,![]):log(profileNameId,'['+botName+_0x4fa2d0(0x22c));const kqCkIframe=await genlogin[_0x4fa2d0(0x224)](profileNameId,currentPage,getAks[_0x4fa2d0(0x269)],0x7d0);if(!kqCkIframe){log(profileNameId,'['+botName+_0x4fa2d0(0x20d),null,![]);const kqCkStartbtn=await genlogin[_0x4fa2d0(0x224)](profileNameId,currentPage,getAks[_0x4fa2d0(0x238)],0x7d0);if(!kqCkStartbtn)return log(profileNameId,'['+botName+_0x4fa2d0(0x245),null,![]),!![];else{log(profileNameId,'['+botName+_0x4fa2d0(0x23b));const clickStart=await clickM(getAks[_0x4fa2d0(0x238)]);!clickStart&&log(profileNameId,'['+botName+_0x4fa2d0(0x1ee),null,![]),log(profileNameId,'['+botName+_0x4fa2d0(0x1b6));}}else{log(profileNameId,'['+botName+_0x4fa2d0(0x1fe));const kqCkCloseIframe=await closeIframe();!kqCkCloseIframe?log(profileNameId,'['+botName+_0x4fa2d0(0x211),null,![]):log(profileNameId,'['+botName+_0x4fa2d0(0x268));}return!![];}else return log(profileNameId,'['+botName+_0x4fa2d0(0x212)+xpathRef,null,![]),null;}catch(error){return log(profileNameId,'['+botName+_0x4fa2d0(0x1b3)+error,null,![]),null;}}async function reCheckClickStart(){const _0x2c739a=_0xb9003b;try{await delay(0x3e8),await ShowInputSearch();const checkInputSearch=await genlogin[_0x2c739a(0x224)](profileNameId,currentPage,getAks[_0x2c739a(0x20f)],0x7d0);if(!checkInputSearch)return log(profileNameId,'['+botName+_0x2c739a(0x243),null,![]),null;log(profileNameId,'['+botName+_0x2c739a(0x223));const clicked=await dbClickM(getAks['InputSearch']);if(!clicked)return log(profileNameId,'['+botName+_0x2c739a(0x1ba),null,![]),null;log(profileNameId,'['+botName+_0x2c739a(0x1e5)),await delay(0x3e8);const typeText=await genlogin[_0x2c739a(0x255)](profileNameId,currentPage,getAks[_0x2c739a(0x20f)],botName,0x1,0x7d0);if(!typeText)return log(profileNameId,'['+botName+_0x2c739a(0x256),null,![]),null;log(profileNameId,'['+botName+_0x2c739a(0x21e)),await delay(0x1388);const kqSearchRes=await genlogin[_0x2c739a(0x224)](profileNameId,currentPage,getAks[_0x2c739a(0x1f4)],0x7d0);if(!kqSearchRes)return log(profileNameId,'['+botName+_0x2c739a(0x21d),null,![]),null;log(profileNameId,'['+botName+_0x2c739a(0x1c1));const clicked1=await clickM(getAks['SearchRes']);if(!clicked1)return log(profileNameId,'['+botName+_0x2c739a(0x25c),null,![]),null;log(profileNameId,'['+botName+_0x2c739a(0x200)),await delay(0x3e8);const FirstStartBtn1=await genlogin['elementExistsByXPath'](profileNameId,currentPage,getAks[_0x2c739a(0x238)],0xbb8);if(!FirstStartBtn1)return null;log(profileNameId,'['+botName+'][reCheckClickStart]\x20vẫn\x20thấy\x20nút\x20start'),await delay(0x3e8);const clickStart=await clickM(getAks[_0x2c739a(0x238)]);if(!clickStart)return log(profileNameId,'['+botName+_0x2c739a(0x26b),null,![]),null;return log(profileNameId,'['+botName+_0x2c739a(0x22f)),await delay(0x7d0),!![];}catch(error){return log(profileNameId,'['+botName+'][reCheckClickStart][Lỗi]:\x20'+error,null,![]),null;}}async function ShowInputSearch(){const _0x2ad8a2=_0xb9003b;try{log(profileNameId,_0x2ad8a2(0x236),null,!![],'-'),await delay(0x1f4);let demLoop=0x0;const maxDemLoop=0xa;while(demLoop<maxDemLoop){demLoop++;const kqCkSideBarRightClose=await genlogin[_0x2ad8a2(0x224)](profileNameId,currentPage,getAks[_0x2ad8a2(0x1db)],0x3e8);if(!kqCkSideBarRightClose)log(profileNameId,_0x2ad8a2(0x221),null,![]);else{log(profileNameId,_0x2ad8a2(0x1c4));const kqClickSideBarRightClose=await clickM(getAks['sideBarRightClose']);if(!kqClickSideBarRightClose){log(profileNameId,_0x2ad8a2(0x1f5),![]);continue;}log(profileNameId,'[timGame][ShowInputSearch]\x20click\x20nút\x20sideBarRightClose\x20ok');continue;}const kqCkBackArrow=await genlogin[_0x2ad8a2(0x224)](profileNameId,currentPage,getAks[_0x2ad8a2(0x1d8)],0x3e8);if(!kqCkBackArrow)log(profileNameId,_0x2ad8a2(0x1b0),null,![]);else{log(profileNameId,_0x2ad8a2(0x276));const kqClickBackArrow=await clickM(getAks['BackArrow']);if(!kqClickBackArrow){log(profileNameId,'[timGame][ShowInputSearch]\x20Không\x20click\x20được\x20vào\x20nút\x20BackArrow',null,![]);continue;}log(profileNameId,'[timGame][ShowInputSearch]\x20click\x20nút\x20BackArrow\x20ok');continue;}const inputsearch=await genlogin['elementExistsByXPath'](profileNameId,currentPage,getAks[_0x2ad8a2(0x20f)],0x3e8);if(inputsearch){log(profileNameId,_0x2ad8a2(0x270),null);break;}}const kqClearBtn=await genlogin[_0x2ad8a2(0x224)](profileNameId,currentPage,getAks[_0x2ad8a2(0x226)],0x3e8);if(!kqClearBtn)log(profileNameId,'[timGame][ShowInputSearch]Không\x20tìm\x20thấy\x20clearInputSearch',null,![]);else{log(profileNameId,_0x2ad8a2(0x1e3));const kqClickClearBtn=await clickM(getAks[_0x2ad8a2(0x226)]);!kqClickClearBtn?log(profileNameId,_0x2ad8a2(0x21b),![]):log(profileNameId,_0x2ad8a2(0x1b1));}const kq=await dbClickM(getAks['InputSearch']);return!kq?log(profileNameId,_0x2ad8a2(0x214),![]):log(profileNameId,'[timGame][ShowInputSearch]\x20click\x20inputsearch\x20ok'),!![];}catch(error){return log(profileNameId,'['+botName+_0x2ad8a2(0x246)+error,null,![]),null;}}async function closeIframe(){const _0x2c0af9=_0xb9003b;try{log(profileNameId,_0x2c0af9(0x24f),null,'i');let demLoop=0x0;const maxDemLoop=0xa;while(demLoop<maxDemLoop){demLoop++;const kq5=await genlogin['elementExistsByXPath'](profileNameId,currentPage,getAks[_0x2c0af9(0x269)],0x3e8);if(kq5){log(profileNameId,_0x2c0af9(0x1c2),null,'w'),await delay(0x3e8);const kq6=await TatGame();!kq6?log(profileNameId,_0x2c0af9(0x25a),null,![]):log(profileNameId,_0x2c0af9(0x250));}else break;}return null;}catch(error){return log(profileNameId,_0x2c0af9(0x1bd)+error,null,![]),null;}}async function click(xpath,tagClick=![]){const _0x30dee5=_0xb9003b;try{await delay(0x3e8);const clicked=await genlogin[_0x30dee5(0x1ac)](profileNameId,subframe,{'xpath':xpath,'mainframe':currentPage,'browser':browser,'dbclick':![],'tagClick':tagClick},0x3e8);await delay(0x3e8);if(!clicked)return log(profileNameId,'['+botName+'][click]Không\x20click\x20được\x20vào\x20'+xpath,null,![]),null;return log(profileNameId,'['+botName+_0x30dee5(0x1cb)+xpath+_0x30dee5(0x1f6)),clicked;}catch(error){return log(profileNameId,'['+botName+_0x30dee5(0x1ad)+error,null,![]),null;}}async function dbClick(xpath,tagClick=!![]){const _0xf59ac9=_0xb9003b;try{await delay(0x3e8);const clicked=await genlogin[_0xf59ac9(0x1ac)](profileNameId,subframe,{'xpath':xpath,'mainframe':currentPage,'browser':browser,'dbclick':!![],'tagClick':tagClick},0x3e8);await delay(0x3e8);if(!clicked)return log(profileNameId,'['+botName+_0xf59ac9(0x1b8)+xpath,null,![]),null;return log(profileNameId,'['+botName+_0xf59ac9(0x1aa)+xpath+_0xf59ac9(0x1f6)),clicked;}catch(error){return log(profileNameId,'['+botName+_0xf59ac9(0x1de)+error,null,![]),null;}}async function clickM(xpath,tagClick=![]){const _0x2b0d13=_0xb9003b;try{const clicked=await genlogin[_0x2b0d13(0x1ac)](profileNameId,currentPage,{'xpath':xpath,'mainframe':currentPage,'browser':browser,'dbclick':![],'tagClick':tagClick},0x1388);await delay(0x1f4);if(!clicked)return log(profileNameId,'['+botName+_0x2b0d13(0x263)+xpath,null,![]),null;return log(profileNameId,'['+botName+_0x2b0d13(0x1ed)+xpath+_0x2b0d13(0x1f6)),clicked;}catch(error){return log(profileNameId,'['+botName+'][clickM][Lỗi]:\x20'+error,null,![]),null;}}async function dbClickM(xpath,tagClick=![]){const _0x563353=_0xb9003b;try{const clicked=await genlogin[_0x563353(0x1ac)](profileNameId,currentPage,{'xpath':xpath,'mainframe':currentPage,'browser':browser,'dbclick':!![],'tagClick':tagClick},0x1388);await delay(0x1f4);if(!clicked)return log(profileNameId,'['+botName+_0x563353(0x252)+xpath,null,![]),null;return log(profileNameId,'['+botName+'][dbClickM]Click\x20'+xpath+_0x563353(0x1f6)),clicked;}catch(error){return log(profileNameId,'['+botName+_0x563353(0x1b9)+error,null,![]),null;}}async function clickP(x,y){const _0x5e25f1=_0xb9003b;try{await delay(0x3e8);const clicked=await genlogin[_0x5e25f1(0x1ac)](profileNameId,currentPage,{'x':x,'y':y,'mainframe':currentPage,'browser':browser},0x3e8);await delay(0x3e8);if(!clicked){log(profileNameId,'['+botName+_0x5e25f1(0x1cd)+x+':'+y,![]);throw new Error(_0x5e25f1(0x205)+xpath);}return log(profileNameId,'['+botName+_0x5e25f1(0x1cb)+x+':'+y+_0x5e25f1(0x1f6)),clicked;}catch(error){return log(profileNameId,'['+botName+_0x5e25f1(0x1ad)+error,![]),null;}}async function delay(ms){return new Promise(async(resolve,reject)=>{setTimeout(resolve,ms);});}async function cTimeout(){const _0x1b1fdc=_0xb9003b;if(Atomics[_0x1b1fdc(0x24e)](tasksData,taskIndex)===0x1)return!![];return![];}};